# 日程属性使用指南

## 📋 日程类型系统

### 1️⃣ 优先级 (Priority)

| 等级 | 名称 | 用途 | 示例 |
|------|------|------|------|
| 1 | 每日日程 | 普通一次性日程 | "明天下午开会" |
| 2 | 工作日/休息日模板 | 自动应用到对应日期 | "每个工作日早上跑步" |
| 3 | 大小周模板 | 适应大小周工作制 | "大周周六加班" |
| 4 | 特殊日程 | 最高优先级 | "国庆假期" |

### 2️⃣ 模板类型 (Template Type)

| 类型 | 说明 | 自动应用规则 | 示例对话 |
|------|------|--------------|----------|
| **none** | 普通日程 | 不自动应用 | "明天8点开会" |
| **workday** | 工作日模板 | 自动应用到所有工作日 | "每个工作日早上8点晨会" |
| **restday** | 休息日模板 | 自动应用到所有休息日 | "周末睡到自然醒" |
| **big_week** | 大周模板 | 应用到大小周中的大周 | "大周周六加班" |
| **small_week** | 小周模板 | 应用到大小周中的小周 | "小周周六休息" |

### 3️⃣ 重复周期 (Recurrence)

| 周期 | 说明 | 示例对话 |
|------|------|----------|
| **none** | 不重复 | "明天看电影" |
| **daily** | 每天 | "每天晚上10点记账" |
| **weekly** | 每周 | "每周一开周会" |
| **monthly** | 每月 | "每月1号发工资" |

## 💬 对话示例

### 场景 1：创建工作日模板

```
你: "每个工作日早上8点晨跑"

AI: 好的！我建议创建一个工作日模板日程：
    
    📅 晨跑
    ⏰ 每个工作日 08:00
    
    这个日程会自动应用到所有工作日（包括未来的工作日）
    
    [审批卡片弹出]
    ┌────────────────────────────┐
    │ ✅ 创建工作日模板日程      │
    │                            │
    │ 晨跑                       │
    │ 🕐 工作日 08:00            │
    │                            │
    │ 🏷️ 工作日/休息日模板      │
    │ 🏷️ 工作日模板             │
    │                            │
    │     [拒绝]  [批准]         │
    └────────────────────────────┘
```

**GPT 会自动设置：**
- `priority`: 2 (工作日/休息日模板)
- `template_type`: "workday"
- `recurrence`: "none"

### 场景 2：创建周末固定日程

```
你: "每个周末上午10点健身"

AI: 明白了！我建议创建一个休息日模板：
    
    🏋️ 健身
    ⏰ 每个周末 10:00
    
    这会自动应用到你的所有休息日
    
    [审批卡片]
    ┌────────────────────────────┐
    │ ✅ 创建休息日模板日程      │
    │                            │
    │ 健身                       │
    │ 🕐 休息日 10:00            │
    │                            │
    │ 🏷️ 工作日/休息日模板      │
    │ 🏷️ 休息日模板             │
    │                            │
    │     [拒绝]  [批准]         │
    └────────────────────────────┘
```

**GPT 会自动设置：**
- `priority`: 2
- `template_type`: "restday"
- `recurrence`: "none"

### 场景 3：创建每天重复的日程

```
你: "每天晚上10点记账"

AI: 好的！我帮你创建一个每天重复的日程：
    
    💰 记账
    ⏰ 每天 22:00
    
    [审批卡片]
    ┌────────────────────────────┐
    │ ✅ 创建每日重复日程        │
    │                            │
    │ 记账                       │
    │ 🕐 每天 22:00              │
    │                            │
    │ 🏷️ 每日日程               │
    │ 🏷️ 每天重复               │
    │                            │
    │     [拒绝]  [批准]         │
    └────────────────────────────┘
```

**GPT 会自动设置：**
- `priority`: 1 (每日日程)
- `template_type`: "none"
- `recurrence`: "daily"

### 场景 4：大小周特殊处理

```
你: "大周周六上午加班，小周周六休息"

AI: 明白了！你是大小周工作制，我帮你分别创建：
    
    1️⃣ 大周周六加班
    2️⃣ 小周周六休息
    
    [审批卡片 1]
    ┌────────────────────────────┐
    │ ✅ 创建大周模板日程        │
    │                            │
    │ 加班                       │
    │ 🕐 大周周六 09:00          │
    │                            │
    │ 🏷️ 大小周模板             │
    │ 🏷️ 大周模板               │
    │                            │
    │     [拒绝]  [批准]         │
    └────────────────────────────┘
    
    [审批卡片 2]
    ┌────────────────────────────┐
    │ ✅ 创建小周模板日程        │
    │                            │
    │ 休息                       │
    │ 🕐 小周周六                │
    │                            │
    │ 🏷️ 大小周模板             │
    │ 🏷️ 小周模板               │
    │                            │
    │     [拒绝]  [批准]         │
    └────────────────────────────┘
```

### 场景 5：普通一次性日程

```
你: "明天下午3点开会"

AI: 好的！我帮你创建一个日程：
    
    📝 开会
    ⏰ 2025-11-25 15:00
    
    [审批卡片]
    ┌────────────────────────────┐
    │ ✅ 创建日程                │
    │                            │
    │ 开会                       │
    │ 🕐 2025-11-25 15:00        │
    │                            │
    │ 🏷️ 每日日程               │
    │ 🏷️ 普通日程               │
    │                            │
    │     [拒绝]  [批准]         │
    └────────────────────────────┘
```

## 🎯 审批卡片标签颜色

审批卡片上的标签用不同颜色区分：

- 🔵 **蓝色**：优先级标签 (每日日程/工作日休息日模板/大小周模板/特殊日程)
- 🟣 **紫色**：模板类型标签 (工作日模板/休息日模板/大周模板/小周模板)
- 🟠 **橙色**：重复周期标签 (每天重复/每周重复/每月重复)

## 🔄 优先级覆盖规则

当同一天有多个日程时，按优先级决定：

```
特殊日程 (4) 
    ↓ 覆盖
大小周模板 (3)
    ↓ 覆盖
工作日/休息日模板 (2)
    ↓ 覆盖
每日日程 (1)
```

**示例：**
```
假设今天是工作日：
- 工作日模板：早上8点晨会 (priority=2)
- 普通日程：早上8点看医生 (priority=1)

→ 晨会会被显示，因为优先级更高
→ 但如果创建 priority=4 的特殊日程，会覆盖所有
```

## 📱 实际使用流程

1. **你随意对话**：不需要记住命令格式
   ```
   "我想每天早上跑步"
   ```

2. **AI 理解并建议**：自动判断日程类型
   ```
   AI: "好的！我建议创建每天重复的晨跑日程..."
   ```

3. **审批卡片弹出**：显示完整属性
   ```
   [卡片显示：每日日程 + 每天重复]
   ```

4. **你点击批准**：立即创建
   ```
   ✅ 已执行：创建每天重复的晨跑日程
   ```

## 🌟 智能特性

GPT 会根据你的话自动判断：

| 你说的话 | AI 理解的属性 |
|----------|---------------|
| "每个工作日..." | `template_type=workday, priority=2` |
| "周末..." | `template_type=restday, priority=2` |
| "每天..." | `recurrence=daily, priority=1` |
| "明天..." | `template_type=none, priority=1` |
| "大周..." | `template_type=big_week, priority=3` |
| "节假日..." | `priority=4` |

现在你可以更自然地管理日程了！🎉
