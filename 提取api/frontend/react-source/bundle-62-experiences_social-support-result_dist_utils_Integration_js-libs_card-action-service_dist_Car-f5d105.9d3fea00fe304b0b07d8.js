"use strict";(self.homePageWebpackChunks=self.homePageWebpackChunks||[]).push([["experiences_social-support-result_dist_utils_Integration_js-libs_card-action-service_dist_Car-f5d105"],{2553:function(e,t,i){i.d(t,{AT:function(){return o},hv:function(){return l},jf:function(){return d}});var a=i(16091),r=i(17720),n=i(69089);const s=Symbol("RubyCardMapSegment"),o=(0,a.G)({getInstance:()=>r.vv.get(s,()=>new Map([["Weather",n.s.WeatherCard],["Weather_Nowcast",n.s.NowcastWeatherCard],["Weather_TeaserRain",n.s.RainTodayWeatherCard],["Sports",n.s.SportsCard],["Finance",n.s.FinanceCard],["CasualGame",n.s.CasualGamesCard],["Shopping",n.s.ShoppingCard],["DailyBrief",n.s.DailyBriefCard],["DailyMoment",n.s.cegrowthCard]]))}),c=Symbol("RubyActionBasedCardMapSegment"),d=(0,a.G)({getInstance:()=>r.vv.get(c,()=>new Map([["News_CreatorSpotlight",{definitionName:"News_CreatorSpotlight",targetType:"ContentGroup"}],["News_BreakingNews",{definitionName:"News_BreakingNews",targetType:"Notification"}],["News_ForYouNews",{definitionName:"News_ForYouNews",targetType:"Notification"}],["News_SaveForLater",{definitionName:"News_SaveForLater",targetType:"ContentGroup"}],["Weather_SevereWeather",{definitionName:"Weather_SevereWeather",targetType:"Notification"}],["News_CatchUpStack",{definitionName:"News_CatchUpStack",targetType:"ContentGroup"}],["News_TopStories",{definitionName:"News_TopStories",targetType:"ContentGroup"}],["News_TrendingNow",{definitionName:"News_TrendingNow",targetType:"ContentGroup"}],["News_DailyWonder",{definitionName:"News_DailyWonder",targetType:"ContentGroup"}],["News_WatchGoldShorts",{definitionName:"News_WatchGoldShorts",targetType:"ContentGroup"}]]))}),l=Object.freeze([{telemetryName:"Weather",widgetName:"Weather",id:"weather",isGated:!1,infoCards:[{cardName:"Forecast",telemetryName:"Forecast",isEnabled:!0,id:"forecast",isGated:!1,cardTypes:["Weather"],parentId:"weather"},{cardName:"Severe weather alerts",telemetryName:"SevereWeather",isEnabled:!0,id:"severe_weather",isGated:!1,cardTypes:["Weather_SevereWeather"],parentId:"weather"},{cardName:"Nowcast",telemetryName:"NowcastWeather",isEnabled:!0,id:"nowcast",isGated:!1,cardTypes:["Weather_Nowcast"],parentId:"weather"},{cardName:"Rain today",telemetryName:"RainToday",isEnabled:!0,id:"rain_today",isGated:!1,cardTypes:["Weather_TeaserRain"],parentId:"weather"}]},{telemetryName:"Moments",widgetName:"Moments in time",id:"moments",isGated:!1,infoCards:[{cardName:"Today's moment",telemetryName:"TodaysMoment",isEnabled:!0,id:"todays_moment",isGated:!1,cardTypes:["DailyMoment"],parentId:"moments"}]},{widgetName:"Finance",telemetryName:"Finance",id:"finance",isGated:!1,infoCards:[{cardName:"Market updates",telemetryName:"MarketUpdates",isEnabled:!0,id:"market_updates",isGated:!1,cardTypes:["Finance"],parentId:"finance"},{cardName:"Price alert",telemetryName:"PriceAlert",isEnabled:!0,id:"price_alert",isGated:!0,cardTypes:["Finance_PriceMovement"],parentId:"finance"}]},{widgetName:"Shopping",telemetryName:"Shopping",id:"shopping",isGated:!1,infoCards:[{cardName:"Price drop",telemetryName:"PriceDrop",isEnabled:!0,id:"price_drop",isGated:!1,cardTypes:["Shopping"],parentId:"shopping"}]},{widgetName:"Games",telemetryName:"Games",id:"games",isGated:!1,infoCards:[{cardName:"Games to play",telemetryName:"GamesToPlay",isEnabled:!0,id:"games_to_play",isGated:!1,cardTypes:["CasualGame"],parentId:"games"}]},{widgetName:"Sports",telemetryName:"Sports",id:"sports",isGated:!1,infoCards:[{cardName:"Upcoming events",telemetryName:"UpcomingEvents",isEnabled:!0,id:"upcoming_events",isGated:!1,cardTypes:["Sports"],parentId:"sports"},{cardName:"Score updates",telemetryName:"ScoreUpdates",isEnabled:!0,id:"score_updates",isGated:!0,cardTypes:["Sports_ScoreUpdates"],parentId:"sports"}]},{widgetName:"Picks for you",telemetryName:"Picks",id:"picks",isGated:!1,infoCards:[{cardName:"Daily wonder",telemetryName:"DailyWonder",isEnabled:!0,id:"daily_wonder",isGated:!1,cardTypes:["News_DailyWonder"],parentId:"picks"}]},{widgetName:"News",telemetryName:"News",id:"news",isGated:!1,infoCards:[{cardName:"Copilot daily",telemetryName:"CopilotDaily",isEnabled:!0,id:"copilot_daily",isGated:!0,cardTypes:["News_CopilotDaily"],parentId:"news"},{cardName:"Breaking news",telemetryName:"BreakingNews",isEnabled:!0,id:"breaking_news",isGated:!1,cardTypes:["News_BreakingNews"],parentId:"news"},{cardName:"Save for later",telemetryName:"SaveForLater",isEnabled:!0,id:"save_for_later",isGated:!1,cardTypes:["News_SaveForLater"],parentId:"news"},{cardName:"For you",telemetryName:"ForYou",isEnabled:!0,id:"for_you",isGated:!1,cardTypes:["News_ForYouNews"],parentId:"news"},{cardName:"Catch-up news",telemetryName:"CatchUpNews",isEnabled:!0,id:"catch_up_news",isGated:!1,cardTypes:["News_CatchUpStack"],parentId:"news"},{cardName:"Top stories",telemetryName:"TopStories",isEnabled:!0,id:"top_stories",isGated:!1,cardTypes:["News_TopStories"],parentId:"news"},{cardName:"Trending now",telemetryName:"TrendingNow",isEnabled:!0,id:"trending_now",isGated:!1,cardTypes:["News_TrendingNow"],parentId:"news"}]},{widgetName:"Entertainment",telemetryName:"Entertainment",id:"entertainment",isGated:!1,infoCards:[{cardName:"Creator spotlight",telemetryName:"CreatorSpotlight",isEnabled:!0,id:"creator_spotlight",isGated:!1,cardTypes:["News_CreatorSpotlight"],parentId:"entertainment"},{cardName:"Entertainment Break",telemetryName:"News_WatchGoldShorts",isEnabled:!0,id:"watch_goldshorts",isGated:!1,cardTypes:["News_WatchGoldShorts"],parentId:"entertainment"}]}])},13302:function(e,t,i){i.d(t,{_:function(){return h}});var a=i(17720),r=i(17254),n=i(48608),s=i(31653),o=i(8353),c=i(86948),d=i(57759),l=i(19993),u=i(44205);async function h(e){e.telemetry||(e.telemetry={});const t=(0,c.NP)();let i=(0,o.F6)(),h=(0,o.I6)();const p=(0,o.DP)();if(!i){const e=await async function(){var e;const t="OcvFeedbackAuth";if(a.vv.has(t))return a.vv.get(t);const i=null===(e=(0,n._W)())||void 0===e?void 0:e.access_token;return i?await(0,d.w)(async()=>{const e=new URL(`https://api.msn.${r.T3.IsChinaCompliance?"cn":"com"}/auth/token/v1/validation/usertoken`);l.WR.getCommonParams2("Peregrine").forEach(t=>e.searchParams.set(t.key,t.value));const n=await l.WR.getBaseRequestData("POST");n.headers["Content-Type"]="application/json",n.body=JSON.stringify({accessToken:i});const s=await fetch(e.href,n),o=await s.json(),c=null==o?void 0:o.claims;return c&&a.vv.set(t,c),c},"authTokenValidation"):void 0}();i=null==e?void 0:e.puid,h=null==e?void 0:e.tenantId}switch(t){case"MSA":e.complianceChecks={authenticationType:"MSA",ageGroup:u.P2[p]},e.telemetry.loggableUserId="p:"+i,e.telemetry.tenantId=s.nt;break;case"AAD":e.complianceChecks={authenticationType:"AAD",ageGroup:u.P2[p]},e.telemetry.loggableUserId="ap:"+i,e.telemetry.tenantId=h;break;default:e.complianceChecks={authenticationType:"Unauthenticated",ageGroup:u.P2[u.P2.Undefined]},e.telemetry.loggableUserId="",e.telemetry.tenantId="00000000-0000-0000-0000-000000000000"}}},34773:function(e,t,i){var a;i.d(t,{C:function(){return a}}),function(e){e.Block="Block",e.Unblock="Unblock",e.Save="Save",e.Unsave="Unsave",e.Mute="Mute",e.MuteWebVideo="MuteWebVideo",e.Follow="Follow",e.Unfollow="Unfollow",e.InterestFailure="InterestFailure",e.ShowMore="ShowMore",e.ShowFewer="ShowFewer",e.Hide="Hide",e.DisableNotification="DisableNotification",e.EnableNotification="EnableNotification",e.RecommendedInterestsFailure="RecommendedInterestsFailure",e.Refresh="Refresh",e.Pin="Pin",e.Unpin="Unpin",e.HideTopic="HideTopic",e.UnhideTopic="UnhideTopic",e.HideSource="HideSource",e.UnhideSource="UnhideSource",e.WindowsInformation="WindowsInformation",e.Error="Error",e.Default="Default",e.ConnectionError="ConnectionError",e.MuteError="MuteError",e.Fre="Fre",e.TuneYourFeed="TuneYourFeed",e.Report="ReportContent"}(a||(a={}))},44205:function(e,t,i){var a,r,n,s;i.d(t,{G4:function(){return a},Ij:function(){return s},P2:function(){return n},vO:function(){return o}}),function(e){e.Ocv="Ocv",e.Ods="Ods"}(a||(a={})),function(e){e.NotConfigured="Not Configured",e.Enabled="Enabled",e.Disabled="Disabled"}(r||(r={})),function(e){e[e.Undefined=0]="Undefined",e[e.MinorWithoutParentalConsent=1]="MinorWithoutParentalConsent",e[e.MinorWithParentalConsent=2]="MinorWithParentalConsent",e[e.Adult=3]="Adult",e[e.NotAdult=4]="NotAdult",e[e.MinorNoParentalConsentRequired=5]="MinorNoParentalConsentRequired"}(n||(n={})),function(e){e[e.feedbackDefault=2224]="feedbackDefault",e[e.windowsFeed=2475]="windowsFeed",e[e.edgeChromium=2231]="edgeChromium"}(s||(s={}));class o{constructor(){this.manifestType="Sas",this.appId=s.feedbackDefault,this.source="Client",this.type="Idea"}}},61226:function(e,t,i){i.d(t,{Pi:function(){return L},J6:function(){return j}});var a=i(68154),r=i(28006),n=i(65022),s=i(93468),o=i(17254),c=i(12870),d=i(2429),l=i(36090),u=i(98216),h=i(11372),p=i(74326),w=i(19993),m=i(57759),y=i(50677),v=i(56408),f=i(83117),g=i(34773),S=i(29252),C=i(44205),b=i(13302),_=i(10160),N=i(77246),T=i(29231);const I="data-view-context",k="data-widget",P="widget-visible";class A{static getInstance(e){const t=this._instance||(this._instance=new this);return t.observeWidgetVisibile(),t}static removeInstance(){this._instance&&(this._instance.observer.disconnect(),this._instance.observer=void 0,this._instance.widgetDom=void 0,this._instance.widgetDataDom=void 0,this._instance=void 0)}getViewContext(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.getWidgetDom(),this.getWidgetContextData(),this.viewContext}getWidgetAttributes(){return(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.getWidgetDom(),this.getWidgetData(),this.widgetAttributes}constructor(){this.getWidgetContextData()}getWidgetDom(){const e=this.getWidgetByClassName(_.JV);e&&(this.widgetDom=e);const t=this.getWidgetByClassName(_.AF);return t&&(this.widgetDataDom=t),this.widgetDom}getWidgetByClassName(e){if(!e)return;const t=(0,N.S)()&&document.getElementsByClassName(e);if(t&&t.length>0){return t[0]}}getWidgetContextData(){var e,t;const i=(null===(e=this.widgetDom)||void 0===e?void 0:e.getAttribute(I))??(null===(t=this.widgetDataDom)||void 0===t?void 0:t.getAttribute(I));if(!i){var a;this.getWidgetData();const e=null===(a=this.widgetAttributes)||void 0===a?void 0:a.pcsAdditionalQsp;if(e){const t=new URLSearchParams(e),i=t.get("id"),a=t.get("scenario");this.viewContext={quoteId:i,scenario:a}}return}try{const e=JSON.parse(i);this.viewContext={...this.viewContext,quoteId:e.QuoteId||e.quoteid,duration:e.Duration||e.duration,scenario:e.Scenario||e.scenario,isEarningsEnabled:e.isEarningsEnabled}}catch(e){return}}getWidgetData(){var e,t;const i=(null===(e=this.widgetDom)||void 0===e?void 0:e.getAttribute(k))??(null===(t=this.widgetDataDom)||void 0===t?void 0:t.getAttribute(k));if(i)try{const e=JSON.parse(i);this.widgetAttributes={...e}}catch(e){return}}observeWidgetVisibile(){this.widgetDom&&(this.observer&&this.observer.disconnect(),this.observer=new MutationObserver((e,t)=>{const i=this.widgetDom.getAttribute(P);i&&/^\s*(true|1)\s*$/i.test(i.toLowerCase())&&u.YT.scheduleContentViewEvent(T.ym.Load)}),this.observer.observe(this.widgetDom,{attributeFilter:[P]}))}}var F=i(17720),M=i(6727),E=i(63456),G=i(2462),$=i(86948),O=i(35849),R=i(48622),U=i(64747),W=i(30216),D=i(2553);const x="https://petrol.office.microsoft.com/v1/feedback";class L{static get publisherFollowStatusListenerId(){return F.vv.get("__CardActionServiceClientPublisherFollowStatusListenerIdKey__",()=>1)}static set publisherFollowStatusListenerId(e){F.vv.set("__CardActionServiceClientPublisherFollowStatusListenerIdKey__",e)}static get showMoreFewerStatusListenerId(){return F.vv.get("__CardActionServiceClientShowMoreFewerStatusListenerIdKey__",()=>1)}static set showMoreFewerStatusListenerId(e){F.vv.set("__CardActionServiceClientShowMoreFewerStatusListenerIdKey__",e)}static get publisherFollowStatus(){return F.vv.get("__CardActionServiceClientPublisherFollowStatusKey__",()=>({}))}static set publisherFollowStatus(e){F.vv.set("__CardActionServiceClientPublisherFollowStatusKey__",e)}static get _publisherFollowStatusListeners(){return F.vv.get("__CardActionServiceClient_publisherFollowStatusListenersKey__",()=>new Map)}static set _publisherFollowStatusListeners(e){F.vv.set("__CardActionServiceClient_publisherFollowStatusListenersKey__",e)}static get _showMoreFewerStatusListeners(){return F.vv.get("__CardActionServiceClient_showMoreFewerStatusListenersKey__",()=>new Map)}static set _showMoreFewerStatusListeners(e){F.vv.set("__CardActionServiceClient_showMoreFewerStatusListenersKey__",e)}static get showMoreFewerStatus(){return F.vv.get("__CardActionServiceClientShowMoreFewerStatusKey__",()=>({}))}static set showMoreFewerStatus(e){F.vv.set("__CardActionServiceClientShowMoreFewerStatusKey__",e)}static get topicFollowStatus(){return F.vv.get("__CardActionServiceClientTopicFollowStatusKey__",()=>({}))}static set topicFollowStatus(e){F.vv.set("__CardActionServiceClientTopicFollowStatusKey__",e)}static get saveStatus(){return F.vv.get("__CardActionServiceClientSaveStatusKey__",()=>({}))}static set saveStatus(e){F.vv.set("__CardActionServiceClientSaveStatusKey__",e)}static get publisherMuteStatus(){return F.vv.get("__CardActionServiceClientPublisherMuteStatusKey__",()=>({}))}static set publisherMuteStatus(e){F.vv.set("__CardActionServiceClientPublihserMuteStatusKey__",e)}static getSharedWidgetScenario(){const e=A.getInstance().getViewContext(!0);return null==e?void 0:e.scenario}static isFinanceScenario(){const e=this.getSharedWidgetScenario();return e&&("watchlist"===e||"market"===e||"stock"===e||"earnings"===e)}static setPublisherFollowStatus(e,t){L.publisherFollowStatus[e]=t,L._publisherFollowStatusListeners.forEach(i=>{i({profileId:e,value:t})})}static setShowMoreFewerStatus(e,t){L.showMoreFewerStatus[e]=t,L._showMoreFewerStatusListeners.forEach(i=>{i({contentId:e,value:t})})}static clearPublisherFollowStatus(){L.publisherFollowStatus={}}static setTopicFollowStatus(e,t){L.topicFollowStatus[e]=t}static setSaveStatus(e,t){L.saveStatus[e]=t}static setPublisherMuteStatus(e,t){L.publisherMuteStatus[e]=t}static registerPublisherFollowStatusListener(e){const t=L.publisherFollowStatusListenerId;return L._publisherFollowStatusListeners.set(t,e),L.publisherFollowStatusListenerId+=1,()=>L._publisherFollowStatusListeners.delete(t)}static registerShowMoreFewerStatusListener(e){const t=L.showMoreFewerStatusListenerId;return L._showMoreFewerStatusListeners.set(t,e),L.showMoreFewerStatusListenerId+=1,()=>L._showMoreFewerStatusListeners.delete(t)}constructor(e,t){var i;this.fetchImpl=e,this.additionalHeaders=t,this.isWindowsDashboard="windowsNewsPlus"===o.T3.AppType||"winWidgets"===o.T3.AppType,this.isWindowsBoardsForRuby="winWidgets"===o.T3.AppType&&"startfeed"===(null===(i=o.T3.CurrentRequestTargetScope)||void 0===i?void 0:i.pageType)&&"ruby"===o.T3.UxMode,this.isWindowsShellV2="windowsShellV2"===o.T3.AppType,this.isTravelVertical="travel"===o.T3.AppType,this.isBingHomepage="bingHomepage"===o.T3.AppType,this.isRuby="msn"===o.T3.AppType,this.isFinanceVertical="finance"===o.T3.AppType,this.isShareWidgets="sharedWidgets"===o.T3.AppType,this.isFinanceSharedWidget=this.isShareWidgets&&L.isFinanceScenario(),this.providersServiceEndpointURL=(0,p.nI)("./Msn/Providers"),this.cardActionsServiceEndpointURL=(0,p.nI)("./Graph/Actions"),this.ocid="feeds",this.onChangePublisherFollowStatus=e=>{var t,i;const a=null==e||null===(t=e.detail)||void 0===t?void 0:t.id,r=null==e||null===(i=e.detail)||void 0===i?void 0:i.follow;a&&void 0!==r&&L.setPublisherFollowStatus(a,r)},this.getUpvoteStatus=async e=>{const t=await this.getCardActionStatus(e,W.X.Upvote);return t&&t.value&&t.value.length>0},this.getDownvoteStatus=async e=>{const t=await this.getCardActionStatus(e,W.X.Downvote);return t&&t.value&&t.value.length>0},this.getCardActionStatus=async(e,t)=>{const i=this.cardActionsServiceEndpointURL,a={method:"GET",headers:{...await w.WR.getOneServiceHeaders(),...this.additionalHeaders},credentials:"include"},r=await this.getOneServiceCommonParam();r.push({key:"$filter",value:`actionType eq '${t}' and targetId eq '${e}'`}),r.forEach(e=>e.value&&i.searchParams.set(e.key,e.value));try{const r=await(0,m.w)(async()=>await this.fetchImpl(i.href,a),`getCardAction${t}`);if(r.status>=400){const i=`OneService returned error response. Status: ${r.status} for actionType: ${t}, targetId: ${e}`;throw new Error(i)}return(0,y.FH)(this.getPreloadReloadReason(t)),(0,S.T4)(),r.json()}catch(e){u.YT.sendAppErrorEvent({...n.Bik,message:"Error while posting action for card action",pb:{...n.Bik.pb,customMessage:`url: ${i.href}, error: ${e}`}})}},this.isWindowsBoardsForRuby?this.ocid="rubyprong2":this.isWindowsDashboard?this.ocid="winp2":this.isWindowsShellV2?this.ocid="feeds":c.Rb.IsBlendedEnterprise?this.ocid="entnewsntp":this.isTravelVertical?this.ocid="travel-verthp-feeds":this.isBingHomepage?this.ocid="Peregrine":this.isRuby?this.ocid="rubyntp":this.isFinanceVertical?this.ocid="pdp-peregrine":this.isFinanceSharedWidget&&(this.ocid="hpwidget"),this.initPublisherServiceClientPromise(),this.initTopicsDataConnector(),this.addEventListeners()}getTopicDataConnector(){return this.topicsDataConnector||this.initTopicsDataConnector(),this.topicsDataConnector}initPublisherServiceClientPromise(){let e;this.publisherServiceClientPromise=new Promise(t=>{e=t});(async()=>{const{PublisherServiceClient:t}=await i.e("msnews/publishers-service-client").then(i.bind(i,69023));e(new t((0,N.S)()?window.fetch.bind(window):fetch))})()}initTopicsDataConnector(){this.topicsDataConnector=(0,O.zP)(r.YL)}static getUndoCallbackParams(e,t,i){let a={status:e,action:null,sendRequest:!0};return e&W.J.hidden?(e&W.J.mute?(a.status=e^W.J.mute,a.action=W.X.Mute):e&W.J.report?(a.status=e^W.J.report,a.action=W.X.Report):e&W.J.showFewer&&e&W.J.hide?(a.status=e^W.J.showFewer,a.action=W.X.ShowFewer):e&W.J.showMore&&e&W.J.hide?(a.status=e^W.J.showMore,a.action=W.X.ShowMore):"like-button"===t&&e&W.J.hide&&e&W.J.followedPublisher?(a.status=e^W.J.followedPublisher,a.action=W.X.FollowPublisher):e&W.J.hideTopic?(a.status=e^W.J.hideTopic,a.action=W.X.HideTopic):e&W.J.dismiss&&(a.status=e^W.J.dismiss,a.sendRequest=!1),a.status^=W.J.hidden,i&&(a.status^=W.J.hide,a.action=W.X.Hide)):a="like-button"===t?{status:e^W.J.hide,action:"Like-TellUsMore",sendRequest:!1}:e&W.J.hide?{status:e^W.J.hide,action:W.X.Hide,sendRequest:!0}:{status:e^W.J.showFewer,action:W.X.ShowFewer,sendRequest:!0},a}setAdditionalHeaders(e){this.additionalHeaders=e}async handleShowMoreLessWithCommunityReactions(e,t,a,r){const{SocialServiceAdapter:n,ItemTypes:s,BinaryReactionType:o}=await Promise.all([i.e("libs_social-data-service_dist_service_SocialService_js"),i.e("top-comments-card")]).then(i.bind(i,21868));n.sendContentReaction({item:s.contents,id:`${e}_${t}`,reactionType:a?o.upvote:o.downvote,reset:r})}async ShowFewer(e,t,i,a){if(L.setShowMoreFewerStatus(e,i),t&&t.useCommunityReactions&&t.locale&&(this.handleShowMoreLessWithCommunityReactions(e,t.locale,!1,!1),!t.useVoteActions))return!0;const r=t&&t.useVoteActions?W.X.Downvote:W.X.Dislike;return this.PostCardActionRequest(e,r,a??null,t)}async UnshowFewer(e,t,i){if(L.setShowMoreFewerStatus(e,i),t&&t.useCommunityReactions&&t.locale&&(this.handleShowMoreLessWithCommunityReactions(e,t.locale,!1,!0),!t.useVoteActions))return!0;const a=t&&t.useVoteActions?W.X.Downvote:W.X.Dislike;return this.DeleteCardActionRequest(e,a)}async ShowMore(e,t,i,a){if(L.setShowMoreFewerStatus(e,i),t&&t.useCommunityReactions&&t.locale&&(this.handleShowMoreLessWithCommunityReactions(e,t.locale,!0,!1),!t.useVoteActions))return!0;const r=t&&t.useVoteActions?W.X.Upvote:W.X.Like;return this.PostCardActionRequest(e,r,a??null,t)}async UnshowMore(e,t,i){if(L.setShowMoreFewerStatus(e,i),t&&t.useCommunityReactions&&t.locale&&(this.handleShowMoreLessWithCommunityReactions(e,t.locale,!0,!0),!t.useVoteActions))return!0;const a=t&&t.useVoteActions?W.X.Upvote:W.X.Like;return this.DeleteCardActionRequest(e,a)}async saveContent(e,t,i){return L.setSaveStatus(e,!0),this.PostCardActionRequest(e,W.X.Save,i??null,t)}async unsaveContent(e){return L.setSaveStatus(e,!1),this.DeleteCardActionRequest(e,W.X.Save)}async Follow(e,t){L.setPublisherFollowStatus(e,!0);const i=await this.publisherServiceClientPromise;try{return await i.updateSourceFollowState(e,!0,t)}catch(t){throw L.setPublisherFollowStatus(e,!1),u.YT.sendAppErrorEvent({...n.OZt,message:"Error while following publisher for card action",pb:{...n.OZt.pb,customMessage:`targetId: ${e}, error: ${t}`}}),t}}async Unfollow(e,t,i){L.setPublisherFollowStatus(i||e,!1);const a=await this.publisherServiceClientPromise;try{return await a.updateSourceFollowState(e,!1,t)}catch(t){throw L.setPublisherFollowStatus(e,!0),u.YT.sendAppErrorEvent({...n.OZt,message:"Error while unfollowing publisher for card action",pb:{...n.OZt.pb,customMessage:`targetId: ${e}, error: ${t}`}}),t}}async FollowTopic(e,t,i){L.setTopicFollowStatus(e,!0);try{var a;return null===(a=this.getTopicDataConnector())||void 0===a?void 0:a.followTopic(e,t,!1,i)}catch(t){throw L.setTopicFollowStatus(e,!1),u.YT.sendAppErrorEvent({...n.lZi,message:"Error while following topic for card action",pb:{...n.lZi.pb,customMessage:`targetId: ${e}, error: ${t}`}}),t}}async UnfollowTopic(e){L.setTopicFollowStatus(e,!1);try{var t;return null===(t=this.getTopicDataConnector())||void 0===t?void 0:t.unfollowTopic(e)}catch(t){throw L.setTopicFollowStatus(e,!0),u.YT.sendAppErrorEvent({...n.lZi,message:"Error while unfollowing topic for card action",pb:{...n.lZi.pb,customMessage:`targetId: ${e}, error: ${t}`}}),t}}async Hide(e,t,i){return t&&t.usePdpService&&t.segmentType?this.HideSegment(t.segmentType):this.PostCardActionRequest(e,W.X.Dislike,i||null,t)}async Unhide(e){return this.DeleteCardActionRequest(e,W.X.Dislike)}async Mute(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SourceProvider",i=arguments.length>2?arguments[2]:void 0;return L.setPublisherMuteStatus(e,!0),this.PostCardActionRequest(e,W.X.Mute,t,i)}async Unmute(e){return L.setPublisherMuteStatus(e,!1),this.DeleteCardActionRequest(e,W.X.Mute)}async Disable(e,t){return this.PostCardActionRequest(e,W.X.Disabled,t)}async undoAdFeedback(e){return this.DeleteCardActionRequest(e,W.X.Dislike)}async Report(e,t,i,r,n,s,d,l,u){let m=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"",y=arguments.length>10?arguments[10]:void 0,v=arguments.length>11?arguments[11]:void 0,f=arguments.length>12?arguments[12]:void 0;const g=c.Rb.ClientSettings?c.Rb.ClientSettings.aid:"",S=o.T3&&o.T3.HostPage.topDomain;let C=f==a.vq||n===h.b5.WebContent?"web":"msn";"ugcPost"===f&&(C="ugcPost");const b=(0,a._D)(u),_={serviceType:"oneservice",oneServiceTraceId:"",oneServiceActivityId:g},N={activityId:g,feedbackTags:t,feedbackText:i},T={activityId:(0,M.DA)(),market:o.T3&&o.T3.CurrentMarket||"",contentId:e,source:C,headlineImage:d&&K(d.src),headlineText:r,abstract:s,offensive:b,url:l};if(y&&v){const e=(0,a.Zn)(y.imageQualityOtherVisualQualityTags),t=(0,a.vF)(y.suspectedAIOrBotCreatedTags);e.length&&(T.imageQualityOtherVisualQuality=e),t.length&&(T.aidetection=t)}JSON.stringify({article:{id:e},canvas:{name:o.T3.AppType,version:navigator.userAgent,pageType:m||c.Rb.ClientSettings.pagetype},data:N,appEnvironment:o.T3,clientSettings:c.Rb.ClientSettings,extSchema:_});const I=JSON.stringify(T),k="msn.cn"===S?a.LX:(0,p.pN)().origin+a.cM,P={...{...await w.WR.getOneServiceHeaders(),...this.additionalHeaders},"Content-Type":"application/json"};v&&(0!=b.length||T.aidetection)&&this.reportFeedbackService(I,k,P)}async reportGem(e,t,i,r,n){var s;const c=(0,M.DA)(),d=(0,a._D)(i),l={activityId:c,market:o.T3&&o.T3.CurrentMarket||"",contentId:e,source:"gem",signature:t,canvas:this.ocid,url:n||(null===(s=window.location)||void 0===s?void 0:s.href)||"",headlineImage:"",headlineText:"",abstract:""};if(0===d.length&&!r)return;d.length>0&&(l.offensive=d),r&&(l.gemFeedback=[]);const u="msn.cn"===(o.T3&&o.T3.HostPage.topDomain)?a.LX:(0,p.pN)().origin+a.cM,h={...await w.WR.getOneServiceHeaders(),...this.additionalHeaders,"Content-Type":"application/json"};this.reportFeedbackService(JSON.stringify(l),u,h)}async reportFeedbackService(e,t,i){const a={method:"POST",headers:i,body:e,credentials:"include"};let r;try{if(r=await fetch(t,a),r.status>=400)throw new Error(r.statusText)}catch(e){u.YT.sendAppErrorEvent({...n.HN5,message:"Error while posting action for card action",pb:{...n.HN5.pb,customMessage:`url: ${t}, error: ${e}`}})}return r}async reportNonCMS(e,t,i,a,r,n,s){this.ReportOCV(e,t,i,a,r,n,s)}async ReportOCV(e,t,i,a,r,o,c){let d=!1;const l=await this.createOcvFeedbackData(e,t,i,a,r,o,c),u={method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)};try{const e=await this.fetchImpl(x,u);if(e.ok)d=!0;else{const t=`Error code: ${e.status} Error message: ${e.statusText} Request params: ${u} Service url: ${x}`;(0,s.vV)(n.QZG,"Request is not valid, it has no content, or the manifest is not formatted correctly",t)}}catch(e){const t=`Error code: ${e?e.code:"undefined"} Error message: ${e?e.message:"undefined"} Request params: ${u} Service url: ${x}`;(0,s.c_)(e,n.lbM,"Exception reporting feedback to OCV",t)}}async createOcvFeedbackData(e,t,i,a,r,n,s){var d,l,h;const p=new C.vO,w=null===c.Rb||void 0===c.Rb?void 0:c.Rb.ClientSettings,m=null===o.T3||void 0===o.T3?void 0:o.T3.HostPage,y=(null==w?void 0:w.aid)||"",v=[n?"1S":"","true"===((null==w?void 0:w.static_page)||"")?"PCS":""].join(" ").trim()||"None",f=(null===o.T3||void 0===o.T3||null===(d=o.T3.CurrentRequestTargetScope)||void 0===d||null===(d=d.pageExperiments)||void 0===d?void 0:d.join(","))||"",g=null===o.T3||void 0===o.T3||null===(l=o.T3.CurrentRequestTargetScope)||void 0===l?void 0:l.browser;let _="";if(r){const e=r.split("|");_=e&&e.length&&e[0]}else{const e=u.YT.getPageMetadata().JoinIdProps.IDXId;if(e){_=e.split(",").slice(0,10).toString()}r=(0,S.Xq)()}const N={serviceType:"oneservice",oneServiceTraceId:_,oneServiceActivityId:""},T={NotRelevant:t.NotRelevant,ImageQuality:t.BlurryImage,MisleadingTitle:t.Misleading,OutdatedArticle:t.Outdated,DuplicateArticle:t.Duplicate,OffensiveContent:t.Offensive,Vertical:a,SuspectedAIOrBot:t.SuspectedAIOrBot,CopyrightAndTrademarkViolation:t.CopyrightAndTrademarkViolation},I=JSON.stringify(T);return u.YT.sendTraceInfoEvent(N),p.submitTime=(new Date).toISOString(),p.clientFeedbackId=(0,M.DA)(),p.comment=i,p.rating=4,p.application={appData:JSON.stringify({ScreenResolution:window&&window.screen?[screen.width,screen.height].join("x"):"",articleId:e,debugId:r,activityID:y,staticFallback:v,vertical:m&&m.verticalKey||"Prod",errorClassification:I,whyAmISeeReasons:s})},p.telemetry={audience:(null===o.T3||void 0===o.T3?void 0:o.T3.CurrentMarket)||"",audienceGroup:"Production",channel:(null==m?void 0:m.categoryKey)||"",deviceType:(null==w?void 0:w.deviceFormFactor)||"",errorClassification:I,featureArea:(null==w?void 0:w.pagetype)||"",flights:f,isUserSubscriber:(0,$.Fo)(),platform:null===(h=o.T3.CurrentRequestTargetScope)||void 0===h?void 0:h.os,processSessionId:y,sourceContext:o.T3.AppType},p.web={browser:(null==g?void 0:g.browserType)||"",browserVersion:(null==g?void 0:g.version)||"",sourcePageName:(null==m?void 0:m.subcategoryKey)||"",sourcePageURI:""},await(0,b._)(p),p}async ReportAd(e,t){if(c.Rb.CurrentFlightSet.has("prg-ad-fbck-log")&&!(0,d.V1)(e))return void(0,s.vV)(n.C8f,`Cannot send ad feedback: invalid or empty feedback URL. Value: '${e}'`);let i;(0,d.bJ)(e)?(i=(0,d.Re)(e,"${FEEDBACK}",encodeURIComponent(t||""),"f"),i=(0,d.Re)(i,"${CANVAS}",encodeURIComponent(o.T3.AppType),"canvas"),u.YT.addOrUpdateTmplProperty("adFeedbackUrlMonetize","1")):i=e.concat(`&f=${t}`);let a=new Image(1,1);a.src=i,a=null}async GetProviderIcon(e){const t=await this.GetPublisherDetails(e);return(0,E.A)(t,"value[0].logos[0].imageLink.href",void 0)}async PostCardActionEvent(e,t,i){let r,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>null,s=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0,d=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=arguments.length>7?arguments[7]:void 0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:5e3,p=arguments.length>9&&void 0!==arguments[9]&&arguments[9],w=arguments.length>10?arguments[10]:void 0,m=arguments.length>11?arguments[11]:void 0,y=arguments.length>12?arguments[12]:void 0,v=arguments.length>13?arguments[13]:void 0,S=arguments.length>14?arguments[14]:void 0;switch(t){case W.X.ShowMore:e&W.J.showMore?(d&&f.g.renderToast({id:g.C.ShowMore+`-${i}`,toastType:g.C.ShowMore,expirationInMs:h,onClick:()=>{s?s(i,e^W.J.showMore,t,!0):this.PostCardActionEvent(e^W.J.showMore,t,i,n)},referrerButton:u}),r=await this.ShowMore(i,m,e,S)):(d&&f.g.expireToast(g.C.ShowMore+`-${i}`),r=await this.UnshowMore(i,m,e)),n(i,e,t);break;case W.X.ShowFewer:e&W.J.showFewer?(d&&f.g.renderToast({id:g.C.ShowFewer+`-${i}`,toastType:g.C.ShowFewer,expirationInMs:h,onClick:()=>{s?s(i,e^W.J.showFewer,t,!0):this.PostCardActionEvent(e^W.J.showFewer,t,i,n)},referrerButton:u}),r=await this.ShowFewer(i,m,e,S)):(d&&f.g.expireToast(g.C.ShowFewer+`-${i}`),r=await this.UnshowFewer(i,m,e)),n(i,e,t);break;case W.X.Save:r=Boolean(L.saveStatus[i])?await this.unsaveContent(i):await this.saveContent(i,m,S),n(i,e,t);break;case W.X.FollowPublisher:{const a=m;r=e&W.J.followedPublisher?await this.Follow(c,a):await this.Unfollow(c,a),n(i,e,t);break}case W.X.FollowTopic:{const a=m;r=e&W.J.followedTopic?await this.FollowTopic(c,v,a):await this.UnfollowTopic(c),n(i,e,t);break}case W.X.Hide:r=e&W.J.hide?await this.Hide(i,m,S):await this.Unhide(i),n(i,e,t);break;case W.X.HideTopic:r=e&W.J.hideTopic?await this.PostCardActionRequest(c,W.X.Mute,"TagBase"):await this.DeleteCardActionRequest(c,W.X.Mute);break;case W.X.Mute:if(e&W.J.mute){(e&W.J.followedPublisher||!0===L.publisherFollowStatus[v])&&this.Unfollow(c,m,v);const s=c===a.vq||(null==m?void 0:m.isWebVideo),p=s?a.vq:c,w=s?"Source":"SourceProvider";if(r=null!=m&&m.isWebVideo?await this.Mute(p,w):await this.Mute(p,w,m),r)n(i,e,W.X.Mute,void 0,void 0,p);else if(y&&y(),o.T3.CurrentMarket===l.DX.ENUS)return void setTimeout(()=>{d&&f.g.renderToast({id:`${g.C.MuteError}-${t}-${i}`,toastType:g.C.MuteError,expirationInMs:h,referrerButton:u,positionElRef:null==u?void 0:u.offsetParent})},300)}else r=await this.Unmute(c);break;case W.X.ReportAd:n(i,e,t);break;default:return}p&&!r&&f.g.renderToast({id:`${g.C.ConnectionError}-${t}-${i}`,toastType:g.C.ConnectionError,inputText:w&&w.personalizationErrorText,expirationInMs:h,referrerButton:u})}async GetPublisherDetails(e){const t=this.providersServiceEndpointURL,i={method:"GET",headers:{...await w.WR.getOneServiceHeaders(),...this.additionalHeaders}};[{key:"ids",value:e},...await this.getOneServiceCommonParam()].forEach(e=>e.value&&t.searchParams.set(e.key,e.value));try{const a=await(0,m.w)(async()=>await this.fetchImpl(t.href,i),"getProviderDetails");if(!a.ok){const t=`OneService returned error response. Status: ${a.status} for providerId: ${e}`;throw new Error(t)}return a.json()}catch(e){u.YT.sendAppErrorEvent({...n.Bik,message:"Error while calling getPublisherDetails action for card action",pb:{...n.kOp.pb,customMessage:`url: ${t.href}, error: ${e}`}})}}async DeleteCardActionRequest(e,t){const i=this.cardActionsServiceEndpointURL,a={method:"DELETE",credentials:"include",headers:{...await w.WR.getOneServiceHeaders(),...this.additionalHeaders}};[{key:"$filter",value:`actionType eq '${t}' and targetId eq '${e}'`},...await this.getOneServiceCommonParam()].forEach(e=>e.value&&i.searchParams.set(e.key,e.value));try{const r=await(0,m.w)(async()=>await this.fetchImpl(i.href,a),`deleteCardAction${t}`);if(r.status>=400){const i=`OneService returned error response. Status: ${r.status} for actionType: ${t} and targetId: ${e}`;throw new Error(i)}return(0,y.FH)(this.getPreloadReloadReason(t)),(0,S.T4)(),r}catch(e){u.YT.sendAppErrorEvent({...n.kOp,message:"Error while calling delete action for card action",pb:{...n.kOp.pb,customMessage:`url: ${i.href}, error: ${e}`}})}}async HideSegment(e){if("CasualGame"===e)return R.d.updateGamingCardsEnableStatus([{cardType:U.g.CasualGamesCard,enabled:!1}]);const t=D.AT.get(e);if(t)return R.d.updateSegmentCardsEnableStatus([{cardType:t,enabled:!1}]);const i=D.jf.get(e);return i&&R.d.disableSpotlightCard(null==i?void 0:i.definitionName,null,null==i?void 0:i.targetType)}async PostCardActionRequest(e,t,i,a){const r=this.cardActionsServiceEndpointURL;let s=JSON.stringify({actionType:t,targetId:e,targetType:i,metadata:a,...a&&{degree:"Customized"}});null!=a&&a.useDefinitionName&&(s=JSON.stringify({actionType:t,definitionName:e,targetType:i,metadata:a,...a&&{degree:"Customized"}}));const o={method:"POST",body:s,headers:{...await w.WR.getOneServiceHeaders(),...this.additionalHeaders},credentials:"include"};(await this.getOneServiceCommonParam()).forEach(e=>e.value&&r.searchParams.set(e.key,e.value));try{const a=await(0,m.w)(async()=>await this.fetchImpl(r.href,o),`getCardAction${t}`);if(a.status>=400){const r=`OneService returned error response. Status: ${a.status} for actionType: ${t}, targetId: ${e} and targetType: ${i}`;throw new Error(r)}return(0,y.FH)(this.getPreloadReloadReason(t)),(0,S.T4)(),a.json()}catch(e){u.YT.sendAppErrorEvent({...n.HN5,message:"Error while posting action for card action",pb:{...n.HN5.pb,customMessage:`url: ${r.href}, error: ${e}`}})}}async getOneServiceCommonParam(){return this.isWindowsDashboard||this.isTravelVertical||this.isRuby?w.WR.getOneServiceParamsWithoutAuth(o.T3.UserId,this.ocid,!1):await this.isUserSignedIn()?w.WR.getOneServiceParamsWithAuth(o.T3.UserId,this.ocid,!this.isFinanceVertical&&!this.isFinanceSharedWidget&&!c.Rb.IsBlendedEnterprise||this.isWindowsShellV2):"edgeChromium"===o.T3.AppType&&(0,G.Ri)("lt")&&(0,G.Ri)("aace")?((0,s.vV)(n.mD0,"CardActionServiceClient: lt cookie present. aace cookie present.",void 0,{...n.mD0.pb}),w.WR.getOneServiceParamsWithAuth(o.T3.UserId,this.ocid,!c.Rb.IsBlendedEnterprise||this.isWindowsShellV2)):w.WR.getOneServiceParamsWithoutAuth(o.T3.UserId,this.ocid,!this.isFinanceVertical&&!this.isFinanceSharedWidget&&!c.Rb.IsBlendedEnterprise||this.isWindowsShellV2)}async isUserSignedIn(){if(c.Rb.UserIsSignedIn)return!0;return 2===await(0,$.XK)()}getPreloadReloadReason(e){switch(e){case W.X.Mute:return v.u.MutePublisher;case W.X.Save:return v.u.Save;case W.X.Like:return v.u.Like;case W.X.Dislike:return v.u.Dislike;case W.X.Disabled:return v.u.Disabled;default:return v.u.SettingsChange}}addEventListeners(){window.addEventListener("trackPublisherFollowStatus",this.onChangePublisherFollowStatus)}removeEventListeners(){window.removeEventListener("trackPublisherFollowStatus",this.onChangePublisherFollowStatus)}}class V extends L{constructor(e,t){let i;i=e||((0,N.S)()?window.fetch.bind(window):fetch),super(i,t)}}let B;const j=(e,t)=>B?(t&&B.setAdditionalHeaders(t),B):(B=new V(e,t),B);function K(e){if(e&&e.startsWith("//")){return`${(0,N.S)()?window.location.protocol:"https:"}${e}`}return e}},64747:function(e,t,i){var a;i.d(t,{g:function(){return a}}),function(e){e.ConnectToXbox="ConnectToXbox",e.CasualGamesCard="CasualGamesCard",e.CompeteCard="CompeteCard",e.InterestGroupCard="InterestGroupCard",e.HighlightsCard="HighlightsCard",e.PersonalizationCard="PersonalizationCard",e.LivestreamCard="LivestreamCard",e.ProMatchesCard="ProMatchesCard",e.ProTournamentsCard="ProTournamentsCard",e.RecentlyPlayedCard="RecentlyPlayedCard",e.RecommendedCard="RecommendedCard",e.RecoVideoCard="RecoVideoCard",e.RedditCard="RedditCard",e.RewardsCard="RewardsCard",e.UpcomingGamesCard="UpcomingGamesCard",e.UpsellGamerModeCard="UpsellGamerModeCard",e.VideoCard="VideoCard"}(a||(a={}))},68154:function(e,t,i){i.d(t,{LX:function(){return o},Zn:function(){return r},_D:function(){return a},cM:function(){return s},vF:function(){return n},vq:function(){return c}});const a=e=>{const t=[],i={TextProfanity:"TextProfanity",Profanity:"TextProfanity",SubstanceAbuse:"SubstanceAbuse",Violence:"Violence",Misinformation:"MisinformationCovid",Other:"Other",AdultImage:"AdultImage",RacyImage:"RacyImage",AdultAndRacyImage:"AdultAndRacy",SuicideOrSelfHarm:"SuicideAndSelfHarm",BullyingAndHarassment:"BullyingAndHarassment",HateSpeech:"HateSpeech",Spam:"Spam",ChildAbuse:"ChildAbuse",TerrorismOrViolentExtremism:"TerrorismOrViolentExtremism",Gambling:"Gambling",RegulatedGoods:"RegulatedGoods",UnverifiedMedicalClaims:"UnverifiedMedicalClaims",Hoax:"Hoax"};return e&&Object.keys(e).forEach(a=>{e[a]&&t.push(i[a])}),t},r=e=>{const t=[],i={reportBlurryImage:"reportBlurryImage",reportLongBlockOfUnFormatted:"reportLongBlockOfUnFormatted",reportTooManyLink:"reportTooManyLink",reportInsufficientInformation:"reportInsufficientInformation",reportExpectedMediaNotFound:"reportExpectedMediaNotFound",reportDuplicateContentOrMedia:"reportDuplicateContentOrMedia",Other:"Other"};return e&&Object.keys(e).forEach(a=>{e[a]&&t.push(i[a])}),t},n=e=>{const t=[],i={UndisclosedAIgengerated:"AIGeneratedMedia",AIGeneratedPromotion:"PromotionalAdLinks",IncorectInfo:"IncorrectInformation",Nonsensical:"NonsenseMedia",FakedImgOfPublicFigures:"FakedImagesOfRealPeopleOrEvents",ImpossiblePhysicalAppearance:"ImpossiblePhysicalAppearance",ContentIdentifiesItselfAsAIGenerated:"ContentItselfIdsAsAI",PlagiarismC:"reportPlagiarismChecked",other:"other"};return e&&Object.keys(e).forEach(a=>{e[a]&&"PlagiarismC"!=a&&"other"!=a&&t.push(i[a])}),t},s="/service/moderation/api/reportanissue",o="https://assets.msn.cn/service/moderation/api/reportanissue",c="WebVideo"},83117:function(e,t,i){i.d(t,{g:function(){return s}});var a=i(98216),r=i(65022),n=i(93468);class s{static renderToast(e){const t=()=>{this.renderToastCallback?this.renderToastCallback(e):a.YT.sendAppErrorEvent((0,n.$5)(r.HBg,"Undefined toast render callback function"))};if(s.waitForCallbackReadyTimeout>0&&"undefined"!=typeof window&&void 0!==window.setTimeout){const e=window.setTimeout(()=>{t()},s.waitForCallbackReadyTimeout);s.ready&&s.ready.then(()=>{clearTimeout(e),t()})}else t()}static setRenderToastCallback(e){this.renderToastCallback=e,this.readyResolveFn()}static expireToast(e){this.expireToastCallback?this.expireToastCallback(e):a.YT.sendAppErrorEvent((0,n.$5)(r.kZg,"Undefined toast expire callback function"))}static setExpireToastCallback(e){this.expireToastCallback=e}static setCurrentToast(e,t){this.currentToastId!==e&&(this.currentToastId=e,this.renderToastCallback=t,t&&this.readyResolveFn(),this.currentToastIdChangeCallbacks.forEach(t=>t(e)),this.renderToast())}static addCurrentToastIdChangeCallback(e){e&&this.currentToastIdChangeCallbacks.push(e)}static setWaitForCallbackReadyTimeout(e){s.waitForCallbackReadyTimeout=e}}s.ready=new Promise(e=>s.readyResolveFn=e),s.currentToastIdChangeCallbacks=[]},96659:function(e,t,i){i.d(t,{uS:function(){return W}});var a=i(17254),r=i(15589),n=i(98216),s=i(11372),o=i(29231),c=i(47149),d=i(52088);function l(e,t,i){if("string"!=typeof e)return;const a=new c.$({name:e}),r=document.createElement("div"),s=document.createElement("div");s.setAttribute("data-t",a.getMetadataTag()),r.appendChild(s),d.W.addElement(s),n.YT.sendContentViewEvent(r,t,i)}const u={V1:"https://xpaycdn.azureedge.net/js/pack/xpaySubscription.js",V2:"https://xpaycdn.azureedge.net/js/pack/xpaySubscriptionV2.js"},h={V1:"https://xpaycdn-int.azureedge.net/js/pack/xpaySubscription.js",V2:"https://xpaycdn-int.azureedge.net/js/pack/xpaySubscriptionV2.js"},p=e=>`subscription-sdk-container-${e}`,w=e=>`subscription-sdk-script-${e}`;const m=()=>window.top,y=()=>m().document,v=e=>y().getElementById(w(e));let f,g;const S=new Promise(e=>{f=e}),C=new Promise(e=>{g=e}),b=async e=>{await("V2"===e?C:S)};function _(e){let t,i;const n=new Promise(e=>{t=e}),s=new Promise(e=>{i=e}),o=y().createElement("script");return o.isLoadedPromise="V2"===e?s:n,o.onload=()=>{("V2"===e?i:t)(!0)},o.id=w(e),o.src=function(e){switch(a.T3.Environment){case r.O.int:case r.O.int1:case r.O.intpr:case r.O.intperf:return h[e];case r.O.prod:case r.O.staging:default:return u[e]}}(e),o.defer=!0,o}function N(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"V1";if(!(e=>!!v(e))(e)){var t;!async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"V1";P("init",e,t)}({env:A(),requestId:n.YT?n.YT.getRequestId():a.T3.ActivityIdLowerCaseNoHypens,flightIdList:null===(t=a.T3.CurrentRequestTargetScope)||void 0===t?void 0:t.pageExperiments,telemetryUtils:n.YT?{sendActionEvent:n.YT.sendActionEvent.bind(n.YT),sendAppErrorEvent:n.YT.sendAppErrorEvent.bind(n.YT),sendContentViewEvent:l,TelemetryActionType:s.EG,TelemetryBehaviorType:s.MS,TelemetryContentViewType:o.ym,TelemetryObject:c.$,TelemetryType:s.MJ}:null},e);const i=_(e);y().body.appendChild(i);const r=y().createElement("div");r.id=p(e),y().body.appendChild(r)}("V2"===e?g:f)(!0)}var T,I,k;async function P(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"V1";await b(i),await v(i).isLoadedPromise;const a=("V2"===i?m().xpaySubscriptionV2:m().xpaySubscription)[e];return t=await async function(e,t){const i=p(t);return{...e,env:void 0!==e.env?e.env:A(),tileContainerId:i,containerId:i}}(t,i),a(t)}function A(){switch(a.T3.Environment){case r.O.int:case r.O.int1:case r.O.intpr:case r.O.intperf:return I.INT;case r.O.prod:case r.O.staging:default:return I.PROD}}!function(e){e[e.Basic=0]="Basic",e[e.Advanced=1]="Advanced",e[e.Premium=2]="Premium"}(T||(T={})),function(e){e[e.PROD=0]="PROD",e[e.CI=1]="CI",e[e.TEST=2]="TEST",e[e.INT=3]="INT"}(I||(I={})),function(e){e.Active="Active",e.Expired="Expired",e.Canceled="Canceled",e.PaymentFailed="PaymentFailed"}(k||(k={}));var F=i(6817),M=i(72725),E=i(19993),G=i(74326),$=i(57759),O=i(86948);async function R(e){return(await async function(){const e={method:"GET",headers:await E.WR.getOneServiceHeaders(),credentials:"include"},t="anaheim-ntp",i=(0,G.nI)("news/users/me/actions");let r;[...(0,O.Fo)()?E.WR.getOneServiceParamsWithAuth(a.T3.UserId,t,!1):E.WR.getOneServiceParamsWithoutAuth(a.T3.UserId,t,!1),{key:"actionType",value:"Subscribe"},{key:"targetType",value:"Provider"},{key:a.T3.OneServiceContentMarketQspKey,value:a.T3.CurrentMarket}].forEach(e=>{e.value&&i.searchParams.set(e.key,e.value)});try{const t=await(0,$.w)(async()=>{const t=await fetch(i.href,e);if(t.status>=400){const e=`OneService returned error response. Status: ${t.status} for Subscribe Action}`;throw new Error(e)}return t},"getSubscriptionsFromActionService");r=await t.json()}catch(e){return[]}return r&&r.value||[]}()).filter(e=>{var t,i;return"Premium"===(null==e||null===(t=e.metadata)||void 0===t?void 0:t.SubscriptionType)&&((null==e||null===(i=e.metadata)||void 0===i?void 0:i.SubscriptionStatus)===k.Active||function(e){try{return new Date(e.metadata.ExpireAt)>new Date}catch{return!1}}(e))}).map(e=>e.targetId).includes(e)}const U=e=>{e&&e.state!==M.v.userStateType.anonymous&&N("V2")};async function W(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.state===M.v.userStateType.anonymous)return!1;if(!i)return R(t.id);U(e);try{const i=await async function(e){return P("getSubscriptionStatus",e,"V2")}({authToken:await(0,F.Ae)(e.id),publisherId:t.id}),{data:a}=i;return!!a}catch(e){return!1}}}}]);