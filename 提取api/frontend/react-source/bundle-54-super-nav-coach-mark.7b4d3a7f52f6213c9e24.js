"use strict";(self.homePageWebpackChunks=self.homePageWebpackChunks||[]).push([["super-nav-coach-mark"],{14066:function(n,e,t){t.d(e,{MarketComplianceExceptionBanners:function(){return o.M}});var o=t(98142)},58242:function(n,e,t){function o(n,e,t){if(!n||!e)throw new Error("PlacementInteractionLimit: Invalid parameters.");return(o,i)=>{var a;if(!o)return!1;let r=(null==i?void 0:i[o.id])||[];const{relatedPlacementIds:c,repeat:s}=t||{};if(null!=c&&c.length){const n=c.filter(n=>n!==o.id).flatMap(n=>(null==i?void 0:i[n])||[]);r=[...r,...n]}const l=null===(a=r)||void 0===a?void 0:a.filter(e=>e.type===n);if(!l.length)return!0;if(!s)return l.length<e;const{lookbackIntervalMS:u,repeatsNumber:d}=s;return!(l.length>=d*e)&&r.filter(n=>n.ts>Date.now()-u).length<e}}t.d(e,{n:function(){return o}})},69668:function(n,e,t){t.d(e,{H:function(){return o}});const o={"ca-es-valencia":1,cs:1,cy:1,"cyrl-sr-ba":1,"cyrl-sr-rs":1,da:1,de:1,"de-at":1,"de-ch":1,el:1,en:1,"en-ae":1,"en-au":1,"en-ca":1,"en-gb":1,"en-ie":1,"en-in":1,"en-my":1,"en-nz":1,"en-sg":1,"en-za":1,es:1,"es-ar":1,"es-es":1,et:1,eu:1,fa:1,fi:1,fr:1,"fr-be":1,"fr-ca":1,gl:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,ko:1,"latn-az":1,"latn-sr":1,lt:1,lv:1,mk:1,mr:1,nb:1,ne:1,nl:1,"nl-be":1,nn:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sk:1,sl:1,sq:1,sv:1,te:1,th:1,tr:1,uk:1,ur:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1,ar:1,bg:1,"bn-in":1,ca:1}},78454:function(n,e,t){t.d(e,{cO:function(){return g},wE:function(){return p}});var o=t(58242),i=t(22272),a=t(16813),r=t(65022),c=t(93468),s=t(80385),l=t(69583),u=t(17254),d=t(12870),f=t(98216),h=t(2462),m=t(69668);async function g(n,e){f.YT.addOrUpdateTmplProperty("cnex-eb","1");const t=await async function(){const n={description:"Your location continues to show you're in mainland China. MSN needs to switch to local content. Is this right?",dismissContentActionLabel:"Learn more",engageContentActionLabel:"Yes",closeContentActionLabel:"Close"},e=`https://assets.msn.${u.T3.topDomain??"com"}/staticsb/statics/latest/marketmismatch/cnexEndBannerString/`,t=d.Rb.ClientSettings&&d.Rb.ClientSettings.market&&d.Rb.ClientSettings.market.requestInput,o=t&&t.language&&t.language.toLowerCase(),i=t&&t.region&&t.region.toLowerCase(),a=o&&i?`${o}-${i}`:void 0,s=o?`${o}`:void 0,l=async n=>{if(!n||m.H&&!m.H[n])return;const t=`${e}${n}.json`;try{const n=await fetch(t);if(n.ok){const e=await n.json(),t=e&&e.properties&&e.properties.localizedStrings;if(!t)return;return{description:t.description,dismissContentActionLabel:t.dismissContentActionLabel,engageContentActionLabel:t.engageContentActionLabel,closeContentActionLabel:t.closeContentActionLabel}}}catch{(0,c.vV)(r.Ovn,"Failed to fetch china language mismatch localization strings",void 0,{...r.Ovn.pb,customMessage:`Error url: ${t}}`})}},h=await l(a)||await l(s);if(h)return{description:h.description,dismissContentActionLabel:h.dismissContentActionLabel,engageContentActionLabel:h.engageContentActionLabel,closeContentActionLabel:h.closeContentActionLabel};f.YT.sendAppErrorEvent({...r.lm1,message:"No Localization strings available for china language mismatch coachmark.",pb:{...r.lm1.pb,customMessage:`no supported market found or fetch failed from ${e}${a}.json and ${e}${s}.json`}});return n}(),s=(null==t?void 0:t.description)??"Due to your location, MSN needs to switch to local content after a certain number of days. To confirm, are you in mainland China?",h=(null==t?void 0:t.dismissContentActionLabel)??"Learn more",g=(null==t?void 0:t.engageContentActionLabel)??"Yes",b={id:n,group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"HorizontalBanner",position:"Top",bannerType:"Promotional",displaySurfaceAction:{actionDelegate:async()=>{p(e)}},hideSurfaceAction:{actionDelegate:()=>{}},closeSurfaceAction:{label:t.closeContentActionLabel??""}},contentModel:{title:s,description:s,contentType:a.r.CallToAction,logoImage:{url:`${u.T3.StaticsUrl}latest/nurturing/img/location-banner-Icon.png`,altText:"Image Alt Text"},dismissContentAction:{label:h,actionDelegate:()=>{p(e,!0),window.open("https://go.microsoft.com/fwlink/?LinkId=512703","_blank")}},engageContentAction:{label:g,actionDelegate:()=>{p(e,!0)}}}},v=[(0,i.A)("Viewed",1e3),(0,o.n)("Viewed",4),(0,o.n)("Dismissed",1),(0,o.n)("Closed",1),(0,o.n)("Engaged",1)];(0,l.sn)().then(n=>{n.sendInternalPlacement(b,v)})}async function p(n,e){let t=e?4:1;n?(t=n.cnexEndBanner?n.cnexEndBanner+1:1,n.cnexEndBanner=t):n={cnexEndBanner:t},async function(n){const e=182,t=`.${u.T3.HostPage.topDomain}`;n&&(0,h.Ub)(s.Z,encodeURIComponent(JSON.stringify(n)),e,t,"/")}(n)}},80385:function(n,e,t){t.d(e,{Z:function(){return o}});const o="notiStats"},91323:function(n,e,t){t.r(e),t.d(e,{SuperNavCoachMark:function(){return k},SuperNavCoachMarkStyles:function(){return S},SuperNavCoachMarkTemplate:function(){return w},ToolingInfo:function(){return A}});var o=t(46534),i=t(16813),a=t(58242),r=t(22272),c=t(32886),s=t(28006),l=t(84855),u=t(93468),d=t(65022),f=t(62586),h=t(54761),m=t(17254),g=t(89980),p=t(87405),b=t(70487),v=t(69583),y=t(21481),C=t(35849);class k extends y.U{constructor(){super(...arguments),this.ensureObservableBeforeConnect=!0,this.isCoachmarkEligible=()=>{if(this.customIsCoachmarkEligible)return this.customIsCoachmarkEligible();if(!this.isCoachmarkEligibleEdgeSettings())return!1;const n=this.getFollowedTopicsCount();if("number"!=typeof n)return!0;return n<=3}}experienceConnected(){const n=(0,p.pr)(b.u.personalizeButton);if(!n||!this.strings)return;const e=this.config.coachMarkKey;if(!e)return;const t={id:e,group:"Default",placementSource:"Internal",surfaceModel:{displaySurfaceAction:{actionDelegate:this.onShow},hideSurfaceAction:{actionDelegate:this.onHide},closeSurfaceAction:{actionDelegate:this.onHide},surfaceType:"Coachmark",size:o.fB.Large,position:{coachmarkAnchor:n,anchoringPosition:o.M7.Above,hasPointer:!0,pointerPosition:o.X1.Opposite}},contentModel:{title:this.strings.title,description:this.strings.description,contentImage:this.config.showImage?{url:`${(0,m.rA)().StaticsUrl}latest/channel-store/coachmark-bg-2.png`,altText:""}:void 0,contentType:i.r.CallToAction,engageContentAction:this.config.enableButton?{label:this.strings.buttonLabel,actionDelegate:()=>{null==n||n.click()}}:void 0,dismissContentAction:{label:this.strings.dismissLabel}}},s=[(0,a.n)("Viewed",3),(0,a.n)("Dismissed",1),(0,a.n)("Closed",1),(0,r.A)("Viewed",14*c.$),()=>this.isCoachmarkEligible()];(0,v.sn)().then(n=>{n.sendInternalPlacement(t,s)})}isCoachmarkEligibleEdgeSettings(){if(this.pageSettingsDataConnector||(this.pageSettingsDataConnector=(0,C.zP)(s.h$)),!this.pageSettingsDataConnector)return!1;const{selectedFeedDisplaySetting:n}=this.pageSettingsDataConnector.getCurrentState();if(!n)return!1;return new Set(["always","peek"]).has(n)}getFollowedTopicsCount(){try{var n;const e=(0,f.$)(m.T3.AppType,m.T3.CurrentRequestTargetScope),{treatments:t}=(0,g.Lg)().getObject(e)||{};if(!t)return null;const o=t.filter(n=>(null==n?void 0:n.type)===h.Ar.followedTopics),i=null==o||null===(n=o[0])||void 0===n?void 0:n.properties;if(i)return i.followedInterestsCount||null}catch(n){(0,u.vV)(d.ouM,"Unable to find followedTopics on the optimized items",n)}return null}getExperienceType(){return l.xmJ}}const w=t(96950).qy``;const S=t(74849).A`
:host{display:none}`,A={experienceConfigSchema:undefined}},98142:function(n,e,t){t.d(e,{M:function(){return s},s:function(){return l}});var o=t(12870),i=t(80385),a=t(2462),r=t(78454);let c;async function s(){const n=l(),e=(0,o.Th)().CurrentFlights;if(null!=e&&e.includes("forcnexendbanner")&&(c=!0),o.Rb.ClientSettings&&"true"!==o.Rb.ClientSettings.static_page){const e=o.Rb.ClientSettings;if(e.travelInfo){var t;const o=e.travelInfo;o.cnex&&"CN"===e.geo_country&&("expired"===(null===(t=o.cnex)||void 0===t?void 0:t.toLowerCase())||"false"===o.cnex&&o.cnexend&&""!=o.cnexend)&&((null==n?void 0:n.cnexEndBanner)??1)&&(c=!0)}}c&&(0,r.cO)("cnexEndBanner",n)}function l(){const n=(0,a.Ri)(i.Z);let e;return n&&(e=JSON.parse(decodeURIComponent(n))),e}}}]);