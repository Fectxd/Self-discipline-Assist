/*! For license information please see getFeedManager.a937ed6ee259cd6d8943.js.LICENSE.txt */
(self.homePageWebpackChunks=self.homePageWebpackChunks||[]).push([["getFeedManager"],{1033:function(e,t,i){"use strict";i.d(t,{e3:function(){return a},fR:function(){return r}});var n=i(27261);function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,n.$t)();return/^python-requests|^CriteoBot|^ias-|GrapeshotCrawler/.test(e)}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,n.$t)();if(!e)return!1;const t=(0,n.iA)(),i=t&&t.includes("reqsrc=vp");return-1!==e.indexOf("Yahoo")||-1!==e.indexOf("Yandex")||-1!==e.indexOf("Baiduspider")||-1!==e.indexOf("Bingbot")||-1!==e.indexOf("Googlebot")||-1!==e.indexOf("Google-InspectionTool")||-1!==e.indexOf("msnbot")||!i&&-1!==e.indexOf("HeadlessChrome")}},2651:function(e,t,i){"use strict";var n,r;i.d(t,{B:function(){return n}}),function(e){e[e.Fahrenheit=1]="Fahrenheit",e[e.Celsius=2]="Celsius"}(n||(n={})),function(e){e.MPH="mph",e.KMH="km/h",e.MS="m/s",e.BFT="bft",e.MILE="mi",e.METER="m",e.MM="mm",e.CM="cm",e.MB="mb",e.HPA="hPa",e.IN="in",e.KM="km"}(r||(r={}))},4052:function(e,t,i){"use strict";i.d(t,{A:function(){return r}});var n=i(52201);const r=i(96950).qy`
<fluent-card
    style="grid-area:${e=>e.gridArea};"
    class="${e=>e.cardSize}"
>
    <trending-now-card
        config-instance-src=${e=>e.trendingNowCardConfigInfo&&(0,n.v)(e.trendingNowCardConfigInfo)}
        config-shared-ns=${e=>e.trendingNowCardConfigInfo&&e.trendingNowCardConfigInfo.configRef&&e.trendingNowCardConfigInfo.configRef.sharedNs}
        instance-id=${e=>e.trendingNowCardConfigInfo&&e.trendingNowCardConfigInfo.instanceId}
        :feedLayoutCardSize=${e=>e.cardSize}
        :parentTelemetry=${e=>e.parentTelemetryObject}
        :trendingNowCardMetadata=${e=>e.trendingNowCardMetadata}
        :visualReadinessCallback="${e=>e.visualReadinessCallback}"
    >
    </trending-now-card>
</fluent-card>
`},4373:function(e,t,i){"use strict";i.d(t,{E:function(){return l}});var n=i(13427),r=i(19608),a=i(12870),o=i(43820);function s(e){var t;const{configOptions:i={},cardMetadata:n}=e,s=function(e){var t,i;return!(null!==(t=(0,a.Th)().CurrentFlightSet)&&void 0!==t&&t.has("prg-hp-fvrf"))&&e.isWaterfallFeed&&"hp"===(null===(i=(0,a.Th)().ClientSettings)||void 0===i?void 0:i.pagetype)}(i),l=n.instanceId||(s?"rectangle1":void 0),d=s?"waterfall":"default",c=(0,o.$q)(window.location.href);let u="hp2";(0,o._f)(c)?u="hp2lock":(0,o.AO)(c)&&(u="winweb");const h={id:"DisplayAdBanner"===n.type?"displayAdBanner":"displayAdCard",type:n.type,enableSafeAds:!!i.enableSafeAds,childTemplateType:"display-ad-card",configInstanceSrc:n.configInstanceSrc||d,instanceId:l,pageTypeOverride:s?u:void 0,shimmerIdOverride:s?"rectangle1":void 0,batchCallAdCountOverride:i.displayAdBatchCountOverride,enableExtraAdSlug:!("rectangle1"!==l||!s)||void 0};return(0,r.bw)({id:"DisplayAdBanner"===n.type?"displayAdBanner":"displayAdCard",experienceType:null==i||null===(t=i.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},h)}const l={getFeedDataForCard:e=>s(e),viewTemplate:n.s}},7086:function(e,t,i){"use strict";i.d(t,{g:function(){return m}});var n=i(38586),r=i(86100),a=i(81109),o=i(77087),s=i(43156),l=i(80904),d=i(26863),c=i(40959),u=i(930),h=i(96950),p=i(91640),f=i(30216),v=i(83003),g=i(91144);n.m,r.m;const m=h.qy`
    <style>
        :host fluent-card {
            content-visibility: auto;
        }
        ${(0,p.z)(e=>e.contentType===v.pL.Video,h.qy`
            msft-content-card msft-content-indicator {
                color: transparent;
            }
            msft-content-card msft-content-indicator::after{
                background: transparent;
            }

            fluent-card._1x_1y msft-content-card msft-content-indicator{
                left: 130px;
                top: 88px;
            }
        `)}
        .card-see-more {
            box-sizing: border-box;
            align-items: center;
            background-color: rgb(255, 255, 255);
            border-radius: 100%;
            border: 1px solid rgb(229, 229, 229);
            cursor: pointer;
            display: flex;
            fill: currentcolor;
            font-family: var(--body-font);
            font-size: var(--type-ramp-base-font-size);
            height: 28px;
            justify-content: center;
            line-height: var(--type-ramp-base-line-height);
            margin-inline-start: 4px;
            min-width: 28px;
            outline: none;
            padding: 0px;
            position: relative;
        }
        .card-see-more: hover {
            background-color: rgb(242, 242, 242);
        }
        msft-content-card span.infopane-title {
            font-size: var(--infopane-title-font-size, 28px);
        }
        msft-content-card.narrowTitleGap::part(body) {
            row-gap: 7px;
        }
        msft-content-card.narrowTitleGap::part(footer) {
            padding: 0 16px 18px;
            margin-bottom: 0;
            height: 14px;
        }
        ${e=>y(e)}

        /* 
         * Here about 'from the web' attribution style
         */
        msft-content-card[id="contentcard_${e=>e.id}"]::part(start-actions) {
            flex:1;
        }
        msft-content-card[id="contentcard_${e=>e.id}"] msft-attribution::part(image){
            white-space: nowrap;
        }
        msft-content-card[id="contentcard_${e=>e.id}"] msft-attribution, msft-content-card[id="contentcard_${e=>e.id}"] msft-attribution::part(content){
            width: calc(100%);
        }
        msft-content-card[id="contentcard_${e=>e.id}"] msft-attribution {
            display: flex;
        }
        msft-content-card[id="contentcard_${e=>e.id}"] .attribution_container_${e=>e.id} {
            width: calc(100%);
            min-height: var(--type-ramp-minus-1-line-height);
            position: relative;
            overflow: hidden;
            white-space: nowrap;
        }
        msft-content-card[id="contentcard_${e=>e.id}"] .attribution_Content_${e=>e.id} {
            position:absolute;
            transition: all 0.5s ease-out;
        }
    </style>
    <fluent-card
        style="grid-area:${e=>e.gridArea};"
        class="${e=>e.cardSize}"
    >
        <fluent-design-system-provider
            fill-color="#333333"
            style="display: flex; padding: 0; height: 100%;"
        >
            <msft-content-card
                id="contentcard_${e=>e.id}"
                class="${e=>(0,g.dU)(e)}"
                href=${e=>e.destinationUrl}
                target=${e=>e.openLinksInNewTab?"_blank":"_self"}
                title=${e=>e.disableCardTitleTooltip?"":e.title}
                layout="infoPane"
                style="${e=>b(e)}"
                data-t="${e=>{var t;return null===(t=e.telemetryContext)||void 0===t||null===(t=t.contentCard)||void 0===t?void 0:t.getMetadataTag()}}"
                :anchorTelemetryTag=${e=>e.telemetryContext&&e.telemetryContext.destination&&e.telemetryContext.destination.getMetadataTag()}
                @mouseenter="${(e,t)=>e.setDisplacementHandler&&e.setDisplacementHandler(t,e.dir)}"
                @mouseleave="${(e,t)=>e.removeDisplacementHandler&&e.removeDisplacementHandler(t,e.dir)}"
            >
            ${(0,p.z)(e=>e.contentIndicator,e=>(0,c.Z)(e.contentIndicator))}
            ${(0,p.z)(e=>!e.isAnaheimDesign,h.qy`${e=>e.title}`)}
            ${(0,p.z)(e=>e.isAnaheimDesign,h.qy`<span class="infopane-title">${e=>e.title}</span>`)}
                <img
                    slot="background-image"
                    alt="${e=>e.imageData&&e.imageData.altText}"
                    src="${e=>e.imageData&&e.imageData.source}"
                    @load="${e=>e.imageData&&e.imageData.visualReadinessCallback&&e.imageData.visualReadinessCallback()}"
                />
                ${e=>(0,a.fn)(e.isProviderInFooter?"start-actions":"attribution")}
                ${(0,p.z)(e=>e.cardActionStatus&f.J.enabled,o.K)}
                ${(0,p.z)(e=>!e.isAnaheimDesign,h.qy`
                    <div slot="start-actions" style="gap:0">
                        ${(0,p.z)(e=>e.cardActionStatus&f.J.enabled&&!e.enableRichSocialReaction,h.qy`
                            ${d.LW}
                            ${d.tB}
                        `)}
                    </div>
                `)}
                <div slot="${e=>e.isProviderInFooter?"end-actions":"start-actions"}" style="gap:0">
                    <style>
                        .card-button:not(:hover) {
                            background: transparent;
                        }
                        msft-content-card fluent-button::part(control) {
                            padding: 0;
                        }
                    </style>
                    ${(0,p.z)(e=>e.enableRichSocialReaction,(0,d.nj)({}))}
                    ${(0,p.z)(e=>e.cardActionStatus&f.J.enabled,h.qy`
                        ${(0,p.z)(e=>e.enableRichSocialReaction&&e.enableWCSaveButton,h.qy`
                            ${(0,p.z)(e=>!e.optedOutOfReactions&&e.cardActionStatus&f.J.showMore,d.LW)}
                            ${(0,p.z)(e=>!e.optedOutOfReactions&&e.cardActionStatus&f.J.showFewer,d.tB)}
                        `)}
                        ${(0,p.z)(e=>e.enableWCCardAction,s.L)}
                    `)}
                </div>
                ${(0,p.z)(e=>e.enableHoverCardAction&&!e.optedOutOfReactions,l.p)}
            </msft-content-card>
        </fluent-design-system-provider>
    </fluent-card>
`,b=e=>{let t="width: 100%;";return e.cardSize!==u.uE._2x_2y&&e.cardSize!==u.uE._2x_3y||(t+=" --heading-font-size: 20px; --heading-line-height: 28px;"),e.cardSize!==u.uE._1x_1y&&e.cardSize!==u.uE._1x_2y||!e.useInfopaneSlideTemplate||(t+=" --infopane-title-font-size: 20px;"),t},y=e=>{let t="";return e.cardSize!==u.uE._1x_1y&&e.cardSize!==u.uE._1x_2y||!e.useInfopaneSlideTemplate||(t+='\n            msft-content-card[layout="infoPane"]::part(footer) {\n                padding: 0 16px 4px;\n                margin-bottom: 0;\n                height: 40px;\n            }\n        '),t}},9504:function(e,t,i){"use strict";i.d(t,{e:function(){return a}});var n=i(96950),r=i(11622);const a=n.qy`
<fluent-card
    style="grid-area:${e=>e.gridArea};contain:unset"
    class="${e=>e.cardSize}"
>
    ${e=>(0,r.yN)(e.denseConfigInfo,{properties:{denseData:e.denseData,telemetryObject:e.telemetryObject},memoize:!1,includeTelemetryTag:!1})}
</fluent-card>
`},13025:function(e,t,i){"use strict";i.d(t,{A:function(){return L}});var n=i(6574);var r=function(e){return function(t){return null==e?void 0:e[t]}}({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),a=i(57842),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,s=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var l=function(e){return(e=(0,a.A)(e))&&e.replace(o,r).replace(s,"")},d=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var c=function(e){return e.match(d)||[]},u=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var h=function(e){return u.test(e)},p="\\ud800-\\udfff",f="\\u2700-\\u27bf",v="a-z\\xdf-\\xf6\\xf8-\\xff",g="A-Z\\xc0-\\xd6\\xd8-\\xde",m="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",b="["+m+"]",y="\\d+",w="["+f+"]",$="["+v+"]",C="[^"+p+m+y+f+v+g+"]",k="(?:\\ud83c[\\udde6-\\uddff]){2}",S="[\\ud800-\\udbff][\\udc00-\\udfff]",x="["+g+"]",T="(?:"+$+"|"+C+")",D="(?:"+x+"|"+C+")",A="(?:['’](?:d|ll|m|re|s|t|ve))?",I="(?:['’](?:D|LL|M|RE|S|T|VE))?",M="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",F="[\\ufe0e\\ufe0f]?",P=F+M+("(?:\\u200d(?:"+["[^"+p+"]",k,S].join("|")+")"+F+M+")*"),R="(?:"+[w,k,S].join("|")+")"+P,O=RegExp([x+"?"+$+"+"+A+"(?="+[b,x,"$"].join("|")+")",D+"+"+I+"(?="+[b,x+T,"$"].join("|")+")",x+"?"+T+"+"+A,x+"+"+I,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",y,R].join("|"),"g");var N=function(e){return e.match(O)||[]};var z=function(e,t,i){return e=(0,a.A)(e),void 0===(t=i?void 0:t)?h(e)?N(e):c(e):e.match(t)||[]},E=RegExp("['’]","g");var L=function(e){return function(t){return(0,n.A)(z(l(t).replace(E,"")),e,"")}}},13427:function(e,t,i){"use strict";i.d(t,{s:function(){return n}});const n=i(96950).qy`
<div 
    id="${e=>e.id}"
    style="grid-area:${e=>e.gridArea};
    ${e=>"DisplayAdBanner"===e.type?"display: flex; justify-content: center; overflow: hidden;":""}
    ${e=>"DisplayAdBanner"===e.type&&"_1x_2y"===e.cardSize?"max-width: 300px;":""}
    ${e=>"DisplayAdBanner"===e.type&&"_2x_2y"===e.cardSize?"max-width: 612px;":""}"
    class="${e=>e.cardSize}"
> 
    <display-ads 
        config-instance-src="${e=>e.configInstanceSrc}" 
        instance-id="${e=>e.instanceId}" 
        :enableExtraAdSlug="${e=>e.enableExtraAdSlug}"
        :shimmerIdOverride="${e=>e.shimmerIdOverride}"
        :batchCallAdCountOverride="${e=>e.batchCallAdCountOverride}"
        :pageTypeOverride="${e=>e.pageTypeOverride}"
    >
    
    </display-ads>
</div>
`},18573:function(e,t,i){"use strict";i.d(t,{A:function(){return s}});var n=i(34054),r=i(16670),a=i(18267),o=i(57842);var s=function(e){return function(t){t=(0,o.A)(t);var i=(0,r.A)(t)?(0,a.A)(t):void 0,s=i?i[0]:t.charAt(0),l=i?(0,n.A)(i,1).join(""):t.slice(1);return s[e]()+l}}("toUpperCase")},21e3:function(e,t,i){"use strict";i.d(t,{f:function(){return s}});var n=i(59099),r=i(93468),a=i(65022),o=i(19608);const s={getFeedDataForCard:e=>function(e){try{var t;const{configOptions:i,cardMetadata:n,parentTelemetryObject:r,openLinksInNewTab:a,sdCardActionClickHandler:s,useInlineSvgIcons:l,refreshFeedCallback:d,goToPersonalizeSettingsCallback:c}=e,u="shopping-carousel",h={id:u,childTemplateType:"shopping-carousel-card",openLinksInNewTab:a,sdCardActionClickHandler:s,refreshFeedCallback:d,goToPersonalizeSettingsCallback:c,parentTelemetryObject:r,shoppingCardMetadata:n,shoppingCarouselCardConfigInfo:i&&i,useInlineSvgIcons:l};return(0,o.bw)({id:u,experienceType:null===(t=h.shoppingCarouselCardConfigInfo)||void 0===t||null===(t=t.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},h)}catch(e){(0,r.c_)(e,a.Odo,"Error in Shopping Carousel Mapper")}}(e),viewTemplate:n.j}},23158:function(e,t,i){"use strict";i.d(t,{ml:function(){return a},N5:function(){return r},vj:function(){return o}});const n=["1","2","3","4","6","7","8","9","10","13","17","19","20","24","28","29","30","31","32","34","35","37","40","41","42","44","47","51","80","15","25","26","59","22","23","79","11","69","71","14","27","67","81","75","77","83","85","38","70","72","54","68","52","53","60","46","49","50","82","76","78","84","86","33","61","62","87","88","93","94","95","96","12","18","21","36","39","45","48","63","64","89","90"],r={17:"8",31:"31",49:"14",41:"14",35:"8",4:"4",19:"19",22:"14",23:"23",34:"7",47:"20",60:"7",81:"26",11:"10",37:"10",38:"10",69:"10",70:"10",71:"10",72:"10",92:"91",32:"5",2:"2",101:"1",42:"15",33:"6",61:"6",62:"6",87:"6",88:"6",93:"6",94:"6",95:"6",96:"6",67:"27",68:"27",18:"9",21:"9",36:"9",45:"9",48:"9",63:"9",64:"9",29:"29",102:"28",44:"44",46:"19",80:"50",76:"24",75:"24",83:"77",84:"78",85:"24",86:"24",39:"39"};class a{static getWeatherNormalizedSkyCode(e){return n.includes(e)?e:Object.prototype.hasOwnProperty.call(r,e)?r[e]:e}}const o={d000:"SunnyDayV3",d100:"MostlySunnyDay",d200:"D200PartlySunnyV2",d210:"D210LightRainShowersV2",d211:"D211LightRainSowShowersV2",d212:"D212LightSnowShowersV2",d220:"LightRainShowerDay",d221:"D221RainSnowShowersV2",d222:"SnowShowersDayV2",d240:"D240TstormsV2",d300:"MostlyCloudyDayV2",d310:"D310LightRainShowersV2",d311:"D311LightRainSnowShowersV2",d312:"LightSnowShowersDay",d320:"RainShowersDayV2",d321:"D321RainSnowShowersV2",d322:"SnowShowersDayV2",d340:"D340TstormsV2",d400:"CloudyV3",d410:"LightRainV3",d411:"RainSnowV2",d412:"LightSnowV2",d420:"HeavyDrizzle",d421:"RainSnowV2",d422:"Snow",d430:"ModerateRainV2",d431:"RainSnowV2",d432:"HeavySnowV2",d440:"Thunderstorm",d500:"MostlyCloudyDayV2",d600:"FogV2",d603:"FreezingRainV2",d605:"IcePelletsV2",d705:"BlowingHailV2",d905:"BlowingHailV2",d907:"Haze",d900:"Haze",n000:"ClearNightV3",n100:"MostlyClearNight",n200:"PartlyCloudyNightV2",n210:"N210LightRainShowersV2",n211:"N211LightRainSnowShowersV2",n212:"N212LightSnowShowersV2",n220:"LightRainShowerNight",n221:"N221RainSnowShowersV2",n222:"N222SnowShowersV2",n240:"N240TstormsV2",n300:"MostlyCloudyNightV2",n310:"N310LightRainShowersV2",n311:"N311LightRainSnowShowersV2",n312:"LightSnowShowersNight",n320:"RainShowersNightV2",n321:"N321RainSnowShowersV2",n322:"N322SnowShowersV2",n340:"N340TstormsV2",n400:"CloudyV3",n410:"LightRainV3",n411:"RainSnowV2",n412:"LightSnowV2",n420:"HeavyDrizzle",n421:"RainSnowShowersNightV2",n422:"N422SnowV2",n430:"ModerateRainV2",n431:"RainSnowV2",n432:"HeavySnowV2",n440:"Thunderstorm",n500:"PartlyCloudyNightV2",n600:"FogV2",n603:"FreezingRainV2",n605:"BlowingHailV2",n705:"BlowingHailV2",n905:"BlowingHailV2",n907:"Hazy-Night",n900:"Hazy-Night",xxxx1:"WindyV2"}},23807:function(e,t,i){"use strict";i.d(t,{_:function(){return r}});var n=i(69189);const r=e=>(0,n.s)({cacheName:"feed-ads",getCacheKey:a,maxAgeInMs:e});function a(e,t,i,n){return`${e.replace(/[" ]/g,"").replace(/rid:[^,$]+/g,"").replace(/item=flights:[^&$]+/g,"").replace(/(,){2,}/g,",")}-${t}-${i}-${n}`}},24909:function(e,t,i){"use strict";i.d(t,{Uw:function(){return s},b7:function(){return l},kC:function(){return o},lM:function(){return d}});var n=i(2651),r=i(23158),a=i(93704);function o(e){return"°ฟาเรนไฮด์"===e||"‎°ف"===e||e===n.B.Fahrenheit?{degree:"°F",unit:n.B.Fahrenheit}:"°เซลเซียส"===e||"‎°م"===e||e===n.B.Celsius?{degree:"°C",unit:n.B.Celsius}:(""+e).replace(/\u200e/g,"").includes("F")?{degree:"°F",unit:n.B.Fahrenheit}:{degree:"°C",unit:n.B.Celsius}}function s(e,t){var i,n;if(null==e||null===(i=e.responses)||void 0===i||null===(i=i[0])||void 0===i||null===(i=i.weather)||void 0===i||null===(i=i[0])||void 0===i||!i.current)return null;const a=e.responses[0].weather[0],s="n"===a.current.daytime,{degree:l}=o(e.units.temperature),d=a.current;return{isAlert:a.alerts&&a.alerts.length>0,currentTemperature:d.temp&&d.temp.toString(),ufTemp:d.ufTemp&&d.ufTemp.toString(),pvdrIcon:d.pvdrIcon,symbol:d.symbol,normalizedSkyCode:r.ml.getWeatherNormalizedSkyCode(d.pvdrIcon),shortCap:d.capAbbr,skycode:{children:d.cap},precipitation:{children:a.forecast&&a.forecast.days&&a.forecast.days[0]&&a.forecast.days[0].daily&&null!=a.forecast.days[0].daily.precip?`${a.forecast.days[0].daily.precip}%`:void 0},deepLink:"",degreeSetting:l,uv:Math.floor(d.uv),uvDesc:d.uvDesc,feels:d.feels,humidity:`${Math.floor(d.rh)}%`,windDesc:`${d.pvdrWindDir} ${d.pvdrWindSpd}`,windSpeed:`${d.windSpd} ${e.units.speed}`,windDir:d.windDir,dewPoint:null!=d.dewPt?`${d.dewPt}°`:"N/A",baro:`${a.current.baro} ${e.units.pressure}`,visiblity:`${a.current.vis} ${e.units.distance}`,richCaps:a.current.richCaps,aqi:`${a.current.aqi}`,aqiSeverity:a.current.aqiSeverity,primaryPollutant:a.current.primaryPollutant,isNight:s,currentRaw:d,unitsRaw:e.units,locationRaw:t,alertCount:d.alertCount,alertSignificance:d.alertSignificance,comingWeather:null==a||null===(n=a.current)||void 0===n?void 0:n.comingWeather,life:a.life,source:e.responses[0].source}}function l(e,t){return{...(0,a.Dj)(e),pressureUnit:t.pressure,windGust:null!=e.windGust?`${e.windGust} ${t.speed}`:"N/A",vis:null!=e.vis?`${e.vis} ${t.distance}`:"N/A",time:new Date(e.valid),aqi:e.aqi||0,windSpeedUnit:t.speed,precipitationHeightUnit:t.height}}function d(e){return null==e?"":`${e}°`}},25447:function(e,t,i){"use strict";var n;i.d(t,{i:function(){return c}}),function(e){e.Hour="Hour",e.HourMin="HourMin",e.HourTimezone="HourTimezone",e.HourMinTimezone="HourMinTimezone",e.HourTimezoneLong="HourTimezoneLong",e.HourMinTimezoneLong="HourMinTimezoneLong",e.DayWeek="DayWeek",e.MonthDayYear="MonthDayYear",e.LongMonthDayYear="LongMonthDayYear",e.MonthDay="MonthDay",e.MonthDayNumeric="MonthDayNumeric",e.Year="Year",e.Month="Month",e.MonthShort="MonthShort",e.Day="Day",e.Week="Week",e.WeekLong="WeekLong",e.WeekLongNoLocaleFormat="WeekLongNoLocaleFormat",e.MonthDayWeek="MonthDayWeek",e.MonthDayWeekShort="MonthDayWeekShort",e.MonthDayWeekLong="MonthDayWeekLong",e.YearMonthDayWeekLong="YearMonthDayWeekLong",e.YearMonthLong="YearMonthLong",e.YearMonth="YearMonth",e.MonthLong="MonthLong"}(n||(n={}));const r=new Map([[n.DayWeek,{weekday:"short",day:"numeric"}],[n.LongMonthDayYear,{month:"long",day:"numeric",year:"numeric"}],[n.MonthDayYear,{month:"short",day:"numeric",year:"numeric"}],[n.MonthDay,{month:"short",day:"numeric"}],[n.MonthDayNumeric,{month:"numeric",day:"numeric"}],[n.Year,{year:"numeric"}],[n.Month,{month:"numeric"}],[n.MonthShort,{month:"short"}],[n.Day,{day:"numeric"}],[n.Hour,{hour:"numeric"}],[n.HourMin,{hour:"numeric",minute:"numeric"}],[n.HourTimezone,{hour:"numeric",timeZoneName:"short"}],[n.HourMinTimezone,{hour:"numeric",minute:"numeric",timeZoneName:"short"}],[n.HourTimezoneLong,{hour:"numeric",timeZoneName:"long"}],[n.HourMinTimezoneLong,{hour:"numeric",minute:"numeric",timeZoneName:"long"}],[n.Week,{weekday:"short"}],[n.WeekLong,{weekday:"long"}],[n.WeekLongNoLocaleFormat,{weekday:"long"}],[n.MonthDayWeek,{weekday:"short",month:"short",day:"numeric"}],[n.MonthDayWeekShort,{weekday:"short",month:"numeric",day:"numeric"}],[n.MonthDayWeekLong,{weekday:"long",month:"long",day:"numeric"}],[n.YearMonthDayWeekLong,{weekday:"long",month:"long",day:"numeric",year:"numeric"}],[n.YearMonthLong,{month:"long",year:"numeric"}],[n.YearMonth,{month:"short",year:"numeric"}],[n.MonthLong,{month:"long"}]]);function a(e,t){try{return new Intl.DateTimeFormat(e,t)}catch(t){return{format:t=>new Date(t).toLocaleDateString(e)}}}const o=["en-us","en-gb","el-gr"],s=[n.DayWeek,n.HourTimezoneLong,n.HourMinTimezoneLong,n.MonthDay,n.MonthDayWeekLong,n.MonthShort,n.MonthLong,n.Week,n.WeekLong,n.MonthDayWeek,n.MonthDayWeekShort,n.YearMonthDayWeekLong,n.YearMonthLong,n.LongMonthDayYear,n.MonthDayNumeric],l=new Map([["default",{longPm:"pm",shortPm:"p",longAm:"am",shortAm:"a"}],["el-gr",{longPm:"μ.μ.",shortPm:"μ",longAm:"π.μ.",shortAm:"π"}]]),d=new Map([["default",{hour:"numeric"}],["zh-cn",{hour:"numeric",hour12:!1}],["zh-tw",{hour:"numeric",hour12:!1}],["zh-hk",{hour:"numeric",hour12:!1}]]);class c{constructor(e,t){this.locale=e||"en-us",this.timeZone=t||void 0;try{this.hour12=Intl.DateTimeFormat(this.locale,d.get(this.locale)||d.get("default")).resolvedOptions().hour12}catch(e){}this.localeOption=l.get(this.locale)||l.get("default"),this.timeFormats=new Map,this.timeFormatsEnGb=new Map,this.timeFormatsEnUs=new Map}formatHour(e,t){return this.formatDateTimeFormatText(e,n.Hour,t)}formatYear(e,t){return this.formatDateTimeFormatText(e,n.Year,t)}formatMonth(e,t){return this.formatDateTimeFormatText(e,n.Month,t)}formatMonthShort(e,t){return this.formatDateTimeFormatText(e,n.MonthShort,t)}formatDay(e,t){return this.formatDateTimeFormatText(e,n.Day,t)}formatHourLabel(e){return this.formatHour(e,{excludeSpace:!1})}formatHourMinute(e,t){return this.formatDateTimeFormatText(e,n.HourMin,t)}formatHourTimezone(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n.HourTimezone;return i&&(r=n.HourTimezoneLong),this.formatDateTimeFormatText(e,r,t)}formatHourMinuteTimezone(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n.HourMinTimezone;return i&&(r=n.HourMinTimezoneLong),this.formatDateTimeFormatText(e,r,t)}formatDayWithWeek(e,t){let i=this.formatDateTimeFormatText(e,n.DayWeek,t);if(t&&i.indexOf(",")<0&&i.indexOf(" ")>0){const e=i.split(" ");2!=e.length||isNaN(parseInt(e[0]))||(t.removeWeek?i=e[0]:t.forceWeekdayAhead&&(i=`${e[1]} ${e[0]}`))}return i}formatWeek(e,t){return this.formatDateTimeFormatText(e,n.Week,t)}formatWeekLong(e,t){return this.formatDateTimeFormatText(e,n.WeekLong,t)}formatWeekLongForEn(e,t){return this.formatDateTimeFormatText(e,n.WeekLongNoLocaleFormat,t)}formatYearMonthLong(e,t){return this.formatDateTimeFormatText(e,n.YearMonthLong,t)}formatLongMonthDayYear(e,t){let i=this.formatDateTimeFormatText(e,n.LongMonthDayYear,t);if(t&&t.useComma){const r=this.formatDateTimeFormatText(e,n.LongMonthDayYear,t);i=i.replace(`${r} `,`${r}, `)}return i}formatMonthDayYear(e,t){let i=this.formatDateTimeFormatText(e,n.MonthDayYear,t);if(t&&t.useComma){const r=this.formatDateTimeFormatText(e,n.MonthDay,t);i=i.replace(`${r} `,`${r}, `)}return i}formatMonthDay(e,t){return this.formatDateTimeFormatText(e,n.MonthDay,t)}formatMonthDayNumeric(e,t){return this.formatDateTimeFormatText(e,n.MonthDayNumeric,t)}formatWeekShort(e,t){let i=this.formatDateTimeFormatText(e,n.Week,t);if(i.indexOf(",")<0&&i.indexOf(" ")>0){const e=i.split(" ");2!=e.length||isNaN(parseInt(e[0]))||(i=e[1])}return i}formatMonthDayWithWeek(e,t){let i=this.formatDateTimeFormatText(e,n.MonthDayWeek,t);if(t&&t.forceWeekdayAhead&&i.indexOf(",")<0&&i.indexOf(" ")>0){const e=i.split(" ");2!=e.length||isNaN(parseInt(e[0]))||(i=`${e[1]} ${e[0]}`)}return i}formatMonthDayWithWeekShort(e,t){let i=this.formatDateTimeFormatText(e,n.MonthDayWeekShort,t);if(t&&!t.forceWeekdayAhead&&i.indexOf(",")<i.indexOf(" ")){const e=i.split(",");2==e.length&&(i=`${e[0]} ${e[1]}`)}return i}formatMonthDayWithWeekLong(e,t){let i=this.formatDateTimeFormatText(e,n.MonthDayWeekLong,t);if(t&&!t.forceWeekdayAhead&&i.indexOf(",")<i.indexOf(" ")){const e=i.split(",");2==e.length&&(i=`${e[1]}, ${e[0]}`)}return i}formatDateTime(e,t,i){return this.formatDateTimeFormatText(e,t,i)}getFormatObj(e){let t=e;this.hour12||(e===n.Hour&&(t=n.HourMin),e===n.HourTimezone&&(t=n.HourMinTimezone),e===n.HourTimezoneLong&&(t=n.HourMinTimezoneLong));const i={timeZone:this.timeZone,...r.get(t)};return o.indexOf(this.locale)<0&&s.indexOf(t)<0?this.hour12?(this.timeFormatsEnUs.has(t)||this.timeFormatsEnUs.set(t,a("en-us",i)),this.timeFormatsEnUs.get(t)):(this.timeFormatsEnGb.has(t)||this.timeFormatsEnGb.set(t,a("en-gb",i)),this.timeFormatsEnGb.get(t)):(this.timeFormats.has(t)||this.timeFormats.set(t,a(this.locale,i)),this.timeFormats.get(t))}formatDateTimeFormatText(e,t,i){const n=this.getFormatObj(t).format(e);let r=this.postProcess(n,i)||"";return r=decodeURIComponent(encodeURIComponent(r).replace(/%E2%80%AF/gi,"%20")),r}postProcess(e,t){let i=e;return t&&t.excludeComma&&(i=i.replace(/,/g,"")),t&&t.excludeSpace&&(i=i.replace(/\s/g,"")),i}}},26159:function(e,t,i){"use strict";i.r(t),i.d(t,{FeedManagerWithClientAd:function(){return Qe},getSharedTelemetryLegacyCardMappers:function(){return Vo}});var n=i(69816),r=i(94354),a=i(14586),o=i(65022),s=i(93468),l=i(14383),d=i(3304),c=i(19548);const u=["cbypass","activityId","prerender","timeOut","caller","infopaneCount","edgExpMask","skipRetry","dhp","overlay"],h="ddd-tmpl",p="SuperFeedDataProviderForMobile",f="SuperFeedDataProvider";function v(e,t,i){if("1"===c._3.getQueryParameterByName(e,window.location.href)){const n={logwporeq:o.gCQ,logwpores:o.qlj},r={};new Headers(i.headers).forEach((e,t)=>{"Cookie"!==t&&(r[t]=e)});const a={headers:JSON.stringify(r),url:t,...i};(0,s.vV)(n[e],"",void 0,a,!1)}}function g(e,t){if(!function(e){if(!e||null==e||!e.sections)return!1;if(Array.isArray(e.sections)&&e.sections.every(e=>e.region))return!1;return!0}(e))return e;const{sections:i,nextPageUrl:n,adsMetadata:r,pageContext:a}=e;return{nextPageUrl:n,sections:[...i.filter(e=>e.region),{region:"river",subSections:i.filter(e=>!e.region)}],adsMetadata:r,pageContext:a,...t}}function m(e){return null!=e&&e.headers?JSON.stringify({"Akamai-Request-ID":e.headers.get("Akamai-Request-ID"),"Akamai-Server-IP":e.headers.get("Akamai-Server-IP"),"X-MSEdge-Ref":e.headers.get("X-MSEdge-Ref")}):""}var b=i(77246),y=i(27261),w=i(17720),$=i(19993),C=i(57759),k=i(30817);var S=i(17254),x=i(96592),T=i(76166),D=i(5044),A=i(67387),I=i(89980),M=i(2509),F=i(12870),P=i(29252),R=i(93532),O=i(97643),N=i(77206),z=i(45794),E=i(98216),L=i(53064),H=i(41625),_=i(59545),V=i(45083);const j=[];function W(){const e=W;return new Promise(t=>{void 0!==e.cache&&t(e.cache);const i=n=>{n>3&&(e.cache=null,t(null));const r=document.getElementById("ntp-diagnostics");r&&r.innerText?(e.cache=r,t(r)):(n++,setTimeout(()=>i(++n),3e3))};i(0)})}const U=(e,t)=>E.YT.addOrUpdateIdxId(e,t),B=async(e,t)=>{try{(e||t)&&j.push({id:e,debug:t}),await Promise.all([(0,_.Qc)(),(0,V.GP)()]);const i=await W();if(i&&i.innerText){const e=JSON.parse(i.innerText);Object.assign(e,{traceInfo:j}),Object.assign(e,{prgDiagnostics:q()}),Object.assign(e,{authTrail:J()}),Object.assign(e,{countryConfidenceFactor:(0,R.m)()}),i.innerText=JSON.stringify(e)}}catch{(0,s.vV)(o.YTQ,"Error throwed during update idxid into diagnostic element")}},q=()=>{const e=F.Rb&&F.Rb.Diagnostics||{};return e&&(0,O.RC)(JSON.stringify(e))},J=()=>{try{return(0,L.U5)()}catch{E.YT.sendAppErrorEvent({...o.ptZ,message:"Error throwed when getCompressedRecords doesn't return anything for NTP"})}};var Z=JSON.parse('{"nextPageUrl":"","sections":[{"region":"river","subSections":[{"dataTemplate":"msft-full-wide-one-card-five-col","layoutTemplate":"msft-full-wide-one-card-five-col","cards":[{"type":"filteredChannels","isLocalContent":false,"galleryItemCount":0,"subCards":[],"subscriptionProductType":"undefined","position":0,"notificationState":"undefined","isWorkNewsContent":false,"isShowSelectMoreMessage":false}]},{"dataTemplate":"msft-full-wide-one-card-five-col","layoutTemplate":"msft-full-wide-one-card-five-col","cards":[{"type":"InterestManager","isLocalContent":false,"galleryItemCount":0,"subscriptionProductType":"undefined","position":0,"notificationState":"undefined","isWorkNewsContent":false}]}]}],"isPartial":false}'),G=i(83003),Y=i(10117);class X{constructor(e){this.shouldRetryInOtherDomain=!1,this.updateQSParam=(e,t)=>{const i=new RegExp("([?&])"+t+"=.*?(&|$)","i");return e.match(i)?e.replace(i,"&"):e},this.config=e}async fetchFromWpoService(e,t,i){if(i){var n;const i=(0,b.S)()?1e4:void 0,r=await Y.V_.getEarlyWpoFeedData(i),a=void 0===r||(null==r||null===(n=r.appError)||void 0===n?void 0:n.id);if(Y.V_.enableEarlyMainFeedRequest=!1,!a||!(0,b.S)())return r;if(!e.skipRetry){const i=await this.fetchFromService(e,t);if(i)return i}}else{const i=await this.fetchFromService(e,t);if(i)return i}if(this.shouldRetryInOtherDomain){e.domainOverride=a.iw,e.requestPathOverride=a.nm;const i=await this.fetchFromService(e,t,!0);if(i)return i}return this.getCachedResponse(e)}async getCachedResponse(e){if((e.skipRetry||e.enableCachedResponseFallback)&&(0,b.S)()&&window.caches&&e.serviceUrl&&e.serviceWorkerCachePrefix)try{const i=(await caches.keys()).find(t=>t.startsWith(e.serviceWorkerCachePrefix||""));if(!i)return;const n=await caches.open(i);if(!n)return;const r=this.normalizeUrl(e.serviceUrl),a=await n.keys()||[],l=a.filter(e=>e.url&&this.normalizeUrl(e.url)===r);for(const e of l){const i=await n.match(e.url);if(i){const e=await i.json();if(e){var t;const n=(null===(t=i.headers)||void 0===t?void 0:t.get("date"))||"",r=Date.parse(n),a=isNaN(r)?"":(Date.now()-r)/1e3;return(0,s.vV)(o.V$N,"",void 0,{...o.V$N.pb,cacheAgeSeconds:a}),e}}}(0,s.vV)(o.vq$,"",void 0,{...o.vq$.pb,numCachedRequests:a.length,numMatches:l.length,serviceUrl:e.serviceUrl})}catch(t){(0,s.vV)(o.vq$,"An error occurred while retrieving a cached response. "+t.message,void 0,{...o.vq$.pb,isFirstPage:!e.nextPageUrl,url:e.serviceUrl,requestId:e.requestId,stack:t.stack})}}async fetchFromService(e,t){var i,n,r,u,R;let O,N=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const z=(0,V.EZ)();let L;(0,b.S)()&&(L=!(window&&window.chrome&&window.chrome.embeddedSearch),E.YT.addOrUpdateTmplProperty("privatew",`${L}`)),!(0,b.S)()&&null!==(i=this.config)&&void 0!==i&&i.requestToOrigin&&(e.domainOverride=a.iw,e.requestPathOverride=a.nm),null!==(n=this.config)&&void 0!==n&&n.enableResetServiceURL&&(e.domainOverride=a.Eh);const H=e.useNextPageUrl&&e.paginationTimeoutMs?e.paginationTimeoutMs:e.timeoutMs,_={enableRightRailColumn:e.powerRightRailWithWpo,fdhead:undefined,nextPageUrl:e.useNextPageUrl?e.nextPageUrl:"",requestType:e.requestType?l.Yw[e.requestType]:l.Yw.wpoService,refreshType:z?"bgtask":void 0,timeoutMs:e.query&&e.customFeedTimeoutMs?e.customFeedTimeoutMs:H||2e3,disableContent:e.disableContent,isRetry:N,private:L,enableWpoAdPlacements:(null===(r=this.config)||void 0===r?void 0:r.auctionRidOverride)&&!z,adsTimeout:null!==(u=this.config)&&void 0!==u&&u.auctionRidOverride?600:void 0};var j;if(!e.nextPageUrl&&S.T3.IsHeroNTP&&(e.pageOcid=c._3.getQueryParameterByName("ocid",(0,y.iA)()),e.segment=c._3.getQueryParameterByName("segment",(0,y.iA)()),e.scenario=c._3.getQueryParameterByName("scenario",(0,y.iA)()),"wind_spot_2"!==e.pageOcid&&"wind_spot_desktop"!==e.pageOcid||(e.assetId=c._3.getQueryParameterByName("assetId",(0,y.iA)())),e.timeoutMs=(null===(j=this.config)||void 0===j?void 0:j.heroTimeoutMs)||1500,e.scenario&&(0,b.S)()&&"Weather"===e.segment)){const e=this.updateQSParam(window.location.href,"scenario");window.history.replaceState({},"",e)}const{requestParams:W,url:q}=await async function(e,t,i){const{nextPageUrl:n,requestType:r}=e,a={...e,audienceMode:t,nextPageUrl:n,requestType:r?l.Yw[r]:l.Yw.wpoService,timeoutMs:2e3,viewportSize:window&&`${window.innerWidth}x${window.innerHeight}`,...i};return{requestParams:await d.h.requestInit(a),url:await d.h.buildServiceRequestURL(a)}}(e,null===(R=S.T3.CurrentRequestTargetScope)||void 0===R?void 0:R.audienceMode,_),J=c._3.getQueryParameterByName("ssrFeedTimeOut",window.location.href);!(0,b.S)()&&J&&(_.timeoutMs=parseInt(J));const G=e&&e.isMobile&&e.mobileUrl||q.href,Y=decodeURIComponent(G);v("logwporeq",Y,W),this.requestQueryParams=new x.m(q.search),q.search=this.requestQueryParams.toString(),$.WR.addTelemetryTracingQueryParam(q);const X=(0,k.ZF)();X.WpoCallStart=Math.round((0,k.gU)());const{nextPageUrl:Q,pageScenario:K,overrideCSRTimeoutInMs:ee,overrideSSRTimeoutInMs:te}=e||{};let ie,ne="";try{var re,ae,oe;let i=(0,b.S)()?1e4:800;(0,b.S)()&&ee?i=ee:!(0,b.S)()&&te&&(i=te),t&&t();const n=!(e.useNextPageUrl&&Q),r=5e3;ie=(()=>{let e=0;const t=n?o.ESk:o.YeZ;return setInterval(()=>{e+=1,E.YT.sendAppErrorEvent({...t,pb:{...t.pb,url:Y,isFirstPage:n,activityId:S.T3.ActivityId,isPrerender:z},message:`Request didn't finish in ${r*e}ms`})},r)})();const a=await(0,C.w)(()=>(0,b.S)()?(0,C.Y)(Y,W,i,e.skipRetry):(0,T.hv)(G,i,W),`${f}.fetchFromWpoService`,i||0,e.skipRetry);ie&&(clearInterval(ie),ie=null),ne=null==a||null===(re=a.headers)||void 0===re?void 0:re.get("ddd-debugid"),w.vv.set("OneServiceResponseDebugId",ne),v("logwpores",Y,a);const{status:l,statusText:d,headers:c}=a||{};if("following"===e.feedName){const e=new URLSearchParams(q.search),t="activityId",i=e.get(t)||"";if(i&&i!=S.T3.ActivityId&&(0,s.vV)(o.JQU,"ActivityId mismatched",void 0,{...o.JQU.pb,clientActivityId:S.T3.ActivityId,serviceSideActivityId:i,debugId:ne}),(204===l||404===l)&&n){var se;const e=Z;return 204===l&&null!=e&&null!==(se=e.sections)&&void 0!==se&&null!==(se=se[0].subSections)&&void 0!==se&&null!==(se=se[0].cards)&&void 0!==se&&se[0]&&(e.sections[0].subSections[0].cards[0].isShowSelectMoreMessage=!0),e}}const u={url:Y,status:l,statusText:d,requestHeaders:JSON.stringify((0,D.bl)(W.headers)),responseHeaders:m(a),debugId:ne,isPrerender:z,activityId:S.T3.ActivityId,isFirstPage:n,isRetriedRequest:N};if(!e.disableContent&&204===a.status||!a){const e=function(e,t,i,n){let r={};const a="Service returned no content, 204 status.",l="OneService response was null.";r=n?{204:{appError:o.W8g,message:`${p}: ${a}`},0:{appError:o.G1W,message:`${p}: ${l}`}}:{204:{appError:t?o.isL:o.pQh,message:`${f}: ${a}`},0:{appError:t?o.fHH:o.$UT,message:`${f}: ${l}`}};const{appError:d,message:c}=204===(null==e?void 0:e.status)?r[204]:r[0];return(0,s.vV)(d,c||"",void 0,{...i,isFirstPage:t},!1),d}(a,n,u);return!(0,b.S)()&&e===o.fHH?void 0:{sections:[],appError:e,debugId:ne}}let y,$;if(c){if(c.get(A.pc.isStatic)){O=!0;const e=z?o.ijP:o.qNq;(0,P.uw)(O),E.YT.sendAppErrorEvent({...e,pb:{...e.pb,isPrerender:z,isFirstPage:n,activityId:S.T3.ActivityId,responseHeaders:m(a),url:Y,debugId:ne,isRetriedRequest:N},message:"Fell back to static content on the feeds call"})}const e=c.get(h);e&&E.YT.addOrUpdateTmplString(e);const t=c.get(A.pc.traceId);"edgeChromium"==S.T3.AppType?(y=U(t,!Q),(0,b.S)()&&B(t,ne)):(y=U(t,!Q),(0,P.Ig)(ne,!Q)),$=c.get(A.pc.userType)}const k=(0,b.S)()&&performance.now(),x=await a.json(),{serviceContext:F,cacheAgeSeconds:R,isPartial:L,metadata:H,authContext:_}=x;if(k&&X&&(X.FeedResponseJsonReadTime=Math.round(performance.now()-k)),F&&F.tmpl){const e=F.tmpl;E.YT.addOrUpdateTmplString(e)}if(function(e,t,i,n){const{swCacheEnabled:r,cacheTriggeredReason:a,sections:l,value:d}=e;if(n||l&&l.length)if(!n||d&&d.length&&d[0]&&d[0].subCards&&d[0].subCards.length){if(r){const e=`${i?p:f}: Service Worker Cached Data Triggered.`;(0,s.vV)(o.QFX,e,void 0,t,!1);const n={40601:{appError:o.b6v,message:`${i?p:f}: Service Worker Triggered due to fetch error.`},40602:{appError:o.EuX,message:`${i?p:f}: Service Worker Triggered due to wpo service error.`},40605:{appError:o.T0u,message:`${i?p:f}: Service Worker Triggered due to Status 204 no content.`},40606:{appError:o.byY,message:`${i?p:f}: Service Worker Triggered due to static content loaded.`},40607:{appError:o.fIj,message:`${i?p:f}: Service Worker Triggered due to wpo service returns empty section.`},40608:{appError:o.oOL,message:`${i?p:f}: Service Worker Triggered due to static fallback returns empty section.`},40609:{appError:o.kwp,message:`${i?p:f}: Service Worker Triggered due to network timeout.`}};if(a){const{appError:e,message:i}=n[a];(0,s.vV)(e,i||"",void 0,t,!1)}}}else{let e,n=`${i?p:f}: `;d&&d.length&&d[0]?(n+="Empty subCards on the feed call.",e=o.zwc):(n+="Empty value on the feed call.",e=o.R1m),(0,s.vV)(e,n,void 0,t,!1)}else{const e=i?o.L36:o.oup,n=`${i?p:f}: Empty Section on the feed call.`;(0,s.vV)(e,n,void 0,t,!1)}}(x,{...u,cacheAgeSeconds:R}),null!=F&&F.preRenderDisabled)return F.debugId&&E.YT.addOrUpdateCustomProperty("PartialId",F.debugId),{isPartial:L,serviceContext:F};if("following"===e.feedName&&200===a.status&&n){const e=Z;if(!(x.sections&&x.sections.some(e=>"river"===e.region))&&x.sections&&e&&e.sections&&e.sections.length){const t=x.sections.filter(e=>"overlay"===e.region);t&&t.length&&x.sections.push(e.sections[0])}}if("gaming"===e.feedName&&200===a.status&&n&&(0,b.S)()&&null!==(ae=x.serviceContext)&&void 0!==ae&&ae.tmpl&&!(0,I.Lg)().getObject("gaming-feed-engagement"))try{const e=Math.floor((new Date).getTime()/1e3),t=x.serviceContext.tmpl.split(";"),i={};for(let e=0;e<t.length;e++)t[e].includes("gamingFeedEngagementCount30D")&&t[e].split(",").forEach(e=>{const t=e.split(":"),[n,r]=t,a=r?Number.parseInt(r,10):null;"gamingFeedEngagementSum7D"!==n&&"gamingFeedEngagementCount7D"!==n&&"gamingFeedEngagementSum30D"!==n&&"gamingFeedEngagementCount30D"!==n||null===a||(i[n]=a)});i.lastUpdated=e;const n=5;Object.keys(i).length===n&&(0,I.Lg)().setObject("gaming-feed-engagement",i)}catch(e){}if(O||(0,M.DZ)(_),"winfullpage"===K&&x&&x.sections&&x.sections.length>0){const e=x.sections;(e[0].subSections&&e[0].subSections.length>0?e[0].subSections:e).some(e=>!e.layoutTemplate)&&E.YT.sendAppErrorEvent({...o.dis,pb:{...o.dis.pb,url:Y,dataTemplate:x.sections.map(e=>e.dataTemplate).join(","),layoutTemplate:x.sections.map(e=>e.layoutTemplate).join(",")},message:"LayoutTemplate field missing for sections on the feeds call"})}if(!(x&&(e.disableContent||x.sections&&x.sections.length))){const e=O?o.y09:o.oup;(0,s.vV)(e,"Empty Section on the feed call",void 0,{...e.pb,url:Y,isFirstPage:n,activityId:S.T3.ActivityId,isPrerender:z,debugId:ne,isRetriedRequest:N})}null===(oe=this.config)||void 0===oe||!oe.auctionRidOverride||(0,V.EZ)()||(0,b.S)()||this.backfill1SAdWithNews(x);const j="byregion"!=e.wpoSchema,J={traceIdIndex:y,metadata:H,userType:$,debugId:ne,serviceContext:F};return j?g(x,J):{...x,...J}}catch(t){ie&&(clearInterval(ie),ie=null);const i=["Service Request Timed out","Fetch for https://"],n=["TypeError: Failed to fetch"];let r;const a=!Q;let s;if(this.shouldRetryInOtherDomain=a&&!e.domainOverride&&F.Rb.CurrentFlightSet.has("prg-retryapimsn"),i.some(e=>{var i;return null==t||null===(i=t.message)||void 0===i?void 0:i.includes(e)})){const e=z?o.LRf:o.aSm;r=a?e:o.acy,s=!0,r===o.aSm&&this.shouldRetryInOtherDomain&&!N&&(r=o.f6)}else r=n.some(e=>`${t}`.includes(e))?this.shouldRetryInOtherDomain?o.Bz_:o.SXF:this.shouldRetryInOtherDomain?o.NRf:o.IKV;const l={...r,message:"Error while fetching OneService response",pb:{...r.pb,url:Y,activityId:S.T3.ActivityId,requestHeaders:JSON.stringify((0,D.bl)(W.headers)),customMessage:`${t}`,isPrerender:z,debugId:ne,isRetry:this.shouldRetryInOtherDomain,domainOverride:e.domainOverride??"",isRetriedRequest:N}};return E.YT.sendAppErrorEvent(l),{appError:l,userEndError:s,debugId:ne}}}backfill1SAdWithNews(e){var t,i,n;if(null===(t=e.sections)||void 0===t||!t.length)return;const r=null===(i=e.sections.find(e=>"backup"===e.region))||void 0===i||null===(i=i.subSections)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.cards,a=null===(n=e.sections.find(e=>"river"===e.region))||void 0===n||null===(n=n.subSections)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.cards;null==a||a.forEach((e,t)=>{(e.type===G.pL.NativeAd&&c._3.getQueryParameterByName("mockNo1SNative",window.location.href)||e.type===G.pL.CmsAd&&c._3.getQueryParameterByName("mockNo1SCms",window.location.href))&&(e.data=null),e.type!==G.pL.NativeAd&&e.type!==G.pL.CmsAd||e.data||((0,s.c_)(null,o.MtZ,`Ad for ${e.type} not found in feed response.`,`cardData: ${JSON.stringify(e)}`),null!=r&&r.length?a[t]=r.shift():(0,s.c_)(null,o.q9J,"Empty backup region"))})}normalizeUrl(e){try{const t=new URL(e);u.forEach(e=>t.searchParams.delete(e));return decodeURIComponent(t.toString()).replace("/serviceak/","/service/").replace("api.msn.com/","assets.msn.com/").replace("api.msn.cn/","assets.msn.cn/")}catch(e){return""}}}var Q=i(84278),K=i(34299),ee=i(43434),te=i(28006),ie=i(8701),ne=i(84855),re=i(99928),ae=i(40160),oe=i(64065),se=i(74195),le=i(1732),de=i(98793),ce=i(41820),ue=i(14535),he=i(85450),pe=i(6916);const fe="https://account.microsoft.com/privacy/ad-settings",ve=e=>e===G.pL.ShoppingInfopaneAd1||e===G.pL.ShoppingInfopaneAd2||e===G.pL.ShoppingInfopaneAd3||e===G.pL.ShoppingInfopaneAd4;function ge(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:612,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:304;if(e){const n=new URL(e);return i&&n.searchParams.set("h",i.toString()),t&&n.searchParams.set("w",t.toString()),n.toString()}}function me(e){try{var t;if(null!=e&&null!==(t=e.placement)&&void 0!==t&&t.shoppingInfopaneAdData){var i,n;const t=JSON.parse(null==e||null===(i=e.placement)||void 0===i?void 0:i.shoppingInfopaneAdData),s=null==t||null===(n=t.shoppingEntities)||void 0===n?void 0:n[0];if(s){var r;const t=s.clickPingUrl+`&PageId=${E.YT.getRequestId()}&ct=ShoppingNTPInfopane`,i={title:s.title,destinationUrl:t,imageUrl:ge(null===(r=s.imageInfo)||void 0===r?void 0:r.sourceImageUrl),providerName:s.seller,adChoiceIconUrl:fe,isShoppingInfopaneAd:!0};return{id:s.id||(a="infopane",o=e.regionIndex,`${a}_${o}`),regionIndex:e.regionIndex,isBackfill:!1,items:[i],privacyUrl:fe,region:"infopane",adLabelText:"广告",isShoppingInfopaneAd:!0}}}return}catch(e){return}var a,o}function be(e,t){return{...e,placement:t,wpoAdRank:void 0,id:t.id}}var ye=i(75538),we=i(68706),$e=i(65907),Ce=i(99863),ke=i(7922),Se=i(23807),xe=i(15003),Te=i(96048),De=i(9192),Ae=i(89151),Ie=i(53685),Me=i(88294),Fe=i(13312),Pe=i(24315),Re=i(79426),Oe=i(70177),Ne=i(88296),ze=i(35849),Ee=i(74227),Le=i(56644),He=i(20292),_e=i(20392),Ve=i(29307),je=i(80164),We=i(38405),Ue=i(74956);function Be(e,t,i){if(e){var n,r;const a=!e.isStatic,o=(null===(n=e.serviceContext)||void 0===n?void 0:n.debugInfo)&&!e.serviceContext.debugInfo.includes("IsWeatherSegmentNotEligible:true"),s="edgeChromium"===S.T3.AppType||"windows"===S.T3.AppType,l=!(null!==(r=e.serviceContext)&&void 0!==r&&r.preRenderDisabled),d=1!==t,c=function(e){if(e.nextPageUrl){const t=new URLSearchParams(e.nextPageUrl);return"StaticFallback"===(null==t?void 0:t.get("ocid"))}return!1}(e);return!(!(a&&o&&s&&l&&!i&&d)||c)}return!1}var qe=i(39619),Je=i(69913),Ze=i(27597),Ge=i(87405),Ye=i(57226);const Xe=(e,t)=>`adslot-${e}-${t}`;class Qe extends Pe.gL{constructor(e){var t;super(e),t=this,this.options=e,this.isFirstAdRender=!0,this.isFirstAdRenderedDelayed=!0,this.adPrerenderBlockingPromise=new Re.e,this.shouldUpdateCache=!0,this.shouldPredictAds=!0,this.mappedRiverCardsCount=1,this.mappedRightRailCardsCount=1,this.mappedNativeAdCount=1,this.mappedCmsAdCount=1,this.sectionsInFirstPage=1,this.staledPartialFeed=!1,this.disablePrerenderFeed=!1,this.backupRegionStatus="",this.backfillCards=[],this.backfillCardIndex=0,this.backfillCountMap=new Map,this.backfillSlotSet=new Set,this.backfillCompleteSet=new Set,this.missAdCountMap=new Map,this.enableBackfillContent=!1,this.sdCardsToBackfill=new Map,this.backfilledSdCardCount=0,this.buyDirectAdIndex=[],this.hasPivotChanged=void 0!==F.Rb.LastSelectedPivot&&F.Rb.LastSelectedPivot!==F.Rb.SwitchedPivot,this.activeIndex=-1,this.cachedSamAds=new Map,this.adTrackingCount=new Map,this.riverAdIndexPerSection=[],this.cmsAdIndexPerSection=[],this.isFeedUpdatedOnScroll=!1,this.edgExpMask="",this.isNTPPeek=!1,this.largestWpoAdRankAllColumns=new Map,this.largestWpoAdRankPerWpoResponse=new Map,this.isFeedStaleWithPartialResponse=()=>this.staledPartialFeed,this.isPrerenderFeedCallDisabled=()=>this.disablePrerenderFeed,this.setPrerenderFeedCallDisabled=e=>{this.disablePrerenderFeed=e},this.isFeedStaleWithThresholdReached=()=>{var e;const t=(0,he.G)(),i="dhp"==(null===(e=S.T3.CurrentRequestTargetScope)||void 0===e?void 0:e.pageType)?this.config.dhpEntireRiverStaleMinutes:this.config.entireRiverStaleMinutes;return void 0!==i&&t>i},this.isSDCardsStaleWithThresholdReached=()=>{const e=(0,he.G)();return void 0!==this.config.sdCardStaleMinutes&&e>this.config.sdCardStaleMinutes},this.updateStaledPartialFeed=()=>(this.staledPartialFeed=!1,this.callRefreshRegionsData(),this.unblockAdsOnPrerenderedFeed(),this.getPageRevalidateResultAsync()),this.updateDisabledPrerenderFeed=()=>(this.disablePrerenderFeed=!1,E.YT.addOrUpdateTmplProperty("disablePrerenderFeedUpdate",(new Date).getTime().toString()),this.callRefreshRegionsData(),this.unblockAdsOnPrerenderedFeed(),this.getPageRevalidateResultAsync()),this.getRequestedColCount=()=>this.requestedColCountForWaterfallFeed,this.isPartialResponse=()=>!!(this.lastResponse&&this.lastResponse.serviceContext&&this.lastResponse.serviceContext.preRenderDisabled),this.isLastResponseSuccessful=()=>this.lastResponse&&this.lastResponse.status&&this.lastResponse.status===n.EY.Success,this.wrapUpFeedSsr=()=>{this.sectionsRenderComplete.decrease(),this.ssrOrHydrateSubsequentSections(!1)},this.waterfallAdSectionsIntersections=(e,t)=>{let i=this.config.adsSectionIntersectObsMargin||0;this.config.adsDeepRiverSectionThreshold&&t<this.config.adsDeepRiverSectionThreshold&&(i=this.config.adsPrefetchMargin||0),this.config.adsDeepRiverPrefetchThreshold&&t>this.config.adsDeepRiverPrefetchThreshold&&(i=this.config.adsDeepRiverPrefetchObsMargin||0);const n=new IntersectionObserver(e=>{if(!e.some(e=>e.isIntersecting))return;n.disconnect();const i=t;this.logDeepRiverAdsSectionServed(i),this.adsServingDeferredMetadata[i]&&((0,pe.D8)(this.adsServingDeferredMetadata[i],"river"),this.adsServingDeferredMetadata[i]=[]),requestAnimationFrame(()=>this.serveAds(i))},{rootMargin:`0px 0px ${i}px 0px`});if(null==e||e.forEach(e=>{n.observe(e)}),"edgeChromium"===S.T3.AppType&&F.Rb.IsPrerender&&(this.config.batch8AdsOnPeak&&2===this.sectionsInFirstPage&&2===t||this.config.batch8AdsOnPeakControl&&1===this.sectionsInFirstPage&&2===t)){var r;const{selectedFeedDisplaySetting:t}=(null===(r=(0,ze.zP)(te.h$))||void 0===r?void 0:r.getCurrentState())??{};if(t&&"peek"===t){var a,o;const t=e[e.length-1],i=null==t||null===(a=t.getRootNode())||void 0===a?void 0:a.host,n=null==i||null===(o=i.shadowRoot)||void 0===o?void 0:o.firstElementChild,r=new IntersectionObserver((e,t)=>{e.forEach(e=>{null!=e&&e.isIntersecting&&(E.YT.addOrUpdateTmplProperty("secondSectionFirstCard","1"),t.disconnect())})},{threshold:1});n&&r.observe(n)}}},this.addAdPlacementLevelSignals=e=>{var t;if(null!==(t=e.region)&&void 0!==t&&t.includes("infopane")){var i,n;const t=(null===(i=this.river)||void 0===i||null===(i=i[0])||void 0===i||null===(i=i.waterfall)||void 0===i?void 0:i.wideCard)||(null===(n=this.waterfall)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.wideCard),s=(null==t?void 0:t.cardElement)||(null==t?void 0:t.outerCSCard);let l=this.config.addAdBrandSafetySignals?this.createPlacementSignalWithBrandSafetyInfo(t):{};var r,a;if(this.config.passAdOcidRegSize)l={...l,pageRegion:(0,He.aW)(e.region),cardSize:{w:null==t||null===(r=t.telemetryExt)||void 0===r?void 0:r.width,h:null==t||null===(a=t.telemetryExt)||void 0===a?void 0:a.height}};if(this.config.enableAddingAdCoords)if(s){const e=s.getBoundingClientRect();e&&(l.coords={x:e.left,y:e.top})}else{const e=this.nativeAdHelper.getCoordsCache("infopane");if(e){var o;const t="true"===(null===(o=(0,I.Lg)())||void 0===o?void 0:o.getItem(le.Ph));l={...l,...e,isCoordsInvalidated:t}}}e.placementLevelSignals=Array(e.indices.length).fill(l)}else e.placementLevelSignals=e.indices.map(t=>{var i;const n=`nativead-${e.region}-${t}`;let r;null===(i=this.river)||void 0===i||i.forEach(i=>{var a,o;if(r)return;const s=(null==i||null===(a=i.waterfall)||void 0===a||null===(a=a.columns)||void 0===a?void 0:a[0])||(null==i||null===(o=i.waterfall)||void 0===o?void 0:o.defaultLayout);r=null==s?void 0:s.find(e=>e.id===n),!r&&this.config.adsPlacementForPeekView&&"river"===e.region&&(r=null==s?void 0:s.find(e=>e.id===`nativead-peekriver-${t}`)),!r&&this.config.adsPlacementForPeekView&&"peekriver"===e.region&&(r=null==s?void 0:s.find(e=>e.id===`nativead-river-${t}`))});let a=this.config.addAdBrandSafetySignals?this.createPlacementSignalWithBrandSafetyInfo(r):{};var o,s;this.config.passAdOcidRegSize&&(a={...a,pageRegion:(0,He.aW)(e.region),cardSize:{w:null===(o=r)||void 0===o||null===(o=o.telemetryExt)||void 0===o?void 0:o.width,h:null===(s=r)||void 0===s||null===(s=s.telemetryExt)||void 0===s?void 0:s.height}});if(!r||!this.config.enableAddingAdCoords)return a;const l=r.cardElement||r.outerCSCard;if(l){const e=l.getBoundingClientRect();e&&(a.coords={x:e.left,y:e.top})}else{var d;const e=this.nativeAdHelper.getCoordsCache(n),t="true"===(null===(d=(0,I.Lg)())||void 0===d?void 0:d.getItem(le.Ph));e&&(a={...a,...e,isCoordsInvalidated:t})}return a})},this.createPlacementSignalWithBrandSafetyInfo=e=>{var t,i;if(!e)return{clientLayoutDebugInfo:"NoCard"};const n=`${this.layout}-${e.regionIndex??"X"}-${e.wpoAdRank??"X"}-${e.wpoRank??"X"}-${e.wpoId??"X"}-${e.column??"X"}`;if(this.config.enableAddingAdjIdsEarlier&&e.adjacentCardIds)return{adjacentCardIds:e.adjacentCardIds,isPartialBrandSafety:e.isPartialBrandSafety,clientLayoutDebugInfo:n};if(!e.wpoId||"number"!=typeof e.column||e.column<1)return{clientLayoutDebugInfo:n};const r=null===(t=this.masterLayoutCardList)||void 0===t||null===(t=t.river)||void 0===t?void 0:t[this.layout],a=e.column-1,o=null==r||null===(i=r[a])||void 0===i||null===(i=i.cards)||void 0===i?void 0:i.find(t=>t.wpoId===e.wpoId);let s=null==o?void 0:o.isPartialBrandSafety;var l;this.config.batch8AdsOnPeak&&F.Rb.IsPrerender&&"peek"===this.feedDisplaySetting&&(2===(null==e?void 0:e.regionIndex)&&null!=e&&null!==(l=e.id)&&void 0!==l&&l.includes("river")&&(s=!0));return o?{adjacentCardIds:o.adjacentCardIds,isPartialBrandSafety:s,clientLayoutDebugInfo:n}:{clientLayoutDebugInfo:n}},this.updateAdsInWaterfall=(e,t,i)=>{const n=this.mapWaterfallFeedData(e,{region:t,parentTelemetryObject:this[Pe.r6[t]]}),r=[],a=[],o=[],s=[],l=n.defaultLayout,d=l[0].childTemplateType,c="responsive-infopane"===d||"infopane-card"===d;for(let e=0;e<l.length;e++){const t=l[e];"nativead"===t.type?r.push(t):"cmsad"===t.type?a.push(t):"firstpartyad"===t.type?o.push(t):ve(t.type)&&s.push(t)}let u=[];i.size>0&&(u=n.defaultLayout.filter(e=>[...i.values()].indexOf(e.id)>-1));const h=(e,t,n,r)=>{const a=t.findIndex(t=>t.id===e.id);if(a>-1)return n[r].wpoRank&&(t[a].wpoRank=n[r].wpoRank),n.splice(r,1,t[a]),t[a];if(i.has(e.id)){const t=i.get(e.id),a=u.find(e=>e.id===t);var o,s;if(a)if(!window.isSSRCompleted||null!==(o=Oe.gn.get(this.feedElementTagName))&&void 0!==o&&o.topDownHydrateComplete.wasSet())a.wpoRank=n[r].wpoRank,a.wpoAdRank=n[r].wpoAdRank,n.splice(r,1,a),i.delete(e.id);else null===(s=Oe.gn.get(this.feedElementTagName))||void 0===s||s.topDownHydrateComplete.getResultAsync().then(()=>{a.wpoRank=n[r].wpoRank,a.wpoAdRank=n[r].wpoAdRank,n.splice(r,1,a),i.delete(e.id)});return a}};for(let e=this.waterfall.length-1;e>-1;e--)this.waterfall[e].columns.forEach((t,n)=>{for(let n=t.length-1;n>-1&&(r.length||i.size||a.length||o.length);n--){var l;const i=t[n];let u;if("nativead"===(null==i?void 0:i.type)?u=h(i,r,t,n):"cmsad"===(null==i?void 0:i.type)?u=h(i,a,t,n):"firstpartyad"===(null==i?void 0:i.type)?u=h(i,o,t,n):ve(i.type)&&(u=h(i,s,t,n)),this.config.enableHalfUCards&&u&&null!==(l=this.waterfall[e])&&void 0!==l&&l.customRowSection){var d;const t=null===(d=this.waterfall[e])||void 0===d||null===(d=d.customRowSection)||void 0===d?void 0:d.findIndex(e=>e.id===i.id);var c;if(t&&t>-1)null===(c=this.waterfall[e].customRowSection)||void 0===c||c.splice(t,1,u)}}});if(c){const e=n.defaultLayout.shift();this.waterfall=[{...this.waterfall[0],wideCard:e,wideCardSize:null==e?void 0:e.colSpan},...this.waterfall.slice(1)]}return n},this.predictCmsAds=async()=>{(0,b.S)()&&(window.ssrWpoData||this.hasPivotChanged)?await this.nativeAdHelper.fetchCmsPredictContent():await this.nativeAdHelper.waitForCmsAuction()},this.predictSamAds=async()=>{const e=[e=>this.nativeAdHelper.fillAdsMap(e.callbackFnPlacementList),()=>this.consumeAdsMap()];(0,b.S)()&&(window.ssrWpoData||this.hasPivotChanged)?await this.nativeAdHelper.fetchSamPredictContent(e):(await this.nativeAdHelper.waitForSamPredictResponse(),this.nativeAdHelper.addToCallbackList(e))},this.waitSamAndCmsAdPredictPromise=async()=>{this.adPredictPromise&&(await this.adPredictPromise,this.adPredictPromise=void 0,await this.verifyAndRenderSamAdPrediction()),this.cmsPredictPromise&&(await this.cmsPredictPromise,this.cmsPredictPromise=void 0,await this.verifyAndRenderCmsAdPrediction())},this.waitAndConsumeFastHydrationAds=async()=>{const e=await this.nativeAdHelper.getFastHydrationSamAdsData();e&&this.consumeSamAdsData(e)},this.serveAds=async e=>{if(!(!this.adPredictPromise&&!this.cmsPredictPromise)){const e=(0,k.gU)();(0,De.cE)("waitForAdResponseStart",e),await this.waitSamAndCmsAdPredictPromise();const t=(0,k.gU)();(0,De.cE)("waitForAdResponseEnd",t)}if(this.config.fastHydrationAds&&window.isSSREnabled&&(0===e||!e)){const e=(0,k.gU)();(0,De.cE)("waitForAdResponseStart",e),await this.waitAndConsumeFastHydrationAds();const t=(0,k.gU)();(0,De.cE)("waitForAdResponseEnd",t)}(0,b.S)()&&this.updateNativeAds(e)},this.ssrOrHydrateSubsequentSections=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(!(0,b.S)()||e)&&t.sectionsRenderComplete.getCount()>0&&setTimeout(()=>t.renderNextFeedLayout(),0)},this.getBackfillForMissingCard=(e,t,i,n)=>{const r=[...this.masterCardMapWpoItems.keys()].pop()||"no cards";let a;if((0,s.vV)(o.YfR,"Could not find Card in master card map",`Lookup for ${t}`,{...o.YfR.pb,totalCardsInMap:this.masterCardMapWpoItems.size,placementLookup:JSON.stringify(e),lastCardId:r,debugId:n}),this.config.processAdsWpoModelChange&&(a=this.createBackfillCardMetadata("ad"),a)){const e=(this.backfillCountMap.get(i)??0)+1;this.backfillCountMap.set(i,e)}return a},this.getCardFromMasterList=(e,t,i)=>{const n=`${t}_wfcard${null==e?void 0:e.wpoId}`;let r=this.masterCardMapWpoItems.get(n);if(!r&&(r=this.getBackfillForMissingCard(e,n,t,i),!r))return;let a=!1;r.wpoRank!==e.wpoRank&&(r.wpoRank=e.wpoRank,a=!0),r.colSpan!==e.colSpan&&(r.colSpan=e.colSpan,a=!0),r.type===G.pL.Infopane&&(r.colSpan="C1"===this.layout?1:2,a=!0),a&&this.masterCardMapWpoItems.set(n,r),e.wpoAdRank&&r.wpoAdRank!==e.wpoAdRank&&(r.wpoAdRank=e.wpoAdRank,r.regionIndex=e.wpoAdRank);return this.updatePlacementItem(r,t||"river",(t,i)=>{var n;return(this.config.enableShoppingInfopaneAd||this.config.enableShoppingInfopaneAdV2)&&ve(t.type)&&t.regionIndex&&null!==(n=t.placement)&&void 0!==n&&n.shoppingInfopaneAdData?be(t,me(t)):this.nativeAdHelper.createNativeAdCardMetadata(i,t.regionIndex,t.wpoRank,t.wpoAdRank,t.wpoId,t.type,e.adjacentCardIds,e.isPartialBrandSafety)})},this.updateQSParam=(e,t)=>{const i=new RegExp("([?&])"+t+"=.*?(&|$)","i");return e.match(i)?e.replace(i,"&"):e},this.cardDataMapperMap=e.cardDataMapperMap,this.cardTemplateMap=e.cardTemplateMap}subscribeFeedEvent(){var e;if(this.feedEventAggregator.subscribe(Ee.KS.BeforeUpdateLayout,()=>{var e;this.config.scrollTopSectionCount&&this.river.length>this.config.scrollTopSectionCount&&this.config.scrollToTopWhenResize&&!this.config.isWaterfallFeed&&(this.justResized=!0,this.scrollToTop(),this.unrenderedRegionsData=this.backupUnrenderedRegionsData,this.backupUnrenderedRegionsData=[],this.unrenderedRegionsData.forEach(e=>{let{region:t,sections:i}=e,n=[];i&&(n=[...i]),this.backupUnrenderedRegionsData.push({region:t,sections:n})}),null===(e=this.unrenderedRegionsData.find(e=>"river"===e.region))||void 0===e||null===(e=e.sections)||void 0===e||e.splice(0,2),this.river=this.river.slice(0,2),(0,pe.RE)())}),this.config.enablePrerenderMultipleSections){const e=this.predictSectionsInFirstPage.bind(this);this.feedEventAggregator.subscribeOnce(Ee.KS.OnFeedResponseRetrieved,()=>{if(!this.isPartialResponse()&&!this.isPrerenderFeedCallDisabled())return e(!0,!0);t.dispose()});const t=this.feedEventAggregator.subscribeOnce(Ee.KS.OnFeedRendered,this.prerenderSubsequentSections.bind(this))}this.config.fastHydrationAds,(0,V.EZ)()&&this.feedEventAggregator.subscribeOnce(Ee.KS.OnFeedRendered,()=>{(0,V.EZ)()&&(0,qe.Zx)(this.config)}),(this.config.renderAllSectionsOnServerSide||this.config.sectionsToRenderOnServerSide||this.config.renderMoreWFreOnServerSide||this.config.splitFirstSectionOnServerSide)&&this.feedEventAggregator.subscribeOnce(Ee.KS.OnFeedResponseRetrieved,()=>{if(this.config.renderMoreWFreOnServerSide&&!this.config.renderAllSectionsOnServerSide&&!this.config.sectionsToRenderOnServerSide){var e;const t=null===(e=this.unrenderedRegionsData.find(e=>{let{region:t}=e;return"river"===t}))||void 0===e||null===(e=e.sections)||void 0===e?void 0:e[0].cards;return void(t&&1===t.length&&"UserInterestTopicAndProvider"===t[0].type&&this.sectionsRenderComplete.reset(this.sectionsRenderComplete.getCount()+1))}let t;var i,n;this.config.isWaterfallFeed?t=(null===(i=this.unrenderedRegionsData.find(e=>{let{region:t}=e;return"river"===t}))||void 0===i||null===(i=i.waterfallSections)||void 0===i?void 0:i.length)??1:t=(null===(n=this.unrenderedRegionsData.find(e=>{let{region:t}=e;return"river"===t}))||void 0===n||null===(n=n.sections)||void 0===n?void 0:n.length)??1;this.config.sectionsToRenderOnServerSide&&(t=Math.min(t,this.config.sectionsToRenderOnServerSide)),this.config.splitFirstSectionOnServerSide&&(t=Math.min(t,"C5"===this.layout?1:2)),this.sectionsRenderComplete.reset(t)}),this.feedEventAggregator.subscribe(Ee.KS.OnFeedRendered,async e=>{const t=this.needsHydration&&this.needsHydration();if((0,b.S)()&&(this.sectionsRenderComplete.decrease(),this.ssrOrHydrateSubsequentSections(t)),!(this.config.enablePrerenderAds&&(0,V.EZ)()&&this.river.length>1)&&(!this.isFirstAdRender||(this.isFirstAdRender=!1,this.config.delayAdsBlocking||!(0,V.EZ)()||this.config.enablePrerenderAds||await this.adPrerenderBlockingPromise.getResultAsync(),this.config.enableAddingAdCoords&&this.config.isWaterfallFeed&&window.requestAnimationFrame(()=>{var e;null===(e=this.waterfall)||void 0===e||e.forEach(e=>{var t,i;let n=null==e?void 0:e.wideCard;var r;n&&!n.cardElement&&!n.outerCSCard&&null!==(t=this.river)&&void 0!==t&&null!==(t=t[0])&&void 0!==t&&null!==(t=t.waterfall)&&void 0!==t&&t.wideCard&&(n=null===(r=this.river)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.waterfall)||void 0===r?void 0:r.wideCard);n&&this.updateCoordsCache(n,(0,ye.MD)(n)),null==e||null===(i=e.columns)||void 0===i||null===(i=i[0])||void 0===i||i.forEach(e=>{e&&this.updateCoordsCache(e,(0,ye.MD)(e))})})}),this.isLastResponsePresent()))){if(this.shouldServeAdsWhenSectionInView(e.isFirstRender)){const t=this.foundTopSectionInRiver?this.river.length-2:this.river.length-1,i=this.river.length-1;this.config.isWaterfallFeed?(0,b.S)()&&e.isFirstRender&&this.config.firstAdsWhenInView?this.waterfallAdSectionsIntersections([(0,Ge.pr)(this.elementKey)],t):this.handleWaterfallElementRendered(t,this.waterfallAdSectionsIntersections):this.handleFeedLayoutElementRendered(t,e=>{let n=this.config.adsSectionIntersectObsMargin||0;this.config.adsDeepRiverSectionThreshold&&t<this.config.adsDeepRiverSectionThreshold&&(n=this.config.adsPrefetchMargin||0);const r=new IntersectionObserver(e=>{e.some(e=>e.isIntersecting)&&(r.disconnect(),this.logDeepRiverAdsSectionServed(t),this.adsServingDeferredMetadata[t]&&((0,pe.D8)(this.adsServingDeferredMetadata[t],"river"),this.adsServingDeferredMetadata[t]=[]),requestAnimationFrame(()=>this.serveAds(i)))},{rootMargin:`0px 0px ${n}px 0px`});r.observe(e)})}else((0,b.S)()||e&&e.isFirstRender&&!this.config.auctionRidOverride)&&await this.serveAds();if((0,b.S)()||this.wrapUpFeedSsr(),(0,b.S)()&&this.config.isWaterfallFeed&&this.config.backfillForSDCard&&this.sdCardsToBackfill.size){const e=[];this.sdCardsToBackfill.forEach(t=>{const i=this.createBackfillCardMetadata("sd");if(!i)return;const n=`river_wfcard${t.wpoId}`,r={...i,rowCount:t.rowCount,column:t.column,order:t.order,wpoRank:t.wpoRank,traceIdIndex:t.traceIdIndex};this.masterCardMapWpoItems.set(n,r);const a=(0,we.cC)(t);a&&(0,we.rd)(a.key(t)),this.backfilledSdCardCount++,e.push(t.type),E.YT.addOrUpdateTmplProperty("backfillSdCardCount",`${this.backfilledSdCardCount}`)}),(0,s.vV)(o.fyC,"Card failed to render and backfilled with a content card",void 0,{...o.fyC.pb,failedCardTypes:JSON.stringify(e),customMessage:`Failed card type: ${e.join(", ")}`}),this.relayoutWaterfallFeed(),this.sdCardsToBackfill.clear()}}}),this.feedEventAggregator.subscribe(Ee.KS.OnFeedRequestFailed,()=>{(0,b.S)()||this.wrapUpFeedSsr()}),null!==(e=this.config)&&void 0!==e&&e.infopaneViewOptAdCount&&this.feedEventAggregator.subscribe(Ee.KS.OnFeedRendered,()=>{this.infopaneChangeEventListener=e=>{const{activeIndex:t=0}=e.detail||{};this.activeIndex=t,this.handleInfopaneRotate(this.activeIndex)},document.addEventListener("infopane-change",this.infopaneChangeEventListener)}),this.feedEventAggregator.subscribe(Ee.KS.OnFeedResponseRetrieved,e=>{let{response:t}=e;if(this.isPartialResponse())return this.staledPartialFeed=!0,void((0,V.EZ)()||this.updateStaledPartialFeed());if(this.isPrerenderFeedCallDisabled())return void(!(0,V.EZ)()&&this.disablePrerenderFeed&&this.updateDisabledPrerenderFeed());if(this.config.enableWidgetsRegion&&!this.config.useDedicatedWidgetsManager){var i;const{selectedFeedDisplaySetting:e}=(null===(i=(0,ze.zP)(te.h$))||void 0===i?void 0:i.getCurrentState())??{};this.feedDisplaySetting=e}if(!this.responseContainsCardsData(t)&&"off"!==this.feedDisplaySetting&&("headingsonly"!==this.feedDisplaySetting||window.scrollY)&&(E.YT.addOrUpdateTmplProperty("disablePrerenderFeed",`${this.disablePrerenderFeed?"1":"0"}_${(new Date).getTime().toString()}`),this.setFallbackFeed(t)),!t||!(0,b.S)()&&!0!==this.config.fastHydrationAds)return;let n;var r;this.isSuperDataProviderEnabled?this.processAndMapAdCards(t).forEach(e=>{if(this.config.isWaterfallFeed&&"river"===e.region){var t,i;const n=null===(t=this.unrenderedRegionsData.find(t=>{let{region:i}=t;return i===e.region}))||void 0===t||null===(t=t.waterfallSections)||void 0===t?void 0:t.length,r={columns:e.subSections};n&&(null===(i=this.unrenderedRegionsData.find(t=>{let{region:i}=t;return i===e.region}))||void 0===i||null===(i=i.waterfallSections)||void 0===i||i.splice(n-1,1,r))}else{var n,r;const t=null===(n=this.unrenderedRegionsData.find(t=>{let{region:i}=t;return i===e.region}))||void 0===n||null===(n=n.sections)||void 0===n?void 0:n.length,i=e.subSections.length;t&&(null===(r=this.unrenderedRegionsData.find(t=>{let{region:i}=t;return i===e.region}))||void 0===r||null===(r=r.sections)||void 0===r||r.splice(t-i,i,...e.subSections))}}):(null===(r=t.regions)||void 0===r||r.map(e=>{if("river"===e.region){var t;let n=e.sections;var i;if(this.config.isWaterfallFeed)n=[],null==e||null===(i=e.waterfallSections)||void 0===i||i.forEach(e=>{const t=e.flatMap(e=>e.cards);n.push({cards:t})});null!==(t=this.config.riverSectionCardProviderConfig)&&void 0!==t&&t.useRelativeAdPlacement&&(this.config.processAdsWpoModelChange?this.updateAdIndexPerSections():this.nativeAdHelper.updateRelativeAdIndexPersection(n)),this.nativeAdHelper.updateCardsIndexPersection(n)}}),this.rawAdRegionTupleMap=t.rawAdRegionTupleMap,n=t.raw1sAdRegionTupleMap);this.nativeAdHelper.updateAdRegionTupleListMap(this.rawAdRegionTupleMap),this.updateAdTrackingCount(),this.rawAdRegionTupleMap=this.initRawAdMap(),this.config.shouldCacheAdIndices&&this.shouldUpdateCache&&(this.nativeAdHelper.updateAdCache(n),this.shouldUpdateCache=!1)}),(0,b.S)()&&this.feedEventAggregator.subscribe(Ee.KS.OnStartFeedRequest,()=>{const e=(0,V.EZ)();this.config.shouldUseAdCache&&this.shouldPredictAds&&!e&&(0===this.requestType&&this.config.adPredictLayout?this.feedDisplaySetting===this.config.adPredictLayout&&(this.adPredictPromise=this.predictSamAds(),this.cmsPredictPromise=this.predictCmsAds(),this.shouldPredictAds=!1):(this.adPredictPromise=this.predictSamAds(),this.cmsPredictPromise=this.predictCmsAds(),this.shouldPredictAds=!1))}),this.feedEventAggregator.subscribe(Ee.KS.OnParametersReset,()=>{this.isFirstAdRender=!0,this.initRawAdMap(),this.mappedRiverCardsCount=1,this.mappedRightRailCardsCount=1,this.largestWpoAdRankPerWpoResponse=new Map,this.largestWpoAdRankAllColumns=new Map,this.isSuperDataProviderEnabled||this.dataProvider.clearCache(),this.shouldUpdateCache=!0,this.shouldPredictAds=!0,this.nativeAdHelper.refresh(),this.backfillCardIndex=0,this.backfillSlotSet.clear(),this.backfillCompleteSet.clear(),this.backfillCards=[],this.backfillCountMap=new Map,this.riverAdIndexPerSection=[],this.cmsAdIndexPerSection=[],this.adTrackingCount=new Map}),this.feedEventAggregator.subscribe(Ee.KS.OnStartFeedRefresh,e=>{e&&e.isFREInline&&(this.showFREConfirmation=!0),e&&e.scrollToTop&&this.scrollToTop()}),this.feedEventAggregator.subscribe(Ee.KS.OnWaterfallResize,e=>{var t,i;if(!this.config.processAdsWpoModelChange&&null!==(t=e.newAdsIndexes)&&void 0!==t&&t.length){this.nativeAdHelper.overrideNativeAdIndexPersection(e.newAdsIndexes||[]);for(let t=0;t<e.sectionIndexMax;t++)this.handleWaterfallElementRendered(t,this.waterfallAdSectionsIntersections)}else if(this.config.processAdsWpoModelChange&&null!==(i=e.newSubSections)&&void 0!==i&&i.length){this.riverAdIndexPerSection=[],this.cmsAdIndexPerSection=[],this.processAdsIndexCurrentColumn(e.newSubSections),this.updateAdIndexPerSections();for(let t=0;t<e.newSubSections.length;t++)this.handleWaterfallElementRendered(t,this.waterfallAdSectionsIntersections)}e.scrollToTop&&this.scrollToTop(),this.backfillSlotSet=new Set(this.backfillCompleteSet),this.backfillCardIndex=0,this.consumeAdsMap()}),this.feedEventAggregator.subscribe(Ee.KS.UpdateAdIndexes,e=>{var t;this.config.processAdsWpoModelChange&&null!==(t=e.newSubSections)&&void 0!==t&&t.length&&this.processAdsIndexCurrentColumn(e.newSubSections)}),this.config.enableShoppingInfopaneAd&&this.feedEventAggregator.subscribeOnce(Ee.KS.OnFeedRendered,async()=>{await(0,Ae.dT)(),this.consumeAdsMap(!1)}),this.config.enableWidgetsRegion&&!this.config.useDedicatedWidgetsManager&&(K.U.updateFeedStateOnScroll.registerObserver(e=>{this.isFeedUpdatedOnScroll=e.params[0]}),Je.G.updateLayout.registerObserver(e=>{var t;const i=e&&e.params;this.feedDisplaySetting=null==i||null===(t=i[0])||void 0===t?void 0:t.selectedFeedDisplaySetting})),this.feedEventAggregator.subscribe(Ee.KS.OnCardMappingError,e=>{const{cardMetadata:t}=e;this.config.backfillForSDCard&&t&&t.wpoId&&!t.colSpan&&t.type!==G.pL.Article&&this.sdCardsToBackfill.set(t.wpoId,t)})}processAdsIndexCurrentColumn(e){let t=this.riverAdIndexPerSection[this.riverAdIndexPerSection.length-1]||0;this.processAdIndexesNewSubSections(e,"nativead",t).forEach(e=>{e>=t&&this.riverAdIndexPerSection.push(e)}),E.YT.addOrUpdateTmplProperty("adRiverIndexCount",`${this.riverAdIndexPerSection.length}|${t}`),t=this.cmsAdIndexPerSection[this.cmsAdIndexPerSection.length-1]||0;this.processAdIndexesNewSubSections(e,"cmsad",t).forEach(e=>{e>=t&&this.cmsAdIndexPerSection.push(e)}),E.YT.addOrUpdateTmplProperty("adCmsIndexCount",`${this.cmsAdIndexPerSection.length}|${t}`)}updateAdIndexPerSections(){if(this.config.processAdsWpoModelChange){this.riverAdIndexPerSection.length>0&&this.nativeAdHelper.overrideNativeAdIndexPersection(this.riverAdIndexPerSection);this.cmsAdIndexPerSection.length>0&&this.nativeAdHelper.overrideCmsAdIndexPersection(this.cmsAdIndexPerSection)}}updateAdTrackingCount(){if(this.config.processAdsWpoModelChange){const t=this.nativeAdHelper.getAdRegionTupleListMap();for(const[i,n]of t){var e;if(!n)continue;const t=(null===(e=n[2])||void 0===e?void 0:e.map(e=>e.regionIndex||0))||[0],r=(n[1]||[0]).concat(t)||[0],a=Math.max(...r||[0],0);this.adTrackingCount.set(i,a),a>0&&E.YT.addOrUpdateTmplProperty(`adCount_${i}`,a.toString())}}}scrollToTop(){(0,b.S)()&&window.scrollTo&&window.scrollTo({top:0,behavior:"instant"})}disConnect(){var e,t;super.disConnect(),null===(e=this.serviceRequestAuthSubscription)||void 0===e||e.dispose(),null!==(t=this.config)&&void 0!==t&&t.infopaneViewOptAdCount&&this.infopaneChangeEventListener&&document.removeEventListener("infopane-change",this.infopaneChangeEventListener)}processAndMapAdCards(e){return e.sections?e.sections.map(e=>{var t,i;(null===(t=e.subSections)||void 0===t||t.map((t,i)=>{const{cards:n}=t;return n&&(t.cards=n.map(t=>{const r=t.type;if(this.isSupportedComplexCard(r)&&t.subCards){const e=t.subCards.map((e,t)=>{if(e.type===G.pL.NativeAd||e.type===G.pL.CmsAd||e.type===G.pL.BuyDirectAd)return this.pushCardToRawAdMapAndAddRegionIndex(e.type===G.pL.CmsAd?`res${this.adInfopaneRegionName}`:this.adInfopaneRegionName,e,t+1);if(e.subCards){const i=e.subCards.map(e=>e.type===G.pL.NativeAd||e.type===G.pL.CmsAd?this.pushCardToRawAdMapAndAddRegionIndex("infopane-tab",e,t+1):e);e.subCards=i}else if(e.type===G.pL.EventInfopaneShoppingAI)try{const t=JSON.parse(e.data||""),i=(0,_e.A)(t);delete e.data,e={...i,...e}}catch(t){return{...e,isInvalidShoppingArticle:!0}}return e}).filter(e=>!e.isInvalidShoppingArticle);return t.subCards=e,t}if(r===G.pL.NativeAd||r===G.pL.CmsAd||r===G.pL.BuyDirectAd||r===G.pL.AmplifyAd||r===G.pL.EventSDCardAmplifyAds||r===G.pL.BoostAd||r===G.pL.FirstPartyAd){var a;const r=this.getIncrementAdIndex(e.region,t,i),o=null!==(a=this.config.riverSectionCardProviderConfig)&&void 0!==a&&a.useRelativeAdPlacement?r:n.indexOf(t)+r;return this.pushCardToRawAdMapAndAddRegionIndex(t.type===G.pL.CmsAd?"res"+e.region:e.region,t,o)}return"TopStories"===t.subType?this.convertNestedCard(t):t.type===G.pL.NewsAnswerModule?this.convertNewsGroupsCard(t):(e=>{var t;if(null!==H.es&&void 0!==H.es&&null!==(t=H.es.current)&&void 0!==t&&t.includes(e.type))return e;try{const{augments:t,type:i,isBreaking:n,locale:r,category:a,images:o,topics:s=[],dataUrl:l,publishedDateTime:d,id:c,url:u,abstract:h="",title:p="",provider:f={},feed:v={},actions:g=[],externalVideoFiles:m,reactionStatus:b,commentStatus:y,reactionSummary:w,commentSummary:$,reasons:C,source:k,sourceId:S,topComments:x,colorSamples:T,isLocalContent:D,badges:A,relatedCards:I,recoDocMetadata:M,offer:F,recoId:P,ri:R,subType:O,traceIdIndex:E,rowCount:L,videoMetadata:H,isWorkNewsContent:_}=e,V=(0,N.Hc)(o)||{},j=m||{},W=s.find(e=>e.feedId===v.id&&e.locale===r),U=(0,N.bC)(u);let B=(0,N.II)(f.logoUrl);return!B&&f.logo&&f.logo.url&&(B=(0,N.II)(f.logo.url)),{augments:t,id:c,type:i,metadata:{abstract:h,abstractLength:h.length,titleLength:p.length,category:a||U[4],subCategory:U[5],primaryImage:{height:V.height,width:V.width},locale:r,feed:{id:v.id},kicker:[v],actions:g.map(e=>N.p[e]||e),reactionStatus:b,commentStatus:y,reactionSummary:w,commentSummary:$,reasons:C,source:k,topComments:x,relatedCards:I,topics:s,recoId:P,recoDocMetadata:M,ri:R,videoFiles:j,videoMetadata:H},cardContent:{id:c,type:(0,z.i)(i),title:p,uriTitle:U[6],abstract:h,isBreaking:n||0,tags:[W||{}],provider:{id:f.id,name:f.name,logo:{id:B},lightThemeSVGLogo:f.lightThemeSVGLogo,darkThemeSVGLogo:f.darkThemeSVGLogo,profileId:f.profileId,logoUrl:f.logoUrl,subscribable:!1},category:{product:a,label:void 0},locale:r,images:[{id:(0,N.II)(V.url),height:V.height,width:V.width,caption:V.title,focalRegion:V.focalRegion,attribution:V.attribution,url:V.url,colorSamples:V.colorSamples}],videoFiles:j,publishedDateTime:d,kicker:p,sourceHref:l,destinationUrl:u,sourceId:S,colorSamples:T,isLocalContent:D,isWorkNewsContent:_,badges:A,topics:s},offer:F,subType:O,rowCount:L,traceIdIndex:E}}catch(t){return e}})(t)}),"river"===e.region?this.mappedRiverCardsCount+=n.length:this.mappedRightRailCardsCount+=n.length),t}),"river"===e.region)&&(null!==(i=this.config.riverSectionCardProviderConfig)&&void 0!==i&&i.useRelativeAdPlacement&&(this.config.processAdsWpoModelChange?this.updateAdIndexPerSections():this.nativeAdHelper.updateRelativeAdIndexPersection(e.subSections)),this.nativeAdHelper.updateCardsIndexPersection(e.subSections));return e}):[]}isSupportedComplexCard(e){return e===G.pL.Infopane||e===G.pL.GroupedContent||e===G.pL.UserInterestNTPProvider||e===G.pL.UserInterestTopic||e===G.pL.UserInterestTopicAndProvider||e===G.pL.ColdStartArticleFreCard||e===G.pL.RewardsDailySet||e===G.pL.TabbedInfopaneCard}getIncrementAdIndex(e,t,i){if("river"===e){var n;if(null!==(n=this.config.riverSectionCardProviderConfig)&&void 0!==n&&n.useRelativeAdPlacement){var r;if(t.type===G.pL.CmsAd&&this.mappedCmsAdCount>((null===(r=this.config.cmsAds)||void 0===r?void 0:r.river.length)||0)&&(t.type=G.pL.NativeAd),t.type===G.pL.NativeAd)return this.mappedNativeAdCount++;if(t.type===G.pL.CmsAd)return this.mappedCmsAdCount++}return this.mappedRiverCardsCount}return this.mappedRightRailCardsCount}pushCardToRawAdMapAndAddRegionIndex(e,t,i){var n;if(!t.data||t.type!==G.pL.NativeAd&&t.type!==G.pL.CmsAd||"river"!==e&&"resriver"!==e&&"riverlock"!==e&&"resriverlock"!==e&&"peekriver"!==e){if(t.type===G.pL.NativeAd||t.type===G.pL.CmsAd){var r;null===(r=this.rawAdRegionTupleMap.get(e))||void 0===r||r.push(i)}}else null===(n=this.raw1sAdRegionTupleMap.get(e))||void 0===n||n.push(i);const a=t.type;return a===G.pL.AmplifyAd||t.type===G.pL.BoostAdsBanner||t.type===G.pL.BoostAdsCoachmark||t.type===G.pL.EventSDCardAmplifyAds||t.type===G.pL.BoostAd?{...t,type:a,regionIndex:i,data:t.data,id:`${a}-${t.section}-${i}`,wpoMetadata:t.wpoMetadata}:t.data?{...t,type:a,regionIndex:i,data:t.data,id:t.id}:{...t,type:a,regionIndex:i,placement:{items:[]}}}initHelpers(){const{experienceId:e}=this,t=(0,b.S)()&&this.hasPivotChanged;this.nativeAdHelper=(0,ke.Nc)(this.config,e,t),this.nativeAdHelper.isNTPPeek=this.isNTPPeek}initRawAdMap(){return new Map([["rightrail",[]],["infopane",[]],["infopanelock",[]],["peekinfopane",[]],["river",[]],["riverlock",[]],["peekriver",[]],["triver",[]],["resinfopane",[]],["resinfopanelock",[]],["resriver",[]],["resriverlock",[]],["infopane-tab",[]],["dense-river",[]]])}initProvider(){const{config:e,feedId:t,feedName:i,feedSource:n}=this,{riverSectionCardProviderConfig:a}=e,o=(0,ze.zP)(te.h$),s=null==o?void 0:o.getCurrentState();this.feedDisplaySetting=null==s?void 0:s.selectedFeedDisplaySetting,this.isFeedUpdatedOnScroll=null==s?void 0:s.isFeedStateChangedOnScroll,this.config.adsPlacementForPeekView&&"peek"===this.feedDisplaySetting&&this.setAdsRegionNameToPeekOrNormal({usePeekOnPeekMode:!0}),this.config.feedAdsCacheEnabled&&(this.adsResponseCache=(0,Se._)(this.config.feedAdsCacheMaxAgeInMs)),o&&(0,Ze.vQ)(te.h$,e=>{if(e){const{selectedFeedDisplaySetting:t,isFeedStateChangedOnScroll:i}=e;this.config.adsPlacementForPeekView&&("peek"!==this.feedDisplaySetting&&"peek"===t&&this.setAdsRegionNameToPeekOrNormal({usePeekOnPeekMode:!0}),"peek"===this.feedDisplaySetting&&"peek"!==t&&this.setAdsRegionNameToPeekOrNormal({usePeekOnPeekMode:!1,updateRiverPlacements:!0})),this.feedDisplaySetting=t,this.isFeedUpdatedOnScroll=i}});let l;s&&(l=(0,ee.UU)(s,false));const d={...a,initialRequest:{...a.initialRequest,feedId:t,feedName:i??a.initialRequest.feedName,feedSource:n,pageConfiguration:l,requestId:E.YT.getRequestId()},shoppingInfopaneAdV1:this.config.enableShoppingInfopaneAdV1,adsPlacementForPeekView:this.config.adsPlacementForPeekView,enableWpoAdRank:this.config.enableWpoAdRank};var c;this.isSuperDataProviderEnabled?this.dataProvider=new X(d):(this.options.rubyConsumptionOnCohort&&(d.rubyConsumptionOnCohort=this.options.rubyConsumptionOnCohort),this.dataProvider=new r.Oq(d,this.isXFeed),this.dataProvider.clearCache(),null===(c=this.dataProvider)||void 0===c||c.updateMapperHelperIsNTPPeek(this.isNTPPeek))}async initFeedBehavior(){this.enableBackfillContent=!!this.config.backfillContentForFailedAuction||!!this.config.backfillContentForMissingPlacements||!!this.config.backfillForSDCard,this.sectionTrackerEnabled=!0,this.rawAdRegionTupleMap=this.initRawAdMap(),this.raw1sAdRegionTupleMap=this.initRawAdMap(),(0,b.S)()&&(this.config.disableCmsAds&&"1"!==c._3.getQueryParameterByName("vptest",location.href)||(this.config.perfRemoveWait||this.shouldSkipTTVRForPrerenderAds()?this.nativeAdHelper.loadCmsBackfillList():this.config.enableWpoAdRank?(0,_.Qc)().then(()=>{var e;null===(e=this.nativeAdHelper)||void 0===e||e.loadCmsBackfillList()}).catch(e=>{(0,s.vV)(o.qdn,"Failed to load CMS backfill list",void 0,{...o.qdn.pb,experienceId:this.experienceId,customMessage:`Failed to load CMS backfill list: ${e.customMessage}; ${e.message}; error.stack: ${e.stack}`,isPrerender:null===F.Rb||void 0===F.Rb?void 0:F.Rb.IsPrerender})}):(0,_.Qc)().then(()=>{var e;return null===(e=this.nativeAdHelper)||void 0===e?void 0:e.loadCmsBackfillList()})),this.subscribeUnblockAdsPageVisible(),this.config.enablePrerenderAds&&(0,V.EZ)()&&"hidden"===document.visibilityState&&(0,V.GP)().then(()=>this.updateNativeAds(this.river.length-1))),this.serviceRequestAuthSubscription||(this.serviceRequestAuthSubscription=Te.g.subscribe(Te.m.userIsSignedIn,e=>{this.validateAuthRequestMatch(e)}))}getWidgetsRegionEnabled(){var e;const t=null===(e=(0,ze.zP)(te.h$))||void 0===e?void 0:e.getCurrentState();return null==t?void 0:t.enableWidgetsRegion}getWidgetsRegionQSPOverride(){const e=(0,ze.zP)(te.h$);return!!e&&e.shouldOverrideWidgetsQSP()}async fetchFeed(e){var t,i,a,l,d,u,h;if(this.isFetching=!e,null!==(t=this.lastResponse)&&void 0!==t&&t.appError||(this.isSuperDataProviderEnabled||null!==(i=this.dataProvider)&&void 0!==i&&null!==(a=i.noContentCannotRetry)&&void 0!==a&&a.call(i))&&(null===(l=this.lastResponse)||void 0===l?void 0:l.status)===n.EY.NoContent||(null===(d=this.lastResponse)||void 0===d?void 0:d.status)===n.EY.InvalidRequest)return this.isFetching=!1,void E.YT.addOrUpdateTmplProperty("responseEmpty","lastResponseError");if(this.disablePrerenderFeed)return this.isFetching=!1,this.releaseTtvr(),void E.YT.addOrUpdateTmplProperty("responseEmpty","disablePrerenderFeed");const{config:p,feedId:f,feedName:v,feedSource:g,isXFeed:m,useProviderKey:w=!1}=this,{riverSectionCardProviderConfig:$}=p;let C,k,x,T,D,A,I="",M="";if(p.enableWpoPromotHistory){const e=await(0,le.ei)(p.enableNewUserSignal);null!=e&&e.promotion&&(I=e.promotion),null!=e&&e.selection&&(M=e.selection)}if(p.enableEventBkgSignal){const e=await(0,le.WH)(),t=await(0,le.zl)(),i=null==t?void 0:t.provider;C=!!e||"NoBackground"===i,E.YT.addOrUpdateTmplProperty("backgroundImageIsSet",C?"1":"0")}p.enableWpoPromotionSignals&&(k=await(0,le.Rx)(),T=await(0,le.e7)(),x=(0,le.sY)()),p.enableNewUserSignal&&(D=await(0,le.KQ)(),A=await(0,le.nX)());let P,R=this.getWidgetsRegionEnabled();this.config.enableWidgetsRegion&&!R&&(R=this.getWidgetsRegionQSPOverride());let O=!1,N=this.requestType;try{if(this.isSuperDataProviderEnabled){var z,L,H,_;const e={...$.initialRequest,feedId:f,isXFeed:m,feedName:v??$.initialRequest.feedName,audienceMode:null===(z=S.T3.CurrentRequestTargetScope)||void 0===z?void 0:z.audienceMode,feedSource:g,edgExpMask:this.edgExpMask,waitForSWPrecache:$.waitForSWPrecache,anaheimLayoutPromotion:I,anaheimContentSelection:M,inEdgeFeatures:k,revertTimes:T,adminDisabled:x,backgroundImageIsSet:C,newProfFreTime:D,newDevFreTime:A};let t=null!==(L=this.lastResponse)&&void 0!==L&&L.nextPageUrl?{...e,nextPageUrl:this.lastResponse.nextPageUrl,useNextPageUrl:!0}:e;if(this.config.isWaterfallFeed){var j,W;const e=this.config.enableOneColumn||this.layout!==Fe._4.C1?this.layout:Fe._4.C2,i=(0,We.cP)(e,null===(j=this.river[this.riverSectionIndex-1])||void 0===j?void 0:j.waterfallFeedColumnsOffset,null===(W=this.river[this.riverSectionIndex-1])||void 0===W?void 0:W.waterfallFeedColumnsOffsetForAds,this.config);t={...t,...i}}if("following"===t.feedName&&(this.lastResponse||(N=0),t.feedId&&(t.query="")),P=await this.fetchResponse(t,N),Be(P,this.requestType,this.isXFeed||"default"!==t.feedName)&&!t.renderedSegments&&!r.Oq.renderedSegments){(function(e){const t=(0,y.iA)(),i=!!t&&S.T3.IsHeroNTP&&t.includes("segment=Weather");return null==e?void 0:e.some(e=>{var t;return null===(t=e.subSections)||void 0===t?void 0:t.some(e=>{var t;return null===(t=e.cards)||void 0===t?void 0:t.some(e=>!i&&(null==e?void 0:e.type)===G.pL.WeatherSummary||i&&(0,Ue.c)(null==e?void 0:e.type))})})})(P.sections)||function(e,t){let i="debugId:"+e;t&&(i+=`, partial:${t.isPartial}, wpofb:${t.isWpoFallback}, source:${t.responseSource}, next page url:${t.nextPageUrl}`),E.YT.sendAppErrorEvent({...o.QRs,message:"Weather card is missing from the response, "+i,pb:{...o.QRs.pb,debugId:e}})}(P.debugId||void 0,P)}if(0!==N||(0,b.S)()||(P?Y.V_.setSSRInitialFeedResponse(P):(0,s.vV)(o.Mwi,"",void 0,{...o.Mwi.pb,requestId:t.requestId})),null!==(H=t.feedName)&&void 0!==H&&H.startsWith("following")&&(this.isStopUpdateFeedData=!P.nextPageUrl),null!==(_=P)&&void 0!==_&&_.sections){let e=!1;for(let t=0;t<P.sections.length;t++)"river"===P.sections[t].region&&(e=!0);e||E.YT.sendAppErrorEvent({...o.TBj,pb:{...o.TBj.pb,customMessage:`Missing river section in WPO response. Debug id: ${P.debugId}`}})}0===N&&P&&P.serviceContext&&P.serviceContext.fdHead&&((0,ae.Z)(P.serviceContext),(0,oe.g)(P.serviceContext))}else{var U,B,q,J,Z,X;let e;this.enableBackfillContent&&(e=this.backfillCards.length-this.backfillCardIndex);const t=null===(U=this.lastResponse)||void 0===U?void 0:U.nextPageRequest;if(e&&t){const i=new URLSearchParams(t.nextPageUrl),n=(parseInt(i.get("newsSkip")||"0")||0)-e;n>=0&&(i.set("newsSkip",n.toString()),t.nextPageUrl=decodeURIComponent(i.toString()),this.backfillCards=[],this.backfillCardIndex=0)}let i={...$.initialRequest,...t,edgExpMask:this.edgExpMask,feedId:f,isXFeed:m,feedName:v??$.initialRequest.feedName,useProviderKey:w,doNotTriggerFREInSession:this.showFREConfirmation||!(null!==(B=p.childExperienceReferencesWC)&&void 0!==B&&B.interestFREOverlay),anaheimLayoutPromotion:I,anaheimContentSelection:M,inEdgeFeatures:k,revertTimes:T,adminDisabled:x,backgroundImageIsSet:C,newProfFreTime:D,newDevFreTime:A};if((0===N||2===N)&&S.T3.IsHeroNTP){i.pageOcid=c._3.getQueryParameterByName("ocid",(0,y.iA)()),i.segment=c._3.getQueryParameterByName("segment",(0,y.iA)()),i.scenario=c._3.getQueryParameterByName("scenario",(0,y.iA)()),"wind_spot_2"===i.pageOcid&&(i.assetId=c._3.getQueryParameterByName("assetId",(0,y.iA)())),i.timeoutMs=this.config.heroTimeoutMs||1500;const e=c._3.getQueryParameterByName("Date",(0,y.iA)()),t=(0,Ye.PJ)(e,this.config.enableStartMonday);if(Array.isArray(t)&&t.length>0&&(i.calendarDate=e.split("-").join(""),i.calendarStartDate=t[0],i.calendarEndDate=t[1]),i.scenario&&(0,b.S)()&&"Weather"===i.segment&&"Calendar"!==i.scenario){const e=this.updateQSParam(window.location.href,"scenario");window.history.replaceState({},"",e)}}if(this.config.isWaterfallFeed){var Q;const e=this.config.enableOneColumn||this.layout!==Fe._4.C1?this.layout:Fe._4.C2;let{waterfallFeedColumnsOffset:t,waterfallFeedColumnsOffsetForAds:n}=this.river[this.riverSectionIndex-1]||{};if(this.config.enableRenderedColOffsets&&null!==(Q=this.river)&&void 0!==Q&&Q.length){var K;const{adsOffset:e,columnsOffset:i,numProcessedCards:r}=(0,We.bO)(null===(K=this.waterfall)||void 0===K||null===(K=K[0])||void 0===K?void 0:K.columns,this.lastPageOffsets,this.waterfallRenderedHeightsMap,this.config.baseCardSize??304)||{};e&&(n=e),i&&(t=i),this.lastPageOffsets={preColumnsOffset:i,preAdsOffset:e,numProcessedCards:r||[]}}const r=(0,We.cP)(e,t,n,this.config);i={...i,...r}}R&&!S.T3.IsHeroNTP&&(i={...i,widgetsOn:!0}),E.YT.addOrUpdateTmplProperty("widgetsOnQspInRequest",R&&!S.T3.IsHeroNTP?"1":"0");await(0,$e.P)()&&(i={...i,copilotApiSupported:!0});let n=!1;var ee,te;if(this.config.enableWidgetsRegion&&!this.config.useDedicatedWidgetsManager)O=!(this.isFeedUpdatedOnScroll||null!==(ee=this.waterfall)&&void 0!==ee&&ee.length||"off"!==this.feedDisplaySetting&&"headingsonly"!==this.feedDisplaySetting),n="productivityHub"===F.Rb.SwitchedPivot;if(O||n?i={...i,disableContent:!0}:delete i.disableContent,!this.config.useDedicatedWidgetsManager){var ie;const e=(null===(ie=this.options)||void 0===ie?void 0:ie.widgetsQSPForBitmasking)||this.widgetsQSPForBitmasking;e&&!this.skipBitMasking&&(i={...i,renderedSegments:e})}if(i.feedId&&(i.query=""),"following"===i.feedName&&(this.lastResponse||(N=0)),(0,b.S)()&&(i.pageConfiguration=await this.getEdgeNextPageConfigurationValue()),Object.hasOwnProperty.call(i,"column")||(i.column=(0,Ne.TU)().currentColumnArrangement),this.config.enableSkipRetry&&i.skipRetry&&(i.skipRetry=!1),P=await this.dataProvider.fetch(i,N,null,null===(q=this.config)||void 0===q||null===(q=q.cmsAds)||void 0===q||null===(q=q.river)||void 0===q?void 0:q.length,null===(J=this.config)||void 0===J||null===(J=J.cmsAds)||void 0===J||null===(J=J.infopane)||void 0===J?void 0:J.length,this.adTrackingCount,this.largestWpoAdRankPerWpoResponse),Be(P,this.requestType,this.isXFeed||"default"!==i.feedName||!i.widgetsOn)&&!i.renderedSegments&&!r.Oq.renderedSegments){(function(e){const t=(0,y.iA)(),i=!!t&&S.T3.IsHeroNTP&&t.includes("segment=Weather");return null==e?void 0:e.some(e=>{var t;return null===(t=e.sections)||void 0===t?void 0:t.some(e=>{var t;return null===(t=e.cards)||void 0===t?void 0:t.some(e=>!i&&(null==e?void 0:e.type)===G.pL.WeatherSummary||i&&(0,Ue.c)(null==e?void 0:e.type))})})})(P.regions)||function(e,t){let i,n,r="debugId:"+e;var a,s,l;t&&(r+=`, partial:${t.isPartial}, source:${t.responseSource}, next page url:${null===(a=t.nextPageRequest)||void 0===a?void 0:a.nextPageUrl}`,i=null===(s=t.serviceContext)||void 0===s?void 0:s.debugInfo,n=null===(l=t.serviceContext)||void 0===l?void 0:l.fdHead),E.YT.sendAppErrorEvent({...o.QRs,message:"Weather card is missing from the response, "+r,pb:{...o.QRs.pb,debugId:e,customMessage:`DebugInfo: ${i}, FlightIds: ${n}`}})}(P.debugId,P)}if(null!==(Z=i.feedName)&&void 0!==Z&&Z.startsWith("following"))this.isStopUpdateFeedData=!(null!==(te=P)&&void 0!==te&&null!==(te=te.nextPageRequest)&&void 0!==te&&te.nextPageUrl);if(null!==(X=P)&&void 0!==X&&X.regions){let e=!1;for(let t=0;t<P.regions.length;t++)"river"===P.regions[t].region&&(e=!0,this.config.enableBuyDirectAd&&this.populateBuyDirectAdIndex(P.regions[t].sections));const t=P.regions.findIndex(e=>"widgets"===(null==e?void 0:e.region))>-1;e||O&&t||n||E.YT.sendAppErrorEvent({...o.TBj,pb:{...o.TBj.pb,customMessage:`Missing river section in WPO response. Debug id: ${P.debugId}`}})}this.config.isWaterfallFeed&&"off"!==this.feedDisplaySetting&&(0,We.aI)(i,P)}}catch(e){var ne;if(e instanceof r.fb&&(E.YT.addOrUpdateTmplProperty("wpofetchabort",e.silentExit?"silentexit":"continue"),this.isFetching=!1,this.releaseTtvr(),e.silentExit))return;let t=o.rIz;"following"===(v??(null==$||null===(ne=$.initialRequest)||void 0===ne?void 0:ne.feedName))&&(t=o._JL),(0,s.c_)(e,t,"Content fetch failed for Desktop New Feed",`Failed with exception : ${e}`)}if(this.isFetching=!1,P){if(this.config.enableWidgetsRegion&&!this.config.useDedicatedWidgetsManager){var re;const e=null===(re=P)||void 0===re?void 0:re.regions;if(null==e?void 0:e.find(e=>"widgets"===(null==e?void 0:e.region))){var se;const e=null===(se=P)||void 0===se?void 0:se.nextPageRequest,t=new URLSearchParams(null==e?void 0:e.nextPageUrl);this.widgetsQSPForBitmasking=(null==t?void 0:t.get("renderedSegments"))??""}}this.lastResponse=P}Le.Z.storeWpoNotificationPreviewData(P);const he=P&&P.pageContext&&P.pageContext.optimizationItems;if(he&&he.forEach(e=>{if("backupRegionStatus"===e.type&&e.data)try{var t;this.backupRegionStatus=(null===(t=JSON.parse(e.data))||void 0===t?void 0:t.Status)||""}catch(t){const i=o.eik;(0,s.vV)(i,"",void 0,{...i.pb,experienceId:this.experienceId,customMessage:`The backupRegionStatus message of the response: ${e.data}`,isPrerender:null===F.Rb||void 0===F.Rb?void 0:F.Rb.IsPrerender})}}),P){var pe;const e=null===(pe=P)||void 0===pe||null===(pe=pe.serviceContext)||void 0===pe?void 0:pe.emptyFeedReasons,t=null==e?void 0:e.split(",");this.isInsufficientResponse=null==t?void 0:t.includes("InsufficientResponseCausedByMutePub"),t&&this.isInsufficientResponse&&(this.setTtvrHeight(0),this.setPublisherFallbackFeed(P))}if(P&&P.serviceContext&&P.serviceContext.preRenderDisabled)return this.releaseTtvr(),void E.YT.addOrUpdateTmplProperty("responseEmpty","partialResponse");const fe=P&&(P.appError&&(null===(u=P.appError)||void 0===u?void 0:u.id)||P.status!==n.EY.Success&&P.status);if(!P||fe){var ve;let t;switch(this.requestType){case 0:null!==F.Rb&&void 0!==F.Rb&&F.Rb.IsPrerender?(t=o.Rhq,(0,xe.TI)(8)):t=o.ZLG;break;case 2:t=o.Lvw,(0,xe.TI)(8);break;default:t=o.DIe}return"following"===(v??(null==$||null===(ve=$.initialRequest)||void 0===ve?void 0:ve.feedName))&&(t=o._JL),this.releaseTtvr(!0),O||E.YT.sendAppErrorEvent({...t,pb:{...t.pb,experienceId:this.experienceId,customMessage:`RequestType: ${this.requestType}, Status: ${fe}`,isPrerender:null===F.Rb||void 0===F.Rb?void 0:F.Rb.IsPrerender,isPrerenderBeforeReveal:(0,V.EZ)(),isPaginationPrefetch:!!e}}),void E.YT.addOrUpdateTmplProperty("responseEmpty",`responseWithError${t.id}`)}if(P&&P.serviceContext&&P.serviceContext.debugInfo&&P.serviceContext.debugInfo.includes("layout:oneservice")&&E.YT.sendAppErrorEvent({...o.nJZ,message:"Default layout template is triggered from 1S",pb:{...o.nJZ.pb,experienceId:this.experienceId,customMessage:`RequestType: ${this.requestType}`,isPrerender:null===F.Rb||void 0===F.Rb?void 0:F.Rb.IsPrerender}}),null===(h=P)||void 0===h||!h.isStatic||(null!==F.Rb&&void 0!==F.Rb&&F.Rb.IsPrerender&&(0,xe.TI)(8),this.releaseTtvr(!0),this.isFirstRender)){if(this.config.useTreatmentsFromFeedResponse&&0===this.requestType)if(P){let e;window.isSSREnabled&&(e=await de.Q.getPreferenceSetting(ce.K5.tscollapsed)),Y.V_.addWpoOptimizationDataToLocalStorage(P.pageContext,S.T3.AppType,S.T3.CurrentRequestTargetScope,!1,this.config.enbWpoPromotionFromPSL,e,this.config.enbWpoPromForWidgets,this.config.enableWpoPromotNewSave,this.config.enableRecordFeedEngage),Y.V_.storeWpoOptimizationData(P),(0,ue.au)()}else(0,s.vV)(o.Aio,"");return this.enableBackfillContent&&this.processBackfillInResponse(P),P}E.YT.addOrUpdateTmplProperty("responseEmpty","isNotFirstRender")}async fetchResponse(e,t){var i;const n=0===t||2===t;if((0,b.S)()&&n){var a;const t=(0,r.km)();if(t)return w.vv.set("__isSSRWpoFeedConsumed__",!0),t;if(!w.vv.has("__isSSRWpoFeedConsumed__")&&null!==(a=window.ssrLayoutState)&&void 0!==a&&a.selectedFeedDisplaySetting){const t=window.ssrLayoutState.selectedFeedDisplaySetting;["off","onscroll","headingsonly"].includes(t)||(0,s.vV)(o.vJN,"",void 0,{...o.vJN.pb,requestId:e.requestId})}}const l=(null===F.Rb||void 0===F.Rb?void 0:F.Rb.IsPrerender)&&(null===(i=window.location.search)||void 0===i?void 0:i.indexOf("startpage=1"))>-1||this.config.riverSectionCardProviderConfig.disableWorker;if(n&&!this.isXFeed&&!l){let t="myfeed";"gaming"===e.feedName&&(t="gaming"),"following"===e.feedName&&(t="following");const i=this.config.riverSectionCardProviderConfig.removeTimeoutWebworker?void 0:1e3,n=await(0,se.H$)({id:t},i),r=n&&n.payload;if(r){const e=ce.xT.MultiColumn;if(ce.xT.MultiColumn===e&&n.fetched){const e=r.traceId;r.traceIdIndex=U(e,!0),(0,b.S)()&&B(r.traceId,r.debugId);return(0,k.ZF)().isFeedFromWW=1,r.tmpl&&E.YT.addOrUpdateTmplString(r.tmpl),Te.g.publish(Te.m.userIsSignedIn,{isSignedIn:r.isSignedIn,src:"WW-sdp"}),r}}}return this.dataProvider.fetchFromWpoService(e,null,Y.V_.enableEarlyMainFeedRequest&&0===t)}async consumeSamAdsData(e){const t=!0===F.Rb.IsPrerender?(0,k.gU)()-(0,Ae.W4)(Ie.xF):(0,k.gU)();(0,Ae.tD)("TTNativeAd.Consume",t);let i=!this.config.perfRemoveWait&&!this.shouldSkipTTVRForPrerenderAds();if(this.config.adEarlyRenderLayout){const{selectedFeedDisplaySetting:e}=(0,ze.zP)(te.h$).getCurrentState();this.config.adEarlyRenderLayout===e&&(i=!1)}i&&await(0,_.Qc)();const n=(e.placeHolderResponse&&e.placeHolderResponse.placements)??[];n.forEach(e=>{let{region:t}=e;const i=(this.missAdCountMap.get(t)??0)+1;this.missAdCountMap.set(t,i)});const r=(e.samResponse&&e.samResponse.placements)??[];r.forEach(e=>{let{region:t}=e;const i=(this.missAdCountMap.get(t)??0)-1;this.missAdCountMap.set(t,i)}),(this.config.adsPlacementForPeekView&&null!=n&&n.find(e=>"peekinfopane"===e.region)||null!=r&&r.find(e=>"peekinfopane"===e.region))&&this.nativeAdHelper.mapStrictPeekRegionIndexToAbsoluteRegionIndex({placeholderPlacements:n,samPlacements:r}),this.missAdCountMap.forEach((e,t)=>{E.YT.addOrUpdateTmplProperty("missAds_"+t,e.toString())}),this.config.backfillContentForFailedAuction&&e.placeHolderResponse&&!e.samResponse&&n.map(e=>Xe(e.region,e.regionIndex)).forEach(e=>this.backfillSlotSet.add(e)),this.config.backfillContentForMissingPlacements&&e.placeHolderResponse&&e.samResponse&&(n.map(e=>Xe(e.region,e.regionIndex)).forEach(e=>this.backfillSlotSet.add(e)),r.map(e=>Xe(e.region,e.index)).forEach(e=>this.backfillSlotSet.delete(e))),this.config.enableBuyDirectAd&&(e.placeHolderResponse.buyDirectAdIndex=this.buyDirectAdIndex,await this.nativeAdHelper.loadBuyDirectAd());const a=this.nativeAdHelper.updateAndFilterSamAdResponse(e.placeHolderResponse,e.samResponse);this.config.useWhyThisAdMetaTag&&this.nativeAdHelper.createMetaTags(a),this.nativeAdHelper.fillAdsMap(a),this.consumeAdsMap(),(0,b.S)()&&(this.config.enablePrerenderAds&&(0,V.EZ)()&&"hidden"===document.visibilityState?(0,V.GP)().then(()=>this.nativeAdHelper.fireServedTrackingCallForPlacements(a)):this.nativeAdHelper.fireServedTrackingCallForPlacements(a))}async consumeCmsAdsData(e){this.config.perfRemoveWait||this.shouldSkipTTVRForPrerenderAds()||await(0,_.Qc)(),this.nativeAdHelper.fillAdsMap(e),this.consumeAdsMap()}releaseTtvr(e){this.config.enableGlobalMonitor?((0,we.Qh)(),this.config.enableWidgetsRegion&&!this.config.useDedicatedWidgetsManager&&(0,we.PL)()):this.ttvrHelper.releaseUIDependencies(e)}canInsertAds(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1)>this.activeIndex}getAdsDataCanInsertAndCache(e){var t,i,n;if(null===(t=this.config)||void 0===t||!t.infopaneViewOptAdCount)return[];if(!e)return[];const r=(null===(i=e.samResponse)||void 0===i?void 0:i.placements)??[],a=(null===(n=e.placeHolderResponse)||void 0===n?void 0:n.placements)??[],[o,s]=(0,ye.uM)(r,e=>this.canInsertAds(e.index)),[l,d]=(0,ye.uM)(a,e=>this.canInsertAds(e.regionIndex)),c=(0,Ve.A)(e);(0,je.A)(c,"samResponse.placements",o),(0,je.A)(c,"placeHolderResponse.placements",l);const u=(0,Ve.A)(e);return(0,je.A)(u,"samResponse.placements",s),(0,je.A)(u,"placeHolderResponse.placements",d),[c,u]}async consumeCachedSamAds(){var e;null!==(e=this.config)&&void 0!==e&&e.infopaneViewOptAdCount&&0!==this.cachedSamAds.size&&this.cachedSamAds.forEach((e,t)=>{var i;this.canInsertAds(t)&&(Me.v.logSingleObject({consumeCachedInfopaneAds:{infopaneActiveIndex:this.activeIndex,adsIndices:null===(i=e.samResponse)||void 0===i||null===(i=i.placements)||void 0===i?void 0:i.map(e=>e.index),timeInMs:(0,k.gU)()}},!0),this.consumeSamAdsData(e),this.cachedSamAds.delete(t))})}async handleInfopaneRotate(e){var t,i;if(null===(t=this.config)||void 0===t||!t.infopaneViewOptAdCount)return;if(null!==(i=this.config)&&void 0!==i&&i.enableInfopaneCache&&this.consumeCachedSamAds(),!this.nativeAdHelper.shouldPrefetchInfopaneSamAds(e))return;const n=await this.nativeAdHelper.prefetchInfopaneSamAds(e);var r;if(null!=n&&n.samResponse)if(null!==(r=this.config)&&void 0!==r&&r.enableInfopaneCache){var a,o;const[e,t]=this.getAdsDataCanInsertAndCache(n);var s,l;if(null!=t&&null!==(a=t.samResponse)&&void 0!==a&&null!==(a=a.placements)&&void 0!==a&&a.length)Me.v.logSingleObject({cacheInfopaneAds:{infopaneActiveIndex:this.activeIndex,adsIndices:null===(s=t.samResponse)||void 0===s||null===(s=s.placements)||void 0===s?void 0:s.map(e=>e.index),timeInMs:(0,k.gU)()}},!0),this.cachedSamAds.set(Math.min(...(null===(l=t.samResponse)||void 0===l||null===(l=l.placements)||void 0===l?void 0:l.map(e=>e.index??-1))??[-1]),t);null!=e&&null!==(o=e.samResponse)&&void 0!==o&&null!==(o=o.placements)&&void 0!==o&&o.length&&this.consumeSamAdsData(e)}else this.consumeSamAdsData(n)}async fetchAndConsumeAds(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.river.length-1;const{batch8AdsOnPeak:i,enableAddingAdCoords:n,addAdBrandSafetySignals:r,isWaterfallFeed:a,delayAdsBlocking:o,adTemplateConfig:s,enableAdsTmplLogging:l,perfRemoveWait:d,passAdOcidRegSize:c}=this.config;if("edgeChromium"===S.T3.AppType&&0===t&&i&&null!==F.Rb&&void 0!==F.Rb&&F.Rb.IsPrerender){var u;const{selectedFeedDisplaySetting:e}=(null===(u=(0,ze.zP)(te.h$))||void 0===u?void 0:u.getCurrentState())??{};"peek"===e&&(t=1)}if(e===Ee.o_.Sam){var h,p;let e;this.isFirstAdRenderedDelayed&&(this.isFirstAdRenderedDelayed=!1,e=o&&(0,V.EZ)()?this.adPrerenderBlockingPromise:void 0);const i=await this.nativeAdHelper.fireSamAuction([e=>this.nativeAdHelper.fillAdsMap(e.callbackFnPlacementList),()=>this.consumeAdsMap()],t,void 0,e,(n||c||r)&&a?this.addAdPlacementLevelSignals:void 0,this.adsResponseCache,null===(h=this.lastResponse)||void 0===h?void 0:h.isFromCache);if(i){var f,v;if((null===F.Rb||void 0===F.Rb||null===(f=F.Rb.CurrentFlightSet)||void 0===f||!f.has("prg-ad-rmauctype"))&&null!=s&&s.enableBlockingQueue&&null!==F.Rb&&void 0!==F.Rb&&null!==(v=F.Rb.CurrentFlightSet)&&void 0!==v&&v.has("prg-ads-deref-rf")){((i.samResponse&&i.samResponse.placements)??[]).forEach(e=>{e.adAuctionType=ie.T.clientAuctionAd})}this.consumeSamAdsData(i)}else this.adRenderPipedPromise.set();l&&this.logAdsStatusTmpl(!0,t,null==i||null===(p=i.samResponse)||void 0===p?void 0:p.placements,null==i?void 0:i.placeHolderResponse.placements,(0,V.EZ)())}else{const e=await this.nativeAdHelper.fireCmsAuction(t);d||this.shouldSkipTTVRForPrerenderAds()||await(0,_.Qc)(),this.nativeAdHelper.fillAdsMap(e),this.consumeAdsMap(),l&&this.logAdsStatusTmpl(!1,t,void 0,e,(0,V.EZ)())}}updatePlacementItem(e,t,i){if((0,ye.MD)(e)&&e.subItems){let t=!1;const n=(e.fullSubItems??e.subItems).map(e=>{var n;if((0,ye.eE)(e)&&(0,ye.CH)(e))return t=!0,this.config.adsPlacementForPeekView&&("peekinfopane"===e.regionType&&"infopane"===this.adInfopaneRegionName||"infopane"===e.regionType&&"peekinfopane"===this.adInfopaneRegionName)?i(e,e.regionType,"river"):i(e,this.adInfopaneRegionName,"river");if((0,ye.mQ)(e)&&(0,ye.CH)(e))return t=!0,"peekinfopane"===this.adInfopaneRegionName?i(e,"resinfopane","peekriver"):i(e,`res${this.adInfopaneRegionName}`,"resriver");if(this.config.enableBuyDirectAd&&(0,ye.au)(e)&&(0,ye.CH)(e))return t=!0,this.buyDirectAdIndex.push(e.regionIndex),i(e,"infopane");if((this.config.enableShoppingInfopaneAd||this.config.enableShoppingInfopaneAdV2)&&ve(e.type)&&e.regionIndex&&(0,ye.CH)(e)&&null!==(n=e.placement)&&void 0!==n&&n.shoppingInfopaneAdData)return t=!0,i(e,"infopane");if((0,ye.ib)(e)&&e.subItems){let n=!1;const r={type:"infopane-tab"};if(r.subItems=e.subItems.map(e=>{if(!e.subItems&&e.subCards&&(e.subItems=e.subCards),e.subItems){let t=!1;const r=e.subItems.map(e=>(0,ye.eE)(e)&&(0,ye.CH)(e)?(t=!0,i(e,"infopane-tab")):e);if(t)return n=!0,{...e,subItems:r}}return e}).filter(e=>!e.shouldHide),n){t=!0;return{...e,subItems:r.subItems.slice(0,e.subItems.length)}}return r}if(((0,ye.Fn)(e)||(0,ye.Au)(e))&&e.subItems){let n=!1;const r=e.subItems.map(e=>(0,ye.eE)(e)&&(0,ye.CH)(e)?(n=!0,i(e,"infopane-tab")):e);if(n)return t=!0,{...e,subItems:r}}return e}).filter(e=>!e.shouldHide);if(t){const t={...e,subItems:n.slice(0,e.subItems.length)};return e.fullSubItems&&(t.fullSubItems=n),t}return e}if((0,ye.ib)(e)&&e.subItems){let t=!1;const n=e.subItems.map(e=>{if(!e.subItems&&e.subCards&&(e.subItems=e.subCards),e.subItems){let n=!1;const r=e.subItems.map(e=>(0,ye.eE)(e)&&(0,ye.CH)(e)?(n=!0,i(e,"infopane-tab")):e);if(n)return t=!0,{...e,subItems:r}}return e}).filter(e=>!e.shouldHide);if(t){const t={...e,subItems:n.slice(0,e.subItems.length)};return e.fullSubItems&&(t.fullSubItems=n),t}return e}if((0,ye.Au)(e)){let t=!1;const n=e.subItems.map(e=>(0,ye.eE)(e)&&(0,ye.CH)(e)?(t=!0,i(e,"dense-river")):e);if(t)return{...e,subItems:n}}if((0,ye.eE)(e)&&(0,ye.CH)(e)){if("river"===t)return this.config.adsPlacementForPeekView&&("peekriver"===e.regionType&&"river"===this.adRiverRegionName||"river"===e.regionType&&"peekriver"===this.adRiverRegionName)?i(e,e.regionType||this.adRiverRegionName,"river"):i(e,this.adRiverRegionName,"river");if("rightrail"===t)return i(e,"rightrail")}return(0,ye.mQ)(e)&&(0,ye.CH)(e)?"peekriver"===this.adRiverRegionName?i(e,"resriver","resriver"):i(e,`res${this.adRiverRegionName}`,"resriver"):e}updateCoordsCache(e,t){if(!e||!e.cardElement&&!e.outerCSCard||!(0,ye.eE)(e)&&!(0,ye.mQ)(e)&&!t)return;const i=(e.cardElement||e.outerCSCard).getBoundingClientRect(),n=i&&{coords:{x:i.left,y:i.top}};var r;n&&(t||e.id)&&(this.nativeAdHelper.updateCoordsCacheForPredicted(t?"infopane":e.id,n),null===(r=(0,I.Lg)())||void 0===r||r.setItem(le.Ph,"false"))}consumeAdsMap(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.nativeAdHelper.isAdsMapEmpty();t&&!this.backfillSlotSet.size&&e?this.adRenderPipedPromise.set():(this.regionKeys.forEach(e=>{const i=this[e]&&this[e].map((t,i)=>{const{cardMetadataList:n,hasPlaceHolderAds:r}=t;if(!r||!n)return t;let a=!1,o=!1;const s=[],l=new Map,d=(t,i,n)=>{var r;let d;d=(this.config.enableShoppingInfopaneAd||this.config.enableShoppingInfopaneAdV2)&&ve(t.type)&&t.regionIndex&&null!==(r=t.placement)&&void 0!==r&&r.shoppingInfopaneAdData?be(t,me(t)):this.config.enable1stRowAd?this.nativeAdHelper.createNativeAdCardMetadata(i,t.regionIndex,t.wpoRank,t.wpoAdRank,void 0,t.type,t.adjacentCardIds,t.isPartialBrandSafety):this.nativeAdHelper.createNativeAdCardMetadata(i,t.regionIndex,t.wpoRank,t.wpoAdRank,t.wpoId,t.type,t.adjacentCardIds,t.isPartialBrandSafety),d.rowCount=t.rowCount,d.column=t.column,d.order=t.order,d.wpoRank=t.wpoRank,d.traceIdIndex=t.traceIdIndex;const c=Xe(i,t.regionIndex);if("infopane-tab"!==i&&this.backfillSlotSet.has(c)){if(this.config.hideInfopaneAdInsteadOfBackfilling&&("infopane"===i||"resinfopane"===i||i.includes("infopanelock")||"peekinfopane"===i))return o=!0,this.backfillCompleteSet.add(c),this.backfillSlotSet.delete(c),{...d,shouldHide:!0};const r=this.createBackfillCardMetadata("ad");if(r){if(r.rowCount=t.rowCount,r.column=t.column,r.order=t.order,r.wpoRank=t.wpoRank,r.traceIdIndex=t.traceIdIndex,this.config.enableGlobalMonitor&&"infopane"!==i&&"resinfopane"!==i&&!i.includes("infopanelock")&&"peekinfopane"!==i){const a=(0,pe.Ax)(t);if(a&&(0,pe.hy)(a.key(t,e)),s.push(r),r.id){const e=d.id??this.nativeAdHelper.getNativeAdId(i,t.regionIndex),a=this.nativeAdHelper.getNativeAdId(n||"river",t.regionIndex);l.set(e,r.id),l.set(a,r.id)}}const a=(this.backfillCountMap.get(i)??0)+1;return this.backfillCountMap.set(i,a),o=!0,this.backfillCompleteSet.add(c),this.backfillSlotSet.delete(c),r}}return(0,ye.CH)(d)?a=!0:(o=!0,this.backfillCompleteSet.add(c),this.backfillSlotSet.delete(c)),d},c=n.map(t=>this.updatePlacementItem(t,e,d));if(!o)return{...this[e][i],hasPlaceHolderAds:a};if(s.length&&(0,pe.D8)(s,e),this.config.isWaterfallFeed&&"off"!==this.feedDisplaySetting){const i=this.updateAdsInWaterfall(c,e,l);return{...t,cardMetadataList:c,hasPlaceHolderAds:a,waterfall:i}}const u=this.mapFeedData(c,{layoutTemplateName:t.templateId,region:e,parentTelemetryObject:this[Pe.r6[e]],prevCardCount:t.prevCardCount});return{...t,cardMetadataList:c,hasPlaceHolderAds:a,feedData:u}});if(this[e]=i,this.config.enablePrerenderAds&&(0,V.EZ)()&&(0,b.S)()&&"hidden"===document.visibilityState&&!t){(0,Ae.tD)("TTNativeAd.Prerender",(0,k.gU)());(0,k.ZF)().isPrerenderedAd=1,(0,ye.g1)(!0)}else t||(0,ye.g1)();this.adRenderPipedPromise.set()}),this.backfillCountMap.forEach((e,t)=>{E.YT.addOrUpdateTmplProperty("backfillContentToAdSlot_"+t,e.toString())}),E.YT.addOrUpdateTmplProperty("riverFeedSectionCount",`${this.waterfall.length}`))}async verifyAndRenderSamAdPrediction(){let e;this.config.enableWpoAdRank&&(e=this.nativeAdHelper.getSamRequest());const t=this.nativeAdHelper.getPredictSamAdsData();t&&(this.verifySamAdPredictionAccuracy(t,e),this.consumeSamAdsData(t))}verifySamAdPredictionAccuracy(e,t){var i,n,r;if(!this.config.enableWpoAdRank||null==e||null===(i=e.samResponse)||void 0===i||!i.placements||0===e.samResponse.placements.length)return;const a=null===(n=this.river)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.cardMetadataList)||void 0===n?void 0:n.filter(e=>"nativead"===(null==e?void 0:e.type));if(!a||0===a.length)return;const s=null==a?void 0:a.map(e=>null==e?void 0:e.wpoAdRank),l=(null==t||null===(r=t.placements[0])||void 0===r?void 0:r.indices)||[],d=[];l.forEach(e=>{s.includes(e)||"number"==typeof e&&d.push(e)}),d.length>0&&E.YT.sendAppErrorEvent({...o.P75,pb:{...o.P75.pb,experienceId:this.experienceId,customMessage:"SAM ad prediction failed for wpoAdRank",latestWPOSamPlacementIndices:l,firstSectionWpoAdRank:s,missWpoAdRank:d}})}async verifyAndRenderCmsAdPrediction(){const e=this.nativeAdHelper.getPredictCmsAdsData();e&&this.consumeCmsAdsData(e)}async updateNativeAds(e){this.fetchAndConsumeAds(Ee.o_.Sam,e),this.fetchAndConsumeAds(Ee.o_.Cms,e)}predictSectionsInFirstPage(){var e;let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if((!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&!(0,V.EZ)())return;if(this.experienceId===ne.dXe)return;const{selectedFeedDisplaySetting:i}=(null===(e=(0,ze.zP)(te.h$))||void 0===e?void 0:e.getCurrentState())??{};if(!t||"always"===i)try{const e=this.feedElementKeyMap.get(this.experienceId);let t=0;if(this.config.isWaterfallFeed){var n;const i=(null===(n=this.unrenderedRegionsData.find(e=>{let{region:t}=e;return"river"===t}))||void 0===n?void 0:n.waterfallSections)||[],a=(0,We.sB)(e,i,this.config.baseCardSize??304,0);this.sectionsInFirstPage=a;for(let e=0;e<a;e++){var r;null===(r=i[e])||void 0===r||null===(r=r.columns)||void 0===r||r.forEach(e=>{var i;const n=null==e||null===(i=e.cards)||void 0===i?void 0:i.filter(e=>"placeholder"!==e.type);t+=null==n?void 0:n.length})}}else{var a;const i=this.getLayoutTemplateMap(),n=(null===(a=this.unrenderedRegionsData.find(e=>{let{region:t}=e;return"river"===t}))||void 0===a?void 0:a.sections)||[];if(n.some(e=>Q.ak.includes(e.layoutTemplate))||void 0===i)return;const r=(0,Ce.iO)(e,i,this.layout,n,12,0);this.sectionsInFirstPage=r;for(let e=0;e<r;e++){var s;t+=null===(s=n[e])||void 0===s||null===(s=s.cards)||void 0===s?void 0:s.length}}E.YT.addOrUpdateTmplProperty("Prerendered_cards",t.toString())}catch(e){const t=o.yTZ;E.YT.sendAppErrorEvent({...t,pb:{...t.pb,experienceId:this.experienceId,customMessage:e.message,isPrerender:null===F.Rb||void 0===F.Rb?void 0:F.Rb.IsPrerender}})}}unblockAdsOnPrerenderedFeed(){this.adPrerenderBlockingPromise.set()}prerenderSubsequentSections(){if(!(0,V.EZ)())return;let e=this.river.length;for(;++e<=this.sectionsInFirstPage;)this.consumeUnrenderedFeedLayout()}subscribeUnblockAdsPageVisible(){if((0,V.EZ)())if("visible"===document.visibilityState)this.unblockAdsOnPrerenderedFeed();else{const e=()=>{if("visible"===document.visibilityState){this.isFeedStaleWithThresholdReached()||this.unblockAdsOnPrerenderedFeed()}document.removeEventListener("visibilitychange",e)};document.addEventListener("visibilitychange",e)}}validateAuthRequestMatch(e){e&&(0,_.Qc)().then(()=>{const t=(0,ze.zP)(te.h$);t&&t.getPrimaryAccountInfoAsync().then(t=>{if("MSA"===t.accountType&&!e.isSignedIn){const t=o.pHh;(0,s.vV)(t,"User is signed in, but the request we made was not",void 0,{...t.pb,customMessage:e.src,experienceId:this.experienceId,isPrerender:null===F.Rb||void 0===F.Rb?void 0:F.Rb.IsPrerender})}})})}shouldSkipTTVRForPrerenderAds(){return!(!this.config.perfRemoveWaitPrerender||!(0,V.EZ)())}convertNestedCard(e){return e.subCards[0].type=e.type,e.subCards[0].subType=e.subType,e=e.subCards[0]}convertNewsGroupsCard(e){return{id:e.id,type:e.type,subType:e.subType,subCards:e.subCards||[]}}processBackfillInResponse(e){var t;let i=[];if(this.isSuperDataProviderEnabled){var n;const t=(null===(n=e.sections)||void 0===n?void 0:n.findIndex(e=>"backup"===e.region))??-1;var r;if(t>-1)i=(null===(r=e.sections)||void 0===r||null===(r=r.splice(t,1))||void 0===r||null===(r=r.pop())||void 0===r?void 0:r.subSections)??[]}else{var a;const t=(null===(a=e.regions)||void 0===a?void 0:a.findIndex(e=>"backup"===e.region))??-1;var l;if(t>-1)i=(null===(l=e.regions)||void 0===l||null===(l=l.splice(t,1))||void 0===l||null===(l=l.pop())||void 0===l?void 0:l.sections)??[]}const d=(null===(t=i)||void 0===t?void 0:t.reduce((e,t)=>e.concat(t.cards),[]))??[];!d.length&&re.vI.includes(this.backupRegionStatus)&&(0,s.vV)(o.q9J,"Issue with backfill region",void 0,{...o.q9J.pb,customMessage:`backupRegionStatus: ${this.backupRegionStatus}. Backfill card not found in backfill region`}),this.backfillCards=d,this.backfillCardIndex=0}createBackfillCardMetadata(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ad";return this.backfillCardIndex>=this.backfillCards.length?((0,s.vV)(o.JN,"Backfill content is not enough to be consumed",`Backfill for card type: ${e}. Backfill content is not enough to be consumed`,o.JN.pb),null):this.backfillCards[this.backfillCardIndex++]}logAdsStatusTmpl(e,t,i,n,r){const a=(i||[]).filter(e=>e.region&&e.region.includes("river")).map(e=>`${e.region}-${e.index}`),o=(n||[]).filter(e=>e.region&&e.region.includes("river")).map(e=>`${e.region}-${e.regionIndex}`);E.YT.addOrUpdateTmplProperty(`ads-log-${e?"s":"c"}-${t}`,`${r?1:0}-${a.join()}-${o.join()}`)}logDeepRiverAdsSectionServed(e){e>15&&E.YT.addOrUpdateTmplProperty("ads-served-15","1"),e>10&&E.YT.addOrUpdateTmplProperty("ads-served-10","1")}async getEdgeNextPageConfigurationValue(){const e=(0,ze.zP)(te.h$);if(!e)return;const t=await e.getPrimaryAccountInfoAsync(!1);return(0,ee.UU)(e.getCurrentState(),"MSA"===(null==t?void 0:t.accountType))}populateBuyDirectAdIndex(e){for(let i=0;i<e.length;i++){const n=e[i].cards;for(let e=0;e<n.length;e++)if("infopane"===n[e].type){const i=n[e].subItems;for(let e=0;e<i.length;e++){var t;if("directbuyad"===i[e].type)null===(t=this.buyDirectAdIndex)||void 0===t||t.push(e+1)}}}}setAdsRegionNameToPeekOrNormal(e){let{usePeekOnPeekMode:t,updateRiverPlacements:i}=e;!this.config.adsPlacementForPeekView||this.isNTPPeek&&t||("river"===this.adRiverRegionName&&"infopane"===this.adInfopaneRegionName&&t?(this.adRiverRegionName="peekriver",this.adInfopaneRegionName="peekinfopane",this.isNTPPeek=!0):(this.adRiverRegionName=S.T3.IsHeroNTP?"riverlock":"river",this.adInfopaneRegionName=S.T3.IsHeroNTP?"infopanelock":"infopane",this.isNTPPeek=!1),this.nativeAdHelper&&(this.nativeAdHelper.isNTPPeek=this.isNTPPeek,!this.isNTPPeek&&i&&this.nativeAdHelper.updateRiverInfopanePlacementsToNormal()),this.dataProvider instanceof r.Oq&&this.dataProvider.updateMapperHelperIsNTPPeek(this.isNTPPeek))}storeToPlacementTracker(e,t){if("nativead"===(null==e?void 0:e.type)||"cmsad"===(null==e?void 0:e.type)){const n=this.masterPlacementTracker[t],r=Object.keys(n);for(const a of r){var i;const r=(null==n?void 0:n[a].get(e.type))||[];r.push(e.wpoAdRank??0),null===(i=this.masterPlacementTracker[t])||void 0===i||i[a].set(e.type,r.sort((e,t)=>e-t))}}}reconcileAdTypes(e,t){if("nativead"===(null==e?void 0:e.type)||"cmsad"===(null==e?void 0:e.type)){const i=`${t}_wfcard${null==e?void 0:e.wpoId}`,n=this.masterCardMapWpoItems.get(i);if(null!=n&&n.type&&(null==n?void 0:n.type)!==e.type)return e.type=n.type,!0}return!1}rebaseAdRegionIndex(e){var t,i,n,r;const a=null===(t=this.masterPlacementTracker[e])||void 0===t?void 0:t[this.layout];let o=!1;const s=null===(i=this.masterLayoutCardList[e])||void 0===i?void 0:i[this.layout];if(a&&s){s&&(null===(n=s[0])||void 0===n?void 0:n.cards.length)===(null===(r=s[1])||void 0===r?void 0:r.cards.length)+1&&(o=!0);for(let t=this.placementTrackerRow;t<((null==s||null===(l=s[0])||void 0===l?void 0:l.cards.length)??0);t++){var l;for(let i=0;i<((null==s?void 0:s.length)??0);i++){let n=t;1===i&&o&&n--;const r=null==s?void 0:s[i],l=null==r?void 0:r.cards[n];if(!l)continue;this.reconcileAdTypes(l,e)&&r&&(r.cards[n]=l);const d=((null==a?void 0:a.get(l.type))??[]).shift();d&&(l.wpoAdRank=d)}this.placementTrackerRow=t}this.placementTrackerRow++}}updateLargestWpoAdRankAllColums(e){var t,i;const n=null===(t=this.dataProvider)||void 0===t?void 0:t.getWpoIdResponseIndex(),r=null==e?void 0:e[0];null==r||null===(i=r.columnLayoutList)||void 0===i||i.forEach((e,t)=>{const i=null==e?void 0:e.map(e=>e.cards).flat();if(null!=i&&i.length){const e=i.map(e=>null==e?void 0:e.wpoAdRank).filter(e=>void 0!==e);if(0===e.length)return;const a=Math.max(...e);var r;if(void 0===this.largestWpoAdRankAllColumns.get(t))this.largestWpoAdRankAllColumns.set(t,new Map([[n,a]]));else null===(r=this.largestWpoAdRankAllColumns.get(t))||void 0===r||r.set(n,a)}})}updateLargestWpoAdRankPerWpoResponse(e){var t,i;const n=null===(t=this.dataProvider)||void 0===t?void 0:t.getWpoIdResponseIndex(),r=null==e?void 0:e[0],a=null==r||null===(i=r.cards)||void 0===i?void 0:i.filter(e=>"nativead"===e.type);if(0===a.length)return;const o=a.map(e=>null==e?void 0:e.wpoAdRank).filter(e=>void 0!==e);0!==o.length&&this.largestWpoAdRankPerWpoResponse.set(n,Math.max(...o))}addLargestWpoAdRankToResponse(e){if(this.config.enableWpoAdRank){var t,i;const r=null===(t=e[0])||void 0===t?void 0:t.columnLayoutList;if(null==r||!r.length)return;const a=null===(i=this.dataProvider)||void 0===i?void 0:i.getWpoIdResponseIndex();if(0===a||!this.largestWpoAdRankAllColumns.size)return;for(let e=0;e<r.length;e++){var n;const t=r[e],i=(null===(n=this.largestWpoAdRankAllColumns.get(e))||void 0===n?void 0:n.get(a-1))||0;for(const e of t){e.cards.forEach(e=>{e.wpoAdRank&&"nativead"===e.type&&(e.wpoAdRank=e.wpoAdRank+i)})}}}}}var Ke=i(55331),et=i(57109),tt=i(1698),it=i(79569),nt=i(82911),rt=i(26641);const at={getFeedDataForCard:e=>(0,rt.BQ)(e),viewTemplate:rt.wT};var ot=i(27833),st=i(96950),lt=i(11622);const dt=st.qy`
<div class="${e=>e.cardSize}" style="grid-area:${e=>e.grid_area};">
    ${e=>(0,lt.yN)(e.experienceInfo,{properties:{cardMetadata:e.cardMetadata,visualReadinessCallback:e.visualReadinessCallback}})}
</div>
`;var ct=i(19608),ut=i(77512);const ht={getFeedDataForCard:e=>function(e){var t;const{parentTelemetryObject:i,cardMetadata:n,visualReadinessCallback:r}=e;if(!n||!n.subCards)return(0,ut.wc)();n.subCards.forEach(e=>{var t;if(null!=e&&null!==(t=e.subCards)&&void 0!==t&&t.length){const t=e.subCards[0];t.url&&!t.destinationUrl&&(t.destinationUrl=t.url)}});const a={instanceId:"channelFilterCard",configRef:{experienceType:"ChannelFilterCard",instanceSrc:"default"}},o=null==a?void 0:a.instanceId,s={id:o,childTemplateType:"channel-filter-card",telemetryObject:i,experienceInfo:a,cardMetadata:n,visualReadinessCallback:r};return(0,ct.bw)({id:o,experienceType:null==a||null===(t=a.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},s)}(e),viewTemplate:dt};var pt=i(70438),ft=i(87526),vt=i(30010),gt=i(31752);const mt=st.qy`
    ${e=>(0,lt.yN)(e.contentGroupConfigInfo,{attributes:{style:`grid-area:${e.gridArea}`,class:`${e.cardSize}`},properties:{contentGroupMetadata:e.contentGroupMetadata,isDarkModeForMobile:e.isDarkModeForMobile,displaySettings:e.displaySettings,cardSize:e.cardSize,setShouldScrollToComments:e.setShouldScrollToComments,onCardClickCallback:e.onCardClickCallback,onHeaderTextClickback:e.onHeaderTextClickback,cardActionMenuClickCallback:e.cardActionMenuClickCallback,actionMenuLocalizedStrings:e.actionMenuLocalizedStrings,contentGroupConfigInfo:e.contentGroupConfigInfo,parentTelemetry:e.parentTelemetryObject,readAndEarnRewardsEnabled:e.readAndEarnRewardsEnabled,rewardsData:e.rewardsData,shareActionHandler:e.shareActionHandler,adCardClickCallback:e.adCardClickCallback,summaryArticleClickHandler:e.summaryArticleClickHandler,enableLargerSizeSocialBar:e.enableLargerSizeSocialBar,enableSmallerContentPadding:e.enableSmallerContentPadding,enableSmallerMarginBottom:e.enableSmallerMarginBottom,enableSydneyFeaturesMenu:e.enableSydneyFeaturesMenu,enableSydneySummary:e.enableSydneySummary,enableSydneyFeatureForMobile:e.enableSydneyFeatureForMobile,cardAIDigestMenuClickCallback:e.cardAIDigestMenuClickCallback,visualReadinessCallback:e.visualReadinessCallback},memoize:!1})}
`;const bt={getFeedDataForCard:e=>function(e){var t;const{cardMetadata:i,isDarkModeForMobile:n,configOptions:r,parentTelemetryObject:a,displaySettings:o,mobileCardClickCallback:s,newsXfeedNavigationHandlerCallback:l,cardActionMenuClickCallback:d,setShouldScrollToComments:c,actionMenuLocalizedStrings:u,readAndEarnRewardsEnabled:h,rewardsData:p,shareActionHandler:f,adCardClickCallback:v,summaryArticleClickHandler:g,cardAIDigestMenuClickCallback:m,visualReadinessCallback:b}=e;if(r&&r.useSharedTelemetry)return(0,rt.BQ)(e,"content-group");const y=r&&r,{useMobile:w,isMsnMobile:$,isEdge:C,isLauncher:k,isThirdParty:S,configRef:x}=r,T=w&&!$&&!C&&!k&&!S,D={id:"contentGroup",configInstanceSrc:null==x?void 0:x.instanceSrc,childTemplateType:"content-group",parentTelemetryObject:a,contentGroupConfigInfo:y,contentGroupMetadata:i,isDarkModeForMobile:n,displaySettings:o,onCardClickCallback:s,onHeaderTextClickback:l,cardActionMenuClickCallback:d,setShouldScrollToComments:c,actionMenuLocalizedStrings:u,readAndEarnRewardsEnabled:h,rewardsData:p,shareActionHandler:f,adCardClickCallback:v,summaryArticleClickHandler:g,cardAIDigestMenuClickCallback:m,enableLargerSizeSocialBar:null==r?void 0:r.enableLargerSizeSocialBar,enableSmallerMarginBottom:null==r?void 0:r.enableSmallerMarginBottom,enableSmallerContentPadding:null==r?void 0:r.enableSmallerContentPadding,enableSydneySummary:null==r?void 0:r.enableSydneySummary,enableSydneyFeaturesMenu:null==r?void 0:r.enableSydneyFeaturesMenu,enableSydneyFeatureForMobile:T,visualReadinessCallback:b};return(0,ct.bw)({id:"contentGroup",experienceType:null==y||null===(t=y.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},D,null,!0)}(e),viewTemplate:mt};var yt=i(36653),wt=i(71854),$t=i(31371);const Ct={getFeedDataForCard:e=>(0,rt.BQ)(e),viewTemplate:rt.wT};var kt=i(4670);const St=st.qy`
    ${kt.t}
`;var xt=i(30216),Tt=i(36783);const Dt=[xt.X.Mute,xt.X.MuteWebVideo,xt.X.WhyAmISee];const At={getFeedDataForCard:e=>function(e){var t;const{configOptions:{availableActions:i}}=e,n=null==i?void 0:i.filter(e=>!Dt.includes(e)),r=JSON.parse(e.cardMetadata.data),a={...e,cardMetadata:r},o=(0,Tt.y5)(a);return null!==(t=o.defaultLayout)&&void 0!==t&&t[0]&&(o.defaultLayout[0].actionsArrayOverride=n,o.defaultLayout[0].enableCardHideStoryIcon=!1,o.defaultLayout[0].isFirstSectionCard=!0),o}(e),viewTemplate:St},It={getFeedDataForCard:e=>(0,rt.BQ)(e),viewTemplate:rt.wT};var Mt=i(46753);var Ft=i(16686);const Pt={getFeedDataForCard:e=>function(e){try{const{cardMetadata:t,configOptions:i}=e;if(!t)throw new Error("Missing required parameters");if(!t.subCards||!t.subCards.length)throw(0,s.vV)(o.DwE,"Service context returned empty subcards in metadata"),new Error("Missing required parameters");return t.subCards=t.subCards.slice(0,2),t.feed={canonicalName:"DailyWonderHeroRecommended"},(0,Mt.A)(e)}catch(e){(0,s.c_)(e,o.cvX,"Error in feed-layout DailyWonderVideoListCardDataMapper")}return null}(e),viewTemplate:st.qy`
    ${Ft.T}
`};var Rt=i(38372),Ot=i(30972),Nt=i(4373);const zt={getFeedDataForCard:e=>(0,rt.BQ)(e),viewTemplate:rt.wT};var Et=i(50976),Lt=i(76865),Ht=i(17755),_t=i(13668),Vt=i(91532),jt=i(26020);const Wt=st.qy`
    <fluent-card 
        style="grid-area:${e=>e.gridArea}"
        class="${e=>e.cardSize}"
    >    
        ${e=>e.gamingRecentlyPlayedCardConfigInfo&&(0,lt.yN)(e.gamingRecentlyPlayedCardConfigInfo,{memoize:!1,properties:{metaData:e.metaData,telemetryExt:e.telemetryExt,openLinksInNewTab:e.openLinksInNewTab,cardSize:e.cardSize,sdCardActionClickHandler:e.sdCardActionClickHandler,hideCardCallback:e.hideCardCallback,refreshSDCardSection:e.refreshSDCardSection,goToPersonalizeSettingsCallback:e.goToPersonalizeSettingsCallback}})}
    </fluent-card>
`;const Ut={getFeedDataForCard:e=>function(e){var t;const{cardMetadata:i,hideCardCallback:n,openLinksInNewTab:r,refreshSDCardSection:a,sdCardActionClickHandler:o,configOptions:s,goToPersonalizeSettingsCallback:l}=e,d=s&&s,c={id:"gamingRecentlyPlayedCard",childTemplateType:"gaming-recentlyplayed-card",openLinksInNewTab:r,gamingRecentlyPlayedCardConfigInfo:d,metaData:i,sdCardActionClickHandler:o,hideCardCallback:n,refreshSDCardSection:a,goToPersonalizeSettingsCallback:l};return(0,ct.bw)({id:"gamingRecentlyPlayedCard",experienceType:null==d||null===(t=d.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},c)}(e),viewTemplate:Wt};var Bt=i(52201);const qt=st.qy`
<fluent-card
    style="grid-area:${e=>e.gridArea};contain:unset;content-visibility:visible"
    class="${e=>e.cardSize}"
>
    <bing-health-card
        config-instance-src=${e=>(0,Bt.v)(e.bingHealthAnswerConfigInfo)}
        instance-id=${e=>e.bingHealthAnswerConfigInfo.instanceId}
        data-t="${e=>e.telemetryObject.getMetadataTag()}"
        :parentTelemetry=${e=>e.parentTelemetryObject}
        :telemetryExt=${e=>e.telemetryExt}
        :binghealthCardData=${e=>e.binghealthCardData}
        :useInlineSvgIcons=${e=>e.useInlineSvgIcons}
        :sdCardActionClickHandler=${e=>e.sdCardActionClickHandler}
        :refreshFeed=${e=>e.refreshFeed}
        :goToPersonalizeSettingsCallback=${e=>e.goToPersonalizeSettingsCallback}
    >
    </bing-health-card>
</fluent-card>
`;const Jt={getFeedDataForCard:e=>function(e){try{var t;const{configOptions:i,parentTelemetryObject:n,cardMetadata:r,useInlineSvgIcons:a,refreshSDCardSection:o,refreshFeedCallback:s,goToPersonalizeSettingsCallback:l,sdCardActionClickHandler:d}=e,c=i&&i,u={id:"bingHealthCard",childTemplateType:"health-card",useInlineSvgIcons:a,parentTelemetryObject:n,bingHealthAnswerConfigInfo:c,binghealthCardData:r&&r.data&&JSON.parse(r.data),sdCardActionClickHandler:d,refreshFeed:o||s,goToPersonalizeSettingsCallback:l};return(0,ct.bw)({id:"bingHealthCard",experienceType:null==c||null===(t=c.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},u)}catch(e){(0,s.c_)(e,o.QfK,"Error in Health Card data Mapper")}}(e),viewTemplate:qt};var Zt=i(7881),Gt=i(37895),Yt=i(63267);const Xt=st.qy`
<fluent-card
    style="grid-area:${e=>e.gridArea};contain:none;content-visibility:visible"
    class="${e=>e.cardSize}"
>
${e=>e.horoscopeAnswerConfigInfo&&(0,lt.yN)(e.horoscopeAnswerConfigInfo,{properties:{parentTelemetry:e.parentTelemetryObject,horoscopeData:e.horoscopeData,goToPersonalizeSettingsCallback:e.goToPersonalizeSettingsCallback}})}
</fluent-card>
`;const Qt={getFeedDataForCard:e=>function(e){var t;const{configOptions:i,parentTelemetryObject:n,cardMetadata:r,goToPersonalizeSettingsCallback:a}=e;let o;i&&i.childExperienceReferencesWC&&(o=i.childExperienceReferencesWC.horoscopeCard),o&&o.instanceId||(o=i&&i);const s={id:"horoscopeCard",childTemplateType:"horoscope-card",goToPersonalizeSettingsCallback:a,parentTelemetryObject:n,horoscopeAnswerConfigInfo:o,horoscopeData:r&&r.data&&JSON.parse(r.data)};return(0,ct.bw)({id:"horoscopeCard",experienceType:null===(t=o)||void 0===t||null===(t=t.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},s)}(e),viewTemplate:Xt},Kt=st.qy` 
    ${e=>e.hotListCardConfigInfo&&(0,lt.yN)(e.hotListCardConfigInfo,{attributes:{style:`grid-area:${e.gridArea}`,class:`${e.cardSize}`,size:`${e.cardSize}`},properties:{cardMetadata:e.cardMetadata,cardLayout:e.cardSize,parentTelemetry:e.parentTelemetryObject,goToPersonalizeSettingsCallback:e.goToPersonalizeSettingsCallback,refreshFeedCallback:e.refreshFeedCallback,isWidgetRegion:e.isWidgetRegion,turnOffWidgetsRegionCallback:e.turnOffWidgetsRegionCallback,manageWidgetsRegionCallback:e.manageWidgetsRegionCallback,hideCardCallback:e.hideCardCallback},memoize:"winWidgets"!==S.T3.AppType&&"windowsShellV2"!==S.T3.AppType})}
`,ei=st.qy`
    ${Kt}
`;var ti=i(78750);const ii={getFeedDataForCard:e=>(0,ti.H)(e),viewTemplate:ei};var ni=i(13772),ri=i(58094),ai=i(81981),oi=i(88798);const si={getFeedDataForCard:e=>(0,oi.O)(e),viewTemplate:ai.Z};var li=i(36532);const di={getFeedDataForCard:e=>(0,rt.BQ)(e),viewTemplate:rt.wT};var ci=i(28076),ui=i(83752);const hi=st.qy`
    ${e=>(0,lt.yN)(e.miTHeroConfigInfo,{properties:{cardMetadata:e.cardMetadata,parentTelemetry:e.parentTelemetryObject,cardSize:e.cardSize,cardType:e.cardType,goToPersonalizeSettingsCallback:e.goToPersonalizeSettingsCallback},memoize:"edgeChromium"===S.T3.AppType,attributes:{style:`grid-area:${e.gridArea};contain:unset;content-visibility:visible;`}})}
`,pi=st.qy`
    ${hi}
`;const fi={getFeedDataForCard:e=>function(e){var t;const{cardMetadata:i,configOptions:n,parentTelemetryObject:r,goToPersonalizeSettingsCallback:a}=e,l=i;let d;if(l.data)try{d=JSON.parse(l.data)}catch(e){return(0,s.c_)(e,o.Sjf,"Cannot parse 1s json in MiTHeroDataMapper",JSON.stringify(l.data)),(0,ut.wc)()}const c=l&&l.type,u={id:`moment-in-time-hero-${c}`,childTemplateType:"moment-in-time-hero",parentTelemetryObject:r,cardMetadata:d,cardType:c,miTHeroConfigInfo:n,goToPersonalizeSettingsCallback:a};return(0,ct.bw)({id:`moment-in-time-hero-${c}`,experienceType:null==n||null===(t=n.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},u)}(e),viewTemplate:pi};var vi=i(4146),gi=i(1415),mi=i(36687),bi=i(32779),yi=i(59856),wi=i(89594);const $i={getFeedDataForCard:e=>(0,wi.M8)({...e,enableTopAdCard:!0}),viewTemplate:yi.DO};var Ci=i(88880),ki=i(90048),Si=i(37842),xi=i(97609),Ti=i(52143),Di=i(65639),Ai=i(87979),Ii=i(55602);const Mi="publisherListCardId";const Fi=st.qy`
    ${e=>(0,lt.yN)(e.publisherListConfigInfo,{attributes:{style:`grid-area:${e.gridArea}; grid-auto-rows: auto !important`,class:`${e.cardSize}`},properties:{publisherList:e.cardMetadata.subCards[0].subCards,rootTelemetryContext:e.parentTelemetryObject,isDarkMode:e.isDarkModeForMobile},telemetryObject:e.telemetryObject,memoize:!1})}
`,Pi={getFeedDataForCard:e=>function(e){try{var t;const{configOptions:i,cardMetadata:n,parentTelemetryObject:r,cardSlot:a,isDarkModeForMobile:o}=e;if(!n||!a)throw new Error("Missing required parameters");const s=i&&i.publisherList;i.publisherList&&(0,Ii.uC)(s);const l={cardMetadata:n,childTemplateType:"publisher-list-card",id:Mi,parentTelemetryObject:r,publisherListConfigInfo:s,isDarkModeForMobile:o};return(0,ct.bw)({id:Mi,experienceType:null==s||null===(t=s.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},l)}catch(e){(0,s.c_)(e,o.lnF,"Error in Publisher List Mapper")}return null}(e),viewTemplate:Fi};var Ri=i(98826),Oi=i(31634),Ni=i(57029),zi=i(50349),Ei=i(63218),Li=i(75633),Hi=i(30668),_i=i(89768),Vi=i(35666),ji=i(82437),Wi=i(56911),Ui=i(92011),Bi=i(48751),qi=i(86856),Ji=i(73477),Zi=i(22131),Gi=i(74849),Yi=i(43103);const Xi=Gi.A` :host .locality-container{margin:6px 20px auto auto}`,Qi=Gi.A` :host .locality-container{margin:6px auto auto 20px}`,Ki=Gi.A` :host([card-size="_2x_1y"]) .locality-container,:host([card-size="_1x_1y"]) .locality-container{display:none}:host{height:100%;font-family:var(--body-font);font-size:var(--type-ramp-base-font-size);line-height:var(--type-ramp-base-line-height);font-weight:600;color:var(--neutral-foreground-rest);display:flex;margin-bottom:16px}:host .locality-container{display:flex;flex-direction:column;justify-content:space-between;margin-inline:auto 0px;z-index:2;font-weight:400;text-decoration:none;color:${Bi.l};
    }

    :host .locality-container:hover, .locality-container:${Ji.N}{outline:none;text-decoration:underline}:host .weather-location-container{display:flex;margin-inline:auto 0px;margin-top:4px;font-size:18px;color:var(--neutral-foreground-rest);text-decoration-line:none}:host .location-container{display:flex;margin-inline-start:22px;column-gap:4px}:host .location-container svg{height:20px;width:20px;margin-top:1px}:host .weather-glyph img,:host .weather-alert svg{width:20px;height:20px}:host .header{display:flex;flex-direction:column;padding:4px 0px 0px 8px}:host .header .title{font-size:calc(var(--type-ramp-plus-3-font-size));line-height:calc(var(--type-ramp-plus-2-line-height))}:host .header .subtitle,:host .moreInfo .subtitle{font-size:calc(var(--type-ramp-base-font-size));line-height:calc(var(--type-ramp-base-line-height));color:calc(var(--neutral-foreground-rest));font-weight:400}:host .locality-container .datetime{margin-inline:auto 0px}`.withBehaviors(new qi.t(Xi,Qi),(0,Zi.mr)(Gi.A` :host{forced-color-adjust:auto}`),new Yi.N(Gi.A` :host{--background-color-dark-mode:unset;--background-social-bar:#FFFFFF;--background-ribbonCarousel-social-bar:#FFFFFF;--gradient-background:var(--background-gradient-angle),rgba(203,191,232,0.76) 0%,rgba(242,236,255,0.6) 100%;--ribbon-gradient-background:var(--background-gradient-angle),rgba(203,191,232,0.304) 0%,rgba(242,236,255,0.24) 100%;--ribbon-carousel-gradient-background:var(--background-gradient-angle),rgba(194,206,232,0.4) 0%,rgba(241,246,255,0.24) 100%;--gradient-hover:rgba(0,0,0,0.05);--stacked-gradient-hover:242,242,242;--inline-actions-gradient-background:var(--inline-actions-gradient-angle),#D9D8F2 77.54%,rgba(208,214,242,0.8) 90.62%,rgba(208,214,242,0) 100%;--inline-actions-alt-gradient-background:var(--inline-actions-gradient-angle),#E6E2EF 0.01%,#E3DEEE 76.82%,rgba(227,222,238,0.8) 88.69%,rgba(227,222,238,0) 100%;--inline-actions-thumb-gradient-background-1:var(--inline-actions-gradient-angle),#DDD8EB 0.01%,#DAD4EA 76.82%,rgba(218,212,233,0.8) 88.69%,rgba(216,209,232,0) 100%;--inline-actions-thumb-gradient-background-2:var(--inline-actions-gradient-angle),#E6E1EF 0.01%,#E2DCEE 76.82%,rgba(225,220,237,0.8) 88.69%,rgba(216,209,232,0) 100%;--inline-actions-thumb-gradient-background-3:var(--inline-actions-gradient-angle),#DAD4E9 0.01%,#D6CFE7 76.82%,rgba(214,206,230,0.8) 88.69%,rgba(216,209,232,0) 100%;--inline-actions-thumb-gradient-background-4:var(--inline-actions-gradient-angle),#E0DAED 0.01%,#DDD8EB 76.82%,rgba(221,215,235,0.8) 88.69%,rgba(216,209,232,0) 100%;--inline-actions-thumb-gradient-background-5:var(--inline-actions-gradient-angle),#D6CEE6 0.01%,#D1C9E4 76.82%,rgba(208,200,227,0.8) 88.69%,rgba(216,209,232,0) 100%;--inline-actions-thumb-gradient-background-6:var(--inline-actions-gradient-angle),#DDD7EB 0.01%,#DAD3E9 76.82%,rgba(217,210,232,0.8) 88.69%,rgba(216,209,232,0) 100%;--inline-actions-stacked-gradient-background-1:var(--inline-actions-gradient-angle),#E8E4F0 0.01%,#E5E1EF 76.82%,rgba(229,224,238,0.8) 88.69%,rgba(229,224,238,0) 100%;--inline-actions-stacked-gradient-background-2:var(--inline-actions-gradient-angle),#E6E2EF 0.01%,#E3DEEE 76.82%,rgba(227,222,238,0.8) 88.69%,rgba(227,222,238,0) 100%;--inline-actions-stacked-gradient-background-3:var(--inline-actions-gradient-angle),#E4DFEE 0.01%,#E1DBED 76.82%,rgba(225,219,237,0.8) 88.69%,rgba(224,220,237,0) 100%;--inline-actions-stacked-gradient-background-4:var(--inline-actions-gradient-angle),#E2DCEE 0.01%,#DFDAEC 76.82%,rgba(222,217,236,0.8) 88.69%,rgba(222,217,236,0) 100%;--inline-actions-stacked-gradient-background-5:var(--inline-actions-gradient-angle),#E0DAED 0.01%,#DCD7EB 76.82%,rgba(220,215,235,0.8) 88.69%,rgba(220,214,234,0) 100%;--inline-actions-stacked-gradient-background-6:var(--inline-actions-gradient-angle),#DED9EC 0.01%,#DAD4E9 76.82%,rgba(218,212,233,0.8) 88.69%,rgba(218,211,233,0) 100%;--inline-actions-ribbon-gradient-background-1:var(--inline-actions-gradient-angle),rgb(230,227,237) 0.01%,rgb(229,226,236) 76.82%,rgba(230,226,237,0.8) 88.69%,rgba(229,225,236,0) 100%;--inline-actions-ribbon-gradient-background-2:var(--inline-actions-gradient-angle),rgb(233,230,238) 0.01%,rgb(232,229,238) 76.82%,rgba(232,229,238,0.8) 88.69%,rgba(232,229,238,0) 100%;--inline-actions-ribbon-gradient-background-3:var(--inline-actions-gradient-angle),rgb(234,233,239) 0.01%,rgb(233,231,238) 76.82%,rgba(233,231,238,0.8) 88.69%,rgba(233,232,239,0) 100%;--inline-actions-ribbon-gradient-background-4:var(--inline-actions-gradient-angle),rgb(236,235,240) 0.01%,rgb(236,234,240) 76.82%,rgba(235,233,240,0.8) 88.69%,rgba(235,233,240,0) 100%;--inline-actions-ribbon-carousel-gradient-background:var(--inline-actions-gradient-angle),#E5E8ED 0.01%,#E4E7ED 76.82%,rgba(227,231,237,0.8) 88.69%,rgba(227,230,237,0) 100%}`,Gi.A` :host{--background-color-dark-mode:#424242;--background-social-bar:#4F3E66;--background-ribbonCarousel-social-bar:#2B3C59;--gradient-background:var(--background-gradient-angle),#33214D 0%,rgba(51,33,77,0.6) 100%;--ribbon-gradient-background:var(--background-gradient-angle),#33214D 0%,rgba(51,33,77,0.6) 100%;--ribbon-carousel-gradient-background:var(--background-gradient-angle),#2B3C59 0%,rgba(43,60,89,0.6) 100%;--gradient-hover:rgba(255,255,255,0.07);--stacked-gradient-hover:72,72,72;--inline-actions-gradient-background:var(--inline-actions-gradient-angle),#716583 0.01%,#665879 76.82%,rgba(100,86,119,0.8) 88.69%,rgba(98,84,118,0) 100%;--inline-actions-alt-gradient-background:var(--inline-actions-gradient-angle),#716583 0.01%,#665879 76.82%,rgba(100,86,119,0.8) 88.69%,rgba(98,84,118,0) 100%;--inline-actions-thumb-gradient-background-1:var(--inline-actions-gradient-angle),#453858 0.01%,#443658 76.82%,rgba(68,54,88,0.8) 88.69%,rgba(68,54,88,0) 100%;--inline-actions-thumb-gradient-background-2:var(--inline-actions-gradient-angle),#463B57 0.01%,#463A57 76.82%,rgba(69,57,87,0.8) 88.69%,rgba(68,54,88,0) 100%;--inline-actions-thumb-gradient-background-3:var(--inline-actions-gradient-angle),#443558 0.01%,#433459 76.82%,rgba(67,52,89,0.8) 88.69%,rgba(68,54,88,0) 100%;--inline-actions-thumb-gradient-background-4:var(--inline-actions-gradient-angle),#453957 0.01%,#453858 76.82%,rgba(69,56,88,0.8) 88.69%,rgba(68,54,88,0) 100%;--inline-actions-thumb-gradient-background-5:var(--inline-actions-gradient-angle),#453858 0.01%,#443758 76.82%,rgba(68,54,88,0.8) 88.69%,rgba(68,54,88,0) 100%;--inline-actions-thumb-gradient-background-6:var(--inline-actions-gradient-angle),#443758 0.01%,#443658 76.82%,rgba(68,54,88,0.8) 88.69%,rgba(68,54,88,0) 100%;--inline-actions-stacked-gradient-background-1:var(--inline-actions-gradient-angle),#473C57 0.01%,#463B57 76.82%,rgba(70,58,87,0.8) 88.69%,rgba(70,58,87,0) 100%;--inline-actions-stacked-gradient-background-2:var(--inline-actions-gradient-angle),#463B57 0.01%,#463A57 76.82%,rgba(69,57,87,0.8) 88.69%,rgba(69,57,87,0) 100%;--inline-actions-stacked-gradient-background-3:var(--inline-actions-gradient-angle),#463A57 0.01%,#453958 76.82%,rgba(69,56,88,0.8) 88.69%,rgba(69,56,88,0) 100%;--inline-actions-stacked-gradient-background-4:var(--inline-actions-gradient-angle),#453957 0.01%,#453858 76.82%,rgba(69,55,88,0.8) 88.69%,rgba(69,55,88,0) 100%;--inline-actions-stacked-gradient-background-5:var(--inline-actions-gradient-angle),#453858 0.01%,#443758 76.82%,rgba(68,54,88,0.8) 88.69%,rgba(68,54,88,0) 100%;--inline-actions-stacked-gradient-background-6:var(--inline-actions-gradient-angle),#443758 0.01%,#443658 76.82%,rgba(68,53,88,0.8) 88.69%,rgba(68,53,88,0) 100%;--inline-actions-ribbon-gradient-background-1:var(--inline-actions-gradient-angle),rgb(66,51,88) 0.01%,rgb(66,51,88) 76.82%,rgba(66,51,88,0.8) 88.69%,rgba(66,51,88,0) 100%;--inline-actions-ribbon-gradient-background-2:var(--inline-actions-gradient-angle),rgb(66,52,86) 0.01%,rgb(66,52,86) 76.82%,rgba(66,52,86,0.8) 88.69%,rgba(66,52,86,0) 100%;--inline-actions-ribbon-gradient-background-3:var(--inline-actions-gradient-angle),rgb(67,54,85) 0.01%,rgb(67,54,85) 76.82%,rgba(67,54,85,0.8) 88.69%,rgba(67,54,85,0) 100%;--inline-actions-ribbon-gradient-background-4:var(--inline-actions-gradient-angle),rgb(68,57,85) 0.01%,rgb(68,57,85) 76.82%,rgba(68,57,85,0.8) 88.69%,rgba(68,57,85,0) 100%;--inline-actions-ribbon-carousel-gradient-background:var(--inline-actions-gradient-angle),#3E4C61 0.01%,#3E4C62 76.82%,rgba(62,76,98,0.8) 88.69%,rgba(62,76,98,0) 100%}`));var en=i(91640),tn=i(93809),nn=i(26931),rn=i.n(nn),an=i(59196),on=i(62292);const sn="i_welcome",ln="i_weather",dn=st.qy` ${(0,en.z)(e=>e.alertGlyph,st.qy`<div class="weather-alert" :innerHTML=${(0,tn.U)(e=>e.alertGlyph,on.k)}></div>`)} ${(0,en.z)(e=>e.weatherData,st.qy`<div class="weather-glyph"><img src="${e=>an.E.getWeatherGlyphBySymbolOrSkyCode(e.weatherData.symbol,e.weatherData.pvdrIcon)}" class="icon-svg" alt="${e=>e.weatherData.skycode.children}"></div><span class="weather-text">${e=>e.weatherData.currentTemperature}</span><div class="weather-unit-container"><span>${e=>e.weatherData.degreeSetting}</span></div>`)} ${(0,en.z)(e=>e.weatherLocationData,st.qy`<div class="location-container">${st.qy.partial(rn())}<span>${e=>e.weatherLocationData.locality}, ${e=>e.weatherLocationData.region}</span></div>`)}
`,cn=st.qy`<div class = "header"><div class="text-wrapper-image-displayed title"><span class="title-text" id="${sn}">${e=>e.sectionHeaderConfig&&e.sectionHeaderConfig.showGreeting&&e.greetingText?e.greetingText:e.headerTitle}</span></div>${(0,en.z)(e=>e.headerSubtitle,st.qy`<div class="text-wrapper-image-displayed subtitle"><span class="subtitle-text" id="${sn}">${e=>e.headerSubtitle}</span></div>`)}</div><a class = "locality-container" target="_blank" href="${e=>e.weatherData&&e.weatherData.deepLink?e.weatherData.deepLink:""}" data-t="${e=>e.weatherLinkTelemetryTag}">${(0,en.z)(e=>e.weatherData,st.qy`<div id="${ln}" class="weather-location-container text-wrapper-image-displayed">${dn}</div>`)}<div class="datetime subtitle"><span class="welcome-text" id="welcome-clock">${e=>e.timeStamp}</span></div></a>`;var un=i(38493),hn=i(60815),pn=i(25447),fn=i(63456),vn=i(50180),gn=i(11372);class mn extends Ui.L{connectedCallback(){super.connectedCallback();const e=new pn.i(S.T3.CurrentMarket);this.updateClock(e);const t=(new Date).getSeconds();this.autoRefreshCall||setTimeout(()=>{this.updateClock(e),this.autoRefreshCall=setInterval(()=>this.updateClock(e),6e4)},1e3*(60-t)),this.generateTelemetryTags(),this.awaitUserNameCount=0,this.awaitUserName(),this.visualReadinessCallback&&this.visualReadinessCallback()}disconnectedCallback(){this.cancelAutoRefresh()}cancelAutoRefresh(){this.autoRefreshCall&&(clearInterval(this.autoRefreshCall),this.autoRefreshCall=null)}updateClock(e){const t=new Date,i=t.getFullYear().toString(),n=t.getMonth()+1,r=t.getDate().toString(),a=e.formatHourMinute(t),o=a.split(" ")[0],s=a.split(" ")[1];let l="";switch(n){case 1:l=this.localizedStrings.januaryDateText;break;case 2:l=this.localizedStrings.februaryDateText;break;case 3:l=this.localizedStrings.marchDateText;break;case 4:l=this.localizedStrings.aprilDateText;break;case 5:l=this.localizedStrings.mayDateText;break;case 6:l=this.localizedStrings.juneDateText;break;case 7:l=this.localizedStrings.julyDateText;break;case 8:l=this.localizedStrings.augustDateText;break;case 9:l=this.localizedStrings.septemberDateText;break;case 10:l=this.localizedStrings.octoberDateText;break;case 11:l=this.localizedStrings.novemberDateText;break;case 12:l=this.localizedStrings.decemberDateText}const d="AM"===s?this.localizedStrings.anteMeridiemText:this.localizedStrings.postMeridiemText;l&&d?this.timeStamp=(0,vn.GP)(l,r,i)+" · "+(0,vn.GP)(d,o):this.cancelAutoRefresh()}awaitUserName(){if(this.sectionHeaderConfig&&this.sectionHeaderConfig.showGreeting&&this.sectionHeaderConfig.isNameInGreeting&&this.greetingTextWithName&&this.greetingText!==this.greetingTextWithName&&this.awaitUserNameCount<15){const e=(0,fn.A)(window,"MeControl.WebInline.getOptions",void 0);if(e){const t=(0,fn.A)(e(),"currentAccount.firstName","");this.greetingTextWithName&&t&&t.length<=this.sectionHeaderConfig.maxNameCharacterCount&&(this.greetingText=(0,vn.GP)(this.greetingTextWithName,t))}else this.awaitUserNameCount++,setTimeout(()=>this.awaitUserName(),2e3)}}generateTelemetryTags(){var e;if(!this.parentTelemetryObject||!this.weatherData||!this.weatherData.deepLink)return;const t=null===(e=this.parentTelemetryObject)||void 0===e?void 0:e.contract,i=null==t?void 0:t.ext,n={name:"weather_destination",type:gn.MJ.Headline,behavior:gn.MS.Navigate,content:{headline:"Section header weather"},ext:i},r=this.parentTelemetryObject.addOrUpdateChild(n);this.weatherLinkTelemetryTag=r.getMetadataTag()}}(0,Wi.Cg)([(0,un.CF)({attribute:"card-size"})],mn.prototype,"cardSize",void 0),(0,Wi.Cg)([(0,un.CF)({attribute:"header-title"})],mn.prototype,"headerTitle",void 0),(0,Wi.Cg)([(0,un.CF)({attribute:"header-subtitle"})],mn.prototype,"headerSubtitle",void 0),(0,Wi.Cg)([hn.sH],mn.prototype,"timeStamp",void 0),(0,Wi.Cg)([hn.sH],mn.prototype,"greetingText",void 0),(0,Wi.Cg)([hn.sH],mn.prototype,"weatherLinkTelemetryTag",void 0);let bn=class extends mn{};bn=(0,Wi.Cg)([(0,Ui.E)({name:"msn-section-header",template:cn,styles:Ki})],bn);const yn=st.qy`
    <fluent-card 
    style="grid-area:${e=>e.gridArea};
    border-radius: 0px;
    box-shadow: none;
    background: transparent;"
    class="${e=>e.cardSize}"
    >
        <msn-section-header 
            card-size=${e=>e.cardSize}
            header-title=${e=>e.headerTitle}
            header-subtitle=${e=>e.headerSubtitle}
            data-t="${e=>e.parentTelemetryObject.getMetadataTag()}"
            :alertGlyph=${e=>e.alertGlyph}
            :greetingText=${e=>e.greetingText}
            :greetingTextWithName=${e=>e.greetingTextWithName}
            :sectionHeaderConfig=${e=>e.sectionHeaderConfigInfo}
            :weatherData=${e=>e.weatherData}
            :weatherLocationData=${e=>e.userLocation}
            :visualReadinessCallback=${e=>e.visualReadinessCallback}
            :localizedStrings=${e=>e.localizedStrings}
            :parentTelemetryObject=${e=>e.parentTelemetryObject}
        >
        </msn-section-header>
    </fluent-card>
`;var wn=i(58022),$n=i(84688);function Cn(e){const{cardMetadata:t,configOptions:i,localizedStrings:n,visualReadinessCallback:r,parentTelemetryObject:a}=e,l=i&&i.sectionHeaderConfig,d=i&&i.RiverSectionHeaderCardType,{headerTitle:c,greetingText:u,greetingTextWithName:h}=function(e,t,i){const{topStoriesHeadingText:n,trendingNowHeadingText:r}=t,a={headerTitle:"",greetingText:"",greetingTextWithName:""};if(e.showGreeting){(function(e){let t=0;for(const i of e.greetingsList){if(t>i.startHour||i.endHour<i.startHour)return!1;t=i.endHour}if(24!=t)return!1;return!0})(e)&&function(e,t,i,n){for(const r of t.greetingsList)if(n>=r.startHour&&n<r.endHour)return e.greetingText=i[r.displayKey],void(e.greetingTextWithName=i[r.displayKeyWithName])}(a,e,t,(new Date).getHours())}"topStories"===i?a.headerTitle=n||"":"trendingNow"!==i&&"trending now"!==i||(a.headerTitle=r||"");return a}(l,n,d),p=function(e,t,i){const n="";if(e.showHeaderSubtitle){const n=e.headerSubtitleList;if(!n)return t.topPicksHeadingText?t.topPicksHeadingText:"";for(const e of n)if(i==e.cardType)return t[e.displayKey]}return n}(l,n,d);let f,v,g,m;try{f=t.data&&JSON.parse(t.data)}catch(e){(0,s.vV)(o.j$G,"exception while parsing section header card weather data from data mapper")}if(f&&l&&(l.showLocation||l.showWeather)){if(v=f&&f.userProfile&&f.userProfile.location?(0,wn.dB)(f.userProfile.location):null,v&&l.showWeather){const e=(0,wn.OW)({location:v,response:f,locStrResolver:$n.l});g=e&&e.currentCondition}g&&g.alertSignificance&&("Y"===g.alertSignificance?m='<svg width="30" height="31" viewBox="0 0 30 22" fill="none"><path d="M14.08 1.54a1 1 0 0 1 1.74 0l11.23 19.84a1 1 0 0 1-.87 1.5H3.72a1 1 0 0 1-.87-1.5L14.08 1.54Z" fill="#F1C40F"/><path d="m15.9 8.8-.3 7.72h-2l-.29-7.72h2.6Zm-1.28 11.38c-.41 0-.76-.13-1.03-.38s-.4-.56-.4-.92c0-.37.13-.68.4-.92.28-.24.62-.36 1.04-.36.41 0 .75.12 1.02.37.26.24.4.54.4.91 0 .38-.14.69-.4.93-.26.25-.6.37-1.03.37Z" fill="#795700"/></svg>':"O"===g.alertSignificance?m='<svg width="30" height="31" viewBox="0 0 30 22" fill="none"><path d="M14.08 1.54a1 1 0 0 1 1.74 0l11.23 19.84a1 1 0 0 1-.87 1.5H3.72a1 1 0 0 1-.87-1.5L14.08 1.54Z" fill="#E67E22"/><path d="m15.9 8.8-.3 7.72h-2l-.29-7.72h2.6Zm-1.28 11.38c-.41 0-.76-.13-1.03-.38s-.4-.56-.4-.92c0-.37.13-.68.4-.92.28-.24.62-.36 1.04-.36.41 0 .75.12 1.02.37.26.24.4.54.4.91 0 .38-.14.69-.4.93-.26.25-.6.37-1.03.37Z" fill="#fff"/></svg>':"R"===g.alertSignificance&&(m='<svg width="30" height="31" viewBox="0 0 30 22" fill="none"><path d="M14.08 1.54a1 1 0 0 1 1.74 0l11.23 19.84a1 1 0 0 1-.87 1.5H3.72a1 1 0 0 1-.87-1.5L14.08 1.54Z" fill="#E74C3C"/><path d="m15.9 8.8-.3 7.72h-2l-.29-7.72h2.6Zm-1.28 11.38c-.41 0-.76-.13-1.03-.38s-.4-.56-.4-.92c0-.37.13-.68.4-.92.28-.24.62-.36 1.04-.36.41 0 .75.12 1.02.37.26.24.4.54.4.91 0 .38-.14.69-.4.93-.26.25-.6.37-1.03.37Z" fill="#fff"/></svg>'))}const b={id:"sectionHeader",childTemplateType:"section-header-card",sectionHeaderConfigInfo:l,weatherData:g,userLocation:v,alertGlyph:m,headerTitle:c,greetingText:u,greetingTextWithName:h,headerSubtitle:p,visualReadinessCallback:r,localizedStrings:n,parentTelemetryObject:a.addOrUpdateChild({name:"top_section_header"})};return(0,ct.bw)({id:"sectionHeader",experienceType:void 0,mapperArgs:e},b)}const kn={getFeedDataForCard:e=>Cn(e),viewTemplate:yn};var Sn=i(7946),xn=i(18750);const Tn=st.qy`
    <style>
        msft-serendipity::part(recommended-title-ten) {
            padding: 5px 0;
        }

        msft-serendipity::part(trending-title) {
            padding-block-end: unset;
            padding-top: 10px;
        }

        msft-serendipity::part(trending-title-a), msft-serendipity::part(recommended-title-ten) {
            color: ${e=>{var t,i;return(0,xn.ud)()?null===(t=e.gradientBackground)||void 0===t?void 0:t.darkTitleColor:null===(i=e.gradientBackground)||void 0===i?void 0:i.lightTitleColor}};
            font-size: ${e=>{var t;return null===(t=e.gradientBackground)||void 0===t?void 0:t.titleFontSize}};
        }

        msft-serendipity::part(serendipity-container-ten) {
            background: ${e=>{var t,i;return(0,xn.ud)()?null===(t=e.gradientBackground)||void 0===t?void 0:t.darkBackgroundColor:null===(i=e.gradientBackground)||void 0===i?void 0:i.lightBackgroundColor}};
            padding: 0 16px;
            height: inherit;
        }
    </style>
    <fluent-card
        style="grid-area:${e=>e.gridArea}"
        class="${e=>e.cardSize}"
    >
        <msft-serendipity
            id=${e=>e.id}
            :recommendedList="${e=>e.recommendedList}"
            :recommendedSectionTelemetry=${e=>e.telemetryContext&&e.telemetryContext.recommendedSearchSection&&e.telemetryContext.recommendedSearchSection.getMetadataTag()}
            :recommendedTitle="${e=>e.recommendedTitle}"
            :trendingHref="${e=>e.trendingHref}"
            :trendingList="${e=>e.trendingList}"
            :trendingTitle="${e=>e.trendingTitle}"
            :trendingSectionTelemetry=${e=>e.telemetryContext&&e.telemetryContext.trendingSection&&e.telemetryContext.trendingSection.getMetadataTag()}
            :trendingTitleTelemetry=${e=>e.telemetryContext&&e.telemetryContext.trendingNewsTitleClick&&e.telemetryContext.trendingNewsTitleClick.getMetadataTag()}
        >
            <span slot="trending-title">${e=>e.trendingTitle}</span>
            <span slot="recommended-title">${e=>e.recommendedTitle}</span>
        </msft-serendipity>
    </fluent-card>
`,Dn="destination",An="RecommendedSearch",In="recommendedsearch",Mn="TrendingNews",Fn="TrendingNow";function Pn(e){const{cardMetadata:t,configOptions:i,localizedStrings:n,parentTelemetryObject:r}=e,{trendingNewsConfig:a,useSerendipityCardMSNHomepageTemplate:o}=i,s=(e=>{if(!e)return;const t=e.addOrUpdateChild({name:An}),i=e.addOrUpdateChild({name:Fn}),n=i.addOrUpdateChild({name:Mn,action:gn.EG.Click,behavior:gn.MS.Navigate,content:{headline:Mn}});return{componentRoot:e,trendingSection:i,recommendedSearchSection:t,trendingNewsTitleClick:n}})(r),l=(d=s.recommendedSearchSection,(c=t?t.search:null)?c=c.map(e=>{const t={name:In,type:gn.MJ.Headline,action:gn.EG.Submit,behavior:gn.MS.SearchLink,content:{type:gn.b5.SearchLink,headline:e.title}},i=d?d.addOrUpdateChild(t):null;return{...e,telemetry:i?i.getMetadataTag():null}}):null);var d,c;const u=((e,t)=>t?t=t.map(t=>{let i;i=t.type===G.pL.Slideshow?gn.b5.Gallery:t.type===G.pL.Video?gn.b5.Video:gn.b5.Article;const n={name:Dn,type:gn.MJ.Headline,behavior:gn.MS.Navigate,content:{category:t.category,vertical:t.vertical,type:i,id:t.id,headline:t.title}},r=e?e.addOrUpdateChild(n):null;return{...t,telemetry:r?r.getMetadataTag():null}}):null)(s.trendingSection,t?t.trending:null),h=null==a?void 0:a.gradientBackground,p={id:"serendipityCard",childTemplateType:o?"serendipity-msn-homepage-card":"serendipity-card",recommendedList:l,recommendedTitle:n.recommendedSearchTitle,telemetryContext:s,trendingTitle:n.trendingNowHeadingTitle,trendingHref:a.headingLink,trendingList:u,gradientBackground:h};return(0,ct.bw)({id:"serendipityCard",experienceType:void 0,mapperArgs:e},p)}const Rn={getFeedDataForCard:e=>Pn(e),viewTemplate:Tn},On={getFeedDataForCard:e=>(0,rt.BQ)(e),viewTemplate:rt.wT},Nn={getFeedDataForCard:e=>(0,rt.BQ)(e),viewTemplate:rt.wT};var zn=i(92945);const En=st.qy`
    <fluent-card 
        style="grid-area:${e=>e.gridArea}"
        class="${e=>e.cardSize}"
        card-fill-color="${e=>e.cardBackgroundColor}"
        data-t="${e=>{var t;return null===(t=e.telemetryContext)||void 0===t||null===(t=t.shoppingCard)||void 0===t?void 0:t.getMetadataTag()}}"
    >
        <msft-winfeed-glance-card
            id="${e=>e.id}"
            :shoppingCardData="${e=>e.shoppingCardData}"
            :shoppingEntitiesData="${e=>e.shoppingEntitiesData}"
            overflow-button-enabled
            clickthrough-target=${e=>e.openLinksInNewTab?"_blank":"_self"}
            style="${e=>e.shoppingBackgroundGradient?`background: ${e.shoppingBackgroundGradient};`:"background: linear-gradient(90deg, #ffffff 0%, #ffffff 100%);"}"
        />
        <style>
            fluent-button::part(control) {
                padding: 0;
                margin: 0;
            }
        </style>
        <fluent-button slot="overflowactions" style="width: 24px; height: 24px; min-width: 24px; margin: 0; padding: 0;">
            <svg
                width="16"
                height="16"
                style="
                    left: calc(50% - 10.5px / 2);
                    top: calc(50% - 2.5px / 2);
                    display: grid;
                "
                viewBox="0 0 16 16"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path d="M5.25 8a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0z" />
                <path d="M9.25 8a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0z" />
                <path d="M12 9.25a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5z" />
            </svg>
        </fluent-button>
    </fluent-card>
`;var Ln=i(48566);function Hn(e){const{cardMetadata:t,parentTelemetryObject:i,openLinksInNewTab:n,localizedStrings:r,configOptions:a}=e,{shoppingEntitiesData:o,shoppingCardData:s}=function(e,t){if(!e||!e.data)return null;const i=JSON.parse(e.data);if(!i||!i.shoppingEntities)return null;const n={heading:t.shoppingHeading},r=[],a=i.shoppingEntities;a&&a.length&&a.forEach(e=>{if(e){const t={description:e.description,title:e.title,clickthroughUrl:e.clickUrl,altText:e.backgroundImageInfo.altText,thumbnailImageUrl:e.backgroundImageInfo.sourceImageUrl,backgroundColor:e.backgroundImageInfo.backgroundColor};return r.push(t),!0}});const o=r[(s=a.length,Math.floor(Math.random()*Math.floor(s)))];var s;return{shoppingEntitiesData:o,shoppingCardData:n}}(t,r),l=(e=>{if(!e)return;const t=e.addOrUpdateChild({name:"ShoppingCard"});return{componentRoot:e,shoppingCard:t}})(i),d=function(e){if(!e||!e.backgroundColor)return null;const t=e.backgroundColor;return[Un(t),Wn(t)]}(o),c={id:"shoppingCard",childTemplateType:"shopping-card",shoppingCardData:s,shoppingEntitiesData:o,openLinksInNewTab:n,cardBackgroundColor:d[1],shoppingBackgroundGradient:Ln.Qf.Format("linear-gradient(90deg, {0} 0%, {1} 100%)",...d),telemetryContext:l};return(0,ct.bw)({id:"shoppingCard",experienceType:void 0,mapperArgs:e},c,void 0,!0)}function _n(e){const t=e.toString(16);return 1==t.length?"0"+t:t}function Vn(e,t,i){return"#"+_n(e)+_n(t)+_n(i)}function jn(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,i,n){return t+t+i+i+n+n});const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function Wn(e){const t=jn(e);return Vn(Math.floor(t.r-.25*t.r),Math.floor(t.g-.25*t.g),Math.floor(t.b-.25*t.b))}function Un(e){const t=jn(e);return Vn(Math.floor(t.r+.25*(255-t.r)),Math.floor(t.g+.25*(255-t.g)),Math.floor(t.b+.25*(255-t.b)))}const Bn={getFeedDataForCard:e=>Hn(e),viewTemplate:En};var qn=i(21e3),Jn=i(14784);const Zn={getFeedDataForCard:e=>(0,rt.BQ)(e),viewTemplate:rt.wT};var Gn=i(44944),Yn=i(669),Xn=i(64884),Qn=i(47149),Kn=i(77884),er=i(48703),tr=i(72563),ir=i(67050);function nr(e){const{cardMetadata:t,handleAdFeedbackSubmit:i,cardActionClickHandler:n,cardActionBitMask:r,localizedStrings:a,configOptions:o}=e,s=t.id,l=(0,Yn.H8)(t,r);let d=[{value:"RepeatedAd",text:a.reportAdDialogRepeatedAdText},{value:"InappropriateAd",text:a.reportAdDialogInappropriateAdText},{value:"NotInterested",text:a.reportAdDialogNotInterestedText},{value:"MisleadingAd",text:a.reportAdDialogMisleadingAdText}];null!=o&&o.enableAdFeedbackV1UpdatePhase1&&(d=[{value:"InappropriateAd",text:a.reportAdDialogInappropriateAdText},{value:"MisleadingAd",text:a.reportAdDialogMisleadingAdText}]);const c={selectedFeedbackType:null,configOptions:o,feedbackTypes:d,localizedStrings:{saveButtonText:a.reportDialogSaveButtonText,confirmationText:a.reportDialogConfirmationText,reportIssueTitleText:a.cardActionMenuItemReport,undoText:a.reportAdDialogCloseButtonText||a.undoHideButtonText,cancelText:a.cancelText},chooseFeedbackOption:function(e){e.preventDefault(),this.selectedFeedbackType=e.target.value,this.disableSubmitButton&&(this.disableSubmitButton=!1)},submitFeedback:function(){if(!this.disableSubmitButton){let e;!async function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gn.MS.Dislike;const n={},r=new Map;e==tr.f.Product?n.offerFeedback=r:e==tr.f.Category?n.categoryFeedback=r:e==tr.f.Seller?n.sellerFeedback=r:n.brandFeedback=r,null==r||r.set(t,i),"zh-cn"==S.T3.CurrentMarket?await Kn.b.updateUserFeedbacks(n,!1,er.L.FeedbackWrite1688):await Kn.b.updateUserFeedbacks(n,!1)}(tr.f.Product,function(e){try{if(null!=e&&e.data){var t;const i=JSON.parse(e.data);let n=null==i||null===(t=i.shoppingEntities[0])||void 0===t?void 0:t.id;return n?(n.indexOf("-")>=0&&(n=(0,ir.HU)(n)),n):e.id}}catch(t){return e.id}}(t)),e=o.enableNativeAdReplaceWithNews?l^xt.J.hidden^xt.J.hideAds:l^xt.J.adFeedbackSubmitted,n(s,e,"ReportAd")}},generateTelemetryData:function(e){return new Qn.$({name:e,action:gn.EG.Click,content:{headline:(null==t?void 0:t.id)+this.selectedFeedbackType??""},type:gn.MJ.ActionButton})},disableSubmitButton:!1};return(0,hn.sH)(c,"disableSubmitButton"),(0,hn.sH)(c,"selectedFeedbackType"),c.disableSubmitButton=!0,c}const rr={getFeedDataForCard:e=>((e,t)=>{try{var i;const{cardSlot:{grid_area:n},configOptions:r,cardMetadata:a,hasLoadedCallback:o,parentTelemetryObject:s,cardActionBitMask:l}=e;t||(t=Gn.G[a.type]);const d=a.type,c=(0,Yn.H8)(a,l),u=0!==(c&xt.J.hide);e.cardMetadata&&(e.cardMetadata.id=d);const h=u?(0,Xn.Eb)(e,c,d,s,!0,nr(e)):{id:d,childTemplateType:t,mapperArgs:e,configInfo:r,hasLoadedCallback:o,cardType:null==a?void 0:a.cardType};return(0,ct.bw)({id:d,experienceType:null===(i=r&&r)||void 0===i||null===(i=i.configRef)||void 0===i?void 0:i.experienceType,mapperArgs:e},h,null,!0)}catch(e){(0,s.c_)(e,o.Odo,"Error in Shopping River Card experience Connected")}})(e),viewTemplate:rt.wT},ar={getFeedDataForCard:e=>(0,rt.BQ)(e),viewTemplate:rt.wT};var or=i(32756),sr=i(930);const lr=st.qy`
    <fluent-card 
        style="grid-area:${e=>e.gridArea}"
        class="${e=>e.cardSize}"
    >
        ${e=>e.olympicCardConfigInfo&&(0,lt.yN)(e.olympicCardConfigInfo,{properties:{parentTelemetry:e.parentTelemetryObject,cardLayout:e.cardSize===sr.uE._1x_1y?"1x_1y":"1x_2y",telemetryExt:e.telemetryExt,cardMetaData:e.cardMetaData,openLinksInNewTab:e.openLinksInNewTab,refreshFeed:e.refreshFeed,goToPersonalizeCallback:e.goToPersonalizeCallback},memoize:"windowsShellV2"!==S.T3.AppType})}
    </fluent-card>
`;const dr={getFeedDataForCard:e=>function(e){var t;const{cardMetadata:i,openLinksInNewTab:n,configOptions:r,refreshSDCardSection:a,refreshFeedCallback:o,goToPersonalizeCallback:s}=e;if(!i.data)return(0,ut.wc)();let l;r&&r.childExperienceReferencesWC&&(l=r.childExperienceReferencesWC.sportsOlympicCard),l&&l.instanceId||(l=r&&r);const d={id:"sportsOlympicCard",childTemplateType:"sports-olympic-card",cardMetaData:i,openLinksInNewTab:n,olympicCardConfigInfo:l,refreshFeed:a||o,goToPersonalizeCallback:s};return(0,ct.bw)({id:"sportsOlympicCard",experienceType:null===(t=l)||void 0===t||null===(t=t.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},d)}(e),viewTemplate:lr};var cr=i(97716);const ur=st.qy`

<fluent-card
    style="grid-area:${e=>e.gridArea};"
    class="${e=>e.cardSize}"
>
    ${e=>(0,lt.yN)(e.superappUpsellCardConfigInfo,{attributes:{style:`grid-area:${e.gridArea}`,class:`${e.cardSize}`},properties:{cardMetadata:e.superappUpsellCardMetadata,parentTelemetry:e.parentTelemetryObject}})}
</fluent-card>
`;const hr={getFeedDataForCard:e=>function(e){var t;const{cardMetadata:i,configOptions:n,parentTelemetryObject:r}=e;if(n&&n.useSharedTelemetry)return(0,rt.BQ)(e,"superapp-upsell-card");const a=n&&n,o={id:"superappUpsellCard",childTemplateType:"superapp-upsell-card",parentTelemetryObject:r,superappUpsellCardConfigInfo:a,superappUpsellCardMetadata:i};return(0,ct.bw)({id:"superappUpsellCard",experienceType:null==a||null===(t=a.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},o,null,!0)}(e),viewTemplate:ur};var pr=i(97091),fr=i(11731);const vr={getFeedDataForCard:e=>(0,fr.u)(e),viewTemplate:pr.L9};var gr=i(87743);const mr=st.qy`
    <fluent-card 
        style="grid-area:${e=>e.gridArea}"
        class="${e=>e.cardSize}"
    >
        <msft-list-card 
            target=${e=>e.openLinksInNewTab?"_blank":"_self"}
            item-template="condensed-card"
            :data="${e=>e.listCardData}"
            @action-triggered=${(e,t)=>e.toggleCardActionMenu(t.event.detail.data,t.event.detail.event)}
            data-t="${e=>{var t;return null===(t=e.telemetryContext)||void 0===t||null===(t=t.topPicksCard)||void 0===t?void 0:t.getMetadataTag()}}"
        >
            <div aria-label="${e=>e.topPicksHeadingText}" role="heading" title="${e=>e.topPicksHeadingText}" tabindex="0">
                ${e=>e.topPicksHeadingText}
            </div>
        </msft-list-card>
    </fluent-card>
`;var br=i(53013),yr=i(51600),wr=i(71658);function $r(e){const{cardMetadata:t,parentTelemetryObject:i,cardSlot:n,localizedStrings:r,openLinksInNewTab:a,cardActionClickHandler:o,cardActionBitMask:s,initCardAction:l,refreshFeedCallback:d,configOptions:{openPersonalizeWithoutRouter:c}}=e,u=(e=>{if(!e)return;const t=e.addOrUpdateChild({name:"TopPicksCard"});return{componentRoot:e,topPicksCard:t}})(i),h={id:"topPicks",childTemplateType:"top-picks-card",listCardData:Cr(t.subCards,r,s,u&&u.topPicksCard),openLinksInNewTab:a,toggleCardActionMenu:(e,i)=>function(e,t,i,n,r,a,o,s){const l=n.filter(t=>t.title===e.title)[0],{telemetry_context:{buttonTelemetryObject:d}}=e,{id:c,title:u,url:h,images:p,provider:f}=l,v={enabled:!0,buttonElement:t.currentTarget,article:{id:c,headlineTitle:u,href:h,image:{alt:p&&p[0]&&p[0].title,src:p&&p[0]&&p[0].url},provider:{id:f.id,name:f.name,image:{alt:f.name,src:f.logoUrl}}},parentTelemetryObject:d,cardStatus:(0,Yn.H8)(l,r),onStatusChange:i,updateFeedOnHide:!0,showToast:!0,refreshFeedCallback:o,openPersonalizeWithoutRouter:s};a(v)}(e,i,o,t.subCards,s,l,d,c),topPicksHeadingText:r.topPicksHeadingText,telemetryContext:u};return(0,ct.bw)({id:"topPicks",experienceType:void 0,mapperArgs:e},h)}function Cr(e,t,i,n){return e?e.map(e=>{const{images:r,locale:a,provider:o,publishedDateTime:s,title:l,url:d,type:c}=e;let u,h,p;if(n){const t=(0,br.dj)(n,e,null,null,c===G.pL.WebContent);t&&(p={card:t.contentCard&&t.contentCard.getMetadataTag(),button:t.seeMore&&t.seeMore.getMetadataTag(),url:t.destination&&t.destination.getMetadataTag(),buttonTelemetryObject:t.seeMore})}return r&&r.length>0&&(u=(0,yr.oQ)(r[0].url,{width:80,height:80,focalRegion:r[0].focalRegion,quality:r[0].quality,enableDpiScaling:!1}),h=r[0].title),{href:(0,Yn.Dv)(d),title:l,media_src:u,media_alt:h,attribution_title:o?`${o.name}`:void 0,attribution_publishedDate:`${(0,wr.sq)(new Date(s),a,t,null,null,!0)}`,more_actions:1===(i&xt.J.enabled),telemetry_context:p}}):[]}const kr={getFeedDataForCard:e=>$r(e),viewTemplate:mr},Sr=st.qy`
<fluent-card style="grid-area:${e=>e.gridArea}; height: 219px;" class="${e=>e.cardSize}">
    ${e=>{if(e.topSitesNewsbarCardConfigInfo)return(0,lt.yN)(e.topSitesNewsbarCardConfigInfo,{properties:{parentTelemetry:e.parentTelemetryObject}})}}
</fluent-card>
`;const xr={getFeedDataForCard:e=>function(e){var t;const{configOptions:i}=e,n=i.topSitesNewsbarCardConfigInfo,r={id:"topSitesCard",childTemplateType:"top-sites-card",topSitesNewsbarCardConfigInfo:n};return(0,ct.bw)({id:"topSitesCard",experienceType:null==n||null===(t=n.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},r)}(e),viewTemplate:Sr};var Tr=i(23781),Dr=i(41607),Ar=i(94031);const Ir=st.qy`
    ${e=>(0,lt.yN)(e.TrafficHeroConfigInfo,{properties:{trafficHeroFeedData:e,cardMetadata:e.cardMetadata,trafficNewsData:e.trafficNews,wpoMetadata:e.wpoMetadata,parentTelemetry:e.parentTelemetryObject,supportedSdCardActionMenuItems:e.supportedSdCardActionMenuItems,sdCardActionClickHandler:e.sdCardActionClickHandler,dismissActionMenu:e.dismissSDCardMenuCallback,cardSize:e.cardSize,cardType:e.cardType},memoize:"edgeChromium"===S.T3.AppType,attributes:{style:`grid-area:${e.gridArea};contain:unset;content-visibility:visible;`}})}
`,Mr=st.qy`
    ${Ir}
`;const Fr={getFeedDataForCard:e=>function(e){var t;const{cardMetadata:i,configOptions:n,openLinksInNewTab:r,refreshFeedCallback:a,parentTelemetryObject:l,goToPersonalizeSettingsCallback:d,hideCardCallback:c,refreshSDCardSection:u,supportedSdCardActionMenuItems:h,sdCardActionClickHandler:p,dismissSDCardMenuCallback:f}=e,v=i;let g;if(v.data)try{g=JSON.parse(v.data)}catch(e){return(0,s.c_)(e,o.dfM,"Cannot parse 1s json in TrafficHeroDataMapper",JSON.stringify(v.data)),(0,ut.wc)()}const m=v&&v.type,b={id:`trafficHero-${m}`,childTemplateType:"traffic-hero",openLinksInNewTab:r,refreshFeedCallback:a,parentTelemetryObject:l,goToPersonalizeSettingsCallback:d,refreshSDCardSection:u,hideCardCallback:c,supportedSdCardActionMenuItems:h,sdCardActionClickHandler:p,dismissSDCardMenuCallback:f,cardMetadata:g,trafficNews:i.subCards,cardType:m};let y;return n&&(y=n,b.TrafficHeroConfigInfo=y),(0,ct.bw)({id:`trafficHero-${m}`,experienceType:null===(t=y)||void 0===t||null===(t=t.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},b,(e,t)=>({supportedSdCardActionMenuItems:h,sdCardActionClickHandler:p}))}(e),viewTemplate:Mr};var Pr=i(2934);const Rr=st.qy`
${e=>{var t,i;return(0,lt.yN)(e.configInfo,{includeTelemetryTag:!1,properties:{wpoMetadata:e.wpoMetadata,cardSize:e.cardSize,mapperArgs:e.mapperArgs,parentTelemetry:e.parentTelemetryObject,refreshSDCardSection:null===(t=e.mapperArgs)||void 0===t?void 0:t.refreshSDCardSection,goToPersonalizeSettingsCallback:null===(i=e.mapperArgs)||void 0===i?void 0:i.goToPersonalizeSettingsCallback},attributes:{style:`grid-area:${e.gridArea}`}})}}
`;const Or={getFeedDataForCard:e=>function(e){try{var t;const{configOptions:i,parentTelemetryObject:n}=e,r=i&&i,a=(e&&e.cardMetadata,{id:"travelDestinationCarouselCard",childTemplateType:"travel-destination-carousel-card",configInfo:r,mapperArgs:e,parentTelemetryObject:n});return(0,ct.bw)({id:"travelDestinationCarouselCard",experienceType:null==r||null===(t=r.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},a)}catch(e){(0,s.c_)(e,o.OV,"Error in Travel Carousel Mapper")}}(e),viewTemplate:Rr};var Nr=i(47797),zr=i(66603),Er=i(90587),Lr=i(33956);const Hr=st.qy`
    ${e=>(0,lt.yN)(e.weatherHeroConfigInfo,{properties:{WeatherHeroFeedData:e,cardMetadata:e.cardMetadata,wpoMetadata:e.wpoMetadata,parentTelemetry:e.parentTelemetryObject,supportedSdCardActionMenuItems:e.supportedSdCardActionMenuItems,sdCardActionClickHandler:e.sdCardActionClickHandler,dismissActionMenu:e.dismissSDCardMenuCallback,hideWeatherHeroCallback:e.hideWeatherHeroCallback,goToPersonalizeSettingsCallback:e.goToPersonalizeSettingsCallback,refreshSDCardSection:e.refreshSDCardSection,refreshFeed:e.refreshFeed,openLinksInNewTab:e.openLinksInNewTab,cardSize:e.cardSize,cardType:e.cardType},memoize:"edgeChromium"===S.T3.AppType,attributes:{style:`grid-area:${e.gridArea};contain:unset;content-visibility:visible;`}})}
`,_r=st.qy`
    ${Hr}
`;const Vr={getFeedDataForCard:e=>function(e){var t;const{cardMetadata:i,configOptions:n,openLinksInNewTab:r,refreshFeedCallback:a,parentTelemetryObject:o,goToPersonalizeSettingsCallback:s,hideCardCallback:l,refreshSDCardSection:d,supportedSdCardActionMenuItems:c,sdCardActionClickHandler:u,dismissSDCardMenuCallback:h}=e,p=i,f=n&&n,v=(null==p?void 0:p.type)??"WeatherHero",g={id:v,childTemplateType:"weather-hero-experience",openLinksInNewTab:r,parentTelemetryObject:o,weatherHeroConfigInfo:f,cardMetadata:i.data,hideWeatherHeroCallback:l,goToPersonalizeSettingsCallback:s,dismissSDCardMenuCallback:h,refreshSDCardSection:d,hideCardCallback:l,sdCardActionClickHandler:u,supportedSdCardActionMenuItems:c,refreshFeed:a,cardType:v};return(0,ct.bw)({id:v,experienceType:null==f||null===(t=f.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},g,(e,t)=>({cardSize:t.cardSize,supportedSdCardActionMenuItems:c,sdCardActionClickHandler:u}))}(e),viewTemplate:_r};var jr=i(97110),Wr=i(83449),Ur=i(34348);const Br={[Vt.C.TopicFeedCard]:Dr.C,[Vt.C.articleFreCard]:Ke._,[Vt.C.autosCarouselCard]:et.B,[Vt.C.boostAdCard]:tt.H,[Vt.C.cashbackCarouselCard]:it.j,[Vt.C.casualGamesCard]:nt.D,[Vt.C.casualGamesCarouselCard]:at,[Vt.C.casualGamesStripeCarouselCard]:ot.O,[Vt.C.channelFilterCard]:ht,[Vt.C.comicsCarouselCard]:Sn.L,[Vt.C.communityCard]:pt.m,[Vt.C.commuteCard]:ft.v,[Vt.C.contentCardPreview1x]:vt.m,[Vt.C.contentCard]:vt.m,[Vt.C.contentGroupCard]:gt.d,[Vt.C.contentGroup]:bt,[Vt.C.dailyBriefCard]:yt.W,[Vt.C.dailyFixGamesCarouselCard]:Sn.L,[Vt.C.dailyGreetingCard]:wt.v,[Vt.C.dailyMomentsCard]:$t.B,[Vt.C.dailyWonderCopilotCard]:Ct,[Vt.C.dailyWonderHeroVideo]:At,[Vt.C.dailyWonderQuoteCard]:It,[Vt.C.dailyWonderVideoListCard]:Pt,[Vt.C.denseCard]:Rt.o,[Vt.C.digestCard]:Ot.j,[Vt.C.displayAdCard]:Nt.E,[Vt.C.donationNpoCard]:zt,[Vt.C.edgeShoppingCard]:Bn,[Vt.C.editorsPickCarouselCard]:Sn.L,[Vt.C.electionCard]:Et.y,[Vt.C.electionsCard]:Lt.Z,[Vt.C.entertainmentPremierCard]:Ht.H,[Vt.C.esportsCard]:_t.z,[Vt.C.followingFREInlineCard]:jt.g,[Vt.C.gamingRecentlyPlayedCard]:Ut,[Vt.C.healthCard]:Jt,[Vt.C.healthFitnessCard]:Zt.x,[Vt.C.healthTipCard]:Gt.O,[Vt.C.hideStoryCard]:Yt.e,[Vt.C.horoscopeAnswerCard]:Qt,[Vt.C.hotListCard]:ii,[Vt.C.infopaneCard]:ni.n,[Vt.C.infopaneSlideCard]:vt.m,[Vt.C.interestManagementCard]:ri.g,[Vt.C.linkedInCard]:si,[Vt.C.localNewsCarCard]:Sn.L,[Vt.C.mangaCard]:li.b,[Vt.C.mangaCarousel]:di,[Vt.C.marketplaceCard]:ci.G,[Vt.C.mobileTrendingSearchCard]:ui.q,[Vt.C.momentInTimeHero]:fi,[Vt.C.moneyAddWatchlistCard]:vi.Z,[Vt.C.moneyCard]:gi.l,[Vt.C.moneyInfoCardWC]:mi.j,[Vt.C.moneyTopicStripeCarouselCard]:Sn.L,[Vt.C.nativeAdCard]:bi.$,[Vt.C.nativeTopAdCard]:$i,[Vt.C.onThisDayCard]:Ci.s,[Vt.C.placeholderCard]:ki.M,[Vt.C.pollsCard]:Si.N,[Vt.C.prismCard]:xi.i,[Vt.C.prismCarouselCard]:Ti.W,[Vt.C.profileCarouselCard]:Di.s,[Vt.C.promotedAdCard]:Ai.o,[Vt.C.publisherListCard]:Pi,[Vt.C.qnaCard]:Ri.t,[Vt.C.quizCard]:Oi.O,[Vt.C.realEstateCard]:Ni.n,[Vt.C.recipesCard]:zi.E,[Vt.C.recommendedInterestsCard]:Ei.l,[Vt.C.responsiveAdCard]:Li.k,[Vt.C.responsiveCard]:Hi.v,[Vt.C.responsiveInfopaneCard]:_i.V,[Vt.C.rewardsCard]:Vi.B,[Vt.C.richCalendarCard]:ji.n,[Vt.C.sectionHeaderCard]:kn,[Vt.C.selectCarouselCard]:Sn.L,[Vt.C.serendipityCard]:Rn,[Vt.C.sharedHeroNewsCard]:On,[Vt.C.shoppingBannerSdCard]:Nn,[Vt.C.shoppingBuyingGuidePremiumCard]:zn.W,[Vt.C.shoppingCard]:Bn,[Vt.C.shoppingCarouselCard]:qn.f,[Vt.C.shoppingCarouselProngWC]:Jn.$,[Vt.C.shoppingEventsDealCard]:Zn,[Vt.C.shoppingRiverCard]:rr,[Vt.C.shoppingSdCard]:ar,[Vt.C.sportsCard]:or.a,[Vt.C.sportsOlympicCard]:dr,[Vt.C.spotlightCard]:cr.H,[Vt.C.superappUpsellCard]:hr,[Vt.C.tabbedInfopaneCard]:vr,[Vt.C.topCommentsCard]:gr.w,[Vt.C.topPicksCard]:kr,[Vt.C.topSitesCard]:xr,[Vt.C.topStoriesCard]:Tr.X,[Vt.C.trafficCard]:Ar.U,[Vt.C.trafficHero]:Fr,[Vt.C.travelDestinationCard]:Pr.t,[Vt.C.travelDestinationCarouselCard]:Or,[Vt.C.trendingNowCard]:Nr.Q,[Vt.C.trendingSearchCard]:zr.i,[Vt.C.videoCard]:Er.O,[Vt.C.weatherCard]:Lr.j,[Vt.C.weatherHeroExperienceCarouselCard]:Sn.L,[Vt.C.weatherHeroExperience]:Vr,[Vt.C.webContentCard]:vt.m,[Vt.C.widgetPlaceholderCard]:jr.k,[Vt.C.widgetsNotificationsCard]:Wr.u,[Vt.C.winAppCard]:Ur.w},qr=st.qy`
    <style>
        msft-serendipity::part(serendipity-container-ten) {
            padding: 15px 16px;
            height: calc(100% - 30px);
            display: flex;
            flex-flow: column;
            justify-content: space-between;
        }

        msft-serendipity::part(serendipity-container-ten) .recommended-item:nth-child(1n) {
            padding-inline-end: 6px;
        }

        msft-serendipity::part(serendipity-container-ten) section:first-child {
            margin-bottom: 5px;
        }

        msft-serendipity::part(trending-title) {
            padding-block-end: unset;
        }
    </style>
    <fluent-card
        style="grid-area:${e=>e.gridArea}"
        class="${e=>e.cardSize}"
    >
        <msft-serendipity
            id=${e=>e.id}
            :recommendedList="${e=>e.recommendedList}"
            :recommendedSectionTelemetry=${e=>e.telemetryContext&&e.telemetryContext.recommendedSearchSection&&e.telemetryContext.recommendedSearchSection.getMetadataTag()}
            :recommendedTitle="${e=>e.recommendedTitle}"
            :trendingHref="${e=>e.trendingHref}"
            :trendingList="${e=>e.trendingList}"
            :trendingTitle="${e=>e.trendingTitle}"
            :trendingSectionTelemetry=${e=>e.telemetryContext&&e.telemetryContext.trendingSection&&e.telemetryContext.trendingSection.getMetadataTag()}
            :trendingTitleTelemetry=${e=>e.telemetryContext&&e.telemetryContext.trendingNewsTitleClick&&e.telemetryContext.trendingNewsTitleClick.getMetadataTag()}
        >
            <span slot="trending-title">${e=>e.trendingTitle}</span>
            <span slot="recommended-title">${e=>e.recommendedTitle}</span>
        </msft-serendipity>
    </fluent-card>
`;var Jr=i(48835),Zr=i(14817),Gr=i(76405),Yr=i(93551),Xr=i(9071),Qr=i(34627),Kr=i(53140),ea=i(22723),ta=i(9504),ia=i(52515),na=i(13427),ra=i(65282),aa=i(67142),oa=i(39957),sa=i(35699),la=i.n(sa),da=i(36742),ca=i.n(da);const ua=st.qy` ${e=>(0,lt.yN)({instanceId:e.articleData.articleTopCommentConfigInfo.instanceId+"_"+e.articleData.id,configRef:e.articleData.articleTopCommentConfigInfo.configRef},{properties:{destinationUrl:e.articleData.destinationUrl,locale:e.articleData.locale,id:e.articleData.id,topCommentId:e.articleData.articleTopCommentId},telemetryObject:e.topCommentTelemetry})}
`,ha=st.qy` ${e=>(0,lt.yN)({instanceId:e.articleData.articleRelatedStoriesConfigInfo.instanceId+"_"+e.articleData.id,configRef:e.articleData.articleRelatedStoriesConfigInfo.configRef},{properties:{cardData:e.articleData,id:e.articleData.id,relatedCardIds:e.articleData.relatedCardData},telemetryObject:e.relatedStoriesTelemetry})}
`,pa=st.qy`<msft-flex-article-card aria-details="${e=>e.articleData.id}-comment-text" card-fill-color="${e=>{var t;return null===(t=e.articleData.articleCardBackgroundColor)||void 0===t||null===(t=t.find(e=>e.isDarkMode===(0,xn.ud)()))||void 0===t?void 0:t.hexColor}}" class="contentCard" data-badge-type="${e=>e.articleData.badge&&e.articleData.badge.type}" expanded=${e=>!!e.expanded||null} id="flexcard_${e=>e.articleData.id}" size="${e=>e.articleData.cardSize}" data-t="${e=>{var t;return null===(t=e.articleData)||void 0===t||null===(t=t.telemetryContext)||void 0===t||null===(t=t.flexcard)||void 0===t?void 0:t.getMetadataTag()}}">${(0,oa.ux)(e=>[e.articleData],st.qy`${Jr.f}`)}<fluent-button appearance="neutral" aria-expanded=${e=>e.expanded} aria-label="show or hide additional content" role="button" class="card-action-button flex-button" part="flex-button" slot="flex-button" @click=${e=>e.toggleFlexCardState()} data-t="${e=>{var t;return null===(t=e.flexButtonTelemetry)||void 0===t?void 0:t.getMetadataTag()}}">${(0,en.z)(e=>!e.expanded,st.qy`${st.qy.partial(ca())}`)} ${(0,en.z)(e=>e.expanded,st.qy`${st.qy.partial(la())}`)}</fluent-button><div class="flex-section" slot="flex-section">${(0,en.z)(e=>e.expanded&&e.articleData.articleTopCommentConfigInfo&&e.articleData.articleTopCommentId,ua)} ${(0,en.z)(e=>e.expanded&&e.articleData.articleRelatedStoriesConfigInfo&&e.articleData.relatedCardData,ha)}</div></msft-flex-article-card>`;class fa extends Ui.L{connectedCallback(){this.setUpTelemetry(),super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this.unsetIntersectionObserver()}toggleFlexCardState(){this.expanded=!this.expanded,this.updateFlexButtonTelemetry()}setUpTelemetry(){var e,t;this.topCommentTelemetry=null===(e=this.articleData)||void 0===e||null===(e=e.telemetryContext)||void 0===e?void 0:e.contentCard.addOrUpdateChild({name:"TopComment"}),this.relatedStoriesTelemetry=null===(t=this.articleData)||void 0===t||null===(t=t.telemetryContext)||void 0===t?void 0:t.contentCard.addOrUpdateChild({name:"RelatedStories"}),this.updateFlexButtonTelemetry()}unsetIntersectionObserver(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0)}updateFlexButtonTelemetry(){var e,t,i;this.flexButtonTelemetry=null===(e=this.articleData)||void 0===e||null===(e=e.telemetryContext)||void 0===e||null===(e=e.contentCard)||void 0===e?void 0:e.addOrUpdateChild({action:gn.EG.Click,behavior:this.expanded?gn.MS.Hide:gn.MS.Show,name:"flex_show_hide",type:gn.MJ.ActionButton,content:{headline:"flex_show_hide",category:null===(t=this.articleData)||void 0===t||null===(t=t.telemetryContext)||void 0===t||null===(t=t.flexcard)||void 0===t||null===(t=t.contract)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.category,vertical:null===(i=this.articleData)||void 0===i||null===(i=i.telemetryContext)||void 0===i||null===(i=i.flexcard)||void 0===i||null===(i=i.contract)||void 0===i||null===(i=i.content)||void 0===i?void 0:i.vertical}})}}(0,Wi.Cg)([hn.sH],fa.prototype,"articleData",void 0),(0,Wi.Cg)([hn.sH],fa.prototype,"expanded",void 0),(0,Wi.Cg)([hn.sH],fa.prototype,"flexButtonTelemetry",void 0),(0,Wi.Cg)([hn.sH],fa.prototype,"topCommentTelemetry",void 0),(0,Wi.Cg)([hn.sH],fa.prototype,"relatedStoriesTelemetry",void 0);const va=Gi.A` msft-flex-article-card{--msft-article-padding:16;--msft-flex-button-padding:40;content-visibility:visible}.flex-button{background:white;--control-corner-radius:40;cursor:pointer;height:28px;min-width:28px}.flex-button::part(control){padding:0;line-height:0px}.flex-button > svg{fill:black}msft-flex-article-card[size="_2x_2y"].contentCard msft-article::part(heading){line-height:var(--heading-line-height,28px)}msft-flex-article-card[size="_2x_2y"].contentCard msft-article:not(.no-image)::part(heading){margin-bottom:40px}msft-flex-article-card[size="_2x_2y"].contentCard msft-article:not(.no-image)::part(gradient){background:linear-gradient( 180deg,transparent 0%,var(--gradient-mid-color) 62.5%,var(--gradient-color) 100% );width:100%;bottom:-1px}msft-flex-article-card[size="_2x_2y"].contentCard msft-article:not(.no-image)::part(text){height:auto;width:100%}msft-flex-article-card[size="_2x_2y"]contentCard msft-article:not(.no-image)::part(attribution){display:flex;align-self:end}msft-flex-article-card[size="_2x_2y"].contentCard msft-article:not(.no-image)::part(actions){width:calc(100% - calc((var(--msft-article-padding) * 2px) + (var(--msft-flex-button-padding) * 1px)))}.flex-section{padding-bottom:6px}msft-flex-article-card msft-article::part(heading):after{top:calc(100% - 304px)}msft-flex-article-card[expanded="true"] msft-article::part(heading):after{height:304px}msft-flex-article-card msft-article div.infopane-like-end-actions{display:flex}`;let ga=class extends fa{};ga=(0,Wi.Cg)([(0,Ui.E)({name:"msn-flex-article-card",template:pa,styles:va})],ga);const ma=st.qy`
    <msn-flex-article-card
        style="grid-area:${e=>e.gridArea}"
        card-size=${e=>e.cardSize}
        :articleData=${e=>e}
        :expanded=${e=>e.flexCardExpandedByDefault}
    >
    </msn-flex-article-card>
`;var ba=i(91488),ya=i(97799),wa=i(80149),$a=i(34982),Ca=i(5965),ka=i(91144),Sa=i(7086),xa=i(42679),Ta=i(36316),Da=i(44364),Aa=i(67067),Ia=i(46613),Ma=i(62190),Fa=i(7896),Pa=i(57416),Ra=i(95239),Oa=i(45476),Na=i(64003),za=i(37302),Ea=i(88985);const La=Gi.A`
:host > msft-article-card{--card-width:100%;--card-height:100%}.hover-actions{position:absolute;top:6px;right:6px}.hover-actions .hide-story{opacity:0;transition:opacity 0.1s linear 0s}fluent-card.perspective-card:hover .hover-actions .hide-story{opacity:1}.hover-actions .hide-story .dismiss{font-family:${Fa.O};display:flex;padding:0;justify-content:center;align-items:center;position:relative;outline:none;font-size:var(--type-ramp-base-font-size);line-height:var(--type-ramp-base-line-height);height:28px;min-width:28px;background-color:rgba(0,0,0,0.54);color:rgb(255,255,255);fill:rgb(255,255,255);cursor:pointer;border-radius:100%;border:2px solid transparent;margin-inline-start:4px}.perspective-card-frame{display:flex;width:100%;height:100%}.perspective-article-card{flex:1;display:grid;grid-template:"card-container" 1fr / 1fr}.perspective-article-card msft-article-card{box-shadow:none;--elevation:0}.perspective-article-card.max-1x-width msft-article::part(heading){max-width:268px}.perspective-article-card.max-1x-width msft-article::part(abstract){max-width:268px}.perspective-article-card.max-1x-width msft-article::part(actions){max-width:268px}.perspective-article-card.max-1x-width msft-article::part(image)::after{content:"";position:absolute;width:100%;height:100%;right:0;top:0;background:radial-gradient(100% 135.11% at 0% 0%,rgba(0,0,0,0) 0%,rgba(0,0,0,0) 60%,var(--gradient-color) 100%)}.perspective-related-card{position:absolute;top:0;right:0;min-width:50%;max-width:290px;--msft-article-heading-font-size:14px;--msft-article-heading-line-height:20px;display:flex;height:100%;border-radius:calc(${Pa.JU} * 1px)}.perspective-related-card.default-hidden:not(.focused){pointer-events:none !important}.perspective-related-card.default-hidden::before{content:"";position:absolute;inset:0;pointer-events:none;inset:0 0 0 -33%;background:linear-gradient(to right,rgba(0,0,0,0) 0%,${Ra.p} 30%)}.perspective-related-card .perspective-card-trigger{align-self:center}.perspective-card-frame .perspective-related-card .perspective-card-trigger > button{width:30px;height:56px;display:flex;justify-content:center;align-items:center;margin:0;position:relative;fill:${Bi.l};
    color: ${Bi.l};
    background: ${Oa.oO};opacity:0.5;border:none;padding:0;pointer-events:auto;cursor:pointer;transition:opacity 0.3s,filter 0.3s}.perspective-card-frame:focus-within .perspective-related-card .perspective-card-trigger > button,.perspective-card-frame:hover .perspective-related-card .perspective-card-trigger > button{opacity:0.8;filter:invert(100%)}.perspective-related-card .inner-content{display:flex;flex-direction:column;gap:4px;margin:0 8px 0 6px;padding-bottom:16px;overflow:var(--overflow,hidden)}.perspective-related-card.default-hidden::before,.perspective-related-card.default-hidden .inner-content{transform:translateX(calc(100% + 35px));opacity:0;transition:transform 0.3s,opacity 0.3s}.perspective-related-card:hover{pointer-events:auto}.perspective-related-card.focused .perspective-card-trigger > button,.perspective-related-card.focused::before,.perspective-related-card.focused .inner-content{transform:translateX(0);opacity:1}.perspective-article-card.faded-image msft-article::part(image){opacity:0.5}.perspective-related-card .heading-container{padding:16px 0 4px;width:100%;position:relative;display:flex;align-items:center}.perspective-related-card .heading{text-transform:uppercase;font-size:var(--type-ramp-minus-1-font-size);line-height:var(--type-ramp-minus-1-line-height);font-weight:600;color:${Na.c};margin:0}.perspective-related-card msft-article{background:linear-gradient(${Bi.l} -9000%,transparent 1000%);border-radius:4px;z-index:0;pointer-events:all}@media (prefers-color-scheme:dark){.perspective-related-card msft-article{--article-background-color:${Ra.p}}}@media (prefers-color-scheme:light){.perspective-related-card msft-article{--article-background-color:${Ra.p}}}.perspective-related-card msft-article:hover,.perspective-related-card msft-article:focus-within{background:${Oa.oO}}.perspective-related-card msft-article::part(heading){-webkit-line-clamp:var(--heading-max-lines,2)}.perspective-related-card msft-article::part(heading)::after{height:100%;width:100%}.perspective-related-card msft-article.crawled-content::part(heading){-webkit-line-clamp:var(--heading-max-lines,1)}.perspective-related-card msft-article::part(text){margin-bottom:auto}.perspective-related-card msft-article::part(image){align-self:center}.perspective-related-card msft-article::part(article){border-radius:0;grid-gap:0 2px;grid-template-columns:1fr auto;padding:8px 12px;overflow:visible}.perspective-related-card .inline-actions{margin-inline-end:4px;top:0;right:0;align-items:center;background:linear-gradient(5deg,rgba(0,0,0,0) 0%,${Oa.oO} 70%);display:grid;gap:4px;grid-template-columns:auto auto auto;height:28px;justify-content:end;margin:4px 0;opacity:0;padding:0;padding-inline-start:40px;position:absolute;width:auto;z-index:10}.perspective-related-card msft-article:hover .inline-actions,.perspective-related-card msft-article:focus-within .inline-actions{opacity:1}.perspective-related-card social-bar-wc::part(social-bar){align-self:start;opacity:1;background:none;height:24px}.perspective-related-card msft-article [slot="start-action"]{gap:0}.perspective-related-card msft-article .inline-actions .actions-button{background:transparent;border:none;border-radius:4px;color:currentColor;cursor:pointer;fill:currentColor;height:24px;justify-content:center;min-width:24px;padding:0;width:24px}.perspective-related-card msft-article .inline-actions .actions-button svg{width:16px;height:16px}.perspective-related-card msft-article .inline-actions .actions-button:hover,.perspective-related-card msft-article .inline-actions .actions-button:${Ji.N}{background:${za.Xt}}.perspective-related-card msft-article .inline-actions .divider{height:11px;margin:-2px 0 0;border-left:1px solid ${za.Xt}}.perspective-related-card msft-article.filled-icon-hover .inline-actions .actions-button:hover > svg > path:nth-child(1){transition:all 0.5s;d:path("${Ea.i_}")}.perspective-related-card msft-article.filled-icon-hover .inline-actions .actions-button svg{width:20px;height:20px}.perspective-related-card msft-article msft-attribution{display:grid;grid-template-columns:16px auto auto;grid-gap:8px;margin-bottom:4px;position:relative}.perspective-related-card msft-article msft-attribution .provider-name{unicode-bidi:embed}.perspective-related-card msft-article .image img{border-radius:4px;vertical-align:middle}`;var Ha=i(26863),_a=i(17967),Va=i(60402),ja=i(96016),Wa=i(2399),Ua=i(33307);const Ba=52,qa=52,Ja=st.qy`<msft-attribution slot="attribution">${(0,en.z)(e=>e.providerData&&e.providerData.logoImage,st.qy`<img slot="image" src="${e=>e.providerData.logoImage}" alt="${e=>e.providerData.name}" />`)}<span>${(0,en.z)(e=>e.providerData&&e.providerData.name,st.qy`<span class="provider-name">${e=>e.providerData.name}</span>`)} ${(0,en.z)(e=>e.providerData&&e.providerData.name&&e.publishedDateTime,st.qy` · `)} ${(0,en.z)(e=>e.publishedDateTime,st.qy`${e=>e.publishedDateTime}`)}</span></msft-attribution>`,Za=st.qy`
${(0,en.z)(e=>e.enableRichSocialReaction,st.qy`<span class="divider"></span>`)}<fluent-button class="actions-button" aria-expanded="false" aria-label="${e=>e.cardActionsTooltips&&e.cardActionsTooltips.seeMore}" role="button" title="${e=>e.cardActionsTooltips&&e.cardActionsTooltips.seeMore}" @click=${(e,t)=>e.toggleCardActionMenu&&e.toggleCardActionMenu(e,t.event)} @keypress=${(e,t)=>e.toggleCardActionMenu&&e.toggleCardActionMenu(e,t.event)} data-t="${e=>{var t;return null===(t=e.telemetryContext)||void 0===t||null===(t=t.seeMore)||void 0===t?void 0:t.getMetadataTag()}}">${e=>st.qy`${st.qy.partial(Ua.A)}`}</fluent-button>`,Ga=st.qy`<div id="inline-actions" class="inline-actions">${(0,en.z)(e=>e.enableRichSocialReaction,(0,Ha.nj)({theme:"default"}))} ${(0,en.z)(e=>e.cardActionStatus&xt.J.enabled,Za)}</div>`,Ya=st.qy`<div slot="image" class="image"><img height=${qa}, width=${Ba}, alt="${e=>e.imageData.altText}" src="${e=>e.imageData.source}" /></div>`,Xa=st.qy`<msft-article href=${e=>e.destinationUrl} title=${e=>e.title} target=${e=>e.openLinksInNewTab||e.openArticleInNewTab?"_blank":"_self"} data-t="${e=>{var t;return null===(t=e.telemetryContext)||void 0===t||null===(t=t.contentCard)||void 0===t?void 0:t.getMetadataTag()}}" :anchorTelemetryTag=${e=>e.telemetryContext&&e.telemetryContext.destination&&e.telemetryContext.destination.getMetadataTag()} class=${(e,t)=>`${e.isWebContent?"crawled-content":""} ${e.enableRichSocialReaction?"social-reaction-enabled":""} ${e.isWebContent?"stacked-fromweb":""} ${e.enableFilledIconOnHover?"filled-icon-hover":""}`}>${Ja} ${(0,en.z)(e=>!!e.imageData,st.qy` ${Ya} `)}<div slot="start-action">${Ga}</div>${e=>e.title}</msft-article>`,Qa=st.qy`<div class="inner-content"><div class="heading-container"><h3 class="heading">${e=>e.cardHeading}</h3></div>${(0,oa.ux)(e=>e.relatedCardData.slice(0,3),Xa)}</div>`,Ka=st.qy`<div class="perspective-card-trigger"><button title="${e=>e.cardHeading}" @mouseenter="${(e,t)=>e.relatedStoriesOnFocusEventHandler(t.event)}" @click="${(e,t)=>e.showingRelatedStories?e.relatedStoriesOnBlurEventHandler(t.event,!0):e.relatedStoriesOnFocusEventHandler(t.event,!0)}" data-t="${e=>e.pspTriggerButtonTelemetryMetadata}" ${(0,Va.K)("ref_pspTriggerButton")}>${(0,en.z)(e=>e.showingRelatedStories,st.qy`${st.qy.partial(Wa.A)}`)} ${(0,en.z)(e=>!e.showingRelatedStories,st.qy`${st.qy.partial(ja.A)}`)}</button></div>`,eo=st.qy` ${(0,en.z)(e=>0===e.relatedCardData.length||e.fallbackArticleCard,st.qy` ${(0,oa.ux)(e=>[e.articleData],st.qy` ${Jr.B} `)} `)} ${(0,en.z)(e=>e.relatedCardData.length>0&&!e.fallbackArticleCard,st.qy`<fluent-card class="perspective-card" card-fill-color=${e=>{var t;return null===(t=e.articleData.articleCardBackgroundColor)||void 0===t||null===(t=t.find(e=>e.isDarkMode===(0,xn.ud)()))||void 0===t?void 0:t.hexColor}}><div class="perspective-card-frame"><div class="perspective-article-card ${e=>e.showRelatedStoriesOnHover?"":"max-1x-width"} ${e=>e.showRelatedStoriesOnHover&&e.showingRelatedStories?"faded-image":""}">${(0,oa.ux)(e=>{return[(t=e.articleData,i=e.cardSize,n={abstract:void 0,gridArea:"card-container",imageData:e.articleImageData||e.articleData.imageData},r=e.showRelatedStoriesOnHover,{...t,disableHideOnHover:!0,cardSize:r||i!==sr.uE._2x_2y?t.cardSize:sr.uE._1x_2y,imagePosition:r||i!==sr.uE._2x_2y?t.imagePosition:"start",...n})];var t,i,n,r},st.qy` ${Jr.B} `)}</div>${(0,en.z)(e=>!e.showRelatedStoriesOnHover,st.qy`<div class="perspective-related-card">${Qa}</div>`)} ${(0,en.z)(e=>e.showRelatedStoriesOnHover,st.qy`<div class="perspective-related-card default-hidden ${e=>e.showingRelatedStories?"focused":""}" @focusin="${(e,t)=>e.relatedStoriesOnFocusEventHandler(t.event)}" @focusout="${(e,t)=>e.relatedStoriesOnBlurEventHandler(t.event)}" @mouseleave="${(e,t)=>e.relatedStoriesOnBlurEventHandler(t.event)}">${Qa} ${Ka}</div>`)}</div><div class="hover-actions"><div class="hide-story">${(0,en.z)(e=>!e.articleData.disableHideOnHover&&e.articleData.cardActionStatus&xt.J.enabled,st.qy` ${(0,oa.ux)(e=>[e.articleData],st.qy` ${_a.C} `)} `)}</div></div></fluent-card>`)}
`;var to=i(63581),io=i(79860);class no extends Ui.L{constructor(){super(...arguments),this.loadingTimeout=1e4,this.relatedCardImageSize={width:52,height:52},this.relatedCardData=[],this.fallbackArticleCard=!1,this.showRelatedStoriesOnHover=!1,this.showingRelatedStories=!1,this.pspTriggerButtonTelemetryMetadata="",this.fetchController=new AbortController,this.loading=!1,this.inViewPort=!1,this.hoverTimeout=null,this.forceRelatedStoriesHidden=!1}setIntersectionObserver(){if(this.intersectionObserver)return;this.intersectionObserver=new IntersectionObserver(e=>{if(!0===e[0].isIntersecting){if(this.inViewPort=!0,this.loading)return;this.missingRelatedCardContent()&&!this.fetchController.signal.aborted?this.getRelatedCardContent(()=>{ro().includes("pspuxh:0")&&E.YT.addOrUpdateTmplProperty("pspuxh","1"),this.inViewPort&&(E.YT.addOrUpdateTmplProperty("PSP","2"),E.YT.addOrUpdateTmplProperty("pspux","2"),this.intersectionObserver.unobserve(this))}):(0===this.relatedCardData.length&&(this.relatedCardData=this.articleData.relatedCardData),E.YT.addOrUpdateTmplProperty("PSP","2"),E.YT.addOrUpdateTmplProperty("pspux","2"),this.intersectionObserver.unobserve(this))}else this.inViewPort=!1},{threshold:.01}),this.intersectionObserver.observe(this)}unsetIntersectionObserver(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0)}setArticleImageSize(e){const{imageData:t}=this.articleData;if(t&&t.source){const i=new URL(t.source);i.searchParams.set("w",e.width.toString()),i.searchParams.set("h",e.height.toString()),this.articleImageData={...t,imageWidth:e.width.toString(),imageHeight:e.height.toString(),source:i.toString()}}}updatePspTriggerButtonTelemtryMetadata(e){const{telemetryContext:t}=this.articleData;t&&t.showRelatedStories&&(t.showRelatedStories.updateContract({...t.showRelatedStories.contract,behavior:e}),this.pspTriggerButtonTelemetryMetadata=t.showRelatedStories.getMetadataTag())}async getRelatedCardContent(e){await(0,_.Qc)(),this.loading=!0,(0,io.E)(this.articleData.relatedCardData,this.articleData,this.loadingTimeout,this.relatedCardImageSize,()=>{this.loading=!1}).then(t=>{t?t.length>=3&&(this.relatedCardData=t.slice(0,3),this.showRelatedStoriesOnHover||this.setArticleImageSize(to.L._385x225),null==e||e()):this.fallbackArticleCard=!0})}missingRelatedCardContent(){return 0===this.relatedCardData.length&&this.articleData.relatedCardData&&this.articleData.relatedCardData.some(e=>!(e.title&&e.providerData))}cancelSendHoverEvent(){this.hoverTimeout&&clearTimeout(this.hoverTimeout),this.hoverTimeout=null}deferSendHoverEvent(e,t){this.cancelSendHoverEvent(),this.hoverTimeout=setTimeout(()=>{t&&t(),E.YT.sendActionEvent(this.ref_pspTriggerButton,gn.EG.Hover,gn.MS.Show),this.cancelSendHoverEvent()},300)}relatedStoriesOnFocusEventHandler(e){!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this.forceRelatedStoriesHidden||(this.forceRelatedStoriesHidden=!1,this.showingRelatedStories||("mouseenter"===e.type||"focusin"===e.type?this.deferSendHoverEvent(e,()=>E.YT.addOrUpdateTmplProperty("pspuxh","2")):E.YT.addOrUpdateTmplProperty("pspuxh","2"),this.updatePspTriggerButtonTelemtryMetadata(gn.MS.Hide)),this.showingRelatedStories=!0)}relatedStoriesOnBlurEventHandler(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.forceRelatedStoriesHidden=t,this.showingRelatedStories&&("mouseleave"!==e.type&&"focusout"!==e.type||E.YT.sendActionEvent(this.ref_pspTriggerButton,gn.EG.MouseLeave,gn.MS.Hide),this.updatePspTriggerButtonTelemtryMetadata(gn.MS.Show)),this.showingRelatedStories=!1,this.cancelSendHoverEvent()}connectedCallback(){super.connectedCallback(),this.setIntersectionObserver(),this.updatePspTriggerButtonTelemtryMetadata(this.showingRelatedStories?gn.MS.Hide:gn.MS.Show),this.showRelatedStoriesOnHover&&!ro().includes("pspuxh:")&&E.YT.addOrUpdateTmplProperty("pspuxh","0")}disconnectedCallback(){super.disconnectedCallback(),this.fetchController.abort(),this.unsetIntersectionObserver()}}function ro(){const e=E.YT.getPageMetadata();return e&&e.combinedContract&&e.combinedContract.flight&&e.combinedContract.flight.tmpl||""}(0,Wi.Cg)([(0,un.CF)({attribute:"card-size"})],no.prototype,"cardSize",void 0),(0,Wi.Cg)([(0,un.CF)({attribute:"card-heading"})],no.prototype,"cardHeading",void 0),(0,Wi.Cg)([(0,un.CF)({attribute:"loading-timeout"})],no.prototype,"loadingTimeout",void 0),(0,Wi.Cg)([hn.sH],no.prototype,"articleData",void 0),(0,Wi.Cg)([hn.sH],no.prototype,"relatedCardData",void 0),(0,Wi.Cg)([hn.sH],no.prototype,"articleImageData",void 0),(0,Wi.Cg)([hn.sH],no.prototype,"fallbackArticleCard",void 0),(0,Wi.Cg)([hn.sH],no.prototype,"showRelatedStoriesOnHover",void 0),(0,Wi.Cg)([hn.sH],no.prototype,"showingRelatedStories",void 0),(0,Wi.Cg)([hn.sH],no.prototype,"pspTriggerButtonTelemetryMetadata",void 0);let ao=class extends no{};ao=(0,Wi.Cg)([(0,Ui.E)({name:"msn-perspective-card",template:eo,styles:La})],ao);const oo=st.qy`
    <msn-perspective-card
        style="grid-area:${e=>e.gridArea}"
        card-size=${e=>e.cardSize}
        card-heading=${e=>e.relatedStoriesHeadingLabel}
        :articleData=${e=>e}
        :cardDataMappers=${e=>e.subCardDataMappers}
        :showRelatedStoriesOnHover=${e=>e.showRelatedStoriesOnHover}
        data-t="${e=>{var t;return null===(t=e.telemetryContext)||void 0===t||null===(t=t.relatedStories)||void 0===t?void 0:t.getMetadataTag()}}"
    >
    </msn-perspective-card>
`;var so=i(46780),lo=i(72706),co=i(10332),uo=i(29525),ho=i(40183),po=i(95710),fo=i(82670),vo=i(155),go=i(12916),mo=i(41543),bo=i(759),yo=i(69585),wo=i(11654);const $o=st.qy`
<cs-section-tracker section-index="${e=>e.id}" style="margin:0; width:100%"></cs-section-tracker>`;var Co=i(59966),ko=i(59099),So=i(80360),xo=i(39978),To=i(66950),Do=i(32998),Ao=i(40562),Io=i(66805),Mo=i(94996),Fo=i(39771),Po=i(4052),Ro=i(89337),Oo=i(99758),No=i(97366);const zo=st.qy`
    <fluent-card
        style="grid-area:${e=>e.gridArea}"
        class="${e=>e.cardSize}"
    >
        <msft-content-card
            href=${e=>e.destinationUrl}
            target=${e=>e.openLinksInNewTab?"_blank":"_self"}
            title=${e=>e.disableCardTitleTooltip?"":e.title}
            ?image-priority=${e=>e.imagePriority}
            style="--heading-max-lines: 3"
            data-t="${e=>e.telemetryContext&&e.telemetryContext.contentCard&&e.telemetryContext.contentCard.getMetadataTag()}"
            :visualReadinessCallback="${e=>e.visualReadinessCallback}"
            :anchorTelemetryTag=${e=>e.telemetryContext&&e.telemetryContext.destination&&e.telemetryContext.destination.getMetadataTag()}
        >
            ${e=>e.title}
            ${(0,en.z)(e=>e.abstract,st.qy`
                <p slot="abstract">${e=>e.abstract}</p>
            `)}
            ${(0,en.z)(e=>e.imageData,st.qy`
                <img
                    slot="media"
                    src="${e=>e.imageData.source}"
                    alt="${e=>e.imageData.altText}"
                    height="${e=>e.imageData.imageHeight}"
                    width="${e=>e.imageData.imageWidth}"
                />
            `)}
            <msft-content-indicator slot="content-indicator">
                ${'<svg width="16" height="16" viewBox="0 0 16 16" slot="icon"><path d="M8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12ZM8 3c.37 0 .88.36 1.31 1.32.1.2.18.43.26.68H6.43c.08-.25.16-.47.26-.68C7.12 3.36 7.63 3 8 3Zm-2.22.9c-.15.34-.29.7-.4 1.1H4a5.02 5.02 0 0 1 2.04-1.6c-.1.16-.18.33-.26.5ZM5.16 6a12.06 12.06 0 0 0 0 4H3.42a4.98 4.98 0 0 1 0-4h1.74Zm.22 5a7.53 7.53 0 0 0 .66 1.6A5.02 5.02 0 0 1 4 11h1.38Zm1.05 0h3.14a6.2 6.2 0 0 1-.26.68C8.88 12.64 8.37 13 8 13c-.37 0-.88-.36-1.31-1.32a6.2 6.2 0 0 1-.26-.68Zm3.4-1H6.17a10.94 10.94 0 0 1 0-4h3.64a10.94 10.94 0 0 1 0 4Zm.79 1H12a5.02 5.02 0 0 1-2.04 1.6c.1-.16.18-.33.26-.5.15-.34.29-.7.4-1.1Zm1.96-1h-1.74a12.05 12.05 0 0 0 0-4h1.74a4.98 4.98 0 0 1 0 4ZM9.96 3.4c.81.35 1.52.9 2.04 1.6h-1.38a7.53 7.53 0 0 0-.66-1.6Z"/></svg>'}
                ${e=>e.contentTypeLabel}
            </msft-content-indicator>
        </msft-content-card>
    </fluent-card>
`;var Eo=i(89002),Lo=i(28941),Ho=i(84793);Jr.B,Zr.Q,Gr.j,Yr.x,Xr.Z,rt.wT,rt.wT,Co.H,rt.wT,Kr.K,Qr.T,ea.d,ia.C,Co.H,rt.wT,rt.wT,rt.wT,rt.wT,rt.wT,ta.e,Ft.T,na.s,rt.wT,Co.H,ra.I,aa.N,Ho.t,rt.wT,ba.q,ya.P,wa.s,$a.ux,ka.RT,Ca.a,Sa.g,xa.G,rt.wT,ai.Z,Co.H,rt.wT,rt.wT,Ta.k,rt.wT,Da.h,Aa.B,Ia.P,Co.H,yi.DO,yi.DO,Ma._,so.u,lo.d,co.C,rt.wT,uo.I,ho.A,po.b,fo.a,vo.V,go.I,mo.d,rt.wT,bo.W,kt.t,yo.P,wo.F,rt.wT,Co.H,rt.wT,rt.wT,rt.wT,ko.j,So.n,rt.wT,xo.D,rt.wT,rt.wT,To.U,Co.H,rt.wT,Do.D,pr.L9,Ao.z,Io.y,Mo.E,Fo.T,Po.A,Ro.S,Oo.Q,rt.wT,No.p,Co.H,Eo.gu,rt.wT,Lo.M;const _o={"article-card":Jr.B,"article-fre-card":Zr.Q,"autos-carousel-card":Gr.j,"boost-ad-card":Yr.x,"cashback-carousel-card":Xr.Z,"casual-games-card":rt.wT,"casual-games-carousel-card":rt.wT,"channel-filter-card":dt,"comics-carousel-card":Co.H,"community-card":rt.wT,"content-card":Kr.K,"content-card-preview-1x":Qr.T,"content-group":mt,"content-group-card":ea.d,"cs-section-tracker":$o,"daily-brief-card":rt.wT,"daily-fix-games-carousel-card":Co.H,"daily-greeting-card":rt.wT,"daily-moments-card":rt.wT,"daily-wonder-copilot-card":rt.wT,"daily-wonder-hero-video":St,"daily-wonder-quote-card":rt.wT,"daily-wonder-video-list-card":rt.wT,"dense-card":ta.e,"digest-card":Ft.T,"display-ad-card":na.s,"donation-npo-card":rt.wT,"editors-pick-carousel-card":Co.H,"election-card":ra.I,"elections-card":aa.N,"entertainment-premier-card":Ho.t,"esports-card":rt.wT,"flex-article-card":ma,"following-fre-inline-card":ba.q,"gaming-recentlyplayed-card":Wt,"health-card":rt.wT,"health-fitness-card":ya.P,"health-tip-card":wa.s,"hide-story-card":$a.ux,"horoscope-card":rt.wT,"top-comments-card":Ca.a,"hot-list-card":ei,"infopane-card":ka.RT,"infopane-slide-card":Sa.g,"interest-management-card":xa.G,"learning-trivia-card":rt.wT,"linked-in-card":ai.Z,"local-news-carousel-card":Co.H,"manga-card":rt.wT,"manga-carousel":rt.wT,"marketplace-card":Ta.k,"mobile-trending-search-card":rt.wT,"moment-in-time-hero":pi,"money-add-watchlist-card":Da.h,"money-card":Aa.B,"money-info-card":Ia.P,"money-topic-stripe-carousel-card":Co.H,"native-ad-card":yi.DO,"native-top-ad-card":yi.DO,"on-this-day-card":rt.wT,"perspective-card":oo,"placeholder-card":so.u,"polls-card":lo.d,"prism-card":co.C,"prism-carousel-card":rt.wT,"profile-carousel-card":uo.I,"promoted-ad-card":ho.A,"publisher-list-card":Fi,"qna-card":rt.wT,"quiz-card":fo.a,"real-estate-card":vo.V,"recipes-card":go.I,"recommended-interests-card":mo.d,"recommended-searches-card":rt.wT,"responsive-ad-card":bo.W,"responsive-card":kt.t,"responsive-infopane":yo.P,"rewards-card":wo.F,"rich-calendar-card":rt.wT,"section-header-card":yn,"select-carousel-card":Co.H,"serendipity-card":Tn,"serendipity-msn-homepage-card":qr,"shared-hero-news-card":rt.wT,"shopping-banner-sd-card":rt.wT,"shopping-buying-guide-premium-card":rt.wT,"shopping-card":En,"shopping-carousel-card":rt.ns,"shopping-carousel-prong-wc":So.n,"shopping-events-deal-card":rt.wT,"shopping-fashion-carousel-wc":xo.D,"shopping-river-card":rt.wT,"shopping-sd-card":rt.wT,"sports-card":To.U,"sports-olympic-card":lr,"sports-topic-stripe-carousel-card":Co.H,"stack-card":rt.wT,"spotlight-card":Do.D,"superapp-upsell-card":ur,"tabbed-infopane-card":pr.L9,"top-picks-card":mr,"top-sites-card":Sr,"top-stories-card":Ao.z,"topic-feed-card":Io.y,"traffic-card":Mo.E,"traffic-hero":Mr,"travel-destination-card":Fo.T,"travel-destination-carousel-card":Rr,"trending-now-card":rt.eW,"trending-search-card":rt.wT,"trending-topics-card":rt.ns,"video-card":Oo.Q,"video-shopping-carousel-card":rt.wT,"weather-card":rt.mO,"weather-hero-experience":_r,"weather-hero-experience-carousel-card":Co.H,"web-content-card":zo,"widget-placeholder-card":Eo.gu,"widgets-notifications-card":rt.wT,"win-app-card":Lo.M};ia.C,Ia.P,To.U,Mo.E,rt.mO;function Vo(){return{cardDataMapperMap:Br,cardTemplateMap:{..._o}}}},26931:function(e){e.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M14.95 13.96a7 7 0 10-9.9 0l1.52 1.5 2.04 1.98.14.12a2 2 0 002.64-.12l2.43-2.37 1.13-1.12zM10 12a3 3 0 110-6 3 3 0 010 6z"></path></svg>'},27833:function(e,t,i){"use strict";i.d(t,{K:function(){return o},O:function(){return s}});var n=i(96950),r=i(11622),a=i(26641);const o=n.qy`
    ${e=>e.configInfo&&(0,r.yN)(e.configInfo,{properties:{mapperArgs:e.mapperArgs,parentTelemetry:e.telemetryObject,feedLayoutCardSize:e.cardSize},attributes:{style:`grid-area:${e.gridArea}`,class:`${e.cardSize}`},telemetryObject:e.telemetryObject})}
`,s={getFeedDataForCard:e=>(0,a.BQ)(e),viewTemplate:o}},31951:function(e,t,i){"use strict";i.d(t,{FY:function(){return o},GH:function(){return p},S1:function(){return u},Xr:function(){return a},_F:function(){return l},a5:function(){return f},b$:function(){return c},cW:function(){return s},mr:function(){return d},q2:function(){return h},rK:function(){return r}});var n=i(17254);const r="weathermapdata/1/static/weather/Icons/taskbar_v10/",a="hurricane_warnning.svg",o="Alert/",s="AQI/WildFire.svg",l="AQI/wildfireMapInfopane.svg",d="AQI/aq{level}.svg",c="Teaser/",u="Condition_Card/",h=r+"NoColor_Card/",p=()=>{var e;return`${null===(e=(0,n.rA)())||void 0===e?void 0:e.AssetsUrl}/weathermapdata/1/static`},f=()=>`${p()}/weather/Icons/taskbar/Fallback/Alert_Y.svg`},34627:function(e,t,i){"use strict";i.d(t,{T:function(){return h}});var n=i(80904),r=i(26863),a=i(63581),o=i(79765),s=i(96950),l=i(91640),d=i(17254),c=i(52201);const u=s.qy`      
    <msft-attribution slot="attribution">
    ${(0,l.z)(e=>e.providerData.logoImage,s.qy`
        <img 
            slot="image" 
            src="${e=>e.providerData.logoImage}" 
            alt="${e=>e.providerData.name}" 
            @load=${e=>{e.imageData&&e.imageData.visualReadinessCallback&&e.imageData.visualReadinessCallback(1,o.j.provider)}} />
    `)}
    <div class="attribution_container_${e=>e.id}" id="attribution_container">
        <div class="attribution_Content_${e=>e.id}" style="${e=>"rtl"===e.dir?"right":"left"}:0px;">
            ${(0,l.z)(e=>e.providerData&&e.providerData.name,s.qy`<span style="unicode-bidi: embed;">${e=>e.providerData.name}</span>`)}
            ${(0,l.z)(e=>e.providerData&&e.providerData.name&&e.publishedDateTime,s.qy` · `)}
            ${(0,l.z)(e=>e.publishedDateTime,s.qy`<span style="unicode-bidi: embed;">${e=>e.publishedDateTime}</span>`)}
            ${(0,l.z)(e=>e.isWebContent&&e.crawledContentLabel,s.qy` · `)}
            ${(0,l.z)(e=>e.isWebContent&&e.crawledContentLabel,s.qy`${e=>e.crawledContentLabel}`)}
        </div>
    </div>
    </msft-attribution>

`,h=s.qy`
    <style>
        .card-see-more {
            box-sizing: border-box;
            align-items: center;
            background-color: rgb(255, 255, 255);
            border-radius: 100%;
            border: 1px solid rgb(229, 229, 229);
            cursor: pointer;
            display: flex;
            fill: currentcolor;
            font-family: var(--body-font);
            font-size: var(--type-ramp-base-font-size);
            height: 28px;
            justify-content: center;
            line-height: var(--type-ramp-base-line-height);
            margin-inline-start: 4px;
            min-width: 28px;
            outline: none;
            padding: 0px;
            position: relative;
        }
        .card-see-more: hover {
            background-color: rgb(242, 242, 242);
        }
        msft-content-card.msft-content-card-preview {
            height: 100px;
        }
        msft-content-card.msft-content-card-preview::part(body) {
            height: 100%;
        }
        msft-content-card.msft-content-card-preview .card-button:not(:hover) {
            background: transparent;
        }
        msft-content-card.msft-content-card-preview fluent-button::part(control) {
            padding: 0;
        }
        msft-content-card.msft-content-card-preview::part(footer) {
            padding: 0 16px 4px;
            margin-bottom: 0;
            height: 40px;
        }
        msft-content-card.msft-content-card-preview msft-attribution {
            position: relative;
            overflow: hidden;
            margin-top: 0;
            margin-bottom: 0;
        }
        msft-content-card.msft-content-card-preview .attribution-wrapper.attribution-rtl msft-attribution {
            margin-right: 5px;
        }
        msft-content-card.msft-content-card-preview::part(heading-container) {
            padding: 8px;
            display: flex;
            flex-flow: column-reverse;
            height: 100%;
            box-sizing: border-box;
            justify-content: space-between;
        }
        msft-content-card.msft-content-card-preview::part(heading-container) {
            height: 100%;
        }

        ${e=>"end"===e.imagePosition?'\n            msft-content-card.msft-content-card-preview::part(media-wrapper) {\n                float: right;\n                margin-top: unset;\n                margin: 8px 8px 8px 0px;\n            }\n            :host([direction="rtl"]) msft-content-card.msft-content-card-preview::part(media-wrapper) {\n                float: left;\n                margin: 8px 0px 8px 8px;\n            }\n            ':'        \n            msft-content-card.msft-content-card-preview::part(media-wrapper) {\n                float: left;\n                margin-top: unset;\n                margin: 8px 0 8px 8px;\n            }\n            :host([direction="rtl"]) msft-content-card.msft-content-card-preview::part(media-wrapper) {\n                float: right;\n                margin: 8px 8px 8px 0;\n            }\n            '}
        msft-content-card.msft-content-card-preview::part(media),
        msft-content-card.msft-content-card-preview::part(media) img {
            border-radius: unset;
        }
        msft-content-card.msft-content-card-preview::part(heading) {
            font-size: 14px;
            line-height: 20px;
        }
        msft-content-card.msft-content-card-preview .attribution-wrapper {
            display: flex;
            gap: 8px;
        }

        msft-content-card.msft-content-card-preview .attribution-wrapper .social-bar-wrapper {
            position: relative;
            z-index: 99999;
        }
        msft-content-card.msft-content-card-preview .attribution-wrapper.attribution-rtl .social-bar-wrapper::before {
            left: unset;
            right: 0px;
            transform: translateX(100%);
        }
        msft-content-card.msft-content-card-preview .title-attribution-wrapper {
            height: 100%;
            position: absolute;
            top: 0;
            right: 0;
            width: calc(100% - 120px);
            padding: 8px 0;
            box-sizing: border-box;
            display: flex;
            flex-flow: column;
            justify-content: space-between;
            z-index: 2;
        }
        msft-content-card.msft-content-card-preview .title-attribution-wrapper.image-end {
            right: unset;
            left: 0;
            padding-left: 8px;
        }

        msft-content-card.msft-content-card-preview .title-attribution-wrapper.no-image {
            width: 100%; 
            padding-left: 8px;
        }

        msft-content-card.msft-content-card-preview .title-container {
            padding-right: 8px;
            height: 60px;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            text-decoration: none;
            color: var(--neutral-foreground-rest);
        }
        msft-content-card.msft-content-card-preview .image-end .title-container {
            padding-right: 0;
        }
            
        msft-content-card.msft-content-card-preview .provider-top .title-container {
            height:40px;
            -webkit-line-clamp: 2;
            padding-top: 4px;
        }  

        msft-content-card.msft-content-card-preview .title-container:hover {
            text-decoration: underline;
        }
        msft-content-card.msft-content-card-preview .title-container:focus {
            outline: none;
            text-decoration: underline;
        }
        /* 
         *  Here about 'from the web' attribution style
         */
        msft-content-card[id="contentcard_${e=>e.id}"] msft-attribution, msft-content-card[id="contentcard_${e=>e.id}"] msft-attribution::part(content){
            width: calc(100%);
        }
        msft-content-card[id="contentcard_${e=>e.id}"] .attribution_container_${e=>e.id} {
            width: calc(100%);
            min-height: var(--type-ramp-minus-1-line-height);
            position: relative;
            overflow: hidden;
            white-space: nowrap;
        }
        msft-content-card[id="contentcard_${e=>e.id}"] .attribution_Content_${e=>e.id} {
            position: absolute;
            transition: all 0.5s ease-out;
            text-decoration: none;
            color: var(--neutral-foreground-rest);
        }

    /**
    *  To support high contrast mode for accessibility
    **/
    @media (forced-colors: active) {
        msft-content-card.msft-content-card-preview .title-container {
            color: linktext;
        }
    }
    </style>
    <fluent-card
        style="grid-area:${e=>e.gridArea}"
        class="${e=>e.cardSize} msft-content-card-preview-wrapper"
    >
        <msft-content-card
            exportparts="heading"
            id="contentcard_${e=>e.id}"
            href=${e=>e.destinationUrl}
            target=${e=>e.openLinksInNewTab?"_blank":"_self"}
            title=${e=>e.disableCardTitleTooltip?"":e.title}
            style="--heading-max-lines: 2;"
            class="msft-content-card-preview"
            data-t="${e=>{var t;return null===(t=e.telemetryContext)||void 0===t||null===(t=t.contentCard)||void 0===t?void 0:t.getMetadataTag()}}"
            :anchorTelemetryTag=${e=>e.telemetryContext&&e.telemetryContext.destination&&e.telemetryContext.destination.getMetadataTag()}
            @mouseenter="${(e,t)=>e.setDisplacementHandler&&e.setDisplacementHandler(t,e.dir)}"
            @mouseleave="${(e,t)=>e.removeDisplacementHandler&&e.removeDisplacementHandler(t,e.dir)}"
        >
            ${(0,l.z)(e=>e.imageData,s.qy`
                <img
                    slot="media"
                    src="${e=>e.imageData.source}"
                    alt="${e=>e.imageData.altText}"
                    height="${a.L._104x84.height}"
                    width="${a.L._104x84.width}"
                    @load="${e=>{e.imageData.visualReadinessCallback&&e.imageData.visualReadinessCallback(3,o.j.image)}}"
                />
            `)}
            ${e=>{!e.imageData&&e.visualReadinessCallback&&e.visualReadinessCallback()}}
            <div class="title-attribution-wrapper ${e=>{var t;return null!==(t=e.imageData)&&void 0!==t&&t.source?"":"no-image"}} ${e=>"end"===e.imagePosition?"image-end":""} ${e=>e.providerAboveHeader?"provider-top":""}">
                ${(0,l.z)(e=>e.providerData&&e.providerAboveHeader,u)}
                <div class="title-wrapper">
                    <div class="title-container" tabindex="0" role="link" @keypress="${(e,t)=>"Enter"==t.event.key&&t.event.target.click()}">${s.qy`${e=>e.title}`}</div>
                    ${(0,l.z)(e=>e.abstract,s.qy`
                        <p slot="abstract" style="color: var(--neutral-foreground-rest);">${e=>e.abstract}</p>
                    `)}
                </div>
                <div class="attribution-wrapper ${e=>"rtl"===e.dir?"attribution-rtl":""}">
                    ${(0,l.z)(e=>e.providerData&&!e.providerAboveHeader,u)}
                    ${(0,l.z)(e=>e.enableRichSocialReaction,e=>s.qy`
 <div class="social-bar-wrapper" style="display: flex; gap: 4px; margin-right: 5px;">
     ${(0,l.z)(e=>e.optedOutOfReactions,s.qy`
         ${r.LW}
         ${r.tB}
     `)}
     <social-bar-wc
         config-instance-src=${e=>e.socialBarWCConfigInfo&&(0,c.v)(e.socialBarWCConfigInfo)}
         instance-id=${e=>e.socialBarWCConfigInfo&&e.socialBarWCConfigInfo.instanceId}
         config-shared-ns=${e=>{var t;return null===(t=e.socialBarWCConfigInfo)||void 0===t||null===(t=t.configRef)||void 0===t?void 0:t.sharedNs}}
         :contentId=${e=>e.id}
         :destinationUrl=${e=>e.destinationUrl}
         :locale=${e=>d.T3.CurrentMarket||e.locale}
         :rootTelemetryObject=${e=>e.telemetryContext&&(e.telemetryContext.contentCardTelemetryObject||e.telemetryContext.contentCard)}
         :hideComments=${()=>!0}
         :isRightPos=${e=>e.socialBarInRight}
         :socialMetadata=${e=>({...e.metadata,imageData:e.imageData,providerData:e.providerData,title:e.title})}
        theme="superappListCard"
    ></social-bar-wc>
 </div>
 `)}
                </div>
            </div>
            ${(0,l.z)(e=>e.enableHoverCardAction&&!e.optedOutOfReactions,n.p)}
        </msft-content-card>
    </fluent-card>
`},35699:function(e){e.exports='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4.22 15.53c.3.3.77.3 1.06 0L12 8.81l6.72 6.72a.75.75 0 101.06-1.06l-7.25-7.25a.75.75 0 00-1.06 0l-7.25 7.25c-.3.3-.3.77 0 1.06z"></path></svg>'},36742:function(e){e.exports='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4.22 8.47c.3-.3.77-.3 1.06 0L12 15.19l6.72-6.72a.75.75 0 111.06 1.06l-7.25 7.25c-.3.3-.77.3-1.06 0L4.22 9.53a.75.75 0 010-1.06z"></path></svg>'},38372:function(e,t,i){"use strict";i.d(t,{o:function(){return h}});var n=i(9504),r=i(63581),a=i(53013),o=i(49986),s=i(83003),l=i(19608),d=i(77512),c=i(669),u=i(2632);const h={getFeedDataForCard:e=>function(e){var t,i;const{cardSlot:n,configOptions:h,parentTelemetryObject:p,cardMetadata:f,openLinksInNewTab:v,visualReadinessCallback:g,isAnaheimDesign:m,isProviderInFooter:b,enableArticleTimestamps:y,localizedStrings:w,enableNewTimestampFormatForJAJP:$}=e;if(!f||!f.subItems||0===f.subItems.length)return(0,d.wc)();const C=(null==f||null===(t=f.subItems[0])||void 0===t?void 0:t.type)===s.pL.WebContent,k=h&&h,S=f.subItems[0].cardContent,{id:x,destinationUrl:T,title:D,provider:A,type:I}=S;k&&(k.instanceId=`denseCard-${x}`);const M={id:x,destinationUrl:T,openLinksInNewTab:v,title:D,ariaLabel:(0,c.yL)(D,A,null==h?void 0:h.localizedStrings),imagePriority:!1,providerData:(0,c.p_)(A,C),isProviderInFooter:b,imageData:(0,o.po)(f.subItems[0],r.L._240x129,g,m),publishedDateTime:y&&`${(0,o.fL)($,new Date(S.publishedDateTime),S.locale,w)}`},F=f.subItems.slice(1),P={heroNews:M,newsList:null==F?void 0:F.map(e=>{var t;const i=e.type===s.pL.NativeAd||e.type===s.pL.CmsAd,n=null==e?void 0:e.cardContent;if(!i){const t=e.type===s.pL.WebContent;return{abstract:e.cardContent.abstract,imageData:(0,o.po)(e,r.L._240x129,g,m),destinationUrl:e.cardContent.destinationUrl,title:e.cardContent.title,ariaLabel:(0,c.yL)(e.cardContent.title,e.cardContent.provider,null==h?void 0:h.localizedStrings),providerData:(0,c.p_)(e.cardContent.provider,t),isNativeAd:i,telemetryContext:(0,a.dj)(p,e.cardContent,e.metadata,null,t),isNarrowNewsItem:null==h?void 0:h.isNarrowNewsItem,publishedDateTime:y&&`${(0,o.fL)($,new Date(n.publishedDateTime),n.locale,w)}`}}const l=(null===(t=e.placement)||void 0===t?void 0:t.items[0])||{},{beaconsJson:d,privacyUrl:f,adLabelText:v,isGreyAdsLabelEnabled:b,geminiViewabilityDataJson:C}=e.placement||{};return{...l,beaconsJson:d,privacyUrl:f,adLabelText:v,geminiViewabilityDataJson:C,isNativeAd:i,adTelemetryContext:(0,u.u)(e,p,"river",0),isNarrowNewsItem:null==h?void 0:h.isNarrowNewsItem,isGreyAdsLabelEnabled:b}})},R={id:null==k?void 0:k.instanceId,childTemplateType:"dense-card",telemetryObject:p,denseConfigInfo:k,denseData:P,visualReadinessCallback:g};return(0,l.bw)({id:"denseCard",experienceType:null==k||null===(i=k.configRef)||void 0===i?void 0:i.experienceType,mapperArgs:e},R,(e,t)=>{const i=t.telemetryExt;return P.newsList.forEach((e,t)=>{var n,r;if(!e.isNativeAd&&null!==(n=e.telemetryContext)&&void 0!==n&&n.destination&&(null===(r=e.telemetryContext.destination)||void 0===r||null===(r=r.contract)||void 0===r||!r.ext)){const n=F[t],{traceIdIndex:r}=n||{},{recoId:a,ri:o}=(null==n?void 0:n.metadata)||{},s={...i,recoId:a,ri:o,traceIdIndex:r};e.telemetryContext.destination=e.telemetryContext.contentCard.addOrUpdateChild({...e.telemetryContext.destination.contract,ext:s})}}),{denseData:P}})}(e),viewTemplate:n.e}},38586:function(e,t,i){"use strict";i.d(t,{m:function(){return r}});var n=i(92011);class r extends n.L{handleImageContentChange(){this.imageContainer.classList.toggle("image",this.image.assignedNodes().length>0)}}},41587:function(e,t,i){"use strict";i.d(t,{A:function(){return o}});var n=i(57842),r=i(18573);var a=function(e){return(0,r.A)((0,n.A)(e).toLowerCase())},o=(0,i(13025).A)(function(e,t,i){return t=t.toLowerCase(),e+(i?a(t):t)})},43025:function(e,t,i){"use strict";function n(e,t,i){return n=>{const r={};return e.forEach(e=>function(e,t,i){t[i]=e[i]}(n,r,e)),t.forEach(e=>{return t=n,i=r,a=e.from,o=e.to,void(i[o]=t[a]);var t,i,a,o}),i.forEach(e=>{return t=n,i=r,a=e.from,o=e.to,s=e.trans,void(i[o]=s(t[a]));var t,i,a,o,s}),r}}i.d(t,{D:function(){return n}})},44662:function(e,t,i){"use strict";i.d(t,{FA:function(){return k},MQ:function(){return S},MS:function(){return w},fS:function(){return y},lf:function(){return C},rv:function(){return $}});var n=i(17254),r=i(55593),a=i(65022),o=i(93468),s=i(77246),l=i(98216),d=i(5044),c=i(84688),u=i(12426),h=i(46261),p=i(72535),f=i(1033),v=i(56590);c.l;function g(e,t){const{ocid:i="",cvid:n=""}=e||{},r=i||(0,d.En)();let a=n;!n&&l.YT&&l.YT.getRequestId&&"function"==typeof l.YT.getRequestId&&(a=l.YT.getRequestId());const o={...e||{},ocid:r||"",cvid:a||""};return o.locStrResolver=o.locStrResolver||t,o}function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{const i=decodeURIComponent(e).toLowerCase(),n=i.includes("?")?i.split("?")[1]:i;return n&&t&&n.includes(t.toLowerCase())}catch{return!1}}function b(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{const i=decodeURIComponent(e).toLowerCase(),n=i.includes("?")?i.split("?")[1]:i,r=t.toLowerCase();return new URLSearchParams(n).get(r)||""}catch{return""}}function y(e,t,i,n){const r=g(n,i),a=r.linkType||1;return w(e,t,function(e){return(0,v.Wk)(a,e)},r).toString()}function w(e,t,i,d){var c;d||(d={});const p=d.locale||n.T3.LocaleContentMarketString||"en-us",g=(0,v.Wk)("weather",p),y=i(p);let w,$;if(e&&(w=function(e){return e.urlSlug?e.urlSlug:(0,h.H4)(e,{skipAddressLine:!0}).slice(0,2).map(e=>null==e||"boolean"==typeof e?"":`${e}`).map(e=>e.replace(/[/?#%\s]+/g,"-")).map(e=>encodeURIComponent(e)).join(",")}(e),$=d.locStrResolver(e),(0,u.LQ)(e)&&l.YT&&a.QF4)){const t=new Error("seems invalid location for weather link");(0,o.vV)(a.QF4,t.message,void 0,{...a.QF4.pb,location:{longitude:e.longitude,latitude:e.latitude},stack:(t.stack||"").slice(0,1024)},!0)}const C=w?`/in-${w}`:"";let k;(0,s.S)()?k=document.location.href:d.locationHref&&(k=d.locationHref);let S=d.enablePunchoutHero?"ntp.msn.com":n.T3.NavTargetHostName;S="zh-cn"===p?S.replace("com","cn"):S,null!==(c=k)&&void 0!==c&&c.includes("localhost.msn.com")&&(0,s.S)()&&(S=d.enablePunchoutHero?S:document.location.host);const x=d.contentType?`&scenario=${d.contentType}`:"",T=new URL(d.enablePunchoutHero?`https://${S}/edge/ntp?cm=${p}&segment=Weather${x}`:`https://${S}/${p}/${g}/${y}${C}`),D=T.searchParams;return d.enablePunchoutHero||(d.hash&&(T.hash=d.hash),$&&D.set("loc",$),(0,v._V)(D,t),(0,s.S)()?(0,v.Cn)((0,r.a)(),D,d):d.locationHref&&(0,v.Cn)(new URL(d.locationHref).searchParams,D,d)),d.ocid&&D.set("ocid",d.ocid),m(k,"uxmode=ruby")&&D.set("uxmode","ruby"),m(k,"theme")&&D.set("theme",b(k,"theme")),m(k,"opts")&&D.set("opts",b(k,"opts")),d.uxMode&&D.set("uxmode",d.uxMode),d.cvid&&D.set("cvid",d.cvid),d.enablePunchoutHero||(d.etreeUser&&D.set("etree-user",d.etreeUser),d.etreeTaskID&&D.set("etree-task-id",d.etreeTaskID),d.content&&D.set("content",d.content)),d.fcsttab&&D.set("fcsttab",d.fcsttab),d.day&&D.set("day",d.day),d.jumpSource&&D.set("jump_source",d.jumpSource),(0,f.e3)()&&(T.search=""),T}function $(e,t,i,n,r){const a=g(r,i),o=w(e,t,function(e){const t=(0,v.Wk)(2,e);if("report"===n)return t;const i=n&&(0,v.AC)(n,e);return n?t+"/"+i:t+"/-"},a),s=o.searchParams,l="report"===n?{type:n}:{};return k(s,{zoom:a.zoom,"3d":a["3d"]&&"1",autoplay:a.autoplay&&"1",subs:a.subs,...l,wfid:a.wfid,alertid:a.alertid}),o.toString()}function C(e,t,i,n){const r=w(e,t,function(e){return(0,v.Wk)(6,e)},n=g(n,i));return k(r.searchParams,{lifeIndex:n.lifeIndex,fct:n.fct,aplannerstep:n.activityPlanerStep}),r.toString()}function k(e,t){if(!(0,f.e3)())for(const i in t)t[i]&&e.set(i,""+t[i])}function S(e,t,i,n){if(!n){var r,a;const t=new Date(null===(r=e.alertsInfo)||void 0===r?void 0:r.created);n=(null===(a=e.alertsInfo)||void 0===a?void 0:a.id)+t.getTime()/1e3}const o=(0,p.Z)(e.alertsInfo.class);n&&(i={...i,alertid:n});return $(e.currentLocation,e.unit,t,o,i)}},47797:function(e,t,i){"use strict";i.d(t,{Q:function(){return o}});var n=i(4052),r=i(19608),a=i(26641);const o={getFeedDataForCard:e=>function(e){var t;const{cardMetadata:i,configOptions:n,parentTelemetryObject:o,visualReadinessCallback:s}=e;if(n&&n.useSharedTelemetry)return(0,a.BQ)(e,"trending-now-card");const l=n&&n,d={id:"trendingNowCard",childTemplateType:"trending-now-card",parentTelemetryObject:o,visualReadinessCallback:s,trendingNowCardConfigInfo:l,trendingNowCardMetadata:i};return(0,r.bw)({id:"trendingNowCard",experienceType:null==l||null===(t=l.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},d,null,!0)}(e),viewTemplate:n.A}},48703:function(e,t,i){"use strict";var n,r;i.d(t,{L:function(){return n}}),function(e){e.FeedbackWrite="userprofile|ntpfeedbackwrite",e.FeedbackWrite1688="userprofile|ntpfeedbackwrite1688"}(n||(n={})),function(e){e[e.SDCARD=0]="SDCARD",e[e.CAROUSEL=1]="CAROUSEL"}(r||(r={}))},49694:function(e,t,i){"use strict";i.d(t,{J:function(){return a}});var n=i(17254),r=i(36090);const a={ocid:"anaheim-ntp-feeds",apiKey:"0QfOX3Vn51YCzitbLaRkTTBadtWpgTN8NZLW0C1SEM",oneServiceTimeout:1e4,xapMicroserviceTimeout:7500,baseUrl:`https://assets.msn.${n.T3.CurrentMarket===r.DX.ZHCN?"cn":"com"}/service/news/feed/segments/shopping`,shoppingServiceRelativepath:"/shopping",segmentServiceRelativepath:"/segments/recoitems/shopping",usDcBaseUrl:"https://sf-prod-eastus2.oneservice.msn.com",usDcBaseUrl_segmentService_secondary:"https://sf-prod-westus2.oneservice.msn.com",forumBaseUrl:"https://api.msn.com/shopping",segmentBaseUrl:`https://assets.msn.${n.T3.CurrentMarket===r.DX.ZHCN?"cn":"com"}/service/segments/recoitems/shopping`}},49706:function(e,t,i){"use strict";i.d(t,{L:function(){return s}});var n=i(56911),r=i(60815),a=i(92011),o=i(38493);class s extends a.L{constructor(){super(...arguments),this.expanded=!1}defaultItemsChanged(){this.$fastController.isConnected&&(this.shouldanimate=this.defaultItems.length>0)}}(0,n.Cg)([(0,o.CF)({mode:"boolean"})],s.prototype,"expanded",void 0),(0,n.Cg)([r.sH],s.prototype,"defaultItems",void 0),(0,n.Cg)([(0,o.CF)({mode:"boolean",attribute:"animate"})],s.prototype,"shouldanimate",void 0)},55677:function(e,t,i){"use strict";var n=i(55946),r="function"==typeof Symbol&&Symbol.for,a=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,l=r?Symbol.for("react.strict_mode"):60108,d=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116,g="function"==typeof Symbol&&Symbol.iterator;function m(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y={};function w(e,t,i){this.props=e,this.context=t,this.refs=y,this.updater=i||b}function $(){}function C(e,t,i){this.props=e,this.context=t,this.refs=y,this.updater=i||b}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(m(85));this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},$.prototype=w.prototype;var k=C.prototype=new $;k.constructor=C,n(k,w.prototype),k.isPureReactComponent=!0;var S={current:null},x=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function D(e,t,i){var n,r={},o=null,s=null;if(null!=t)for(n in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,n)&&!T.hasOwnProperty(n)&&(r[n]=t[n]);var l=arguments.length-2;if(1===l)r.children=i;else if(1<l){for(var d=Array(l),c=0;c<l;c++)d[c]=arguments[c+2];r.children=d}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===r[n]&&(r[n]=l[n]);return{$$typeof:a,type:e,key:o,ref:s,props:r,_owner:S.current}}function A(e){return"object"==typeof e&&null!==e&&e.$$typeof===a}var I=/\/+/g,M=[];function F(e,t,i,n){if(M.length){var r=M.pop();return r.result=e,r.keyPrefix=t,r.func=i,r.context=n,r.count=0,r}return{result:e,keyPrefix:t,func:i,context:n,count:0}}function P(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>M.length&&M.push(e)}function R(e,t,i,n){var r=typeof e;"undefined"!==r&&"boolean"!==r||(e=null);var s=!1;if(null===e)s=!0;else switch(r){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case a:case o:s=!0}}if(s)return i(n,e,""===t?"."+N(e,0):t),1;if(s=0,t=""===t?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){var d=t+N(r=e[l],l);s+=R(r,d,i,n)}else if(null===e||"object"!=typeof e?d=null:d="function"==typeof(d=g&&e[g]||e["@@iterator"])?d:null,"function"==typeof d)for(e=d.call(e),l=0;!(r=e.next()).done;)s+=R(r=r.value,d=t+N(r,l++),i,n);else if("object"===r)throw i=""+e,Error(m(31,"[object Object]"===i?"object with keys {"+Object.keys(e).join(", ")+"}":i,""));return s}function O(e,t,i){return null==e?0:R(e,"",t,i)}function N(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function z(e,t){e.func.call(e.context,t,e.count++)}function E(e,t,i){var n=e.result,r=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?L(e,n,i,function(e){return e}):null!=e&&(A(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,r+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(I,"$&/")+"/")+i)),n.push(e))}function L(e,t,i,n,r){var a="";null!=i&&(a=(""+i).replace(I,"$&/")+"/"),O(e,E,t=F(t,a,n,r)),P(t)}var H={current:null};function _(){var e=H.current;if(null===e)throw Error(m(321));return e}var V={ReactCurrentDispatcher:H,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:S,IsSomeRendererActing:{current:!1},assign:n};t.Children={map:function(e,t,i){if(null==e)return e;var n=[];return L(e,n,null,t,i),n},forEach:function(e,t,i){if(null==e)return e;O(e,z,t=F(null,null,t,i)),P(t)},count:function(e){return O(e,function(){return null},null)},toArray:function(e){var t=[];return L(e,t,null,function(e){return e}),t},only:function(e){if(!A(e))throw Error(m(143));return e}},t.Component=w,t.Fragment=s,t.Profiler=d,t.PureComponent=C,t.StrictMode=l,t.Suspense=p,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,t.cloneElement=function(e,t,i){if(null==e)throw Error(m(267,e));var r=n({},e.props),o=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var d=e.type.defaultProps;for(c in t)x.call(t,c)&&!T.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==d?d[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){d=Array(c);for(var u=0;u<c;u++)d[u]=arguments[u+2];r.children=d}return{$$typeof:a,type:e.type,key:o,ref:s,props:r,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},t.createElement=D,t.createFactory=function(e){var t=D.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:h,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:v,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return _().useCallback(e,t)},t.useContext=function(e,t){return _().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return _().useEffect(e,t)},t.useImperativeHandle=function(e,t,i){return _().useImperativeHandle(e,t,i)},t.useLayoutEffect=function(e,t){return _().useLayoutEffect(e,t)},t.useMemo=function(e,t){return _().useMemo(e,t)},t.useReducer=function(e,t,i){return _().useReducer(e,t,i)},t.useRef=function(e){return _().useRef(e)},t.useState=function(e){return _().useState(e)},t.version="16.14.0"},55946:function(e){"use strict";var t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,r){for(var a,o,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var d in a=Object(arguments[l]))i.call(a,d)&&(s[d]=a[d]);if(t){o=t(a);for(var c=0;c<o.length;c++)n.call(a,o[c])&&(s[o[c]]=a[o[c]])}}return s}},56471:function(e,t,i){"use strict";i.d(t,{yJ:function(){return h}});var n,r,a=i(17254),o=i(19548),s=i(12870),l=i(98216),d=i(65022);!function(e){e[e.none=0]="none",e[e.linksPointToPartner=2]="linksPointToPartner"}(n||(n={})),function(e){e.SlideshowPreview="SlideshowPreview",e.ArticlePreview="ArticlePreview",e.VideoPreview="VideoPreview",e.WebContentPreview="WebContentPreview"}(r||(r={}));i(77810);var c=i(64096);const u={ArticlePreview:"ar",SlideshowPreview:"ss",VideoPreview:"vi"};function h(e,t,i,h){var p;if(e.renderingRestriction===n.linksPointToPartner){if(e.sourceHref)return e.sourceHref;l.YT.sendAppErrorEvent({...d.UH4,message:"Content with rendering restriction 'link to partner' is missing source HREF",pb:{...d.UH4.pb,customMessage:`Content Id: ${e.id}`}})}if(e.type===r.WebContentPreview&&(null===(p=e.destinationUrl)||void 0===p?void 0:p.includes("youtube")))return(0,c.CW)(e.id,e.destinationUrl);if(e.destinationUrl)return e.destinationUrl;const f=(0,a.rA)().NavTargetHostName,v=u[e.type]||"xx";i=o._3.encodeURIComponentForPrime(i||""),h=o._3.encodeURIComponentForPrime(h||"");const g=encodeURIComponent(e.uriTitle||"");let m="";return s.Rb&&s.Rb.ClientSettings&&s.Rb.ClientSettings.forwardablequeryparams&&(m=`?${s.Rb.ClientSettings.forwardablequeryparams}`),`https://${f}/${t}/${i}/${h}/${g}/${v}-${e.id}${m}`}},56590:function(e,t,i){"use strict";i.d(t,{GF:function(){return k},_V:function(){return C},AC:function(){return b},Wk:function(){return m},YS:function(){return w},Cn:function(){return $}});const n={weather:{es:"el-tiempo","es-es":"eltiempo",fr:"meteo",it:"meteo",de:"wetter",nl:"weer",cs:"pocasi",pt:"clima","pt-pt":"meteorologia",da:"vejr",hu:"idojaras",id:"cuaca",fi:"saa",sv:"vader",tr:"havadurumu",pl:"pogoda"},forecast:{es:"pronostico","es-es":"prevision",fr:"previsions",it:"previsioni",de:"vorhersage",nl:"voorspelling",cs:"predpoved","pt-pt":"previsao",da:"vejrudsigt",hu:"elorejelzes",id:"prakiraan",fi:"ennuste",nb:"vaermelding",sv:"prognos",tr:"havadurumutahmini",pl:"prognoza"},maps:{cs:"mapy",da:"kort",de:"karten",es:"mapas",fi:"kartat",fr:"cartes",id:"peta",it:"mappe",nb:"kart",nl:"kaarten",pl:"mapy-pogody",pt:"mapas",sv:"vaderkartor",tr:"haritalar"},monthlyforecast:{da:"manedligprognose",de:"monatlicheprognose",es:"pronosticomensual",fi:"kuukaudenennuste",fr:"previsionsmensuelles",id:"prakiraanbulanan",it:"previsionimensili",nb:"manedligprognose",nl:"maandelijksevoorspelling",pl:"prognozamiesieczna",pt:"previsaomensal",sv:"manadsprognos",tr:"ayliktahmin"},records:{cs:"rekordniaprumerne",da:"rekorder",de:"historisches","de-ch":"rekorde",fi:"Tilastot",hu:"rekordok",id:"catatan",it:"record",nb:"rekorder",pl:"rekordowe",sv:"medeltemperaturer",tr:"mevsim-normalleri","pt-pt":"recordes"},life:{da:"livet",de:"leben",es:"lavida",fi:"elama",fr:"vie",hu:"elet",id:"kehidupan",it:"vita",nb:"liv",nl:"leven",pl:"zycie",pt:"vida",sv:"liv",tr:"hayat"},pollen:{es:"polen",fi:"siitepoly",id:"serbuksari",it:"polline",nl:"stuifmeel",pl:"pylekkwiatowy",pt:"polen",tr:"polen"},hourlyforecast:{da:"timeprognose",de:"stundlichevorhersage",es:"previsionhoraria",fi:"tuntiennuste",fr:"previsionhoraire",id:"prakiraanperjam",it:"previsioniorarie",nb:"prognosepertime",nl:"voorspellingperuur",pl:"prognozagodzinowa",pt:"previsaohoraria",sv:"timprognos",tr:"saatliktahmin"}},r="orkaner",a="temperatur",o="synlighet",s="vind",l="vento",d="snofall",c={radar:{fi:"tutka"},hurricane:{cs:"hurikany",da:r,nb:r,sv:r,de:"hurrikane",es:"huracanes",fr:"ouragans",id:"hurikan",it:"uragani",nl:"orkanen",pl:"huragany",pt:"hurricanes",tr:"kasirgalar"},severeweather:{fi:"huonosaa",id:"cuacaburuk",nl:"slechtweer",sv:"ovader"},temperature:{cs:"teplota",da:a,de:a,nb:a,sv:a,fi:"lampotila",id:"suhu",tr:"sicaklik"},precipitation:{cs:"srazky",da:"nedbor",nb:"nedbor",id:"curahhujan",nl:"neerslag",pl:"opady",sv:"nederbord",tr:"yagis"},wildfire:{cs:"lesnipozar",da:"skovbrand",de:"waldbrand",fi:"maastopalo",fr:"feuforet",id:"kebakaran",nb:"skogbrann",pl:"pozar",sv:"skogsbrand"},wind:{cs:"vitr",da:s,nb:s,sv:s,es:"viento",fi:"tuuli",fr:"vent",id:"angin",it:l,pt:l,pl:"wiatr",tr:"ruzgar"},cloud:{cs:"oblacnost",da:"sky",nb:"sky",de:"bewolkung",es:"nube",fi:"pilvi",fr:"nuages",id:"awan",it:"nuvolosita",nl:"bewolking",pt:"nublado",sv:"moln",tr:"bulut"},pressure:{cs:"tlak",da:"lufttryk",de:"druck",fi:"ilmanpaine",fr:"pression",id:"tekanan",it:"pressione",nb:"trykk",nl:"druk",sv:"tryck"},humidity:{cs:"vlhkost",es:"humedad",id:"kelembapan",nb:"fuktighet",pt:"umidade",tr:"nemlilik"},visibility:{da:"synlighed",nb:o,sv:o,nl:"zicht"},dewpoint:{cs:"rosnybod",da:"dugpunkt",de:"taupunkt",fi:"kastepiste",nb:"duggpunkt",nl:"dauwpunt"},winterstorm:{cs:"zimniboure"},airquality:{fi:"ilmanlaatu",fr:"qualiteair"},snowdepth:{cs:"vyskasnehu",nb:"snodybde",pt:"alturaneve",sv:"snodjup"},snowfall:{cs:"snezeni",da:"snefald",de:"schnee",fi:"lumisade",fr:"chuteneige",id:"curahsalju",it:"nevicata",nb:d,sv:d,nl:"sneeuwval",pt:"quedaneve",tr:"karyagisi"},airqualitystation:{},ski:{es:"esquiar",fi:"laskettelu",it:"sci",pl:"narty",pt:"esqui",sv:"skida",tr:"kayak"},pollen:n.pollen,pollenindex:{},etree:{},report:{},earthquake:{},lightning:{}};var u=i(2651),h=i(86308),p=i(17254),f=i(43820);const v={};function g(e){e&&!v[e]&&(v[e]=e.split("-")[0]);return v[e]}function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.T3.CurrentMarket;const i="string"==typeof e?e:{1:"forecast",4:"records",3:"monthlyforecast",6:"life",5:"pollen",2:"maps",7:"hourlyforecast",8:"activity",9:"impactful"}[e],r=n[i];return r&&(r[t]||r[g(t)])||i}function b(e,t){const i=c[e];return i&&(i[t]||i[g(t)])||e}(e=>{const t=Object.keys(c),i=new Map})(p.T3.CurrentMarket);const y={F:u.B.Fahrenheit,C:u.B.Celsius,f:u.B.Fahrenheit,c:u.B.Celsius};function w(e){if(e){const t=(0,f.IF)(e,"weadegreetype",["weaDegreeType"]);return t&&y[t]||void 0}}function $(e,t,i){if(t&&e){if(!i||!i.excludeItem){const i=e.getAll("item");for(let e=0;e<i.length;++e)t.append("item",i[e])}if(!i||!i.excludeOcid){const i=(0,f.En)(e);i&&t.set("ocid",i)}if(!i||!i.cvid){const i=e.get("cvid");i&&t.set("cvid",i)}}return t||void 0}function C(e,t){const i=(0,h.R)(t);return i&&e&&e.set("weadegreetype",i),e}function k(e,t,i){if(!e)return e;try{const n=new URL(e);return n.searchParams.set(t,i),n.href}catch(t){return e}}},56644:function(e,t,i){"use strict";i.d(t,{Z:function(){return h}});var n=i(56911),r=i(65022),a=i(98216),o=i(16091),s=i(17720),l=i(60815),d=i(79426),c=i(29252);class u{constructor(){this.wpoNotificationPreviewData=new d.e,this.notificationMiniCardDismissed=!1,this.dismissNotificationMiniCard=e=>{this.notificationMiniCardDismissed=!0,null===a.YT||void 0===a.YT||a.YT.addOrUpdateTmplProperty("NotificationMiniCardDismissed",e)}}static getInstance(){return s.vv.get("__WpoPreview__",()=>new u)}storeWpoNotificationPreviewData(e){if(!e)return;if(this.wpoNotificationPreviewData.wasSet())return;const t={};try{for(const n of(null===(i=e.previews)||void 0===i?void 0:i.simplePreviews)||[]){var i;for(const e of n.cards)for(const i of e.elements)switch(i.id){case"Icon":t.icon=i.url;break;case"Title":t.title=i.text;break;case"Tooltip":t.tooltip=i.text;break;case"Summary":t.summary=i.text;break;case"Detail":t.detail=i.text}n.previewType&&(t.previewType=n.previewType),n.url&&(t.url=n.url)}const o=Object.keys(t).length;if(0===o)return;if(o>0&&7!==o){var n;const i="Invalid notification preview data.",a=`Parsed data: ${JSON.stringify(t)}. ReceivedPreviewData: ${JSON.stringify(null===(n=e.previews)||void 0===n?void 0:n.simplePreviews).substring(0,32768)}.`;return void this.logAppError(r.fU,i,a)}this.wpoNotificationPreviewData.set(t),null===a.YT||void 0===a.YT||a.YT.addOrUpdateTmplProperty("previewDataReady","1")}catch(t){var o;const i=`Failed to parse notification preview data.Error:${t}`,n=`ReceivedPreviewData: ${JSON.stringify(null===(o=e.previews)||void 0===o?void 0:o.simplePreviews).substring(0,32768)}`;this.logAppError(r.C1u,i,n)}}subscribe(e){this.wpoNotificationPreviewData.getResultAsync().then(e)}logAppError(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";a.YT.sendAppErrorEvent({...e,message:t,pb:{...e.pb,customMessage:i,debugId:(0,c.Xq)()}})}}(0,n.Cg)([l.sH],u.prototype,"notificationMiniCardDismissed",void 0);const h=(0,o.G)(u)},59099:function(e,t,i){"use strict";i.d(t,{j:function(){return a}});var n=i(96950),r=i(11622);const a=n.qy`
    ${e=>(0,r.yN)(e.shoppingCarouselCardConfigInfo,{attributes:{style:`grid-area:${e.gridArea}`,class:`${e.cardSize}`,tabindex:e.customTabIndex??0},properties:{parentTelemetry:e.parentTelemetryObject,openLinksInNewTab:e.openLinksInNewTab,sdCardActionClickHandler:e.sdCardActionClickHandler,goToPersonalizeCallback:e.goToPersonalizeSettingsCallback,refreshFeedCallback:e.refreshFeedCallback,shoppingCardMetadata:e.shoppingCardMetadata,useInlineSvgIcons:e.useInlineSvgIcons,cardSize:e.cardSize}})}
`},59196:function(e,t,i){"use strict";i.d(t,{E:function(){return c}});var n=i(31951),r=i(23158),a=i(65022),o=i(93468),s=i(17254);const l={23:"HeavyDrizzle",40:"HeavyDrizzle",26:"SnowShowersDayV2",6:"BlowingHailV2",5:"CloudyV3",20:"LightSnowV2",91:"WindyV2",27:"ThunderstormsV2",10:"FreezingRainV2",77:"RainSnowV2",12:"Haze",13:"HeavyDrizzle",39:"Fair",24:"RainSnowV2",78:"RainSnowShowersNightV2",9:"FogV2",3:"PartlyCloudyDayV3",43:"IcePelletsV2",16:"IcePellets",8:"LightRainV2",15:"HeavySnowV2",28:"ClearNightV3",30:"PartlyCloudyNightV2",14:"ModerateRainV2",1:"SunnyDayV3",7:"BlowingSnowV2",50:"RainShowersNightV2",82:"LightSnowShowersNight",81:"LightSnowShowersDay",2:"MostlySunnyDay",29:"MostlyClearNight",4:"MostlyCloudyDayV2",31:"MostlyCloudyNightV2",19:"LightRainV3",17:"LightRainShowerDay",53:"N422Snow",52:"Snow",25:"Snow",44:"LightRainShowerNight",65:"HailDayV2",73:"HailDayV2",74:"HailNightV2",79:"RainShowersDayV2",89:"HazySmokeV2",90:"HazeSmokeNightV2_106",66:"HailNightV2",59:"WindyV2",56:"ThunderstormsV2",58:"FogV2",54:"HazySmokeV2",55:"Dust1",57:"Haze"},d={cloudSignals:["0","1","2","3","4"],rainSnowSignal:["0"],windSignal:["1"],wind:"xxxx1"};class c{static getWeatherGlyph(e,t){const i=function(e){return Object.prototype.hasOwnProperty.call(r.N5,e)?r.N5[e]:e}(e),a=l[i]||"",o=t||`${n.rK}${n.S1}`;return a?`${(0,s.rA)().AssetsUrl}/${o}${a}.svg`:""}static getWeatherGlyphBySymbol(e){const t=e&&e.trim&&e.trim().toLowerCase();if(!t||t.length<4)return"";if(4==t.length)return this.getIconUrl(t);if(d.cloudSignals.includes(t[1])&&d.rainSnowSignal.includes(t[2])&&d.windSignal.includes(t[4]))return this.getIconUrl(d.wind);const i=t.substring(0,4);return this.getIconUrl(i)}static getIconUrl(e){if(!e)return"";const t=r.vj[e];return t?`${(0,s.rA)().AssetsUrl}/${n.rK}${n.S1}${t}.svg`:""}static getWeatherGlyphBySymbolOrSkyCode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(n&&n.symbolMap&&Object.keys(n.symbolMap).length>0){let i=e;e.length>4&&(i=e.substring(0,4));const r=n.symbolMap[e]||n.symbolMap[i]||n.symbolMap[t];if(r&&n.iconBase)return r.endsWith(".svg")?`${n.iconBase}${r}`:`${n.iconBase}${r}.svg`;{const i=`symbol ${e}, skyCode: ${t}, iconMap: ${JSON.stringify(n)}`;(0,o.vV)(a.dvE,"Cannot get icon url from iconmap",i)}}let r="";const s=c.getWeatherGlyphBySymbol(e);return r=s||c.getWeatherGlyph(t,i),r}}},66393:function(e,t,i){"use strict";i.d(t,{_G:function(){return h},_H:function(){return c},lJ:function(){return u},sH:function(){return p}});var n=i(93468),r=i(17254),a=i(49694),o=i(27261);const s=new URLSearchParams((0,o.iA)()),l=s.has("vptest")&&"1"===s.get("vptest"),d=s.get("1Stimeout");function c(e){return d?+d:e}function u(e){var t;const i=new URLSearchParams;if(a.J&&(i.set("ocid",e||a.J.ocid),i.set("apikey",a.J.apiKey),i.set("timeOut",d||a.J.oneServiceTimeout.toString()),i.set(r.T3.OneServiceContentMarketQspKey,null===r.T3||void 0===r.T3?void 0:r.T3.CurrentMarket),i.set("scn",null===r.T3||void 0===r.T3?void 0:r.T3.AuthCookieName),i.set("caller","api")),null!==r.T3&&void 0!==r.T3&&r.T3.UserId&&i.set("user",r.T3.UserId),r.T3.ShouldUseFdheadQsp&&null!==r.T3&&void 0!==r.T3&&null!==(t=r.T3.CurrentRequestTargetScope)&&void 0!==t&&t.pageExperiments){const e=r.T3.CurrentRequestTargetScope.pageExperiments.filter(e=>(e.includes("1s")||e.startsWith("prg-sh")||e.startsWith("prg-spr"))&&"prg-sh-gobgcrsl1"!==e&&"prg-sh-gobgcrsl2"!==e).join();e&&i.set("fdhead",e)}return i}function h(e,t,i,a){l?console.error(`This error is not be logged to AppError. Logging only to the console. error- ${e}. message - ${i}. requestUrl - ${a}`):(0,n.c_)(e,t,`${i}|${r.T3.ActivityId}|${a}`)}function p(e){if(!e)return"";let t="";return e.forEach((e,i)=>{t+=`${i},${e},`}),t.substring(0,t.length-1)}},67050:function(e,t,i){"use strict";i.d(t,{KA:function(){return A},Y6:function(){return F},nt:function(){return I},rF:function(){return M},HU:function(){return b},eJ:function(){return x},B:function(){return T},os:function(){return S},py:function(){return y},VN:function(){return D},z7:function(){return k},yA:function(){return w},Cb:function(){return P}});var n=i(17254),r=i(36090),a=i(54837),o=i(12420),s=i(93653),l=i(61782),d=i(87827),c=i(78285),u=i(96118),h=i(9790),p=i(6809),f=i(54249);var v,g=function(e,t,i){var n=(0,c.A)(e),r=n||(0,u.A)(e)||(0,f.A)(e);if(t=(0,l.A)(t,4),null==i){var v=e&&e.constructor;i=r?n?new v:[]:(0,p.A)(e)&&(0,h.A)(v)?(0,o.A)((0,d.A)(e)):{}}return(r?a.A:s.A)(e,function(e,n,r){return t(i,e,n,r)}),i},m=i(41587);function b(e){if(!e)return"";const t=e.split("-");return 2===t.length?t[1]:e}function y(e){const t=b(e);return!isNaN(Number(t))}function w(e){if(!e)return"";const t=e.split("-");return 2===t.length?t[1]:e}function $(e,t){return e?(e=function(e){return n.T3.CurrentMarket===r.DX.JAJP&&(e+"").indexOf(".00")>-1?(e+"").replace(".00",""):e+""}(e),t&&-1==e.indexOf(t)?t+e:e):""}function C(e){const t=e.length;return e.slice(0,t-3)+e.slice(t-2,t)}function k(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.DX.ENUS;if(e){let n;n=-1!==(e+="").indexOf(t)?e.replace(t,""):e;const a=n.replace(/,/g,""),o=parseFloat(a);return o+"00"!==C(a)&&o+""!==a?e:i===r.DX.JAJP?$(o.toLocaleString(i),t):$(o.toLocaleString(i,{minimumFractionDigits:2,maximumFractionDigits:2}),t)}return e}function S(e,t){if(e&&t){return String(e)+"+"+t}return""}function x(e,t,i){if(e&&t&&e>=t){const n=(e-t)/1e3;let r=String(parseInt(String(n/60/60%24)));r=Number(r)<10?"0"+r:r;let a=String(parseInt(String(n/60%60)));a=Number(a)<10?"0"+a:a;let o=String(parseInt(String(n%60)));return o=Number(o)<10?"0"+o:o,i+String(r+":"+a+":"+o)}return""}function T(e){const t=[],i=[];return e&&e.length>0&&e.forEach(e=>{var n;if(e&&e.id&&null!=e&&null!==(n=e.imageInfo)&&void 0!==n&&n.sourceImageUrl){const n=new URLSearchParams(new URL(e.imageInfo.sourceImageUrl).search);n.has("id")&&(t.push(b(e.id)),i.push(n.get("id")))}}),[t,i]}function D(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(new Date).getHours(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(new Date).toLocaleDateString(),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:72e5;return new Date(t+(e>=10?" "+e:" 0"+e)+":00:00").getTime()+i}function A(e){const t=(new TextEncoder).encode(e),i=Array.from(t).map(e=>String.fromCharCode(e)).join("");return btoa(i)}function I(e,t,i){if(!e||!t||!i)return;const n=+e.replace(i,"").replace(",",""),r=+t.replace(i,"").replace(",","");if(!n||!r)return;const a=n-r;return a<=0?void 0:a}function M(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=I(e,t,i);if(!r)return;const a=100*r/+e.replace(i,"").replace(",","");return(n?Math.ceil(a):Math.floor(a))+"%"}function F(e,t){if(e){let i=e;return null==t||t.forEach(e=>{i=i.replace(new RegExp(e+"$"),"")}),i=i.replace(/[^a-z0-9]/gi,"").toLowerCase(),i}return e}function P(e){return g(e,function(t,i,n){t[(0,c.A)(e)?n:(0,m.A)(""+n)]=(0,p.A)(i)?P(i):i})}!function(e){e.el="el",e.es="es",e.da="da",e.fi="fi",e.fr="fr",e.hu="hu",e.it="it",e.ja="ja",e.nl="nl",e.pl="pl",e.pt="pt"}(v||(v={}))},69913:function(e,t,i){"use strict";i.d(t,{G:function(){return r}});var n=i(68480);class r{}r.updateLayout=new n.P("updateLayout"),r.initialize=new n.P("initialize")},72535:function(e,t,i){"use strict";i.d(t,{Lu:function(){return s},SV:function(){return o},Z:function(){return d}});var n=i(12870),r=i(25447);const a={SN:"winterstorm",IC:"winterstorm",IM:"winterstorm",FD:"wildfire",AQ:"airqualitystation",SM:"airqualitystation",DU:"airqualitystation",VO:"airqualitystation",AS:"airqualitystation"};function o(e,t,i,a,o){var s,l;if(null===(s=e.alertsInfo)||void 0===s||!s.created||null===(l=e.source)||void 0===l||!l.location)return null;try{const s=e.source.location.TimezoneName,l=new r.i(n.Rb.Locale,s),d=e.alertsInfo.start,c=e.alertsInfo.created,u=e.alertsInfo.end;let h,p=null,f="";if(d&&u&&t>=new Date(d)&&t<=new Date(u)?(f=a,p=new Date(u)):d&&t>=new Date(c)?(f=i,p=new Date(d)):t>=new Date(c)&&(f=o,p=new Date(c)),!p)return null;h="zh-cn"==n.Rb.Locale?function(e,t){if(!e)return null;const i=t.formatHourMinute(e),n=t.formatYear(e),r=t.formatMonth(e),a=t.formatDay(e);return`${n}-${r}-${a} ${i}`}(p,l):function(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return null;const n={forceWeekdayAhead:!0};let r=t.formatHourMinuteTimezone(e,n);i||(r=t.formatHourMinute(e,n));return`${t.formatDayWithWeek(e,n)}, ${r}`}(p,l,!1);let v=h;return h&&f&&(v=`${f}: ${h}`),v}catch{return null}}function s(e,t){var i,n;if((null===(i=e.alertsInfoList)||void 0===i?void 0:i.length)>0&&(null==t||null===(n=t.content)||void 0===n?void 0:n.length)>=1&&("SevereWeather"==(null==t?void 0:t.contenttype)||"SevereWeather2nd"==(null==t?void 0:t.contenttype))){const i=t.content[0].metadata&&JSON.parse(t.content[0].metadata);if((null==i?void 0:i.AlertIdx)>=0&&e.alertsInfoList.length>i.AlertIdx)return e.alertsInfoList[i.AlertIdx]}return e.alertsInfo}const l={winterstorm:{type:"exclude",markets:["zh-cn"]},wildfire:{type:"include",markets:["us"]},airqualitystation:{type:"include",markets:["us"]}};function d(e){if(!e)return null;const t=a[e];return function(e){const t=n.Rb.Locale;let i=!1;if(!(e in l))return i;"include"==l[e].type?l[e].markets.some(e=>{if(null!=t&&t.includes(e))return i=!0,!0}):"exclude"==l[e].type&&(i=!0,l[e].markets.some(e=>{if(null!=t&&t.includes(e))return i=!1,!0}));return i}(t)?t:"severeweather"}},72563:function(e,t,i){"use strict";var n;i.d(t,{f:function(){return n}}),function(e){e.Product="product",e.Category="category",e.Brand="brand",e.Seller="seller",e.Topic="topic",e.Report="report"}(n||(n={}))},77810:function(e,t,i){"use strict";e.exports=i(55677)},77884:function(e,t,i){"use strict";i.d(t,{b:function(){return h}});var n=i(17254),r=i(76166),a=i(36090),o=i(65022),s=i(19993),l=i(49694),d=i(48703),c=i(66393);const u=(0,c.lJ)();class h{constructor(){}static getBaseUrl(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{usDcBaseUrl:t,segmentServiceRelativepath:i,baseUrl:n}=l.J;return e?t+i:n}static async fetchFrom1S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:l.J.oneServiceTimeout;const d={credentials:"include",headers:await s.WR.getOneServiceHeaders(),method:"GET"},u=(0,c._H)(o);let h=await(0,r.hv)(e,u,d);const{usDcBaseUrl:p,usDcBaseUrl_segmentService_secondary:f}=l.J;if(n&&404==h.status&&(h=await(0,r.hv)(e.replace(p,f),u,d)),a)return h;if(!h.ok)throw"Did not get a 200 from 1S request";const v=await h.json();if(t>=0){let e=v[t];return i||(e=JSON.parse(e.data)),e}return v}static buildFeedbackUrl(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=`&$select=${e}`;return r+=`&$filter=${t.join("|")}~${l.J.xapMicroserviceTimeout}`,`${h.getBaseUrl(i)}?${u}${r}&activityid=${n.T3.ActivityId}`}static async updateUserFeedbacks(e){let{categoryFeedback:t,offerFeedback:i,sellerFeedback:n,brandFeedback:r}=e,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.L.FeedbackWrite,l="";try{const e=[(0,c.sH)(t),(0,c.sH)(i),"false",(0,c.sH)(n),(0,c.sH)(r)];if(!e.join(""))return;return l=h.buildFeedbackUrl(s,e,a),await h.fetchFrom1S(l)}catch(e){return(0,c._G)(e,o.Qje,"ShoppingPageContentClientWriteLastSeenNTPFailedError",l),null}}static async getTrendingOffersOfCategory(e,t){let i;i=t===a.DX.ZHCN?`${l.J.segmentBaseUrl}?${u}&activityid=${n.T3.ActivityId}&filter=TrendingScenario::TrendingOffersOfCategory||CategoryId::${e}`:`${l.J.segmentBaseUrl}?${u}&activityid=${n.T3.ActivityId}&fdhead=prg-sh-ntpmtcd&$filter=TabbedCarouselSelection::${e}`;try{const e=await(0,r.hv)(i,l.J.xapMicroserviceTimeout);if(!e.ok)throw"Did not get a 200 from trending offers of category api request";return await e.json()}catch(e){return(0,c._G)(e,o.Yv0,"ShoppingPageContentClientTrendingOffersOfCategoryFailedError",i),null}}static buildTrendingProductsUrl(){const e=`&$top=${arguments.length>0&&void 0!==arguments[0]?arguments[0]:20}`;return`${h.getBaseUrl()}?${u}${e}&activityid=${n.T3.ActivityId}`}static async getCarouselTrendingOffers(){const e=h.buildTrendingProductsUrl();try{const i=await h.fetchFrom1S(e,-1);if(i&&i.length>0){let e=i[0];for(let n=1;n<i.length;n++){var t;"ShoppingCarousel"==(null===(t=i[n])||void 0===t?void 0:t.type)&&(e=i[n])}return e}return null}catch(t){return(0,c._G)(t,o.MnR,"ShoppingPageContentClientTrendingOffersFetchError",e),null}}static async getCashbackStatus(){let e="";try{e=`${`${l.J.forumBaseUrl}/cashbackStatus`}?${u}&activityid=${n.T3.ActivityId}`;const t=await this.fetchFrom1S(e,-1);return JSON.parse(t.data)}catch(t){return(0,c._G)(t,o.y$I,"ForumFetchCashbackStatusError",e),null}}static async getOffersFromTopic(e){const t=n.T3.CurrentMarket===a.DX.ZHCN?"prg-sh-cdnslots,prg-sh-ntpcdn7,prg-sh-ntpparachute,prg-sh-navhny,prg-sh-ntpmulcdn":"prg-sh-ntpmtc",i=`${l.J.segmentBaseUrl}?${u}&activityid=${n.T3.ActivityId}&fdhead=${t}&$filter=TabbedCarouselSelection::${e}`;try{const e=await(0,r.hv)(i,l.J.xapMicroserviceTimeout);if(!e.ok)throw"Did not get a 200 from tabbed carousel api request";return await e.json()}catch(e){return(0,c._G)(e,o.StB,"ShoppingAnaheimClientTopicOffersFailedError",i),null}}static async fetchTopics(e){const t=`${l.J.segmentBaseUrl}?${u}&activityid=${n.T3.ActivityId}&$filter=GroupedDataSections::${e.join(",")}`;try{const e=await(0,r.hv)(t,l.J.xapMicroserviceTimeout);if(!e.ok)throw"Did not get a 200 from topics api request";return await e.json()}catch(e){return(0,c._G)(e,o.StB,"ShoppingAnaheimClientFetchingTopicsFailedError",t),null}}static async fetchArticleAugmentProducts(e){const t=`${l.J.baseUrl}?${(0,c.lJ)("winp1")}&activityid=${n.T3.ActivityId}&pageFeedSkip=1&AppVersion=1&experience=ContentConsumptionViewPage&contentId=${e}`;try{const e=await(0,r.hv)(t,l.J.xapMicroserviceTimeout);if(!e.ok)throw"Did not get a 200 from topics api request";return await e.json()}catch(e){return(0,c._G)(e,o.WTc,"ShoppingAnaheimClientFetchAugmentProductsFailedError",t),null}}static async getCategoriesForSDCardDropdown(){const e=`${l.J.segmentBaseUrl}?${u}&activityid=${n.T3.ActivityId}&$filter=TabbedCarouselSelection::HotDeals,CategoryProducts`;try{const t=await(0,r.hv)(e,l.J.xapMicroserviceTimeout);if(!t.ok)throw"Did not get a 200 from tabbed carousel api request";return await t.json()}catch(t){return(0,c._G)(t,o.Yv0,"ShoppingPageContentClientTrendingOffersOfCategoryFailedError",e),null}}}},79860:function(e,t,i){"use strict";i.d(t,{E:function(){return u}});var n=i(65022),r=i(98216),a=i(56471),o=i(67878),s=i(53013),l=i(49986),d=i(669);async function c(e,t,i,c){let u;try{u=function(e,t,i){return t?t.map(t=>{var n;const{locale:r,provider:c,publishedDateTime:u,title:h,id:p,abstract:f,type:v,category:g}=t,{actionsArrayOverride:m,cardActionClickHandler:b,cardActionsTooltips:y,crawledContentLabel:w,enableFilledIconOnHover:$,enableRichSocialReaction:C,metadata:k,openArticleInNewTab:S,openLinksInNewTab:x,socialBarWCConfigInfo:T,telemetryContext:D,toggleCardActionMenu:A}=e,{mapAriaLabel:I,mapCardActionStatus:M,mapPublishedDateTime:F}=e.subCardDataMappers||{};let P;if(D&&D.relatedStories){const e=(0,s.dj)(D.relatedStories,t,null);e&&(P={contentCard:e.contentCard,contentCardTelemetryObject:e.contentCard,button:e.seeMore&&e.seeMore.getMetadataTag(),destination:e.destination,buttonTelemetryObject:e.seeMore,seeMore:e.seeMore,showRelatedStories:e.showRelatedStories})}const R=M(t),O=g&&g.product||k&&k.category||"news",N=g&&g.label||k&&k.subCategory||"other",z=(0,a.yJ)(t,r,O,N);null===(n=t.images)||void 0===n||n.map(e=>{e.url||(e.url=`${o.h.prod}${e.id}.img`)});const E=i&&t.images&&(0,l.po)({cardContent:{images:t.images,title:h},type:v},i);return{id:p,abstract:f,gridArea:null,childTemplateType:null,cardActionStatus:R,cardActionClickHandler:b,cardActionsTooltips:y,crawledContentLabel:w,destinationUrl:(0,d.Dv)(z),enableRichSocialReaction:C,locale:r,imageData:E,title:h,providerData:(0,d.p_)(c),publishedDateTime:F(new Date(u)),toggleCardActionMenu:A,telemetryContext:P,openLinksInNewTab:x,openArticleInNewTab:S,ariaLabel:I(h,c),actionsArrayOverride:m,socialBarWCConfigInfo:T,metadata:t,enableFilledIconOnHover:$}}):[]}(t,await Promise.all(i.map(e=>e.json())),c).filter((t,i)=>{if(!t.title||!t.providerData){const n=t.id||e[i].id;throw new Error(`Missing card details ${n} (relatedCards[${i}] of ${this.articleData.id})`)}return!0})}catch(e){r.YT.sendAppErrorEvent({...n.PfM,message:`Error handling related card content response: ${e}`})}return u}async function u(e,t,i,a,o){let s;try{const n=new AbortController,r=await Promise.all(e.map(e=>{const t=setTimeout(()=>n.abort(),i);return fetch(`https://assets.msn.com/content/view/v1/Preview/${e.id}`,{signal:n.signal}).finally(()=>clearTimeout(t))}));null==o||o(),s=c(e,t,r,a)}catch(e){r.YT.sendAppErrorEvent({...n.a2L,message:`Unable to fetch related card content: ${e}`})}return s}},81186:function(e,t,i){"use strict";i.d(t,{X:function(){return o},q:function(){return s}});var n=i(96950),r=i(11622);const a=(e,t)=>{let i="";if("ext"in t.contract){const e=t.contract.ext;i=`${e.row}_${e.col}`}return`${e}_${i}`},o=n.qy`
    ${e=>e.configInfo&&(0,r.yN)({...e.configInfo,instanceId:`${a(e.configInfo.instanceId,e.telemetryObject)}`},{properties:{cardData:e},attributes:{style:`grid-area:${e.gridArea};`,class:`${e.cardSize}`},telemetryObject:e.telemetryObject})}
`,s=n.qy`
    ${e=>e.configInfo&&(0,r.yN)({...e.configInfo,instanceId:`${a(e.configInfo.instanceId,e.telemetryObject)}`},{properties:{wpoMetadata:e.wpoMetadata,mapperArgs:e.mapperArgs,parentTelemetry:e.telemetryObject,feedLayoutCardSize:e.cardSize},attributes:{style:`grid-area:${e.gridArea};min-height: 202px;`,class:`${e.cardSize}`},telemetryObject:e.telemetryObject})}
`},83752:function(e,t,i){"use strict";i.d(t,{q:function(){return a}});var n=i(81186),r=i(26641);const a={getFeedDataForCard:e=>(0,r.BQ)(e),viewTemplate:n.q}},84688:function(e,t,i){"use strict";i.d(t,{i:function(){return o},l:function(){return a}});var n=i(88294),r=i(46261);const a=function(e){const t={};return function(i){return t.i===i||(t.i=i,t.o=e(i)),t.o}}(function(e){try{return function(e){const t=(new TextEncoder).encode(e),i=Array.from(t).map(e=>String.fromCharCode(e)).join("");return btoa(i)}((0,r.Hv)(e,!0))}catch(t){n.v.log(`serialize failed, location=${JSON.stringify(e)}`)}});function o(e){try{const t=function(e){let t=e.trim().replace(/ /g,"+").replace(/-/g,"+").replace(/_/g,"/").replace(/\s+/g,"");t+="=".repeat((4-t.length%4)%4);const i=atob(t),n=new Uint8Array(Array.from(i).map(e=>e.charCodeAt(0)));return(new TextDecoder).decode(n)}(e);return(0,r.vR)(t,!0)||{}}catch(t){return n.v.log(`deserialize failed, serializedLocation=${e}`),{}}}},86100:function(e,t,i){"use strict";i.d(t,{S:function(){return n},m:function(){return d}});var n,r=i(56911),a=i(60815),o=i(92011),s=i(38493),l=i(49706);!function(e){e.default="default",e.condensed="condensed",e.infoPane="infoPane",e.infoPane1x3y="infoPane1x3y",e.infoPaneSplitVertical="infoPaneSplitVertical",e.infoPaneSplitHorizontal="infoPaneSplitHorizontal"}(n||(n={}));class d extends o.L{constructor(){super(...arguments),this.layout=n.default,this.headinglevel=3}handleStartActionsContentChange(){this.startActionsContainer.classList.toggle("start-actions",this.startActions.assignedNodes().length>0)}handleEndActionsContentChange(){this.endActionsContainer.classList.toggle("end-actions",this.endActions.assignedNodes().length>0)}abstractChanged(){this.$fastController.isConnected&&(this.hasAbstract=this.abstract.length>0)}handleMediaContentChange(){this.mediaContainer.classList.toggle("media",this.media.assignedNodes().length>0)}handleContentCardLinkClick(e){return this.handleContentCardClickOverride?this.handleContentCardClickOverride(e):(this.$emit("link-invoked",e),!0)}connectedCallback(){super.connectedCallback(),this.addEventListener("mouseover",this.mouseOver),this.addEventListener("mouseout",this.mouseOut),this.addEventListener("focusin",this.focusIn),this.addEventListener("focusout",this.focusOut)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("mouseover",this.mouseOver),this.removeEventListener("mouseout",this.mouseOut),this.removeEventListener("focusin",this.focusIn),this.removeEventListener("focusout",this.focusOut)}mouseOver(){this.setExpanded(!0),this.hasHover=!0}mouseOut(){this.hasFocus||this.setExpanded(!1),this.hasHover=!1}focusIn(){this.setExpanded(!0),this.hasFocus=!0}focusOut(){this.hasHover||this.setExpanded(!1),this.hasFocus=!1}filteredContentIndicator(){return this.contentIndicatorNodes.filter(e=>e instanceof l.L)}setExpanded(e){this.filteredContentIndicator().forEach(t=>t.expanded=e)}}(0,r.Cg)([s.CF],d.prototype,"layout",void 0),(0,r.Cg)([(0,s.CF)({attribute:"heading-level",mode:"fromView",converter:s.R$})],d.prototype,"headinglevel",void 0),(0,r.Cg)([(0,s.CF)({mode:"fromView"})],d.prototype,"href",void 0),(0,r.Cg)([a.sH],d.prototype,"isGrid",void 0),(0,r.Cg)([a.sH],d.prototype,"anchorTelemetryTag",void 0),(0,r.Cg)([a.sH],d.prototype,"mediaNodes",void 0),(0,r.Cg)([a.sH],d.prototype,"hasAbstract",void 0),(0,r.Cg)([a.sH],d.prototype,"abstract",void 0),(0,r.Cg)([a.sH],d.prototype,"iconSlottedNodes",void 0),(0,r.Cg)([(0,s.CF)({attribute:"image-priority",mode:"boolean"})],d.prototype,"imagePriority",void 0),(0,r.Cg)([s.CF],d.prototype,"target",void 0),(0,r.Cg)([a.sH],d.prototype,"hoverActionsSlottedNodes",void 0),(0,r.Cg)([a.sH],d.prototype,"handleContentCardClickOverride",void 0),(0,r.Cg)([a.sH],d.prototype,"contentIndicatorNodes",void 0)},86308:function(e,t,i){"use strict";function n(e){return["","F","C"][e||0]||""}i.d(t,{R:function(){return n}})},87283:function(e,t,i){"use strict";i.d(t,{delayLoadHandler:function(){return a}});var n=i(4218),r=i(56644);function a(e){r.Z.subscribe(t=>{this.ntpPreviewType=null==t?void 0:t.previewType,(0,n.fF)(e,e.cardMetadata,!0)})}},87526:function(e,t,i){"use strict";i.d(t,{v:function(){return h}});var n=i(96950),r=i(91640),a=i(11622);const o=n.qy`
    ${(0,r.z)(e=>e.isOnline,n.qy`
        ${e=>{var t;return(0,a.yN)(e.commuteCardConfigInfo,{attributes:{style:`grid-area:${e.gridArea};min-height:180px;width:${null===(t=e.displaySettings)||void 0===t?void 0:t.cardWidth}px;`,class:`${e.cardSize}`},properties:{commuteCardFeedData:e,cardMetadata:e.cardMetadata,parentTelemetry:e.parentTelemetryObject,cardActionClickHandler:e.cardActionClickHandler,cardSize:e.cardSize,mobileCardClickCallback:e.mobileCardClickCallback,displaySettings:e.displaySettings,refreshFeedCallback:e.refreshFeedCallback,responseTime:e.responseTime},memoize:!0,includeTelemetryTag:!1})}}
    `)}
`;var s=i(19608),l=i(93468),d=i(65022),c=i(77512);const u="commuteCard";const h={getFeedDataForCard:e=>function(e){var t;const{cardMetadata:i,configOptions:n,refreshFeedCallback:r,parentTelemetryObject:a,goToPersonalizeSettingsCallback:o,hideCardCallback:h,refreshSDCardSection:p,mobileCardClickCallback:f,cardActionClickHandler:v,responseTime:g,registerViewportObserveTarget:m,mobileFeedEventAggregator:b,displaySettings:y=null}=e,w=i;let $;try{$=JSON.parse(w.data)}catch(e){return(0,l.c_)(e,d.IOA,"Cannot parse 1s json in CommuteCardDataMapper"),(0,c.wc)()}const C={id:u,childTemplateType:"commute-card",refreshFeedCallback:r,parentTelemetryObject:a,goToPersonalizeSettingsCallback:o,refreshSDCardSection:p,hideCardCallback:h,cardMetadata:$,cardActionClickHandler:v,mobileCardClickCallback:f,displaySettings:y,responseTime:g,registerViewportObserveTarget:m,mobileFeedEventAggregator:b,isOnline:window.navigator.onLine};return n&&(C.commuteCardConfigInfo=n),(0,s.bw)({id:u,experienceType:null===(t=C.commuteCardConfigInfo)||void 0===t||null===(t=t.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},C,(e,t)=>({mobileCardClickCallback:f,refreshFeedCallback:r}))}(e),viewTemplate:o}},93704:function(e,t,i){"use strict";i.d(t,{Dj:function(){return g},PC:function(){return h},fA:function(){return l},x3:function(){return w}});var n=i(23158),r=i(43025);const a=["pvdrIcon","symbol","uvDesc","feels","windDir","windDir","richCaps","aqiSeverity","aqLevel","primaryPollutant","comingWeather","background"],o=[{from:"capAbbr",to:"shortCap"}],s=[{from:"temp",to:"currentTemperature",trans:e=>(e||0==e)&&e.toString()},{from:"ufTemp",to:"ufTemp",trans:e=>e&&e.toString()},{from:"cap",to:"skycode",trans:e=>({children:e})},{from:"uv",to:"uv",trans:e=>Math.floor(e)},{from:"rh",to:"humidity",trans:e=>`${Math.floor(e)}%`},{from:"dewPt",to:"dewPoint",trans:e=>null!=e?`${e}°`:"N/A"},{from:"aqi",to:"aqi",trans:e=>`${e}`}];function l(e){return(0,r.D)(a,o,s)(e)}const d=["symbol","uv","uvDesc"],c=[{from:"tempHi",to:"highTemp"},{from:"tempLo",to:"lowTemp"},{from:"windMax",to:"windMaxRaw"},{from:"pvdrCap",to:"cap"},{from:"feelsHi",to:"highFeels"},{from:"feelsLo",to:"lowFeels"}],u=[{from:"pvdrCap",to:"image",trans:e=>{}},{from:"pvdrIcon",to:"normalizedSkyCode",trans:e=>n.ml.getWeatherNormalizedSkyCode(e)},{from:"rh",to:"humidity",trans:e=>`${e}`},{from:"rhLo",to:"humidityLow",trans:e=>`${e}`},{from:"rhHi",to:"humidityHi",trans:e=>`${e}`},{from:"rhHi",to:"humidityHi",trans:e=>`${e}`},{from:"vis",to:"visibility",trans:e=>null!=e?parseFloat(e):null},{from:"dewPt",to:"dewPt",trans:e=>null!=e?`${e}°`:"N/A"},{from:"baro",to:"airPressure",trans:e=>null!=e?`${e}`:"N/A"}];function h(e){return(0,r.D)(d,c,u)(e)}const p=["cap","rh","symbol","icon","feels","pvdrIcon","windDir","pvdrWindSpd","summary","rainAmount","snowAmount","ufTemp","raAccu","saAccu","sp","aqi","CO","NO2","O3","PM10","PM25","SO2","PPAType"],f=[{from:"temp",to:"temperature"},{from:"tempDesc",to:"temperatureDesc"},{from:"valid",to:"timeStr"},{from:"pvdrWindDir",to:"windDesc"}],v=[{from:"baro",to:"airPressure",trans:e=>null!=e?`${e}`:"N/A"},{from:"rh",to:"humidity",trans:e=>null!=e?`${e}%`:"N/A"},{from:"dewPt",to:"dewPt",trans:e=>null!=e?`${e}°`:"N/A"},{from:"cloudCover",to:"cloudCover",trans:e=>null!=e?`${e}%`:"N/A"},{from:"vis",to:"visibility",trans:e=>null!=e?parseFloat(e):null},{from:"pvdrIcon",to:"normalizedSkyCode",trans:e=>n.ml.getWeatherNormalizedSkyCode(e)},{from:"symbol",to:"daytime",trans:e=>e&&e.includes("n")?"n":"d"},{from:"windSpd",to:"windSpeed",trans:e=>e+""},{from:"precip",to:"precipitation",trans:e=>null!=e?`${e}`:"N/A"},{from:"uv",to:"uv",trans:e=>null!=e?e:"N/A"}];function g(e){return(0,r.D)(p,f,v)(e)}const m=["feels","daytime","cap","pvdrIcon","symbol","windDir","pvdrWindSpd"],b=[{from:"temp",to:"temperature"},{from:"pvdrWindDir",to:"windDesc"},{from:"vis",to:"visibility"}],y=[{from:"pvdrIcon",to:"normalizedSkyCode",trans:e=>n.ml.getWeatherNormalizedSkyCode(e)},{from:"windSpd",to:"windSpeed",trans:e=>e+""},{from:"uv",to:"uv",trans:e=>null!=e?e:"N/A"},{from:"cloudCover",to:"cloudCover",trans:e=>null!=e?`${e}%`:"N/A"},{from:"rh",to:"humidity",trans:e=>null!=e?`${e}%`:"N/A"},{from:"dewPt",to:"dewPt",trans:e=>null!=e?`${e}°`:"N/A"},{from:"baro",to:"airPressure",trans:e=>null!=e?`${e}`:"N/A"}];function w(e){return(0,r.D)(m,b,y)(e)}}}]);