(self.homePageWebpackChunks=self.homePageWebpackChunks||[]).push([["cs-core-desktop_responsive-list_dist_index_js","sports-info"],{3589:function(t,i,e){"use strict";var n,s;e.d(i,{u:function(){return n}}),function(t){t.BingHomepage="bingHomepage",t.ChannelMobile="channelmobile",t.Community="community",t.ContentTools="contentTools",t.EdgeChromium="edgeChromium",t.EdgeMobile="edgeMobile",t.Finance="finance",t.Gaming="gaming",t.CGHomePage="cgHomePage",t.CGSideBar="cgSideBar",t.HomePage="homePage",t.Hub="hub",t.Health="health",t.KnowledgeAgents="knowledgeAgents",t.Office="office",t.Personalize="personalize",t.qna="qna",t.msn="msn",t.MSNStudio="msnStudio",t.SharedWidgets="sharedWidgets",t.SuperApp="superApp",t.Shopping="shopping",t.Sports="sports",t.Distribution="distribution",t.Traffic="traffic",t.Travel="travel",t.UGC="ugc",t.Views="views",t.Weather="weather",t.WeatherWidgets="weatherWidgets",t.WeatherLocal="weatherLocal",t.Windows="windows",t.WindowsNewsPlus="windowsNewsPlus",t.WindowsNewsWidgets="winWidgets",t.WindowsShell="windowsShell",t.WindowsShellV2="windowsShellV2",t.WebWidgets="webWidgets"}(n||(n={})),function(t){t.Default="Default",t.WinDashboard="WinDashboard",t.Edge="Edge"}(s||(s={}))},4968:function(t,i,e){"use strict";e.d(i,{f:function(){return l}});var n=e(64187),s=e(74849),r=e(42792),o=e(99657),a=e(36452);const l=s.A.partial`position: relative; z-index: ${o.D};`;s.A`
    ${r.e}
    ${r.nH}

    ${(0,n.V)("grid")} :host {
        grid-template-rows: auto 1fr minMax(16px, auto);
        grid-template-columns: 100%;
        ${l}
    }

    .content {
        padding: 0 var(--sd-card-content-padding-inline, 16px);
        overflow: hidden;
    }

    ::slotted([slot="header"]) {
        grid-row: 1;
    }
    ::slotted([slot="footer"]) {
        grid-row: 3;
    }

    ::slotted([slot="image"]) {
        position: absolute;
        bottom: 0;
        right: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: -1;
    }

    /* Ensure neutral buttons have a stroke per the design */
    ::slotted(fluent-button[appearance="neutral"]),
    ::slotted(fluent-anchor[appearance="neutral"]) {
        border: 1px solid ${a.I2};
    }

    ::slotted(fluent-button[appearance="neutral"]:hover),
    ::slotted(fluent-anchor[appearance="neutral"]:hover) {
        border-color: ${a.mb};
    }

    ::slotted(fluent-button[appearance="neutral"]:active),
    ::slotted(fluent-anchor[appearance="neutral"]:active) {
        border-color: ${a.MY};
    }

    .header-overlay,
    .footer-overlay {
        position: absolute;
        background: rgba(255, 255, 255, 0.46);
        height: 100%;
        width: 100%;
        opacity: 0;
    }

    .header-overlay {
        grid-row: 1 / span 1;
    }

    .footer-overlay {
        grid-row: 3 / span 1;
    }

    .gradient {
        position: absolute;
        grid-row: 2 / span 1;
        height: 100%;
        width: 100%;
        opacity: 0;
        background: linear-gradient(
            180deg,
            rgba(255, 255, 255, 0.46) 0%,
            rgba(255, 255, 255, 0) 22%,
            rgba(255, 255, 255, 0) 86%,
            rgba(255, 255, 255, 0.46) 100%
        );
    }

    @media (prefers-color-scheme: dark) {
        .header-overlay,
        .footer-overlay {
            background: rgba(0, 0, 0, 0.54);
        }

        .gradient {
            background: linear-gradient(
                180deg,
                rgba(0, 0, 0, 0.54) 0%,
                rgba(0, 0, 0, 0) 22%,
                rgba(0, 0, 0, 0) 86%,
                rgba(0, 0, 0, 0.54) 100%
            );
        }
    }

    :host([immersive-card]) .header-overlay,
    :host([immersive-card]) .footer-overlay,
    :host([immersive-card]) .gradient {
        opacity: 1;
    }
`.withBehaviors(r.kc)},9742:function(t){t.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M10.12 10.83l4.03 4.02a.5.5 0 00.7-.7l-13-13a.5.5 0 10-.7.7l3.23 3.23a6.7 6.7 0 00-2.3 3.08l-.05.15-.01.06s-.08.5.35.61a.5.5 0 00.61-.35L3 8.6a3.02 3.02 0 01.2-.52c.16-.34.4-.8.78-1.26.3-.36.66-.72 1.13-1.02l1.57 1.58a2.5 2.5 0 103.45 3.45zm-.74-.74a1.5 1.5 0 11-1.97-1.97l1.97 1.97zm-3.06-5.9l.85.86C7.43 5.02 7.71 5 8 5c2.04 0 3.29.91 4.03 1.82A5.7 5.7 0 0113 8.6v.02a.5.5 0 00.97-.25v-.02a2.3 2.3 0 00-.06-.18 6.7 6.7 0 00-1.12-1.98A5.95 5.95 0 008 4a6.9 6.9 0 00-1.68.2z"></path></svg>'},18364:function(t,i,e){"use strict";e.r(i),e.d(i,{SportsInfo:function(){return j},SportsInfoStyles:function(){return ht},SportsInfoTemplate:function(){return st},ToolingInfo:function(){return ct},dark:function(){return lt}});var n=e(56911),s=e(84855),r=e(84665),o=e(38346),a=e(48114),l=e(36903),d=e(72317),h=e(25752),c=e(15221),u=(e(58965),e(65022)),v=e(38467),g=e(63150),p=e(12870),m=e(5044),f=e(94425),w=e(17254),b=e(89151),y=e(53685),T=e(93468);const S=["TeamVsTeamExploration","CricketExploration","TennisExploration"],C=(t,i)=>{(0,T.vV)(u.Ax6,t,`market:${(0,w.rA)().CurrentMarket}`,i)};var k=e(17720),I=e(94047);class x{constructor(t,i){this.getCurrentState=()=>this.state,this.toggleInterestManager=t=>{this.state.set(c.kA.toggleInterestManager,t)},this.onSportsMatchupDataReady=t=>{this.saveEntityData(t)},this.updateCardSize=t=>{this.state.set(c.kA.cardSize,t),this.setCardSizeTmplTelemetry()},this.updatePreviewTypeInfo=t=>{this.state.set(c.kA.previewTypeInfo,t)},this.updateRootTelemetryObject=t=>{this.state.set(c.kA.rootTelemetryObject,t)},this.updateTelemetryExt=(t,i)=>{const e=i&&r.aC.safeExecute(()=>JSON.parse(i),void 0,u.s6q,"SportsInfo - error parsing log message");this.state.set(c.kA.telemetryExt,{...t,...e})},this.updateIsPinned=t=>{this.state.set(c.kA.isPinned,t)},this.getUpdatedSportsViewByFeedData=async t=>{this.updateCurrentPageIndex(1);if(!await this.setSportsMatchupDataFromFeedData(t))return this.state.get(c.kA.sportsSDCardView);const{cardSize:i}=t,e=this.getCurrentTab();this.state.set(c.kA.currentTabEntityId,null==e?void 0:e.primaryEntityId),this.updateCardSize(i);const n=await this.generateSDContainerView(t,!1);return this.state.set(c.kA.sportsSDCardView,n),n},this.getUpdatedSportsCardView=async t=>{let i=this.state.get(c.kA.sportsFeedDataParsed);i=await this.getV2SportsMatchupData(i),this.onSportsMatchupDataReady(i);const e=await this.generateSDContainerView(t,!1);return this.state.set(c.kA.sportsSDCardView,e),Promise.resolve(e)},this.getInitialSportsCardView=async t=>{var i;const{config:e,strings:n,cardSize:s,rootTelemetryObject:r,telemetryExt:o,wpoMetadata:a,feedDataParsed:l,isCopilotTheme:d,cardType:h}=t;this.state.set(c.kA.sportsConfig,e),this.state.set(c.kA.sportsStrings,n),this.state.set(c.kA.wpoMetadata,a),this.state.set(c.kA.cardType,h),this.state.set(c.kA.experienceName,this.experienceName),this.state.set(c.kA.isCopilotTheme,d),this.state.set(c.kA.IsRubyPill,"pill"===s),this.updateCardSize(s),this.updateRootTelemetryObject(r),this.updateTelemetryExt(o,null===(i=l.Model)||void 0===i?void 0:i.LogMessage),this.updateCurrentPageIndex(1);await this.checkAndInitForPreview(t)||(this.state.set(c.kA.currentSpotlightEntityId,void 0),await this.setSportsMatchupDataFromFeedData(t));const u=this.getCurrentTab(),v=(null==u?void 0:u.primaryEntityId)||"";this.state.set(c.kA.currentTabEntityId,v);const g=this.state.get(c.kA.isInit);g||this.setInitTmpl();const p=await this.generateSDContainerView(t,!0);return this.state.set(c.kA.sportsSDCardView,p),g&&this.updateIsInit(!1),Promise.resolve(p)},this.setInitTmpl=async()=>{const{setTmplTelemetry:t}=await e.e("sports-info-utils").then(e.bind(e,25159));t(this)},this.setSportsMatchupData=async t=>{this.state.set(c.kA.sportsFeedDataParsed,t),await this.updateSportsMatchupData(t)},this.setSportsMatchupDataFromFeedData=async t=>{var i;const{feedDataParsed:e}=t,n=this.state.get(c.kA.feedDataTimestamp),{ResponseCreationTime:s,OsCreationTime:r,Model:o}=e,a=Number(new Date(s||r||"")),l="windowsShellV2"===w.T3.AppType&&this.state.get(c.kA.previewTypeInfo)!==t.previewType;return!(n&&a<=n&&!l)&&(this.state.set(c.kA.isExplorationCard,(d=null==o||null===(i=o.Tabs)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.tabType,Boolean(d&&S.includes(d)))),this.state.set(c.kA.feedDataTimestamp,a),e.isFeedData=!0,await this.setSportsMatchupData(e),!0);var d},this.generateSDContainerView=async(t,i)=>await r.aC.safeExecuteAsync(async()=>{const e=I.Dl.getInstance(this.experienceName,t);if(!e)throw new Error("Could not get SportsDataTransformer instance");i||e.updateContext(t);return await e.generateView(this.state,"sports-sd-card")},void 0,u.s8u,"SportsInfo - generate SD card container view failed"),this.saveEntityData=t=>{var i;const e=null===(i=t.Model)||void 0===i||null===(i=i.Tabs)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.primaryEntityId;if(!e)return;let n=this.getEntityDataMap();n||(n=new Map),n.set(e,t),this.state.set(c.kA.entityDataMap,n),this.state.set(c.kA.sportsData,t)},this.setCardSizeTmplTelemetry=()=>{(0,r.iJ)(c.JH.SportsCardeSize);const t=this.state.get(c.kA.cardSize);(0,r.ao)(c.JH.SportsCardeSize,t)},this.checkAndInitForPreview=async t=>{const{previewType:i,previewTypeInfo:n}=t,{teamId:s,leagueId:r}=n||{};if((s||r)&&i){const{checkAndInitForPreviewImpl:i}=await e.e("sports-info-utils").then(e.bind(e,25159));return await i(this,t)}return!1},this.experienceName=t,this.state=i}static getInstance(t){const i=`SportsInfoAppStateConnector_${t}`,e=k.vv.get(i,()=>({}));return e[i]||(e[i]=new x(t,(()=>{const t=new v.E(c.JC);return t.set(c.kA.allRecommendations,[]),t.set(c.kA.cardSize,"_1x_2y"),t.set(c.kA.currentTabEntityId,""),t.set(c.kA.entityDataMap,new Map),t.set(c.kA.entityViewMap,new Map),t.set(c.kA.followedSports,new Map),t.set(c.kA.sportsData,{}),t.set(c.kA.sportsInfoApiData,{}),t.set(c.kA.sportsSDCardView,void 0),t.set(c.kA.sportsSuggestIDMap,new Map),t.set(c.kA.sportsViewMode,"initial"),t.set(c.kA.tabCurrentPageIndex,1),t.set(c.kA.isPinned,!1),t.set(c.kA.searchSuggestions,[]),t.set(c.kA.toggleInterestManager,!1),t.set(c.kA.isInit,!1),t.set(c.kA.dislikedEntities,new Set),t.set(c.kA.cardType,""),t.set(c.kA.skinnyDataConsumed,!1),t.set(c.kA.pollOptionId,""),t.set(c.kA.isCopilotTheme,(0,g.oh)()),t})())),e[i]}updateCurrentPageIndex(t){this.state.set(c.kA.tabCurrentPageIndex,t)}updateIsInit(t){this.state.set(c.kA.isInit,t)}updateSupportedSdCardActionMenuItems(t){const i=I.Dl.getInstance(this.experienceName,t);i&&(i.supportedSdCardActionMenuItems=t.supportedSdCardActionMenuItems)}getCurrentTabEntityId(){return this.state.get(c.kA.currentTabEntityId)}getEntityDataMap(){return this.state.get(c.kA.entityDataMap)}setIsHidePopupOpen(t){this.state.set(c.kA.isHidePopupOpen,t)}async updateSportsMatchupData(t){t=await this.getV2SportsMatchupData(t),this.onSportsMatchupDataReady(t),await this.updateRecommendations(t)}async updateRecommendations(t){if(!this.state.get(c.kA.isInit)){const{addRecommendationsFromSkinnyData:i,addFollowSportsForFre:n}=await e.e("sports-info-utils").then(e.bind(e,25159));i(this,t),n(this,t)}}clearViewsCache(){this.state.set(c.kA.entityDataMap,new Map),this.state.set(c.kA.entityViewMap,new Map),this.state.set(c.kA.currentSpotlightEntityId,void 0)}async getV2SportsMatchupData(t,i){var e;if(null===(e=t)||void 0===e||!e.Model)return t;const n=(this.state.get(c.kA.tabCurrentPageIndex)||1)-1;if(t.isFeedData){const i=(t=>t.Model?t.Model.Tabs.map(t=>({id:t.primaryEntityId,yId:t.yId,name:t.primaryEntityName,displayText:t.primaryEntityName,imageId:t.primaryEntityImage,hasExplicitInterest:t.hasExplicitInterest,isLive:t.isLive,tabContentUrl:t.tabContentUrl,tabContentType:t.tabContentType,tabContentReason:t.tabContentReason,clickThroughUrl:t.clickThroughUrl,explorationReason:t.explorationReason,webSearchUrl:t.clickThroughUrl?(0,m.g2)((0,f.t7)(t.clickThroughUrl)):"",type:t.primaryEntityType})):[])(t),e=t.Model.Tabs.slice(0,1);this.pushAdditionalTabs(e),t={...t,Model:{...t.Model,Tabs:e},sportsSkinnyData:i,isFeedData:!1}}return t.sportsMatchupCardData={},(async(t,i)=>{var e,n,s;if(null===(e=t.Model)||void 0===e||!e.Tabs||0===(null===(n=t.Model)||void 0===n?void 0:n.Tabs.length))return void C("Sports data has no tabs",t);const r=null===(s=t.Model)||void 0===s?void 0:s.Tabs[(null==i?void 0:i.tabIndex)||0],o=r&&r.tabContent;if(!r||!o)return void C("Sports data can not find current tab info",t);if(o.showBackgroundImage&&!o.backgroundImageMap)return void C("Sports data can not find backgroundImageMap",t);if("FRE"===o.tabType&&!o.freTeams)return void C("Sports data missing fre data",t);const{sportsSpotLightData:a}=o,{sportsGameStats:l,matchlist:d,video:h,match:c,countdown:u}=a||{};"seasonstatistics"!==o.tabType||l&&d&&l.length&&d.length?"spotlight"!==o.tabType||!h||h.videoThumbnailUrl&&h.videoTitle&&c?"countdown"!==o.tabType||u||C("Sports data missing countDown data",t):C("Sports data missing video data",t):C("Sports data missing seasonstatistic data",t)})(t,{tabIndex:null!=i&&i.isBlended?0:n}),function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:performance.now();const e=!0===p.Rb.IsPrerender?i-(0,b.W4)(y.xF):i;(0,b.tD)(t,e)}("SportsCardWC.DataReady"),t}pushAdditionalTabs(t){var i;const e=null==t||null===(i=t[0])||void 0===i?void 0:i.additionalTabs;Array.isArray(e)&&e.length>0&&(null==t||t.push(...e))}getCurrentTab(){var t;const i=this.state.get(c.kA.sportsData),e=(this.state.get(c.kA.tabCurrentPageIndex)||1)-1;return null===(t=i.Model)||void 0===t||null===(t=t.Tabs)||void 0===t?void 0:t[e]}}var $=e(13053),M=e(30817),D=e(66784),P=e(19548),E=e(60815),R=e(38493),H=e(57842);var z=function(){var t=arguments,i=(0,H.A)(t[0]);return t.length<3?i:i.replace(t[1],t[2])},V=e(36042),F=e(21481),O=e(77246),L=e(76864),B=e(31753),U=e(65614);var A=e(16611),_=e(98216);(0,B.o)(),L.csResponsiveList.define(U.G.registry);const W="Sports_Spotlight_TTR";class j extends F.U{constructor(){super(...arguments),this.ensureObservableBeforeConnect=!0,this.shellV2PreviewType="",this.isInViewport=!1,this.isDefaultRecoChecked=!1,this.isSpotlight2=!1,this.isHidePopupOpen=!1,this.isCopilotTheme=!1,this.widgetModelFactory=window.__com_microsoft_dsh_widgetModelApiFactory,this.ignoreSpotlight=!1,this.entityIdsWithShownPopup=new Set,this.explorationSettings=null,this.isFirstViewReady=!1,this.isFeedDataChanged=!0,this.goToNextTabTimer=0,this.notificationCloseTimer=0,this.recommendationDelayTimer=0,this.enableRubyPillRotation="ruby"===w.T3.UxMode&&p.Rb.CurrentFlightSet.has("ruby-sports-rtn"),this.pillRotationControlEnabled="ruby"===w.T3.UxMode&&p.Rb.CurrentFlightSet.has("sports-rtn-ruby-c"),this.visibilityHandler=async t=>{if(this.isFirstViewReady)if(t)this.onDashboardVisible().catch(()=>{});else{const{onDashboardClosed:t}=await e.e("sports-info-utils").then(e.bind(e,25159));t(this)}},this.updateSuperCardHeaderData=()=>{var t;if(null!==(t=this.view)&&void 0!==t&&t.sdCardData){const t=this.appStateConnector.getCurrentState().get(c.kA.isPinned);this.view={...this.view,sdCardData:{...this.view.sdCardData,headerData:{...this.view.sdCardData.headerData,isPinned:t&&!a.F_.get(21)}}}}}}onVisuallyReady(){this.config.isDynamicFeed&&(0,a.jA)(s.FC5),(0,$.D)(()=>{const t=this.getApproxTTVRValue(s.FC5);(0,b.yi)(s.FC5,!1,t,!t),this.visualReadinessCallback&&this.visualReadinessCallback(),this.config.enablePostTTVRDelay&&this.postTTVRViewUpdate()})}getExperienceType(){return s.nDd}get isAdaptiveThemeEnabled(){return(0,D.h)()&&"pill"!==this.cardSize}async experienceConnected(){var t,i,e;if(this.hasLoadedCallback&&this.hasLoadedCallback(),this.isFirstViewReady)return this.setIntersectionObserver(),void(this.config.isDynamicFeed&&this.initWidgetInstance());if((0,l.lb)()){const t=(0,l.Wu)();this.ignoreSpotlight=(0,d.by)(t),a.F_.subscribe(21,this.updateSuperCardHeaderData)}this.appStateConnector=x.getInstance(this.experienceName||this.cardType),(0,O.S)()&&!this.isSSRRendered||await this.initSdCardHandlers(),this.cardSize=this.cardSize??"_1x_2y",this.previewType=this.isSpotlight?this.feedPreviewType:"";const n=this.cardType&&this.cardType.includes("MiniWidget")&&this.config.enableNoHideInPA;this.enableHideActionInKumo=(null===(t=this.config)||void 0===t?void 0:t.enableHideActionInKumo)&&!(null!==(i=this.config)&&void 0!==i&&i.enableWidgetNotInterested)&&!n,this.enableWidgetNotInterested=(null===(e=this.config)||void 0===e?void 0:e.enableWidgetNotInterested)&&!n,this.isSportsSpotlight||(this.previewType="");const s=Math.round(performance.now());if(this.config.enableForceSpotlight){const t=P._3.getQueryParameterByName("previewType",window.location.href);this.previewType=t||this.previewType}this.config.isDynamicFeed&&this.initWidgetInstance(),await this.setInitialView(this.feedDataParsed),this.isSportsSpotlight&&void 0!==s&&((0,M.ZF)()[W]=Math.round(performance.now())-s),this.checkRubyPillError()}checkRubyPillError(){var t,i;"pill"!==this.cardSize||null!==(t=this.view)&&void 0!==t&&null!==(t=t.pillViewModel)&&void 0!==t&&t.length&&null!==(i=this.view)&&void 0!==i&&i.currentViewTemplate||(0,T.vV)(u.jR4,"SportsInfo - Rendering ruby pill failed","SportsInfo - pillViewModel is empty",{feedDataParsed:this.feedDataParsed,cardType:this.cardType})}attributeChangedCallback(t,i,e){super.attributeChangedCallback(t,i,e),this.isFirstViewReady&&i!==e&&e&&("initialpreviewtype"!==t||this.ignoreSpotlight||["windowsShellV2","msnStudio"].includes(w.T3.AppType)||this.onDashboardVisible().catch(()=>{}))}cardSizeChanged(){this.isFirstViewReady&&this.adjustToHeight()}disconnectedCallback(){var t;super.disconnectedCallback(),clearTimeout(this.notificationCloseTimer),clearTimeout(this.recommendationDelayTimer),null!==(t=this.config)&&void 0!==t&&t.isDynamicFeed&&(a.F_.unsubscribe(2,this.visibilityHandler),this.appStateConnector.clearViewsCache()),(0,l.lb)()&&a.F_.unsubscribe(21,this.updateSuperCardHeaderData),this.unsetIntersectionObserver(),this.removeCardTypeTMPL()}initWidgetInstance(){r.aC.safeExecute(()=>{var t;this.shellFeedsApi||(this.shellFeedsApi=null===(t=this.widgetModelFactory)||void 0===t?void 0:t.tryGetApi("widgetshellfeeds",h.XF,h.XF));a.F_.subscribe(2,this.visibilityHandler)},void 0,this.config.isDynamicFeed?u.zVM:u.KLz,this.config.isDynamicFeed?"SportsInfo - Dyanmic Ranking widget instance is not available":"SportsInfo - error initializing SportsInfoCard")}replaceView(t){var i;t&&t.currentViewTemplate?this.view=t:null===(i=this.appStateConnector.getCurrentState())||void 0===i||i.set(c.kA.currentSpotlightEntityId,void 0)}get isSportsSpotlight(){const t=this.getPreviewTypeInfo();return Boolean(t&&this.isSupportedPreviewType(t))}async onDashboardVisible(){let t;if(this.removeCardTypeTMPL(),"windowsShellV2"===w.T3.AppType){var i;t=this.feedPreviewType!==this.previewType&&(null===(i=this.previewType)||void 0===i?void 0:i.startsWith(c.sQ)),this.previewType=this.isSpotlight?this.feedPreviewType:""}else{var e;const i=await this.getSportsPreviewType();t=i!==this.previewType&&(null===(e=this.previewType)||void 0===e?void 0:e.startsWith(c.sQ)),this.previewType=i}let n=!1;this.resetExplorationRecoCheck(),""!==this.previewType&&(n=await this.renderSpotlightView()),n?this.resetShownPopupForCurrentTab():(t?await this.updateViewWithFeedData():await this.updateView(),this.isFeedDataChanged&&(this.isFeedDataChanged=!1),this.checkSpotlightMismatch()),(this.isInViewport||n)&&this.showDefaultRecommendationLazy(),this.addCardTypeTMPL(),this.checkWidgetSizing(),await this.showExplorationBannerLazy()}removeCardTypeTMPL(){var t,i;const e=null===(t=this.appStateConnector)||void 0===t||null===(t=t.getCurrentState())||void 0===t?void 0:t.get(c.kA.sportsData);null!=e&&null!==(i=e.Model)&&void 0!==i&&i.CardType&&(0,r.iJ)(e.Model.CardType)}addCardTypeTMPL(){var t,i;const e=null===(t=this.appStateConnector)||void 0===t||null===(t=t.getCurrentState())||void 0===t?void 0:t.get(c.kA.sportsData);null!=e&&null!==(i=e.Model)&&void 0!==i&&i.CardType&&(0,r.ao)(e.Model.CardType,"1")}resetExplorationRecoCheck(){clearTimeout(this.recommendationDelayTimer),this.isDefaultRecoChecked=!1}resetShownPopupForCurrentTab(){const t=this.appStateConnector.getCurrentTabEntityId();this.entityIdsWithShownPopup.delete(t)}isSupportedPreviewType(t){var i,e,n;const s=null===(i=t.segment)||void 0===i?void 0:i.toLowerCase(),r=null===(e=t.scenario)||void 0===e?void 0:e.toLowerCase();return!!Boolean(r&&(null===(n=this.cardType)||void 0===n?void 0:n.toLowerCase().startsWith(r)))||"sports"===s&&r==="EventBrief".toLowerCase()}async renderSpotlightView(){const t=this.getPreviewTypeInfo();if(!t)return!1;if(!this.isSupportedPreviewType(t))return this.config.shouldLogWrongPreviewType&&(0,T.vV)(u.lPv,"Sports unsupported previewType",this.previewType,{initialPreviewType:this.feedPreviewType,cardType:this.cardType,isSpotlight:this.isSpotlight}),!1;const i=Math.round(performance.now());let n=null;if(t.teamId&&t.gameId?n=t.teamId:t.leagueId&&(n=t.leagueId),n){const r=t&&t.scenario&&t.scenario.toLowerCase()===c.rq.toLowerCase();this.appStateConnector.updatePreviewTypeInfo(t);const{updateDataForPreview:o}=await e.e("sports-info-utils").then(e.bind(e,25159)),a=await o(this.appStateConnector,n,this.previewType,!!r,!!this.config.appendCommonParams);if((0,O.S)()&&!this.isConnected)return!1;var s;if(this.appStateConnector.updateCardSize(this.cardSize),this.appStateConnector.updateSupportedSdCardActionMenuItems(this.sportsTransformationContext),a)await this.updateView().catch(()=>{});else null===(s=this.appStateConnector.getCurrentState())||void 0===s||s.set(c.kA.currentSpotlightEntityId,void 0);return void 0!==i&&((0,M.ZF)()[W]=Math.round(performance.now())-i),a}return!1}getPreviewTypeInfo(){if(!this.previewType)return;let t={previewType:this.previewType};if(this.previewType.includes("|")){var i;if(null!==(i=this.previewType.toLowerCase())&&void 0!==i&&i.includes("EventBrief".toLowerCase())){const[i,e,n,s]=this.previewType.split(/[:_]/),r=s?s.split("|"):[],o=r.length>0?r[0]:"";t={...t,segment:i,scenario:e,leagueId:o}}else{const[i,e,n,s,r,o,a]=this.previewType.split(/[:_|]/),l=this.getEntityIdFromPreviewType(this.previewType)||s;t={...t,segment:i,scenario:e,stage:n,entityId:l,leagueId:r,gameId:o,teamId:a}}}else{const[i,e,n,s,r]=this.previewType.split(/[:_]/);t={...t,segment:i,scenario:e,leagueId:n,gameId:s,teamId:r}}return t.leagueId?("x"!==t.gameId&&"x"!==t.teamId||(t.gameId=void 0,t.teamId=void 0),t):void 0}getEntityIdFromPreviewType(t){let i;return(t||"").split(/[:_|]/).forEach(t=>{t.includes(c.GC)&&(i=z(t,c.GC,""))}),i}async isInViewportChanged(t,i){i?((0,r.ao)(c.JH.SportsCardIsInViewPort,"1"),this.showDefaultRecommendationLazy()):(0,r.iJ)(c.JH.SportsCardIsInViewPort)}async showDefaultRecommendationLazy(){if(!this.config.enableExplorationBanner)try{const{showDefaultRecommendation:t}=await e.e("sports-info-utils").then(e.bind(e,25159));await t(this)}catch(t){(0,T.vV)(u.P8$,`SportsInfo - Exception at Show Default Recommendation: ${t}`,`market=${w.T3.CurrentMarket}`)}}async feedDataParsedChanged(t,i){if(!this.isFirstViewReady)return void await this.setInitialView(i);const e=(null==i?void 0:i.ResponseCreationTime)||(null==i?void 0:i.OsCreationTime),n=(null==t?void 0:t.ResponseCreationTime)||(null==t?void 0:t.OsCreationTime);t===i||void 0!==e&&e===n||!this.feedDataParsed||!this.config||(this.appStateConnector.toggleInterestManager(!1),this.isFeedDataChanged=!0,this.resetExplorationRecoCheck(),this.entityIdsWithShownPopup.clear(),"windowsShellV2"===w.T3.AppType&&(this.previewType=this.isSpotlight?this.shellV2PreviewType:""),await this.updateViewWithFeedData(),this.isInViewport&&this.showDefaultRecommendationLazy(),this.hideExplorationBanner())}async shellV2PreviewTypeChanged(t,i){t!==i&&this.isFirstViewReady&&"windowsShellV2"===w.T3.AppType&&"function"==typeof this.onDashboardVisible&&this.onDashboardVisible().catch(()=>{})}async hidePopupToggleHandler(t){this.appStateConnector.setIsHidePopupOpen(t),await this.updateView(),this.isHidePopupOpen=t}async initSdCardHandlers(){const{interestMenuItemClickEntityHandler:t,paginationFlipperClickHandler:i,paginationDotClickHandler:n,followClickEntityHandler:s,openSearchViewHandler:r,hideClickHandler:o,goToPersonalizeSettingsHandler:a,onDismissInterestManagerHandler:l,hidePopupToggleHandler:d,updateActionHistory:h,goToNextTabIfExists:c,searchInterestsHandler:u,recordUserVote:v,cardFailed:g}=await e.e("sports-info-utils").then(e.bind(e,25159));this.interestMenuItemClickEntityHandlerScoped=i=>t(this,i),this.paginationFlipperClickHandlerScoped=(0,V.A)(t=>i(this,t),this.config.flipperClickThrottleTime),this.paginationDotClickHandlerScoped=t=>n(this,t),this.followClickEntityHandlerScoped=(t,i,e,n,r,o)=>s(this,t,i,e,n,r,o),this.searchInterestsHandlerScoped=t=>u(this,t),this.openSearchViewHandlerScoped=t=>r(this,t),this.hideClickHandlerScoped=(t,i,e)=>o(this,t,i,e),this.goToPersonalizeSettingsHandlerScoped=()=>a(this),this.onDismissInterestManagerHandlerScoped=()=>l(this),this.hidePopupToggleHandlerScoped=t=>d(this,t),this.updateActionHistoryScoped=(t,i,e)=>h(this,t,i,e),this.goToNextTabIfExistsScoped=()=>c(this),this.recordUserVote=(t,i,e)=>v(this,t,i,e),this.turnOffWidgetsRegionClickHandlerScoped=()=>this.turnOffWidgetsRegionCallback&&this.turnOffWidgetsRegionCallback(),this.manageWidgetsRegionClickHandlerScoped=()=>this.manageWidgetsRegionCallback&&this.manageWidgetsRegionCallback(),this.onSDCardClickScoped=()=>this.onSDCardClick&&this.onSDCardClick(),this.cardFailedHandlerScoped=()=>g(this)}async setInitialView(t){var i,e;if(!t||!this.appStateConnector)return Promise.resolve();this.appStateConnector.updateIsInit((0,O.S)()&&!this.isSSRRendered);const n=await this.appStateConnector.getInitialSportsCardView(this.sportsInitTransformationContext);this.replaceView(n),this.isFirstViewReady=!0,this.isSpotlight2=this.isCardTypeSpotlight2(this.cardType),this.onVisuallyReady&&this.onVisuallyReady(),this.config.enablePostTTVRDelay||this.postTTVRViewUpdate(),this.checkSpotlightMismatch(),this.addCardTypeTMPL(),(null===(i=this.view)||void 0===i||null===(i=i.viewModel)||void 0===i?void 0:i.telemetryTag)&&(null===(e=this.onTelemetryUpdated)||void 0===e||e.call(this,void 0,this.view.viewModel.telemetryTag))}checkSpotlightMismatch(){var t;if(!this.config.enableSpotlightMismatchCheck)return;const i=null===(t=this.appStateConnector.getCurrentState())||void 0===t?void 0:t.get(c.kA.currentSpotlightEntityId);if(this.isSportsSpotlight&&!i){const t=this.previewType,i=this.appStateConnector.getCurrentTab();window.setTimeout(()=>{this.logSpotlightMismatch(t||"",i)},100)}}logSpotlightMismatch(t,i){if(!t)return;const e={renderedTabEntityId:null==i?void 0:i.primaryEntityId,renderedTabType:null==i?void 0:i.tabType,previewType:t};(0,T.vV)(u.D8P,"Shown tab is not matching the preview type","",e)}async postTTVRViewUpdate(){const t=(0,O.S)()&&!this.isSSRRendered;window.setTimeout(async()=>{t&&("edgeChromium"===w.T3.AppType&&await(0,A.e1)(),await this.initSdCardHandlers(),await this.initRecommendations(),await this.updateView(),this.appStateConnector.setInitTmpl());const i=`${s.FC5}.Ready`;(0,$.D)(()=>{const t=this.getApproxTTVRValue(i);(0,b.yi)(i,!1,t,!t)}),this.setIntersectionObserver(),await this.showExplorationBannerLazy()},t?200:0),this.checkWidgetSizing()}checkWidgetSizing(){this.config.isDynamicFeed&&(0,o.CE)(this.clientHeight,this.cardSize)&&(0,T.vV)(u.zBI,"Card size does not match rendered client height",`ClientHeight: ${this.clientHeight} CardSize: ${this.cardSize}`,{cardType:this.cardType,previewType:this.previewType})}async initRecommendations(){const t=this.appStateConnector.getCurrentState().get(c.kA.sportsData);t&&this.appStateConnector.updateRecommendations(t)}async updateView(){const t=await this.appStateConnector.getUpdatedSportsCardView(this.sportsTransformationContext);this.replaceView(t)}async updateViewWithFeedData(){const t=await this.appStateConnector.getUpdatedSportsViewByFeedData(this.sportsInitTransformationContext);t!==this.view&&(this.appStateConnector.clearViewsCache(),this.replaceView(t))}adjustToHeight(){this.appStateConnector.getCurrentState().get(c.kA.cardSize)!==this.cardSize&&(this.appStateConnector.updateCardSize(this.cardSize),this.updateView().catch(()=>{}))}async getRotationalPreviews(){if(this.shellFeedsApi&&this.shellFeedsApi.getRotationalPreviewIds)return await r.aC.safeExecuteAsync(async()=>{var t;const i=await(null===(t=this.shellFeedsApi)||void 0===t?void 0:t.getRotationalPreviewIds());if(!i)throw new Error("WidgetShellFeeds.getRotationalPreviewIds returned nothing");if(i.relatedCardId===this.cardId)return i},void 0,u.hqB,"SportsInfo - Exception at WidgetShellFeeds.getRotationalPreviewIds")}async getSportsPreviewType(){if(d.EV.containsStartFeed()&&(this.ignoreSpotlight||!this.isSpotlight))return"";const t=await this.getRotationalPreviews();if(!t)return"";const{previewType:i}=t;return i||""}get feedPreviewType(){return"windowsShellV2"===w.T3.AppType?this.shellV2PreviewType:this.initialPreviewType}get sportsTransformationContext(){return{config:this.config,strings:this.strings,updateActionHistory:this.updateActionHistoryScoped,goToNextTabIfExists:this.goToNextTabIfExistsScoped,interestMenuItemClickEntityHandler:this.interestMenuItemClickEntityHandlerScoped,paginationFlipperClickHandler:this.paginationFlipperClickHandlerScoped,paginationDotClickHandler:this.paginationDotClickHandlerScoped,followClickHandler:()=>{},followClickEntityHandler:this.followClickEntityHandlerScoped,searchInterestsHandler:this.searchInterestsHandlerScoped,openSearchViewHandler:this.openSearchViewHandlerScoped,hideClickHandler:this.hideClickHandlerScoped,moreSettingsClickHandler:this.goToPersonalizeSettingsHandlerScoped,onDismissInterestManagerHandler:this.onDismissInterestManagerHandlerScoped,supportedSdCardActionMenuItems:this.supportedSdCardActionMenuItems,sdCardActionClickHandler:this.sdCardActionClickHandler,hidePopupToggleHandler:this.hidePopupToggleHandlerScoped,recordUserVote:this.recordUserVote,isWidgetRegion:this.isWidgetRegion,onSDCardClick:this.onSDCardClickScoped,turnOffWidgetsRegionClickHandler:this.turnOffWidgetsRegionClickHandlerScoped,manageWidgetsRegionClickHandler:this.manageWidgetsRegionClickHandlerScoped,cardFailedHandler:this.cardFailedHandlerScoped}}get sportsInitTransformationContext(){return{...this.sportsTransformationContext,feedData:"",feedDataParsed:this.feedDataParsed,cardSize:this.cardSize,cardType:this.cardType,rootTelemetryObject:this.parentTelemetryObject,isCopilotTheme:this.isCopilotTheme,telemetryExt:this.telemetryExt,wpoMetadata:this.wpoMetadata,previewType:this.previewType,previewTypeInfo:this.getPreviewTypeInfo()}}setIntersectionObserver(){if(this.intersectionObserver)return;this.intersectionObserver=new IntersectionObserver(t=>{if(t&&0!==t.length)for(const i of t)this.isInViewport=i.isIntersecting},{threshold:[.5]}),this.intersectionObserver.observe(this)}unsetIntersectionObserver(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0)}isCardTypeSpotlight2(t){return null==t?void 0:t.toLowerCase().startsWith("sportsspotlight2")}getWrapTelemetryTag(){var t,i,e;if(!this.telemetryObject)return;let n="";var s,r,o;null!==(t=this.view)&&void 0!==t&&t.pillViewModel?(n=c.BP.HeroGem,(null===(s=this.view)||void 0===s||null===(s=s.pillViewModel)||void 0===s?void 0:s.length)>1&&(this.enableRubyPillRotation||this.pillRotationControlEnabled)&&_.YT.addOrUpdateTmplProperty("SportsPillRotation",this.enableRubyPillRotation?"1":"0")):"0.5u"===this.cardSize?n=c.tX.SportsMatchMiniWidget:this.isCopilotTheme&&this.previewType&&(n=c.BP.SportsInfoSpotlight);return n?null===(r=(o=this.telemetryObject).addChild)||void 0===r?void 0:r.call(o,{name:n}).getMetadataTag():null===(i=(e=this.telemetryObject).getMetadataTag)||void 0===i?void 0:i.call(e)}hideExplorationBanner(){this.explorationSettings=null}async showExplorationBannerLazy(){if(this.config.enableExplorationBanner)try{const{showExplorationBanner:t}=await e.e("sports-info-utils").then(e.bind(e,25159));t(this)}catch(t){(0,T.vV)(u.P8$,`SportsInfo - Exception at Show Exploration Banner: ${t}`,`market=${w.T3.CurrentMarket}`)}}}(0,n.Cg)([E.Jg],j.prototype,"isAdaptiveThemeEnabled",null),(0,n.Cg)([E.sH],j.prototype,"shellV2PreviewType",void 0),(0,n.Cg)([E.sH],j.prototype,"isInViewport",void 0),(0,n.Cg)([E.sH],j.prototype,"cardType",void 0),(0,n.Cg)([E.sH],j.prototype,"experienceName",void 0),(0,n.Cg)([E.sH],j.prototype,"feedDataParsed",void 0),(0,n.Cg)([E.sH],j.prototype,"cardSize",void 0),(0,n.Cg)([E.sH],j.prototype,"cardActionPropsOverride",void 0),(0,n.Cg)([E.sH],j.prototype,"telemetryExt",void 0),(0,n.Cg)([E.sH],j.prototype,"isHidePopupOpen",void 0),(0,n.Cg)([R.CF],j.prototype,"initialPreviewType",void 0),(0,n.Cg)([E.sH],j.prototype,"isSpotlight",void 0),(0,n.Cg)([E.sH],j.prototype,"isWidgetRegion",void 0),(0,n.Cg)([E.sH],j.prototype,"wpoId",void 0),(0,n.Cg)([(0,R.CF)({attribute:"is-copilot-theme",mode:"boolean"})],j.prototype,"isCopilotTheme",void 0),(0,n.Cg)([E.sH],j.prototype,"supportedSdCardActionMenuItems",void 0),(0,n.Cg)([E.sH],j.prototype,"explorationSettings",void 0),(0,n.Cg)([E.sH],j.prototype,"initCardAction",void 0),(0,n.Cg)([E.sH],j.prototype,"view",void 0),(0,n.Cg)([E.sH],j.prototype,"isFirstViewReady",void 0),(0,n.Cg)([E.Jg],j.prototype,"sportsInitTransformationContext",null);var N=e(96950),X=e(66591),q=e(60402),J=e(91640),K=e(56046);const G=N.qy`
    <exploration-banner
        :settings="${t=>t.explorationSettings}"
    ></exploration-banner>
`,Q=N.qy`
    <feeds-notification-toast
        :viewModel="${t=>{var i;return null===(i=t.view)||void 0===i?void 0:i.feedsNotificationToastViewModel}}"
    ></feeds-notification-toast>
`,Y=N.qy`
    <sports-hidepopup
        :viewModel="${t=>{var i;return null===(i=t.view)||void 0===i?void 0:i.viewModel.hidePopupViewModel}}"
        :isHidePopupOpen="${t=>t.isHidePopupOpen}"
    ></sports-hidepopup>
`,Z=N.qy`
    <div 
        class=${t=>{var i;return(0,X.x)("sports-info-content",["immersive",Boolean(null===(i=t.view)||void 0===i||null===(i=i.rubyCardData)||void 0===i?void 0:i.isImmersive)])}}
        slot="card-content"
    >
        ${t=>{var i;return null===(i=t.view)||void 0===i?void 0:i.currentViewTemplate}}
    </div>
`,tt=N.qy`
    <div
        data-t="${t=>{var i;return null===(i=t.view)||void 0===i?void 0:i.viewModel.telemetryTag}}"
        class="wrap ${t=>t.isSpotlight2?"full-height":""}"
    >
        <responsive-sd-card
            :data="${t=>{var i;return null===(i=t.view)||void 0===i?void 0:i.sdCardData}}"
            :toggleInterestManager="${t=>{var i;return null===(i=t.view)||void 0===i||null===(i=i.sdCardData)||void 0===i?void 0:i.toggleInterestManager}}"
            data-t="${t=>{var i;return null===(i=t.view)||void 0===i?void 0:i.viewModel.tabTelemetryTag}}"
            size="${t=>{var i;return null===(i=t.view)||void 0===i||null===(i=i.sdCardData)||void 0===i?void 0:i.cardSize}}"
            responsive-size=${t=>t.isSpotlight2}
            ${(0,q.K)("tabElement")}
        >
            ${Z}
        </responsive-sd-card>
        ${Q}
        ${(0,J.z)(t=>t.explorationSettings,G)}
        ${(0,J.z)(t=>{var i;return null===(i=t.view)||void 0===i?void 0:i.viewModel.hidePopupViewModel},Y)}
    </div>
`,it=N.qy`
    <div class="ruby-card-container" data-t="${t=>{var i;return null===(i=t.view)||void 0===i||null===(i=i.rubyCardData)||void 0===i?void 0:i.rootTelemetryTag}}">
        <cx-ruby-widget-card
            :enableHideActionInKumo=${t=>t.enableHideActionInKumo}
            :enableWidgetNotInterested=${t=>t.enableWidgetNotInterested}
            :cardActionPropsOverride=${t=>t.cardActionPropsOverride}
            :rootTelemetryObject=${t=>{var i;return null===(i=t.view)||void 0===i||null===(i=i.rubyCardData)||void 0===i?void 0:i.rootTelemetryObject}}
            :initCardAction=${t=>t.initCardAction}
            :subtitleData=${t=>{var i;return null===(i=t.view)||void 0===i||null===(i=i.rubyCardData)||void 0===i?void 0:i.subtitleData}}
            :containerPadding=${t=>{var i;return null===(i=t.view)||void 0===i||null===(i=i.rubyCardData)||void 0===i?void 0:i.containerPadding}}
            heading="${t=>{var i;return null===(i=t.view)||void 0===i||null===(i=i.rubyCardData)||void 0===i?void 0:i.heading}}"
            immersive="${t=>{var i;return null===(i=t.view)||void 0===i||null===(i=i.rubyCardData)||void 0===i?void 0:i.isImmersive}}"
            render-augment="true"
            size=${t=>t.cardSize}
        >
            <div slot="augment" style="background: ${t=>{var i;return null===(i=t.view)||void 0===i||null===(i=i.rubyCardData)||void 0===i?void 0:i.backgroundValue}}">
                ${Z}
            </div>
        </cx-ruby-widget-card>
    </div>
`,et=N.qy`
    <cx-ruby-pill :data=${t=>{var i;return null===(i=t.view)||void 0===i?void 0:i.pillViewModel}} rotate=${t=>t.enableRubyPillRotation}>
    </cx-ruby-pill>
`,nt=N.qy`${t=>(0,K.C)(`TTSR.${t.cardType}`)}`,st=N.qy`
    <template data-t=${t=>null==t?void 0:t.getWrapTelemetryTag()}>
        ${(0,J.z)(t=>{var i;return t.isFirstViewReady&&(null===(i=t.view)||void 0===i?void 0:i.rubyCardData)},it)}
        ${(0,J.z)(t=>{var i;return t.isFirstViewReady&&(null===(i=t.view)||void 0===i?void 0:i.sdCardData)},tt)}
        ${(0,J.z)(t=>{var i;return t.isFirstViewReady&&(null===(i=t.view)||void 0===i?void 0:i.pillViewModel)},et)}
        ${(0,J.z)(()=>!(0,O.S)(),nt)}
    </template>
`;var rt=e(43103),ot=e(74849),at=e(4126);const lt=ot.A` :host{--sports-item-hover-background:rgba(255,255,255,0.1);--sports-item-background:#1F1F1F;--sports-item-active-background:#141414}`,dt=ot.A` :host{width:100%;min-width:inherit;max-width:inherit}.ruby-card-container{width:100%}`,ht=ot.A` :host{--sports-item-background:#f5f5f5;--sports-item-hover-background:#ebebeb;--sports-item-active-background:#ebebeb}.wrap{position:relative}.full-height{height:100%}:has(sports-article){--sd-card-content-padding-inline:4px}:host{--immersive-gradient-opacity:0}cx-ruby-widget-card .sports-info-content{height:100%}cx-ruby-widget-card[size="_1x_1y"]{height:160px}*[size="_1x_1y"] .sports-info-content:focus-visible{outline:none}cx-ruby-widget-card[immersive=true] [slot=augment] .sports-info-content{display:flex;flex-direction:column;box-sizing:border-box}`.withBehaviors(new rt.N(null,lt),new at.o("isAdaptiveThemeEnabled",!0,dt)),ct={experienceConfigSchema:undefined}},49382:function(t,i,e){"use strict";e.r(i),e.d(i,{SportsInfoTransformer:function(){return T}});var n=e(15221),s=e(84665),r=e(38346),o=e(92337),a=e(48114),l=e(17254),d=e(18731),h=e(65022),c=e(93468);const u={[n.aB.Leaderboard]:n.hi.Leaderboard,[n.aB.Cricket]:n.hi.SportsCricket,[n.aB.Tennis]:n.hi.SportsTennis,[n.aB.SideBySide]:n.hi.SportsMatchList,[n.aB.FRE]:n.hi.SportsFre};var v=e(67751),g=e(9742),p=e.n(g),m=e(51600),f=e(17720),w=e(83003),b=e(50180),y=e(3589);class T extends n.Bc{constructor(){super(...arguments),this.telemetryConstants={},this.isPinned=!1,this.isCopilotTheme=!1,this.cardSize=r.uE._1x_2y,this.reasonText="",this.signature=null,this.getTelemetryExt=t=>{var i,e;const s=t.get(n.kA.telemetryExt),r=(0,v.wB)(t),o=(0,v.bw)(t),a=s||this.widgetDimension,l=o?null===(i=o.tabContent)||void 0===i?void 0:i.logMessage:r&&r.logMessage||{},d=o.hash,h=this.isSpotlight(t);return this.signature=h?null===(e=t.get(n.kA.previewTypeInfo))||void 0===e?void 0:e.previewType:d,{...a,...l,signature:this.signature}},this.getContextualFeedbackData=t=>{var i,e,s;return(null===(i=t.get(n.kA.wpoMetadata))||void 0===i?void 0:i.isGA)??!1?{cFId:null===(e=t.get(n.kA.wpoMetadata))||void 0===e?void 0:e.cfId,cFMetadataType:null===(s=t.get(n.kA.wpoMetadata))||void 0===s?void 0:s.cFMetadataType}:null},this.getBackgroundImage=t=>{var i;const e=(0,v.bw)(t);return null!=e&&null!==(i=e.tabContent)&&void 0!==i&&i.showBackgroundImage?this.getBackgroundImageFromMap(e.tabContent.backgroundImageMap):null},this.createReasonText=t=>{const i=(0,v.bw)(t),e=this.transformerProvider.config.enableReasonIcon&&!this.isCopilotTheme;return(0,v.s$)((0,v.bm)(t),this.transformerProvider.strings,null==i?void 0:i.primaryEntityType,e)},this.getInterestMenuData=t=>{const i=this.getInterestMenuItems(t);if(!i.length||i.length<2)return;const{yourTeamsLeagues:e,moreLeagues:n,addSports:s,interestMenuToolTip:r}=this.transformerProvider.strings;return{badgeAccentColor:"#cc0000",followedInterestsTitle:e,recommendedInterestsTitle:n,interestMenuItems:i,footerMenuItem:{onClick:()=>{var t,i;return null===(t=(i=this.transformerProvider).openSearchViewHandler)||void 0===t?void 0:t.call(i,!0)},text:s},interestMenuToolTip:r}},this.getInterestMenuItems=t=>{const i=t.get(n.kA.allRecommendations),e=t.get(n.kA.currentTabEntityId);return i.map(t=>{const{id:i,hasExplicitInterest:n,imageUrl:s,displayText:r,isLive:o,imageId:a,name:l,tabContentReason:d,tabContentType:h,explorationReason:c}=t,u=s||(0,v.iK)(a,!a,this.transformerProvider.config.teamImageInfoEnhanced);return{id:i,imageUrl:(0,v.Yf)(u),title:r||l,isActive:e===i,badge:o?this.transformerProvider.strings.sportsLive:"",isFollowed:n,onClick:()=>{this.onInterestMenuItemClick(t)},explorationReason:c,tabContentReason:d,tabContentType:h}})},this.onInterestMenuItemClick=async t=>{var i,e;await(null===(i=(e=this.transformerProvider).interestMenuItemClickEntityHandler)||void 0===i?void 0:i.call(e,t)),this.transformerProvider.updateActionHistory(t.id,r.iD.dropdownHistory,"")},this.getActionMenuItems=t=>{const i=(0,v.bw)(t);if(!(i&&(0,v.VQ)(i.tabType)||(0,v.zy)(t)||(0,v.Hn)(null==i?void 0:i.dislikeOnHide)))return[{glyph:p(),title:(0,b.GP)(this.transformerProvider.strings.sportsNotInterested,(null==i?void 0:i.primaryEntityName)||""),id:"dislike",telemetryTag:this.transformerProvider.telemetryBuilder.createAddClickTelemetryTag(this.tabTelemetryObject,{...this.telemetryConstants,name:n.BP.DislikeSports,signature:this.signature}),onClick:async()=>{var t,e;null===(t=(e=this.transformerProvider).hideClickHandler)||void 0===t||t.call(e,(null==i?void 0:i.primaryEntityId)||"")}}]},this.actionMenuButtonClickHandler=t=>{this.isWidget()&&this.transformerProvider.supportedSdCardActionMenuItems&&this.toggleMoneyInfoCardActions(t)},this.settingsHandler=t=>{var i,e;if("onShowSettingsEnd"===t)null===(i=(e=this.transformerProvider).openSearchViewHandler)||void 0===i||i.call(e,!0);else if("onHideSettingsEnd"===t){var n,s;null===(n=(s=this.transformerProvider).openSearchViewHandler)||void 0===n||n.call(s,!1)}},this.getDefaultWidgetsMenuItems=()=>{var t;return(0,o.Gf)(this.transformerProvider.supportedSdCardActionMenuItems,null===(t=this.transformerProvider.strings)||void 0===t?void 0:t.poweredByMSSports,{},"sports",(0,v.CP)(this.cardSize),this.settingsHandler)},this.getSportsMatchUXType=t=>{const i=(0,v.bw)(t);if(i){switch(i.tabType){case n.v1.MotorSportsSingleRace:case n.v1.MotorSportsRaceList:case n.v1.GolfSchedule:case n.v1.GolfLeaderBoard:return n.aB.Leaderboard;case n.v1.Fre:return n.aB.FRE;case n.v1.Cricket:return n.aB.Cricket;case n.v1.Tennis:return n.aB.Tennis;case n.v1.Spotlight:case n.v1.SpotlightFRE:return n.aB.SportsSpotlight}return n.aB.SideBySide}},this.isReasonTextEnabled=t=>t!==r.uE._1x_1y,this.isShowInfoButtonText=t=>{const i=(0,v.bw)(t),e=Boolean((0,v.lb)(null==i?void 0:i.tabType)),n=(0,v.or)(null==i?void 0:i.tabType),s=this.isSpotlight(t),r=this.transformerProvider.config.enableReasonIcon&&!this.isCopilotTheme;return""===this.reasonText&&r&&!e&&!s&&!n},this.enableInterestMenu=(t,i)=>{var e,s;return!(i||this.transformerProvider.config.disableInterestMenu||this.isPaginationSwitchingTabs(t)||this.matchUXType===n.aB.FRE||(0,v.F_)(this.currentTabType)||(null===(e=(0,v.bw)(t))||void 0===e?void 0:e.tabType)===n.v1.EventBrief||(0,v.zy)(t)||(0,v.Hn)(null===(s=(0,v.wB)(t))||void 0===s||null===(s=s.Model)||void 0===s?void 0:s.SuppressTabControl))}}static getInstance(t,i){const e=`SportsInfoTransformer_${t}`,n=f.vv.get(e,()=>({}));return n[e]||(n[e]=new T(i)),n[e]}async transform(t){this.currentTabType=(0,v.ww)(t),this.cardSize=t.get(n.kA.cardSize),this.rootTelemetryObject=t.get(n.kA.rootTelemetryObject),this.widgetDimension=t.get(n.kA.widgetDimension),this.isPinned=t.get(n.kA.isPinned),this.disablePinIcon=a.F_.get(a.nz.DisablePinIcon),this.isCopilotTheme=t.get(n.kA.isCopilotTheme),this.telemetryBuilder=this.transformerProvider.telemetryBuilder,this.defaultWidgetsMenuItems=this.getDefaultWidgetsMenuItems(),s.aC.safeExecute(()=>{this.setTelemetry(t)},void 0,h.mgw,"SportsInfo - set telemetry object error"),this.matchUXType=this.getSportsMatchUXType(t);const i=await s.aC.safeExecuteAsync(async()=>await this.getHidePopupViewModel(t),void 0,h.bV9,"SportsInfo - error getting hide popup view model"),e=t.get(n.kA.IsRubyPill),r=async()=>{let i=this.currentTabType?n.Qy[this.currentTabType]:void 0;if(!i||!this.currentTabType||!this.matchUXType)return Promise.resolve(this.getDefaultContentView());if(this.currentTabType===n.v1.TeamVsTeam)i=u[this.matchUXType];else if(this.currentTabType===n.v1.Spotlight){const e=(0,v.p6)(t);null!=e&&e.agentCard?i=n.hi.AgentSpotlight:this.transformerProvider.config.enableCountdownSpotlight&&void 0!==(null==e?void 0:e.countdown)?(this.matchUXType=n.aB.Countdown,i=n.hi.SportsCountdown):t.get(n.kA.cardType)===n.tX.SportsHeroMatchCard&&(i=n.hi.SportsSpotlight2c)}return t.get(n.kA.isInit)&&(0,s.ao)(n.JH.SportsCardFirstTagName,i),await this.getCurrentView(t,i||"")};let o,l,d,c;if(!e)if(this.isCopilotTheme)try{o=await r()}catch(t){this.transformerProvider.cardFailedHandler()}else o=await s.aC.safeExecuteAsync(r,this.getDefaultContentView(),h.bV9,`SportsInfo - error getting content view for "${this.currentTabType}" tab, "${this.matchUXType}" match UX type`);var g;e?(c=await this.getPillViewModel(t),o={viewTemplate:null===(g=c)||void 0===g||null===(g=g[0])||void 0===g?void 0:g.viewTemplate}):this.isCopilotTheme?d=this.getRubyCardData(t):l=this.getSportsSDCardData(t);return this.getContainerView(l,d,c,o,i)}async getPillViewModel(t){var i;const e=(0,v.bw)(t),s=null===(i=e.tabContent)||void 0===i||null===(i=i.league)||void 0===i?void 0:i.sportsMatches;if(!s||!s.length)return;const r=t.get(n.kA.cardSize),o=t=>{const i={tabData:{tabContent:{league:{sportsMatches:[t]}},primaryEntityImage:e.primaryEntityImage,tabType:e.tabType},cardSize:r};return this.transformerProvider.generateView(i,n.hi.SportsRubyPill)};return Promise.all(s.map(async i=>{const{viewTemplate:e}=await o(i)||{};return{rootTelemetryTag:this.telemetryBuilder.createNavClickTelemetryTag(this.tabTelemetryObject,{name:n.BP.SportsInfoMiniWidget,signature:this.signature}),data:{destinationUrl:i.gameCenterUrl?(0,v.Ot)(i.gameCenterUrl):this.getHeaderUrl(t),ariaLabel:this.getRubyPillAriaLabel(i),mainLabel:void 0,appearance:"large"},renderingMode:"custom",viewTemplate:e}}))}getRubyPillAriaLabel(t){const{participantOne:i,participantTwo:e}=t,s=(0,v.B5)(t)===n.Xp.postGame?`${i.score||""} - ${e.score||""}`:"";return`${i.shortName} ${s||"-"} ${e.shortName}`}getContainerView(t,i,e,r,o){return r||(r=this.getDefaultContentView()),{currentViewTemplate:r.viewTemplate,sdCardData:t,rubyCardData:i,pillViewModel:e,viewModel:{tabTelemetryTag:this.telemetryBuilder.createTelemetryObjectTag(this.tabTelemetryObject),telemetryTag:this.telemetryBuilder.createTelemetryObjectTag(this.telemetryObject),hidePopupViewModel:o},feedsNotificationToastViewModel:{notificationToastTelemetryTag:this.telemetryBuilder.createBehaviorTelemetryTag(this.telemetryObject,{...this.telemetryConstants,name:n.BP.SportsNotificationToast},s.YJ.Show),notificationToastClickTelemetryTag:this.telemetryBuilder.createNavClickTelemetryTag(this.telemetryObject,{...this.telemetryConstants,name:n.BP.SportsNotificationToast}),navLinkTelemetryTag:this.telemetryBuilder.createNavClickTelemetryTag(this.telemetryObject,{...this.telemetryConstants,name:n.BP.SportsNotificationToastLink}),behaviorLinkTelemetryTag:this.telemetryBuilder.createBehaviorTelemetryTag(this.telemetryObject,{...this.telemetryConstants,name:n.BP.SportsNotificationToastLink},s.YJ.Customize),dismissNotificationToastTelemetryTag:this.telemetryBuilder.createBehaviorTelemetryTag(this.telemetryObject,{...this.telemetryConstants,name:n.BP.SportsNotificationToastDismiss},s.YJ.Close),yesButtonTelemetryTag:this.telemetryBuilder.createBehaviorTelemetryTag(this.telemetryObject,{...this.telemetryConstants,name:n.BP.SportsNotificationToastYes},s.YJ.Customize),noButtonTelemetryTag:this.telemetryBuilder.createBehaviorTelemetryTag(this.telemetryObject,{...this.telemetryConstants,name:n.BP.SportsNotificationToastNo},s.YJ.Customize),telemetryTag:this.telemetryBuilder.createViewTelemetryTag(this.telemetryObject,{...this.telemetryConstants,name:n.BP.SportsNotificationToast})}}}getRubyCardData(t){return s.aC.safeExecute(()=>{var i;const e=this.getRubyHeader(t),s=this.getHeaderUrl(t),r=!this.isSpotlight(t)&&!this.isCopilotTheme?this.getHeaderIcon(t):void 0,o=(null==r?void 0:r.replace(/<img src="|">/g,""))||"",a=this.transformerProvider.telemetryBuilder.createNavClickTelemetryTag(this.tabTelemetryObject,{name:n.BP.SportsRubyClick,signature:this.signature,previewType:null===(i=t.get(n.kA.previewTypeInfo))||void 0===i?void 0:i.previewType}),l=this.isHeaderClickThroughAvailable(t)||this.isSpotlight(t),d=e?{text:e,logoUrl:o,href:l?s:void 0,telemetryTag:l?a:void 0,noClick:!l}:null;return{heading:e,rootTelemetryObject:this.tabTelemetryObject,rootTelemetryTag:this.telemetryBuilder.createTelemetryObjectTag(this.tabTelemetryObject),isInDarkMode:(0,v.jJ)(),headerIconUrl:r,href:s,isImmersive:!0,isHeaderClickable:l,containerPadding:this.getRubyContaierPadding(t),subtitleData:d}},void 0,h.YJI,"SportsInfo - error while getting ruby card data")}getRubyContaierPadding(t){if(this.cardSize===r.uE._05u)return;const i=(0,v.p6)(t);if(null==i?void 0:i.agentCard)return"padding-none";const e=null==i?void 0:i.partnershipInfo,n=null==i?void 0:i.video;return Boolean(e||n)?"padding-sm":void 0}getRubyHeader(t){const i=this.cardSize===r.uE._05u,e=(0,v.p6)(t),n=Boolean(null==e?void 0:e.video),s=Boolean(null==e?void 0:e.agentCard);return(n||s)&&this.isCopilotTheme&&!i?null:this.getHeaderTitle(t)}getDefaultContentView(){return{viewTemplate:void 0}}async getCurrentView(t,i){const e=t.get(n.kA.cardSize),s=t.get(n.kA.followedSports);this.reasonText="";const r=(0,v.bw)(t),o={cardSize:e,telemetryObject:this.tabTelemetryObject,telemetryConstants:this.telemetryConstants};switch(i){case n.hi.SportsMatchList:{this.reasonText=this.isReasonTextEnabled(e)?this.createReasonText(t):"";const n={...o,followedSports:s,numberOfMatches:(0,v.IR)(e,this.matchUXType,this.transformerProvider.config.maxNumberOfMatches),reason:this.reasonText,sportsMatchOverallData:(0,v.qM)(t),sportsMatchUXType:this.getSportsMatchUXType(t),showMatchUXV2:(0,v.zy)(t),isCopilotTheme:this.isCopilotTheme};return await this.transformerProvider.generateView(n,i)}case n.hi.SportsCricket:{var a;const i={...o,leagueId:(null===(a=r.tabContent)||void 0===a?void 0:a.league.id)||"",matchData:(0,v.qM)(t)||[],followedSports:s},e=this.isCopilotTheme?n.hi.SportsCricketV2:n.hi.SportsCricket;return await this.transformerProvider.generateView(i,e)}case n.hi.AgentSpotlight:{const e=(0,v.p6)(t),n=null==e?void 0:e.agentCard;if(!n)return void this.logBadTabDataError(i,r);const s={...o,agentCard:n,signature:this.signature};return await this.transformerProvider.generateView(s,i)}case n.hi.SportsSpotlight:{const e={...o,followedSports:s,spotlightData:(0,v.p6)(t),isHeroCard:(0,v.zy)(t),isSpotlightFRE:(0,v.F_)(this.currentTabType),tabClickThroughUrl:this.getSeeMoreUrl(t),pollOptionId:(0,v.yl)(t),isSpotlight2Card:(0,v.d)(t),isCopilotTheme:this.isCopilotTheme};return await this.transformerProvider.generateView(e,i)}case n.hi.Leaderboard:{const e={...o,cardData:{primaryEntityId:null==r?void 0:r.primaryEntityId,dataType:null==r?void 0:r.tabType},matchData:(0,v.qM)(t)||[]};return await this.transformerProvider.generateView(e,i)}case n.hi.SportsTennis:{const e={...o,matchData:(0,v.qM)(t)||[]};return await this.transformerProvider.generateView(e,i)}case n.hi.SportsMarchmadness:{this.reasonText=this.isReasonTextEnabled(e)?this.createReasonText(t):"";const n={...o,tabContent:r.tabContent,matchData:(0,v.qM)(t)||[],reason:this.reasonText,followedSports:s};return await this.transformerProvider.generateView(n,i)}case n.hi.SportsFre:{const e=(0,v.ju)(t);if(!e)return void this.logBadTabDataError(i);const n={...o,followedSports:s,freData:e,tabData:r,matchData:(0,v.qM)(t)||[]};return await this.transformerProvider.generateView(n,i)}case n.hi.SportsCountdown:{const e=(0,v.p6)(t);if(!e)return void this.logBadTabDataError(i);const n={...o,spotlightData:e,countdown:e.countdown,leagueImgUrl:(0,v.iK)(null==r?void 0:r.primaryEntityImage,!1,{width:44,height:44,format:m.f5.PNG})};return await this.transformerProvider.generateView(n,i)}case n.hi.TeamExploration:{if(!r||!r.tabContent||r.tabType!==n.v1.TeamVsTeamExploration)return void this.logBadTabDataError(i,r);const e=this.getExplorationMetadata(t,r);return await this.transformerProvider.generateView(e,i)}case n.hi.CricketExploration:{if(!r||!r.tabContent||r.tabType!==n.v1.CricketExploration)return void this.logBadTabDataError(i,r);const e=this.getExplorationMetadata(t,r);return await this.transformerProvider.generateView(e,i)}case n.hi.TennisExploration:{if(!r||!r.tabContent||r.tabType!==n.v1.TennisExploration)return void this.logBadTabDataError(i,r);const e=this.getExplorationMetadata(t,r);return await this.transformerProvider.generateView(e,i)}case n.hi.SportsEventBrief:{if(!r.tabContent)return void this.logBadTabDataError(i,r);const t={...o,eventBriefData:r.tabContent,tabClickThroughUrl:r.clickThroughUrl};return await this.transformerProvider.generateView(t,i)}case n.hi.SportsSpotlightTennis:{const e=(0,v.p6)(t);if(!e)return void this.logBadTabDataError(i,r);const n={...o,sportsSpotlightTennisData:e};return await this.transformerProvider.generateView(n,i)}case n.hi.SportsSpotlightCricket:{const e=(0,v.p6)(t);if(!e)return void this.logBadTabDataError(i,r);const a={...o,sportsSpotlightCricketData:e,followedSports:s},l=this.isCopilotTheme?n.hi.SportsSpotlightCricketV2:i;return await this.transformerProvider.generateView(a,l)}case n.hi.SportsSpotlightRace:{const e=(0,v.p6)(t);if(!e)return void this.logBadTabDataError(i,r);const n={...o,sportsSpotlightRaceData:e};return await this.transformerProvider.generateView(n,i)}case n.hi.SportsSpotlightGolf:{const e=(0,v.p6)(t);if(!e)return void this.logBadTabDataError(i,r);const n={...o,sportsSpotlightData:e};return await this.transformerProvider.generateView(n,i)}case n.hi.SportsStandingsRankings:{const t=r.tabContent;if(!t)return void this.logBadTabDataError(i,r);const e={...o,standingsData:t.standings,rankingsData:t.rankings};return await this.transformerProvider.generateView(e,i)}case n.hi.SportsMedal:{const e=r.tabContent;if(!e)return void this.logBadTabDataError(i,r);const n={...o,medalData:e,clickThroughUrl:(0,v.Ot)(e.clickThroughUrl),isHeroCard:(0,v.zy)(t)};return await this.transformerProvider.generateView(n,i)}case n.hi.SportsEventResults:{if(!r.tabContent)return void this.logBadTabDataError(i,r);const e={...o,matchData:(0,v.qM)(t)||[],followedSports:s,isHeroCard:(0,v.zy)(t),tabData:r};return await this.transformerProvider.generateView(e,i)}case n.hi.SportsEventSchedule:{if(!r.tabContent)return void this.logBadTabDataError(i,r);const e={...o,data:r.tabContent,isFullCard:!0,isHeroCard:(0,v.zy)(t)};return await this.transformerProvider.generateView(e,i)}case n.hi.SportsEventCountry:{if(!r.tabContent)return void this.logBadTabDataError(i,r);const e={...o,followedSports:s,data:r.tabContent,isHeroCard:(0,v.zy)(t)};return await this.transformerProvider.generateView(e,i)}case n.hi.SportsTournamentsList:{var l;if(!r.tabContent)return void this.logBadTabDataError(i,r);const t={...o,followedSports:s,data:null===(l=r.tabContent)||void 0===l||null===(l=l.league)||void 0===l?void 0:l.sportsMatches,gameCenterUrl:r.clickThroughUrl};return await this.transformerProvider.generateView(t,i)}case n.hi.SportsSpotlight2c:{var d;const e=(0,v.p6)(t),n=null===(d=(0,v.bw)(t).tabContent)||void 0===d||null===(d=d.league)||void 0===d?void 0:d.upcomingMatches,r={...o,followedSports:s,spotlightData:e,upcomingMatches:n,isHeroCard:(0,v.zy)(t)};return await this.transformerProvider.generateView(r,i)}case n.hi.SportsRubyPill:{const t={tabData:r,cardSize:e};return await this.transformerProvider.generateView(t,i)}default:throw new Error(`Unexpected tag name "${i}"`)}}getExplorationMetadata(t,i){const e=t.get(n.kA.cardSize),s=(0,v.Lw)(t,i.tabContent.league.id),{heading:r,subheading:o,league:a}=i.tabContent;return{followedSports:t.get(n.kA.followedSports),cardSize:e,reasonText:r,secondaryText:o,matchList:(0,v.qM)(t)||[],telemetryConstants:this.telemetryConstants,league:a,isDisliked:s,logoPrimaryColor:i.primaryColorHex,telemetryObject:this.tabTelemetryObject}}logBadTabDataError(t,i){const e=i?JSON.stringify(i):void 0;(0,c.vV)(h.Ax6,"Bad sports data",`tabName=${t} market=${l.T3.CurrentMarket}`,e)}async getHidePopupViewModel(t){if(!t.get(n.kA.isHidePopupOpen))return;const i=(0,v.bw)(t),e={cardData:{primaryEntityId:i.primaryEntityId||"",primaryEntityName:i.primaryEntityName||""},telemetryConstants:this.telemetryConstants,parentTelemetryObject:this.telemetryObject},s=await this.transformerProvider.generateView(e,n.hi.SportsHidePopup);return null==s?void 0:s.viewModel}setTelemetry(t){var i,e;const s=(0,v.bw)(t),r=this.getTelemetryExt(t);let a;if(this.telemetryConstants={headline:(null==s?void 0:s.tabType)??n.D7.unknown,id:(null==s||null===(i=s.tabContent)||void 0===i||null===(i=i.league)||void 0===i?void 0:i.id)||"",brandId:(null==s?void 0:s.primaryEntityId)||"",signature:this.signature},this.isWidget()){const i=t.get(n.kA.isPinned);a=(0,o.Yd)(i,"SportsMatch",this.isSpotlight(t))}const l=(0,v.lb)(null==s?void 0:s.tabType),d=(l?n.BP.SportsFRE:null==s?void 0:s.tabType)??n.BP.TeamVsTeam,h=(l?n.BP.SportsFRE:null==s?void 0:s.primaryEntityName)??n.BP.SportsFRE,c=this.transformerProvider.telemetryBuilder;c.initTelemetryBuilder(n.BP.Vertical,h,r,a);const u={...this.telemetryConstants,name:this.getRootTelemetryName(t),signature:this.signature},g=this.isCopilotTheme?null===(e=t.get(n.kA.previewTypeInfo))||void 0===e?void 0:e.previewType:void 0;this.telemetryObject=c.createViewTelemetryObject(this.rootTelemetryObject,u),this.tabTelemetryObject=c.createViewTelemetryObject(this.telemetryObject,{...this.telemetryConstants,name:d,signature:this.signature,previewType:g})}getRootTelemetryName(t){const i=t.get(n.kA.cardType);return!i||i===w.pL.SportsMatch?n.BP.SportsCard:`${n.BP.SportsCard}_${i}`}isSpotlight(t){const i=(0,v.bw)(t);return t.get(n.kA.currentSpotlightEntityId)===(null==i?void 0:i.primaryEntityId)}isHeaderClickThroughAvailable(t){const i=(0,v.bw)(t);return Boolean(null==i?void 0:i.headerClickThroughUrl)}getSportsSDCardData(t){const i=this.getBackgroundImage(t),e=null==i?void 0:i.dark,s=null==i?void 0:i.light;return{headerData:this.transformToHeaderData(t),footerData:this.transformToFooterData(t),interestManagerData:this.getSportsInterestManagerData(t),toggleInterestManager:t.get(n.kA.toggleInterestManager),id:"",cardSize:t.get(n.kA.cardSize),childTemplateType:"sd-card",gridArea:"",parentTelemetryObject:this.tabTelemetryObject,contextualFeedbackData:this.getContextualFeedbackData(t),immersiveCard:this.shouldShowImmersiveCard(t),darkImmersiveImage:e&&{source:e,altText:""},lightImmersiveImage:s&&{source:s,altText:""},onSDCardClick:this.transformerProvider.onSDCardClick}}shouldShowImmersiveCard(t){if((0,v.zy)(t))return!1;const i=(0,v.bw)(t);var e;return i?Boolean(null===(e=i.tabContent)||void 0===e?void 0:e.showBackgroundImage):void 0}getBackgroundImageFromMap(t){if(!t)return null;return{dark:(0,v.K4)("",!0,this.cardSize,t),light:(0,v.K4)("",!1,this.cardSize,t)}}transformToHeaderData(t){const i=(0,v.bw)(t),e=this.getHeaderTitle(t),s=this.getHeaderUrl(t),r=this.isShowInfoButtonText(t),a=t.get(n.kA.isInit),d=this.enableInterestMenu(t,a),h=this.transformerProvider.isWidgetRegion,c=r?this.createReasonText(t):void 0,u=!(0,v.zy)(t),{addSports:g,pinButton:p}=this.transformerProvider.strings,m=(0,v.Hn)(i.dislikeOnHide),f=this.transformerProvider.config.enableCardAction;return{title:e,titleNavigationLink:s,headerLogo:(0,v.zy)(t)||(0,v.d)(t)?"":this.getHeaderIcon(t),interestMenuData:d?this.getInterestMenuData(t):void 0,isWidget:this.isWidget(),isWidgetRegion:h,isPinned:this.transformerProvider.supportedSdCardActionMenuItems&&this.transformerProvider.supportedSdCardActionMenuItems.includes(o.gx.Unpin)&&!this.disablePinIcon,isHideCardAvailable:u,onActionMenuButtonClick:this.actionMenuButtonClickHandler,telemetryHeadlines:{title:e,logo:e},telemetryDestinationUrl:{title:s,logo:s},isActionMenuAvailable:f&&!(0,v.d)(t),actionMenuData:this.isWidget()||a?{}:{hideCardCallback:()=>{var t,e;m?null===(t=(e=this.transformerProvider).hideClickHandler)||void 0===t||t.call(e,(null==i?void 0:i.primaryEntityId)||"",!1,!0):this.transformerProvider.hidePopupToggleHandler(!0)},moreSettingsPersonalizeCallback:()=>{var t,i;null===(t=(i=this.transformerProvider).moreSettingsClickHandler)||void 0===t||t.call(i)},followInterestsCallback:()=>{var t,i;return null===(t=(i=this.transformerProvider).openSearchViewHandler)||void 0===t?void 0:t.call(i,!0)},turnOffWidgetsRegionCallback:()=>{var t,i;return null===(t=(i=this.transformerProvider).turnOffWidgetsRegionClickHandler)||void 0===t?void 0:t.call(i)},manageWidgetsRegionCallback:()=>{var t,i;return null===(t=(i=this.transformerProvider).manageWidgetsRegionClickHandler)||void 0===t?void 0:t.call(i)},items:this.getActionMenuItems(t),isManageInterests:!1,strings:{followInterestsTitle:g||""},isFollowInterests:this.isPaginationSwitchingTabs(t)||void 0},infoButton:(null==c?void 0:c.length)>0?{data:c,tooltip:c}:void 0,isConstrainedHeader:!f&&l.T3.AppType===y.u.WebWidgets,strings:{pinIconToolTip:p||"Pinned"}}}getSportsInterestManagerData(t){return{interestOptions:this.getSportsInterestOptions(t),interestsSuggestionTitle:this.transformerProvider.strings.suggestedForYou,onInterestOptionClick:t=>{var i;this.transformerProvider.followClickEntityHandler&&this.transformerProvider.followClickEntityHandler({id:t.id,name:t.interestName,type:t.interestType,...t.metadata},!t.isFollowed,(null===(i=t.metadata)||void 0===i?void 0:i.webSearchUrl)||"")},onHandleSearch:this.transformerProvider.searchInterestsHandler,onDismissInterestManager:this.transformerProvider.onDismissInterestManagerHandler,strings:{searchPlaceholder:this.transformerProvider.strings.searchPlaceholder}}}getHeaderUrl(t){const i=(0,v.bw)(t);return i.headerClickThroughUrl?(0,v.Ot)(i.headerClickThroughUrl):this.getSeeMoreUrl(t)}getSportsInterestOptions(t){const i=t.get(n.kA.searchSuggestions)||[],e=t.get(n.kA.followedSports);return i.map(t=>{const i=null==t?void 0:t.id;t.imageUrl=(null==t?void 0:t.imageUrl)||(0,v.iK)(null==t?void 0:t.imageId,!(null!=t&&t.ImageId),this.transformerProvider.config.teamImageInfoEnhanced);const n=t.webSearchUrl||(0,v.Ot)(t.clickThroughUrl);return{id:i,interestType:null==t?void 0:t.type,interestName:(null==t?void 0:t.displayText)||"",isFollowed:(0,v.VY)(i,e),image:{url:(null==t?void 0:t.imageUrl)||"",altText:"alt text"},metadata:{yId:t.yId,displayText:t.displayText,webSearchUrl:n,imageUrl:null==t?void 0:t.imageUrl}}})}getHeaderIcon(t){const i=(0,v.bw)(t);if(i&&(0,v.VQ)(i.tabType))return`<img src="${(0,l.rA)().StaticsUrl}latest/sports/icons/Cup.svg" alt="" />`;const e={...this.transformerProvider.config.teamImageInfoEnhanced,enableDpiScaling:!0,padding:1,crop:0,devicePixelRatio:1};return`<img src="${(0,v.iK)(null==i?void 0:i.primaryEntityImage,!1,e)}" alt="${i.primaryEntityName||""}" />`}transformToFooterData(t){if((0,v.d)(t)||this.isCopilotTheme)return null;const i=this.getSeeMoreText(t),e=this.getFooterNavigationUrl(t),s=t.get(n.kA.currentTabEntityId),r=this.transformerProvider.isWidgetRegion;let o=0,a=0,l=[];const d=t.get(n.kA.isInit);return d||(o=this.getPaginationPageCount(t),a=this.getCurrentPageIndex(t),l=this.getInterestMenuItems(t),t.set(n.kA.interestOptions,l)),{footerLink:{text:i,navigationUrl:e},paginationData:!d&&this.shouldRenderPagination(o,t)?{currentPageIndex:a,onFlipperClick:(t,i)=>{var e,n;null===(e=(n=this.transformerProvider).paginationFlipperClickHandler)||void 0===e||e.call(n,t,i)},onDotClick:(i,e)=>{var n,r;if(!this.isPaginationSwitchingTabs(t))return void(null===(n=(r=this.transformerProvider).paginationDotClickHandler)||void 0===n||n.call(r,i));const o=l[i].id;var a,d;s!==o&&(null===(a=(d=this.transformerProvider).interestMenuItemClickEntityHandler)||void 0===a||a.call(d,l[i]))},pageCount:o}:void 0,telemetryHeadlines:{footerLink:i},isWidgetRegion:r}}getFooterNavigationUrl(t){const i=(0,v.bw)(t);let e="";if(e=i.footerClickThroughUrl?(0,v.Ot)(i.footerClickThroughUrl):this.getSeeMoreUrl(t),(0,v.F_)(this.currentTabType)){const{video:i}=(0,v.p6)(t);i&&(e=(0,v._S)(i,e))}return e}shouldRenderPagination(t,i){var e;return!this.shouldHidePaginationExploration(i)&&(!!this.isPaginationSwitchingTabs(i)||!(0,v.Hn)(null===(e=(0,v.wB)(i))||void 0===e||null===(e=e.Model)||void 0===e?void 0:e.SuppressTabControl)&&t>1)}shouldHidePaginationExploration(t){const i=(0,v.bw)(t);return!(!(0,v.VQ)(null==i?void 0:i.tabType)||t.get(n.kA.isExplorationCard))}getPaginationPageCount(t){var i;if(this.isPaginationSwitchingTabs(t))return this.getInterestMenuItems(t).length;return(null===(i=(0,v.wB)(t).Model)||void 0===i?void 0:i.Tabs.length)||1}getCurrentPageIndex(t){if(this.isPaginationSwitchingTabs(t)){const i=this.getInterestMenuItems(t),e=t.get(n.kA.currentTabEntityId);return i.findIndex(t=>t.id===e)+1}return(0,v.sP)(t)}isPaginationSwitchingTabs(t){const i=(0,v.bw)(t);return!!(0,v.VQ)(null==i?void 0:i.tabType)||this.transformerProvider.config.enableFlipper&&this.cardSize!==r.uE._1x_1y}getHeaderTitle(t){var i;const e=(0,v.bw)(t);return e&&(0,v.VQ)(e.tabType)?this.transformerProvider.strings.widgetHeader:(null==e||null===(i=e.tabContent)||void 0===i?void 0:i.titleText)||(null==e?void 0:e.primaryEntityName)||this.transformerProvider.strings.widgetHeader}getEntityName(t){return(0,v.bw)(t).primaryEntityName||""}getSeeMoreUrl(t){var i;const e=(0,v.bw)(t);if(null!==(i=e.clickThroughUrl)&&void 0!==i&&i.startsWith("http"))return e.clickThroughUrl;const n=(0,v.Ot)(e.clickThroughUrl);return(0,v.VQ)(e.tabType)||(0,v.lb)(e.tabType)||(0,v.F_)(e.tabType)?(0,v.EZ)(n,{src:"fre"}):n}getSeeMoreText(t){var i;const{seeMoreSports:e,eventBriefFooterText:s}=this.transformerProvider.strings,r=(0,v.bw)(t);return r.tabType===n.v1.EventBrief?s:(null==r||null===(i=r.tabContent)||void 0===i?void 0:i.footerText)||(0,b.GP)(e,this.getEntityName(t))}toggleMoneyInfoCardActions(t){if(this.transformerProvider.supportedSdCardActionMenuItems){var i,e;const n={menuItems:this.defaultWidgetsMenuItems,referrerButton:t.currentTarget,requestContext:new d.bb,cardSize:this.cardSize};null===(i=(e=this.transformerProvider).sdCardActionClickHandler)||void 0===i||i.call(e,n,"SportsMatch")}}isWidget(){var t;return(null===(t=this.defaultWidgetsMenuItems)||void 0===t?void 0:t.length)>0}}},49704:function(t){t.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4.5 13h11a.5.5 0 00.42-.78L13.1 8l2.82-4.22A.5.5 0 0015.5 3H4a.5.5 0 00-.5.5v14a.5.5 0 001 0V13zm0-1V4h10.07l-2.49 3.72a.5.5 0 000 .56L14.57 12H4.5z"></path></svg>'},65196:function(t,i,e){"use strict";e.d(i,{FJ:function(){return o},NQ:function(){return a},Sr:function(){return d},aU:function(){return r},br:function(){return l},cg:function(){return h},gd:function(){return s}});var n=e(55593);const s="__rubyOptOut",r="__rubyOptOutCoachmark",o="__rubyOptInCoachmark",a=()=>{const t=(0,n.a)(),i="vp"===(null==t?void 0:t.get("reqsrc"));return{isVPT:i,enableCoachmarkVPT:i&&"1"===(null==t?void 0:t.get("enableRubyCoachmark")),disableCoachmarkVPT:i&&"1"!==(null==t?void 0:t.get("enableRubyCoachmark")),disableRubyVPT:i&&"1"===(null==t?void 0:t.get("disableRuby"))}},l="__rubyReloadTimes",d=2,h=2e4},66784:function(t,i,e){"use strict";e.d(i,{h:function(){return s}});var n=e(63150);function s(){return(0,n.oh)()}},73271:function(t,i,e){"use strict";e.d(i,{Fr:function(){return h},Kg:function(){return n},M_:function(){return p},Oc:function(){return v},TF:function(){return a},YV:function(){return o},Z6:function(){return d},aV:function(){return l},bc:function(){return g},kS:function(){return s},le:function(){return u},tD:function(){return r},vr:function(){return c}});const n="14px",s="12px",r="10px",o="16px",a="20px",l="24px",d="20px",h="16px",c="22px",u="24px",v="28px",g="32px",p="600"},76864:function(t,i,e){"use strict";e.d(i,{csResponsiveList:function(){return B}});var n=e(89580),s=e(48751),r=e(4283),o=e(74089),a=e(4968),l=e(74849),d=e(22131),h=e(4126),c=e(73271);const u=l.A` .container{display:grid;grid-template-columns:1fr 1fr}.articleContent{height:max-content}`,v=l.A`
.articleHeadingInfo:hover .articleTitle{text-decoration:underline}`,g=l.A` .articleTitle{font-size:${n.Y};
        line-height: ${n.v};-webkit-line-clamp:3}cs-attribution{margin-bottom:6px}`,p=l.A` .articleContent.selected{background:#EBEBEB}.articleContent:hover{background:#F5F5F5}.articleContent:active{background:#E0E0E0}@media (prefers-color-scheme:dark){.articleContent.selected{background:#383838}.articleContent:hover{background:#3D3D3D}.articleContent:active{background:#1F1F1F}}`,m=l.A`
.articleContent:hover{background:rgba(255,255,255,0.06)}.articleContent.selected{background:#26292E}`,f=l.A`
.container{height:100%}.articleContent{border-radius:8px;color:${s.l};display:grid;gap:12px;grid-template-columns:auto var(--responsive-list-image-size,20.9%);height:33.33%;overflow:hidden;text-decoration:none;padding:0px 16px}a.articleContent:focus-visible{outline-offset:-1px}.articleContent.noImage{grid-template-columns:auto}.articleContent.selected{background:#F6F9FC}a{${a.f}}.articleContent:hover{background:rgba(0,0,0,0.04)}.articleHeadingInfo{height:fit-content;margin:auto 0px;min-height:60px;overflow:hidden}cs-attribution{display:flex;margin-bottom:4px;max-width:100%}cs-attribution::part(content){color:var(--content-color,${s.l})}cs-attribution .attribution-image{height:16px;width:16px}cs-attribution .divider{padding-inline-end:1px}cs-attribution .time{margin-inline-start:2px;unicode-bidi:embed}cs-attribution .webContentIcon{filter:invert(var(--iconInvert,0));margin:0px 2px;opacity:0.5;vertical-align:bottom}.articleTag{padding:1px 4px 3px;white-space:nowrap;border-radius:6px;background:${r.IR};
    color: ${o.l_}}.articleTag.breaking{background:#E10303}.articleTitle{display:-webkit-box;font-size:${c.Kg};
    font-weight: 600;
    line-height: ${c.Z6};
    overflow: hidden;
    -webkit-line-clamp: var(--responsive-list-title-lineheight, 2);
    -webkit-box-orient: vertical;
}

.articleImageContainer {
    display: flex;
    position: relative;
    align-items: center;
    justify-content: center;
}

.articleImage {
    aspect-ratio: 1/1;
    border-radius: 8px;
    margin: auto;
    max-width: 72px;
    width: 100%;
    object-fit: var(--responsive-list-image-object-fit, unset);
}

.articleContent.oneItemList {
    height: 100%;
}

.articleContent.twoItemList {
    --responsive-list-image-size: 35.8%;
    height: 50%;
}

.twoItemList .articleHeadingInfo {
    min-height: 92px;
}

.twoItemList .articleTitle {
    --responsive-list-title-lineheight: 3;
}

.twoItemList .articleImage {
    max-width: 116px;
}

.playIndicator {
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, .2);
    border-radius: 50%;
    display: flex;
    padding: 5px;
    position: absolute;
}

.playIndicator img {
    filter: invert(1);
    width: 14px;
}

@container (width < 300px) {
    .articleHeadingInfo {
        min-height: min-content;
    }

    .articleTitle {
        --responsive-list-title-lineheight: 1;
    }
}
`.withBehaviors((0,d.G2)(m),new h.o("horizontalMode",!0,u),new h.o("useSubtleControlColors",!0,p),new h.o("useSubtleItemSize",!0,g),new h.o("underlineTitle",!0,v));var w=e(96950),b=e(91640),y=e(39957),T=e(14475),S=e(60402),C=e(79765),k=e(17254);const I=`${(0,k.rA)().StaticsUrl}/latest/fluent-icons/globe_16_regular.svg`,x=w.qy`<cs-attribution>${(0,b.z)(t=>t.attrBadge,w.qy`<span class="articleTag ${t=>{var i;return null===(i=t.attrBadge)||void 0===i?void 0:i.type}}" slot="image">${t=>{var i,e;return(null===(i=t.attrBadge)||void 0===i?void 0:i.localizedLabel)||(null===(e=t.attrBadge)||void 0===e?void 0:e.value)}}</span>`)} ${(0,b.z)(t=>{var i;return null===(i=t.providerData)||void 0===i?void 0:i.logoImage},w.qy`<img alt="${t=>{var i;return null===(i=t.providerData)||void 0===i?void 0:i.name}}" aria-hidden="true" class="attribution-image" decoding="${t=>t.enableLazyImage?"async":""}" loading="${t=>t.enableLazyImage?"lazy":""}" part="image" slot="image" src="${t=>{var i;return null===(i=t.providerData)||void 0===i?void 0:i.logoImage}}" title="${t=>{var i;return null===(i=t.providerData)||void 0===i?void 0:i.name}}" @load=${t=>t.visualReadinessCallback&&t.visualReadinessCallback(1,C.j.provider)} />`)} ${(0,b.z)(t=>t.providerData&&t.providerData.name,w.qy`<span style="unicode-bidi: embed;" class="attribution-text" title="${t=>{var i;return null===(i=t.providerData)||void 0===i?void 0:i.name}}">${t=>{var i;return null===(i=t.providerData)||void 0===i?void 0:i.name}}</span>`)} ${(0,b.z)(t=>t.isWebContent&&!t.metadata.videoMetadata,w.qy`<img class="webContentIcon" src="${I}">`)} ${(0,b.z)(t=>t.publishedDateTime,w.qy`<span aria-hidden="true" class="divider" focusable="false"></span><span class="time">${t=>t.publishedDateTime}</span>`)}</cs-attribution>`,$=w.qy`<span class="playIndicator"><img aria-hidden="true" role="presentation" src="${(0,k.rA)().StaticsUrl}/latest/fluent-icons/play_16_filled.svg"></img></span>`,M=w.qy`<div class="articleImageContainer"><img class="articleImage" part="articleImage" src=${(t,i)=>{var e;return t.imageData?i.parent.getScaledListItemImage(t.imageData.source,null===(e=t.imageData)||void 0===e?void 0:e.options):""}} alt=${t=>{var i;return(null===(i=t.imageData)||void 0===i?void 0:i.altText)??""}}>${(0,b.z)((t,i)=>{var e;return(null===(e=i.parent.contentList)||void 0===e?void 0:e.length)>1&&"video"==t.contentType},$)}</div>`,D=w.qy`<a part="listContent" class=${(t,i)=>{var e;return((t,i,e)=>{let n="articleContent";return 1===t&&(n+=" oneItemList"),2===t&&(n+=" twoItemList"),i||(n+=" noImage"),e&&(n+=" selected"),n})(null===(e=i.parent.contentList)||void 0===e?void 0:e.length,!!t.imageData,t.selected||!1)}} href=${t=>t.destinationUrl} target="${(t,i)=>((t,i)=>i?T.z._self:t.openLinksInNewTab?T.z._blank:t.defaultAnchorTarget||T.z._self)(t,i.parent.config.enableOpenContentInSelf)}" title=${t=>t.title} data-t="${t=>{var i;return null===(i=t.telemetryContext)||void 0===i||null===(i=i.destination)||void 0===i?void 0:i.getMetadataTag()}}" @click="${(t,i)=>i.parent.clickHandler(t,i)}"><div class="articleHeadingInfo" part="listContentInfo">${()=>x}<span class="articleTitle" ${(0,S.K)("articleContentRef")}>${t=>t.title}</span></div>${(0,b.z)(t=>t.imageData,M)}</a>`,P=w.qy`<div class="container" data-t="${t=>{var i;return null===(i=t.listContainerTelemetry)||void 0===i?void 0:i.getMetadataTag()}}">${(0,b.z)(t=>null==t?void 0:t.contentList,w.qy` ${(0,y.ux)(t=>t.contentList,D,{positioning:!0})} `)}</div>`;var E=e(56911),R=e(92011),H=e(60815),z=e(38493),V=e(51600),F=e(37416),O=e(83003);class L extends R.L{connectedCallback(){this.config=F.D.getConfig(),this.underlineTitle=this.contentList&&this.contentList[0]&&this.contentList[0].underlineTitle,super.connectedCallback()}getScaledListItemImage(t,i){const e={width:100,height:100,enableDpiScaling:!1,...i};return(0,V.oQ)(t,e)}clickHandler(t,i){return t.useMobile&&!t.isMsnMobile?(t.mobileCardClickCallback(i.event,O.pL.Article,t,"article card"),!1):(t.contentClickCallback&&t.contentClickCallback(t,i),!0)}}(0,E.Cg)([H.sH],L.prototype,"contentList",void 0),(0,E.Cg)([H.sH],L.prototype,"listContainerTelemetry",void 0),(0,E.Cg)([(0,z.CF)({attribute:"horizontal-mode",mode:"boolean"})],L.prototype,"horizontalMode",void 0),(0,E.Cg)([(0,z.CF)({attribute:"use-subtle-control-colors",mode:"boolean"})],L.prototype,"useSubtleControlColors",void 0),(0,E.Cg)([(0,z.CF)({attribute:"use-subtle-item-size",mode:"boolean"})],L.prototype,"useSubtleItemSize",void 0),(0,E.Cg)([(0,z.CF)({attribute:"underline-title",mode:"boolean"})],L.prototype,"underlineTitle",void 0);const B=L.compose({name:"responsive-list",styles:f,template:P})},79765:function(t,i,e){"use strict";var n;e.d(i,{j:function(){return n}}),function(t){t.image="image",t.provider="provider",t.socialBar="socialBar"}(n||(n={}))},92337:function(t,i,e){"use strict";e.d(i,{gx:function(){return z},tb:function(){return B},Qm:function(){return _},Ds:function(){return L},Yd:function(){return A},Gf:function(){return H},nc:function(){return q},mN:function(){return j},EM:function(){return N},m7:function(){return U}});var n=e(90429),s=e(93468),r=e(65022),o=e(30817),a=e(75874),l=e(11372),d=e(98216),h=e(48114),c=e(17254),u=e(59721),v=e(55593),g=e(89980),p=e(5419),m=e(72317),f=e(36903);const w={small:.5,medium:1,large:1.5};var b=e(49704),y=e.n(b),T=e(47149),S=e(25752);const C="thirdPartyBackingAppUninstallBanner";const k=new class{constructor(){var t,i;this.widgetModelApi=window.__com_microsoft_dsh_widgetModelApiFactory,this.is1PBackingAppInstalled=!0,this.isUninstallFeatureEnabled=!1;const e=null===(t=this.widgetModelApi)||void 0===t?void 0:t.tryGetApi("velocity",S.XF,S.XF);this.packageStateApi=null===(i=this.widgetModelApi)||void 0===i?void 0:i.tryGetApi("packagestate",S.XF,S.XF),this.isUninstallFeatureEnabled=e&&e.isFeatureEnabled("Feature_DMAEdgeUninstall")}addListenerToPackageState(t){var i;try{null===(i=this.packageStateApi)||void 0===i||i.addEventListener(t)}catch(t){d.YT.sendAppErrorEvent(Object.assign(Object.assign({},r.rs0),{message:"Error using windows package API to add event listener for package state changes",pb:Object.assign(Object.assign({},r.rs0.pb),{customMessage:t,addListener:!0})}))}}removeListenerToPackageState(t){var i;try{null===(i=this.packageStateApi)||void 0===i||i.removeEventListener(t)}catch(t){d.YT.sendAppErrorEvent(Object.assign(Object.assign({},r.rs0),{message:"Error using windows package API to remove event listener for package state changes",pb:Object.assign(Object.assign({},r.rs0.pb),{customMessage:t,addListener:!1})}))}}async isBackingAppInstalled(t){if(this.packageStateApi&&this.isUninstallFeatureEnabled)try{return await this.packageStateApi.isPackageInstalled(t)}catch(t){d.YT.sendAppErrorEvent(Object.assign(Object.assign({},r.rs0),{message:"Error Calling Windows API to get Package Install State for Edge",pb:Object.assign(Object.assign({},r.rs0.pb),{customMessage:t,addListener:!1})}))}return!0}isBackingAppInstalledFor1P(){return this.is1PBackingAppInstalled}getThirdPartyBannerStatus(){return"1"===(0,g.Lg)().getItem(C)}setThirdPartyBannerStatus(t){return(0,g.Lg)().setItem(C,t)}async fetch1PBackingAppStatus(){this.is1PBackingAppInstalled=await this.isBackingAppInstalled("Microsoft.MicrosoftEdge.Stable_8wekyb3d8bbwe")}};var I=e(88296);var x=e(87514),$=e(65196);let M,D,P;const E=`${c.T3.StaticsUrl}latest/icons-wc/icons`,R={Bullet:{lightMode:`${E}/Bullet.svg`,darkMode:`${E}/dark-mode/Bullet.svg`},Edit:{lightMode:`${E}/Edit.svg`,darkMode:`${E}/dark-mode/Edit.svg`},HideV2:{lightMode:`${E}/HideV2.svg`,darkMode:`${E}/dark-mode/HideV2.svg`},PinnedSV2:{lightMode:`${E}/PinnedSV2.svg`,darkMode:`${E}/dark-mode/PinnedSV2.svg`},UnpinSV2:{lightMode:`${E}/UnpinSV2.svg`,darkMode:`${E}/dark-mode/UnpinSV2.svg`},RemoveWBWidget:{lightMode:`${E}/RemoveWBWidget.svg`,darkMode:`${E}/dark-mode/RemoveWBWidget.svg`},ReportIssue:y(),Switch:{lightMode:`${E}/Switch.svg`,darkMode:`${E}/dark-mode/Switch.svg`},AlertOff:{lightMode:`${E}/AlertOff.svg`,darkMode:`${E}/dark-mode/AlertOff.svg`},Settings:{lightMode:`${E}/SettingIcon.svg`,darkMode:`${E}/dark-mode/SettingIcon.svg`}};function H(t,i,e,n,s,r,o,d,u){const v=[];let g=0,p=!1;if(!t||!t.length)return;const w=h.F_.get(3),b=t.includes("unpin");P=b?"pinned":"feed",M=e||{},D=n;const y=(0,a.ad)();let T;const S=(0,f.Wu)(),C=(0,m.by)(S)&&m.EV.isWidgetHeaderUpdatesEnabled()?w.removeWidget||"Remove widget":w.unpinCard||"Unpin widget",k=(0,m.by)(S)&&m.EV.isWidgetHeaderUpdatesEnabled()?R.RemoveWBWidget:R.UnpinSV2;if(t.forEach(t=>{switch(t){case"small":g++,M.height=146,v.push({id:"small",glyphUrls:s===t?R.Bullet:void 0,title:w.small||"Small",ariaLabel:w.small||"Small",telemetryTag:O("size_small",w.small,l.MS.Customize),checked:s===t,role:"menuitemradio"});break;case"medium":g++,M.height=304,v.push({id:"medium",glyphUrls:s===t?R.Bullet:void 0,title:w.medium||"Medium",ariaLabel:w.medium||"Medium",telemetryTag:O("size_medium",w.medium,l.MS.Customize),checked:s===t,role:"menuitemradio"});break;case"large":g++,M.height=462,v.push({id:"large",glyphUrls:s===t?R.Bullet:void 0,title:w.large||"Large",ariaLabel:w.large||"Large",telemetryTag:O("size_large",w.large,l.MS.Customize),checked:s===t,role:"menuitemradio"});break;case"switchTaskBarView":g++,v.push({id:"switchTaskBarView",glyphUrls:R.Switch,title:w.switchBackToWeather||"Switch back to weather",ariaLabel:w.switchBackToWeather||"Switch back to weather",telemetryTag:O("moneycardcustomizationswitchback",w.switchBackToWeather,l.MS.Hide),onClick:u?()=>u():void 0});break;case"pin":v.push({id:"pinCard",glyphUrls:R.PinnedSV2,title:w.pinCard||"Pin widget",ariaLabel:w.pinCard||"Pin widget",telemetryTag:O("pinwidget",w.pinCard,l.MS.Pin)});break;case"customize":p=!0,g>1&&(null==v?void 0:v.length)>0&&v.push({isDivider:!0}),v.push({id:"customize",glyphUrls:R.Edit,title:w.customize||"Customize widget",ariaLabel:w.customize||"Customize widget",onClick:()=>r("onShowSettingsEnd"),telemetryTag:O("editwidget",w.customize,l.MS.Customize)});break;case"unpin":!p&&g>1&&(null==v?void 0:v.length)>0&&v.push({isDivider:!0}),v.push({id:"unpinCard",glyphUrls:k,title:C,ariaLabel:C,telemetryTag:O("unpinwidget",w.unpinCard,l.MS.Unpin)});break;case"poweredBy":(0,x.Cr)().then(t=>{const e=c.T3&&c.T3.CurrentRequestTargetScope&&c.T3.CurrentRequestTargetScope.pageExperiments||[];T=e.includes("prg-pr2-newbrand")?t?i:w.signedInByMSN||"Signed in by MSN":t?i:w.signedInByMicrosoftStart||"Signed in by MSN",(null==v?void 0:v.length)>0&&v.push({isDivider:!0}),v.push({id:"poweredBy",isText:!0,title:T,ariaLabel:T})});break;case"removeWidget":v.push({id:"removeWidget",glyphUrls:R.HideV2,title:w.hideWidget,ariaLabel:w.hideWidget,telemetryTag:O("removewidget",w.hideWidget,l.MS.Hide)});break;case"reportIssue":v.push({id:"reportIssue",glyph:R.ReportIssue,title:w.reportIssue,ariaLabel:w.reportIssue,telemetryTag:O("reportIssue",w.reportIssue,l.MS.Report)});break;case"muteNotification":v.push({id:"muteNotification",glyphUrls:R.AlertOff,title:w.muteNotification,ariaLabel:w.muteNotification,telemetryTag:O("mutenotification",w.muteNotification,l.MS.Mute)});break;case"notificationSettings":v.push({id:"notificationSettings",glyphUrls:R.Settings,title:w.notificationSettings,ariaLabel:w.notificationSettings,telemetryTag:O("notificationsettings",w.notificationSettings,l.MS.Customize)})}}),y){if(o&&o.length){o.push({isDivider:!0});const t=v.findIndex(t=>t.id===(b?"customize":"removeWidget"));v.splice(t,0,...o)}if(d&&d.length&&b){const t=v.findIndex(t=>"customize"===t.id);v.splice(t,1,...d)}}return v}var z,V,F;function O(t,i,e){if(a.ZU.getPolicyCompliance(3)&&"editwidget"!==t&&!(0,f.lb)())return;return new T.$({name:`${D}>customization_${t}`,type:l.MJ.ActionButton,action:l.EG.Click,behavior:e,zone:P,content:{headline:i,type:l.b5.StructuredData,vertical:D,category:D},destinationUrl:location.href,ext:M}).getMetadataTag()}function L(t){switch(t){case"_1x_1y":case"half":return"small";case"_1x_3y":case"tall":return"large";default:return"medium"}}function B(t,i,e){t&&(i&&e&&i(new CustomEvent("CardResized",{detail:{cardType:e,size:"medium"}})),t.style.zIndex=u.P.Above.toString(),t.style.height="304px")}function U(t,i,e,n){t&&(i&&e&&i(new CustomEvent("CardResized",{detail:{cardType:e,size:"small"}})),t.style.zIndex="",t.style.height="")}!function(t){t.Customize="customize",t.Large="large",t.Medium="medium",t.MuteNotification="muteNotification",t.NotificationSettings="notificationSettings",t.Pin="pin",t.PoweredBy="poweredBy",t.RemoveWidget="removeWidget",t.ReportIssue="reportIssue",t.Small="small",t.SwitchTaskBarView="switchTaskBarView",t.Unpin="unpin"}(z||(z={})),function(t){t.HOME="home",t.CONSUMPTION="consumption"}(V||(V={})),function(t){t.OnIdentityChanged="onIdentityChanged",t.SyncMuid="syncMUID",t.PcsReload="pcsReload",t.FlightChange="flightChange",t.BuildVersionChanged="buildVersionChanged",t.StalePage="stalePage",t.Undefined="undefinedReason"}(F||(F={}));function A(t,i,e){if(e)return"spotlight";if(t)return"pinned";if("startfeed"!==(null===(n=c.T3.CurrentRequestTargetScope)||void 0===n?void 0:n.pageType)&&"1.0"!==h.F_.get(12))return"feed";var n;return(h.F_.get(6)||[]).find(t=>t===i||t.startsWith("3pwidget")&&t.substring(9)===i)?"pinned":"feed"}async function _(t,i,e,o,l,d,c,u,g,p,w){let b;e||(e={ocid:"winp2",pageScenario:"dashboard4",duotone:!0,flightData:"prg-bngimg-t,1s-brcolors,prg-rctns_v1,prg-1sw-diswgt",muidFallback:!0,isXfeed:!0});const y=[],T={},C=h.F_.get(22),x=h.F_.get(12),$="3.0"===x||"2.0"===x;if(C&&!$&&C.forEach(t=>y.push(t)),t){const i=t.tryGetApi("geolocation",S.XF,S.XF);i&&await i.initialize();const e=t.tryGetApi("model",S.XF,S.XF),o=t.tryGetApi("widgetpinning",S.XF,S.XF),a=[];a.push(i?i.getLocation():Promise.resolve(void 0)),a.push(!e||C||$?Promise.resolve(void 0):e.getWidgetRegistrations());const l=o&&"function"==typeof o.isMigrationCompleteAsync;a.push(l?o.isMigrationCompleteAsync("pinned"):Promise.resolve(void 0)),a.push(l?o.isMigrationCompleteAsync("Muted"):Promise.resolve(void 0));const d=o&&"function"==typeof o.getUserSettingsAsync;let h,c,u,v,g;a.push(d?o.getUserSettingsAsync("pinned"):Promise.resolve(void 0)),a.push(d?o.getUserSettingsAsync("Muted"):Promise.resolve(void 0));const p=await Promise.allSettled(a);if([b,h,c,v,u,g]=p.map(t=>"fulfilled"===(null==t?void 0:t.status)?t.value:void 0),h){const t=Object.keys(n.Ml);h.forEach(i=>{const e=t.find(t=>n.Ml[t]&&n.Ml[t].widgetId===i.id);y.push(e||i.id)})}if(c)if(u&&u.length){const t=new Set(y),i=[];for(const e of u.split("|")){const n=e.split(",")[0];t.has(n)&&(i.push(e),t.delete(n))}T.Widgets=[...i,...t].join("|")}else T.Widgets=`${y.join("|")}`;if((v||(null==g?void 0:g.length)>=0)&&(T.Muted=g),u&&u.length>0&&0===c){const t=new URLSearchParams(window.location.href),i=t&&t.get("aver")||void 0;(0,s.vV)(r.IKI,"API returning incorrect pin migration state.",void 0,Object.assign(Object.assign({},r.IKI.pb),{isPinMigrationComplete:c,pinnedPreferences:u,muteMigrationUpercaseMuteKey:v,mutePreferences:g,appVersion:i}))}const m=t.tryGetApi("velocity",S.XF,S.XF);(null==m?void 0:m.isFeatureEnabled("Feature_AEPEvolvedNotifications"))&&(T.Velocity="48064775")}const M=h.F_.get(1)?"dark":"light";let D;const P=(0,I.TU)().currentColumnArrangement.toUpperCase();D="2.0"===x||"1.0"===x||"3.0"===x?function(t){switch(t.toLowerCase()){case"c4":return"C3";case"c3":return"C2";case"c2":case"c1":return"C1";default:return(0,s.vV)(r.yrQ,"Error in updating layout for rail model",`current layout: ${t}`),t}}(P):h.F_.get(14)?P:void 0;const E=window?`${window.innerWidth}x${window.innerHeight}`:void 0,R=!k.isBackingAppInstalledFor1P(),H=m.EV.getFeedRegistrations(),z=H&&0==H.length,V=!m.EV.containsStartFeed()&&!(0,f.J9)(),F=!(0,a.J_)(),O=!(0,a.$5)(),L="1"===(0,v.a)().get("disable3P"),B="1"===(0,v.a)().get("defaultWidgets"),U=e.sendFRESeenCount?e.sendFRESeenCount:u,A=e.enableFREOverlayMyFeed?e.enableFREOverlayMyFeed:g;return Object.assign(Object.assign({},e),{installedWidgets:y,geolocation:b,layout:D,theme:M,clientLayoutVersion:x,nextPageUrl:o,refreshType:i,refreshCnt:l,timeoutMs:d,viewportSize:E,additionalHeaders:T,doNotTriggerFREInSession:c,isEdgeUninstalled:R,allFeedsDisabled:z,firstPartyFeedDisabled:V,rotationDisabled:F,badgingDisabled:O,disable3P:L,defaultWidgets:B,sendFRESeenCount:U,enableFREOverlayMyFeed:A,enableRuby:!!p,msnup:w})}class W{constructor(){this.ttvrRowCount=3,this.getWaterfallCardRow=t=>{const i=n.yS[null==t?void 0:t.height];return w[i]||1},this.getTemplateCardRow=t=>{const i=n.WA[null==t?void 0:t.layoutTemplate];return w[i]||1};const t=(0,o.ZF)();this.ttvrRowCount=W.getTtvrRowCountByHeight(),t.ttvrRowCount=this.ttvrRowCount}}function j(t){var i,e;let n=!0;const s=function(){var t,i;if("undefined"!=typeof URLSearchParams){const e=(0,f.J9)()?"hver":"aver",n=null===(i=new URLSearchParams(null===(t=window.location)||void 0===t?void 0:t.search))||void 0===i?void 0:i.get(e);if(n)return{version:n,versionArr:n.split(".").map(t=>t.trim())}}return}();if((null===(i=null==s?void 0:s.versionArr)||void 0===i?void 0:i.length)>=3){const t=s.versionArr[0];n=!(3===t.length&&(t.startsWith("52")||t.startsWith("62"))&&"0"===s.versionArr[2])}return t?t("widgetsIsRetail",n?"1":"0"):null===(e=null===d.YT||void 0===d.YT?void 0:d.YT.addOrUpdateTmplProperty)||void 0===e||e.call(d.YT,"widgetsIsRetail",n?"1":"0"),n}function N(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var e,n,s;const r=["feedback-hub://?contextid=1214&tabid=2"],o=null===(e=null===d.YT||void 0===d.YT?void 0:d.YT.getPageMetadata)||void 0===e?void 0:e.call(d.YT),a=null===(s=null===(n=null==o?void 0:o.contract)||void 0===n?void 0:n.page)||void 0===s?void 0:s.name;for(const t of["muid","rid","debugId","flights","pageName"]){if("pageName"===t&&a)continue;const i=(0,g.Lg)().getItem(`mee-${t}`);i&&r.push(`&${t}=${i}`)}if(a&&r.push(`&pageName=${a}`),t&&(r.push("&WidgetBoard=true"),i)){const t="1"===(0,g.Lg)().getItem($.gd);r.push("&rubyOptOut="+(t?"1":"0"))}window.dispatchEvent(new CustomEvent("FeedbackClicked")),window.location.href=r.join("")}W.getTtvrRowCountByHeight=()=>{const t=window.outerHeight||document.documentElement.clientHeight;return t<=596?1:t<=912?2:3};const X="widgets-internal-user-state";function q(){try{const t=(0,p.t)();t&&(0,g.Lg)().setItem(X,"1");const i="1"===(0,g.Lg)().getItem(X);return t||i}catch(t){return!1}}}}]);