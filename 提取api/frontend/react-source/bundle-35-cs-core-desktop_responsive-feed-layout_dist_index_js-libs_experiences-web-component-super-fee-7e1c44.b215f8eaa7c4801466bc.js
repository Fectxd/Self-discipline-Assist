"use strict";(self.homePageWebpackChunks=self.homePageWebpackChunks||[]).push([["cs-core-desktop_responsive-feed-layout_dist_index_js-libs_experiences-web-component-super-fee-7e1c44"],{10291:function(t,i,e){e.d(i,{Be:function(){return s},WI:function(){return o},h:function(){return n},y3:function(){return r}});const s="TTSR.FirstSection",n=12,r=304,o=.08},13294:function(t,i,e){e.d(i,{KU:function(){return h},LY:function(){return c},_u:function(){return u},vB:function(){return l}});var s=e(63610);const n=3600,r=120,o=new RegExp("\\:([\\d]{2})");function a(){return new Date}function h(t){return(a().getTime()-t.getTime())/1e3}function d(t,i){return new Date(t.getFullYear(),t.getMonth(),t.getDate()+i,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function c(t,i){return new Date(t.valueOf()+60*i*60*1e3)}function u(t,i){const e=parseInt(i),s=parseInt(o.exec(i)[1]),n=e<0?-1:1,r=new Date(t.getTime()+60*(60*e+n*s)*1e3),a=`0${Math.abs(e)}`.substr(-2)+":"+`0${Math.abs(s)}`.substr(-2);return r.toISOString().replace("Z",(n<0?"-":"+")+a)}function l(t){const i=h(t),e=function(){const t=a();return t.setHours(0,0,0,0),t}(),o=d(e,-1),c=d(e,-6),u=function(){const t=a();return new Date(t.getFullYear(),0,0,0,0,0,0)}();return i>=-3300&&i<-60?s.H.InMinutes:i<0?s.H.None:i<r?s.H.JustNow:i<n?s.H.LessThanOneHour:t>=e?s.H.Today:t>=o?s.H.Yesterday:t>=c?s.H.ThisWeek:t>=u?s.H.ThisYear:s.H.FullDate}},25579:function(t,i,e){e.d(i,{BD:function(){return _}});var s=e(56911),n=e(10291),r=e(92011),o=e(96950),a=e(60815),h=e(38493),d=e(11177),c=e(70177),u=e(13312),l=e(77246),v=e(13053),f=e(12870),p=e(34491),m=e(98216);class w extends r.L{constructor(){super(...arguments),this.columns=[],this.renderingMode="column",this.enableMonitor=!1,this.id="0",this.childTemplateSizeMap=void 0,this.i=0,this.u=0,this.sentinelHeight=1,this.disabledKeyListeners=[],this.l=!1,this.v="div[waterfall-col]",this.domrenderedFired=!1,this.rowChangeTrackedOnce=!1,this.p=()=>{if(this.shadowRoot){let t=0;const i=[d.rY,d.sx,d.zN,d.YK,d.t9],e=this.clientHeight,s=this.clientWidth,r=this.clientHeight/(n.y3+n.h)|0,o=Array.from(this.shadowRoot.children),a=o.filter(t=>t.tagName.toLowerCase()!==this.sectionTrackerTag),h=a.some(t=>["SHOPPING-CARD-WC","BOOST-AD-CARD","SHOPPING-GROUPED-CAROUSEL"].includes(t.tagName)||""==t.getAttribute("auto-sized")),c=a.length-r,u=a.map(t=>t.clientWidth*(t.clientHeight+n.h));u.forEach(i=>t+=i);const l=e*s,f=l-t-n.h*c*n.y3-n.h*n.h*c;if(this.onBlankMonitorResult&&l&&!h&&i.indexOf(s)>-1){const t=Math.abs(f)>l*n.WI;if(t){if(this.u<2)return this.u++,this.i++,void(0,v.D)(()=>this.p(),2500);this.onBlankMonitorResult({result:t,threshold:n.WI,delta:f,cardAreas:u,cardTypes:o.map(t=>`${t.tagName}.${t.id}`),feedHeight:e,feedWidth:s,actualWidth:this.getBoundingClientRect().width,id:this.componentId})}}this.i--,this.u=0}}}connectedCallback(){const t=(0,l.S)()?this.getAttribute("id"):void 0;performance.mark("responsiveLayoutStart_"+(t||this.componentId)),super.connectedCallback(),(0,v.D)(()=>this.__setupRowMutationObserver(),0),this.setupContentSeenTracking()}afterDOMRendered(){(0,l.S)()&&!this.domrenderedFired&&(this.domrenderedFired=!0,(0,c._Z)(this).then(()=>{window.requestAnimationFrame(()=>{performance.mark("responsiveLayoutEnd_"+this.componentId),performance.measure("responsiveLayoutRendering",{start:"responsiveLayoutStart_"+this.componentId,end:"responsiveLayoutEnd_"+this.componentId,detail:{id:this.componentId}}),performance.measure("TTFR",{start:"TTFR.start",end:"responsiveLayoutEnd_"+this.componentId})})}))}selectTemplate(t){if(null==t||!t.childTemplateType||!this.childTemplateMap)return;let i=this.childTemplateMap[t.childTemplateType];return this.m(t.childTemplateType)||(i=this.C(t)),"native-ad-card"===(null==t?void 0:t.childTemplateType)&&null!=t&&t.videoProps&&"row"===this.renderingMode&&(i=this.T(t)),i}C(t){var i;if(null==t||!t.childTemplateType||!this.childTemplateMap)return;let e=t.childTemplateType!=t.id?this.childTemplateMap[t.id]:void 0;const s="column"===this.renderingMode&&(null===(i=this.childTemplateSizeMap)||void 0===i?void 0:i[t.id])!==(null==t?void 0:t.cardSize);return(!e||null!=t&&t.colSpan||s)&&(e=o.qy`
                <cs-responsive-card
                    ?auto-sized="${i=>Boolean(null==t?void 0:t.colSpan)}"
                    ?waterfall=${!0}
                    no-content
                    ?outside-content="${i=>this.M(t.childTemplateType)}"
                    id="${i=>null==t?void 0:t.id}"
                    size="${i=>null==t?void 0:t.cardSize}"
                >
                    ${this.childTemplateMap[t.childTemplateType]}
                </cs-responsive-card>
            `,this.childTemplateMap[t.id]=e,"column"===this.renderingMode&&this.childTemplateSizeMap&&(this.childTemplateSizeMap[t.id]=null==t?void 0:t.cardSize)),e}T(t){const i=t.childTemplateType+"-v1";if(t.childTemplateType=i,this.childTemplateMap)return this.childTemplateMap[i]||(this.childTemplateMap[i]=this.childTemplateMap["native-ad-card-video"]),this.childTemplateMap[t.childTemplateType]}get extractSubColumns(){return"column"===this.renderingMode&&this.wideCard&&this.wideCardSize&&this.columns&&this.wideCardSize<=this.columns.length?this.columns.slice(0,this.wideCardSize):[]}get fullColumns(){return"column"===this.renderingMode&&this.wideCardSize&&this.wideCard?this.wideCardSize&&this.wideCard&&this.columns&&this.columns.length-this.wideCardSize>0?this.columns.slice(this.wideCardSize):[]:this.columns}get componentId(){return`rfl-${this.id}`}columnsChanged(t,i){if("row"===this.renderingMode&&this.rowMutationObserver){const e=t.flatMap(t=>t).map(t=>t.id).join(""),s=i.flatMap(t=>t).map(t=>t.id).join("");t.length===i.length&&e!==s&&this.$()}this.__setupRowMutationObserver()}onFeedElementsChangedChanged(){this.__setupRowMutationObserver(),this.rowChangeTrackedOnce&&this.$()}sectionTrackerTagChanged(){this.__setupRowMutationObserver()}__setupRowMutationObserver(){this.shadowRoot&&this.onFeedElementsChanged&&!this.feedMutationObserver&&!this.rowMutationObserver&&this.sectionTrackerTag&&(this.rowMutationObserver=new MutationObserver(()=>{var t,i,e;(this.afterDOMRendered(),"row"===this.renderingMode)?this.$():null!==(t=this.shadowRoot)&&void 0!==t&&null!==(i=t.querySelectorAll)&&void 0!==i&&i.call(t,this.v).length&&(this._(),null===(e=this.rowMutationObserver)||void 0===e||e.disconnect())}),this.rowMutationObserver.observe(this.shadowRoot,{childList:!0}))}$(){if(this.rowChangeTrackedOnce=!0,this.onFeedElementsChanged&&this.shadowRoot){var t,i,e;const s=null===(t=Array.from)||void 0===t?void 0:t.call(Array,null===(i=this.shadowRoot)||void 0===i||null===(e=i.querySelectorAll)||void 0===e?void 0:e.call(i,`${this.sectionTrackerTag}`));this.onFeedElementsChanged(s),this.enableMonitor&&0===this.i&&(this.i++,(0,v.D)(()=>this.p(),2500))}}_(){var t,i,e,s;this.shadowRoot&&this.onFeedElementsChanged&&(this.feedMutationObserver=new MutationObserver(()=>{if(this.afterDOMRendered(),this.shadowRoot&&this.onFeedElementsChanged){var t,i,e;const s=null===(t=Array.from)||void 0===t?void 0:t.call(Array,null===(i=this.shadowRoot)||void 0===i||null===(e=i.querySelectorAll)||void 0===e?void 0:e.call(i,`${this.v}>${this.sectionTrackerTag}`));this.onFeedElementsChanged(s)}if(this.shadowRoot&&this.sentinelRenderedElements&&!this.l){var s,n,r;const t=null===(s=Array.from)||void 0===s?void 0:s.call(Array,null===(n=this.shadowRoot)||void 0===n||null===(r=n.querySelectorAll)||void 0===r?void 0:r.call(n,`${this.v}>.river-sentinel`));this.sentinelRenderedElements(t),this.l=!0}}),null===(t=Array.from)||void 0===t||null===(t=t.call(Array,null===(e=this.shadowRoot)||void 0===e||null===(s=e.querySelectorAll)||void 0===s?void 0:s.call(e,this.v)))||void 0===t||null===(i=t.forEach)||void 0===i||i.call(t,t=>{var i;return null===(i=this.feedMutationObserver)||void 0===i?void 0:i.observe(t,{childList:!0})}))}enableMonitorChanged(){this.shadowRoot&&this.enableMonitor&&this.onBlankMonitorResult&&"row"===this.renderingMode&&0===this.i&&(this.i++,(0,v.D)(()=>this.p(),2500))}setupContentSeenTracking(){(0,c._Z)(this).then(()=>{this.enableContentSeenTracking&&this.seenContentHandler&&!["ruby-ntp","ruby-ntp-ctrl2","prg-untgt-ar-c","prg-untgt-ar-t"].some(t=>f.Rb.CurrentFlightSet.has(t))&&this.setupIntersectionObserversForContentSeenTracking()})}setupIntersectionObserversForContentSeenTracking(){if(!this.shadowRoot)return;this.infopaneVisibilityTracker=new p.L({elementTagName:"CS-INFOPANE-CARD",changeEventName:"infopane-change",getActiveCardId:t=>null==t?void 0:t.activeCardId,onCardSeen:t=>{var i,e;if(null!=t&&t.startsWith("nativead"))return;const s={id:t};null===(i=this.seenContentHandler)||void 0===i||null===(e=i.onCardSeenHandler)||void 0===e||e.call(i,s)}}),this.contentSeenTracker=new p.t({getElements:()=>{var t;return Array.from((null===(t=this.shadowRoot)||void 0===t?void 0:t.children)||[]).filter(t=>{var i;return!(null!==(i=t.id)&&void 0!==i&&i.startsWith("nativead"))})},onIntersectionChange:t=>{var i,e,s,n;const r=t.target,o=t.entry.isIntersecting;var a;return(null===(i=this.infopaneVisibilityTracker)||void 0===i?void 0:i.isCarouselElement(r))?(null===(a=this.infopaneVisibilityTracker)||void 0===a||a.handleIntersection(o),!1):!!o&&(!(!r.id||"ContentCard"!==(null===(e=r.telemetryObject_card)||void 0===e||null===(e=e.contract)||void 0===e?void 0:e.name))&&(null===(s=this.seenContentHandler)||void 0===s||null===(n=s.onCardSeenHandler)||void 0===n||n.call(s,{id:r.id}),!0))}});!this.contentSeenTracker.startTracking()&&m.YT.addOrUpdateTmplString(`cvtrkerr-${this.id}`)}disconnectedCallback(){var t,i,e,s;super.disconnectedCallback(),null===(t=this.feedMutationObserver)||void 0===t||t.disconnect(),null===(i=this.rowMutationObserver)||void 0===i||i.disconnect(),null===(e=this.contentSeenTracker)||void 0===e||e.disconnect(),this.contentSeenTracker=void 0,null===(s=this.infopaneVisibilityTracker)||void 0===s||s.cleanup(),this.infopaneVisibilityTracker=void 0}handleKeyDown(t){const i=Array.from(this.getRootNode().querySelectorAll(this.tagName)),e=t=>{if("DIV"===t.tagName)return Array.from(t.children).filter(t=>"DIV"!==t.tagName);if(t.shadowRoot){var i,s,n;if("row"===t.getAttribute("rendering"))return Array.from(t.shadowRoot.children).filter(t=>"DIV"!==t.tagName);return(null===(i=Array.from)||void 0===i?void 0:i.call(Array,null===(s=(n=t.shadowRoot).querySelectorAll)||void 0===s?void 0:s.call(n,"div[core-column]"))).reduce((t,i)=>t.concat(e(i)),[])}return[]},s=i.reduce((t,i)=>t.concat(e(i)),[]).filter(t=>t.offsetWidth>0&&t.offsetHeight>0);return!(!this.disabledKeyListeners||!this.disabledKeyListeners.find(i=>i===t.key))||(0,u.am)(t,s)}M(t){if(!t)return!1;const i=["shopping-sd-card","sports-card","weather-card"];return this.responsiveWidth&&i.push("money-info-card","traffic-card"),i.includes(t)}m(t){if(!t)return!1;const i=t===this.sectionTrackerTag,e=["following-fre-inline-card","responsive-card","responsive-ad-card","responsive-infopane","infopane-card","hide-story-card","shopping-carousel-card","travel-destination-carousel-card","watch-videos-vertical-carousel","native-ad-card"].includes(t);return i||e}}(0,s.Cg)([a.sH],w.prototype,"childTemplateMap",void 0),(0,s.Cg)([a.sH],w.prototype,"columns",void 0),(0,s.Cg)([a.sH],w.prototype,"wideCard",void 0),(0,s.Cg)([a.sH],w.prototype,"wideCardSize",void 0),(0,s.Cg)([a.sH],w.prototype,"sectionTrackerTag",void 0),(0,s.Cg)([a.sH],w.prototype,"renderingMode",void 0),(0,s.Cg)([(0,h.CF)({attribute:"responsive-width"})],w.prototype,"responsiveWidth",void 0),(0,s.Cg)([a.sH],w.prototype,"enableMonitor",void 0),(0,s.Cg)([a.sH],w.prototype,"id",void 0),(0,s.Cg)([a.sH],w.prototype,"childTemplateSizeMap",void 0),(0,s.Cg)([a.sH],w.prototype,"customRowSection",void 0),(0,s.Cg)([a.sH],w.prototype,"onFeedElementsChanged",void 0),(0,s.Cg)([a.sH],w.prototype,"seenContentHandler",void 0),(0,s.Cg)([(0,h.CF)({attribute:"enable-content-seen-tracking",mode:"boolean"})],w.prototype,"enableContentSeenTracking",void 0),(0,s.Cg)([a.sH],w.prototype,"sentinelHeight",void 0),(0,s.Cg)([a.sH],w.prototype,"disabledKeyListeners",void 0),(0,s.Cg)([a.Jg],w.prototype,"extractSubColumns",null),(0,s.Cg)([a.Jg],w.prototype,"fullColumns",null);var g=e(74849),y=e(4126);const b=g.A` :host([responsive-width="true"]) [size="1u"]:not([auto-sized]),:host([responsive-width="true"]) [size="_1x_2y"]{aspect-ratio:300 / 304;--card-height:auto;width:calc((calc(100% - 12px * calc(var(--card-number,3) - 1))) / var(--card-number,3))}:host([responsive-width="true"]) [size="_2x_2y"]{aspect-ratio:153 / 76;height:auto;width:calc(((calc(100% - 12px * calc(var(--card-number,3) - 1))) / var(--card-number,3) * 2) + 12px)}:host([responsive-width="true"]) social-bar-wc{--tell-us-more-inline-end-margin:0px;width:100%}:host([responsive-width="true"]) social-bar-wc::part(social-bar){width:auto}`,C=g.A`
:host,.sub-columns{display:flex;--card-base-gap:var(--override-card-base-gap,12);gap:calc(var(--card-base-gap,12) * 1px)}:host > div > *,div.sub-columns > div > *{display:flex;margin-bottom:calc(var(--card-base-gap,12) * 1px);min-width:300px}.sub-columns{margin-bottom:0px !important}:host > div > cs-native-ad-card:not([feeds-3-design]),div.sub-columns > div > cs-native-ad-card:not([feeds-3-design]){height:304px}:host([rendering="row"]){flex-wrap:wrap}:host([rendering="row"]) > fluent-card,:host([rendering="row"]) > [size="_1x_2y"]{width:var(--override-card-width,var(--card-min-width,300px))}:host([rendering="row"]) > div[class="halfu"]{height:304px;--card-height:146px}:host([rendering="row"]) > [class="_2x_2y"]{width:var(--override-card-wide-width,612px)}:host([rendering="column"]) > div > fluent-card[size="0.5u"]{--card-height:146px}:host([rendering="column"]) > div > fluent-card[size="1u"]{--card-height:304px}div.river-sentinel{position:absolute;bottom:0;left:0;right:0;z-index:-1}:host([no-tracker]){margin-bottom:calc(var(--card-base-gap,12) * 1px)}:host([rendering="column"]){margin-bottom:0px}`.withBehaviors(new y.o("responsiveWidth",!0,b));var T=e(39957),S=e(91640);const A=o.qy`<div sub-cols core-column>${(0,T.ux)(t=>[t.wideCard],o.qy`${(t,i)=>i.parent.selectTemplate(t)}`)}<div class="sub-columns">${(0,T.ux)(t=>t.extractSubColumns,o.qy`<div waterfall-col core-column>${(0,T.ux)(t=>t,o.qy`${(t,i)=>i.parentContext.parent.selectTemplate(t)}`)} ${(0,S.z)((t,i)=>i.parent.sentinelRenderedElements,o.qy`<div class="river-sentinel" style="height: ${(t,i)=>i.parent.sentinelHeight}px;"></div>`)}</div>`)}</div></div>`,M=o.qy`<div waterfall-col core-column>${(0,T.ux)(t=>t,o.qy`${(t,i)=>i.parentContext.parent.selectTemplate(t)}`)} ${(0,S.z)((t,i)=>i.parent.sentinelRenderedElements,o.qy`<div class="river-sentinel" style="height: ${(t,i)=>i.parent.sentinelHeight}px;"></div>`)}</div>`,D=o.qy` ${(0,S.z)(t=>t.wideCard&&t.wideCardSize,A)} ${(0,T.ux)(t=>t.fullColumns,o.qy`${M}`)}
`,$=o.qy` ${(0,T.ux)(t=>[t.wideCard],o.qy`${(t,i)=>i.parent.selectTemplate(t)}`)} ${(0,S.z)(t=>t.customRowSection,o.qy` ${(0,T.ux)(t=>[t.customRowSection],o.qy` ${(0,T.ux)(t=>t,o.qy` ${(t,i)=>"halfu"===t.subType?o.qy`<div class="halfu">${(0,T.ux)(t=>t.subCards,o.qy`${t=>i.parentContext.parent.selectTemplate(t)}`)}</div>`:i.parentContext.parent.selectTemplate(t)} `)} `)} `,o.qy` ${(0,T.ux)(t=>t.columns,o.qy` ${(0,T.ux)(t=>t,o.qy` ${(t,i)=>i.parentContext.parent.selectTemplate(t)} `)} `)} `)}
`;const _=w.compose({name:"cs-responsive-feed-layout",template:o.qy`<template @keydown="${(t,i)=>t.handleKeyDown(i.event)}" rendering="${t=>t.renderingMode}" id="${t=>t.componentId}" ?no-tracker=${t=>!t.sectionTrackerTag}>${(0,S.z)(t=>"column"===t.renderingMode,D)} ${(0,S.z)(t=>"row"===t.renderingMode,$)}</template>`,styles:C,shadowOptions:{delegatesFocus:!0}})},34491:function(t,i,e){e.d(i,{L:function(){return s},t:function(){return n}});class s{constructor(t){this.isVisible=!1,this.isSetup=!1,this.elementTagName=t.elementTagName.toUpperCase(),this.changeEventName=t.changeEventName,this.getActiveCardId=t.getActiveCardId,this.onCardSeen=t.onCardSeen}isCarouselElement(t){return this.elementTagName===t.tagName}updateVisibility(t){this.isVisible=t}getVisibility(){return this.isVisible}handleIntersection(t){this.updateVisibility(t),this.setupEventListener()}setupEventListener(){!this.isSetup&&window.document&&(this.changeEventHandler=t=>{const i=t.detail,e=this.getActiveCardId(i);this.isVisible&&e&&this.onCardSeen(e)},window.document.addEventListener(this.changeEventName,this.changeEventHandler),this.isSetup=!0)}cleanup(){this.changeEventHandler&&window.document&&(window.document.removeEventListener(this.changeEventName,this.changeEventHandler),this.changeEventHandler=void 0),this.isSetup=!1,this.isVisible=!1}}class n{constructor(t){this.sessionSeenContentCount=0,this.maxSessionLimit=t.maxSessionLimit??30,this.threshold=t.threshold??.5,this.root=t.root,this.rootMargin=t.rootMargin??"0px",this.getElements=t.getElements,this.onIntersectionChange=t.onIntersectionChange}resetSessionCount(){this.sessionSeenContentCount=0}getSessionCount(){return this.sessionSeenContentCount}startTracking(){if(this.sessionSeenContentCount>=this.maxSessionLimit)return!1;const t=this.getElements();return 0!==t.length&&(this.observer=new IntersectionObserver(t=>{t.forEach(t=>{const i=t.target,e=t.isIntersecting,s={target:i,entry:t,sessionCount:this.sessionSeenContentCount,maxLimit:this.maxSessionLimit,hasReachedLimit:()=>this.sessionSeenContentCount>=this.maxSessionLimit},n=this.onIntersectionChange(s);if(e){var r,o;if(this.sessionSeenContentCount>=this.maxSessionLimit)return void(null===(r=this.observer)||void 0===r||r.unobserve(i));if(!0===n)this.sessionSeenContentCount++,null===(o=this.observer)||void 0===o||o.unobserve(i),this.sessionSeenContentCount>=this.maxSessionLimit&&this.disconnect()}})},{root:this.root??null,rootMargin:this.rootMargin,threshold:this.threshold}),t.forEach(t=>{var i;null===(i=this.observer)||void 0===i||i.observe(t)}),!0)}disconnect(){var t;null===(t=this.observer)||void 0===t||t.disconnect(),this.observer=void 0}hasReachedLimit(){return this.sessionSeenContentCount>=this.maxSessionLimit}}},37416:function(t,i,e){e.d(i,{D:function(){return a}});var s=e(16091),n=e(17720),r=e(74180);class o extends r.f{constructor(){super(...arguments),this.configRef={experienceType:"SuperComponentData",instanceSrc:"default"}}static getInstance(){return n.vv.get("__SuperComponentDataHelper__",()=>new o)}}const a=(0,s.G)(o)},39620:function(t,i,e){e.d(i,{YA:function(){return c},_L:function(){return d},ew:function(){return h}});var s=e(16091),n=e(17720),r=e(71658),o=e(74180);class a extends o.f{constructor(){super(...arguments),this.configRef={experienceType:"SharedTimestampUtil",instanceSrc:"default",sharedNs:"msn-ns"}}static getInstance(){return n.vv.get("__SharedTimestampUtilHelper__",()=>new a)}}const h=(0,s.G)(a);function d(t,i,e,s,n,o){let a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(!t)return"";const d=new Date(t);if(s)return(0,r.KY)(d);const c=e||(a?void 0:h.getLocStrings().localizedTimeStrings);return i=i||"en-US",(0,r.sq)(d,i,c,void 0,void 0,!0,n,o)}function c(t,i,e,s){const n={formattedPublishedDT:"",ariaDT:""};if(t&&e){(0,r.Tp)(t,3)||(n.formattedPublishedDT=d(t,i,void 0,!1,s),s&&(n.ariaDT=d(t,i,void 0,!1,!1,!1,!0)))}return n}},44065:function(t,i,e){function s(t,i){return"function"==typeof IntersectionObserver?new IntersectionObserver(t,i):null}e.d(i,{e:function(){return s}})},63610:function(t,i,e){var s;e.d(i,{H:function(){return s}}),function(t){t[t.None=0]="None",t[t.JustNow=1]="JustNow",t[t.LessThanOneHour=2]="LessThanOneHour",t[t.Today=3]="Today",t[t.Yesterday=4]="Yesterday",t[t.ThisWeek=5]="ThisWeek",t[t.ThisYear=6]="ThisYear",t[t.FullDate=7]="FullDate",t[t.InMinutes=8]="InMinutes"}(s||(s={}))},71658:function(t,i,e){e.d(i,{sq:function(){return u},KY:function(){return l},YS:function(){return v},Tp:function(){return f}});var s=e(83065),n=e(63610),r=e(13294);class o{constructor(t,i,e){this.timeLocStrings=t,this.locale=i,this.locUtility=e}transform(t,i,e){const s=3600,o=86400;if(!t)return"";if(!this.locUtility.supportsLocaleSpecifiers)return i;const a=(0,r.KU)(t);switch((0,r.vB)(t)){case n.H.None:return"";case n.H.JustNow:return this.timeLocStrings.JustNow;case n.H.LessThanOneHour:return this.timespanString(a,a<120?this.timeLocStrings.NumberMinuteAgo:this.timeLocStrings.NumberMinutesAgo,60);case n.H.Today:return this.timespanString(a,a<7200?this.timeLocStrings.NumberHourAgo:this.timeLocStrings.NumberHoursAgo,s);case n.H.Yesterday:if(0===e){const i=this.timeLocStrings.TimeYesterday;return this.locUtility.format(i,this.locUtility.formatTimeFromDate(t,this.locale))}return a<o?this.timespanString(a,a<7200?this.timeLocStrings.NumberHourAgo:this.timeLocStrings.NumberHoursAgo,s):this.timespanString(a,a<172800?this.timeLocStrings.NumberDayAgo:this.timeLocStrings.NumberDaysAgo,o);case n.H.ThisWeek:return 0===e?this.locUtility.format(this.timeLocStrings.TimeDayOfWeek,this.locUtility.localizedWeekday(t,this.locale),this.locUtility.formatTimeFromDate(t,this.locale)):this.timespanString(a,a<172800?this.timeLocStrings.NumberDayAgo:this.timeLocStrings.NumberDaysAgo,o);case n.H.ThisYear:return this.locUtility.localizedMonthDate(t,this.locale);default:return this.locUtility.localizedDateStringMedium(t,this.locale)}}timespanString(t,i,e){const s=Math.floor(t/e);return this.locUtility.format(i,this.locUtility.localizedNumberString(s,this.locale))}}const a={JustNow:"Just Now",JustNowSimple:"now",NumberMinuteAgo:"{0} minute ago",NumberMinutesAgo:"{0} minutes ago",NumberMinutesAgoSimple:"{0}m",NumberMinutesAgoAria:"{0} minutes",NumberHourAgo:"{0} hour ago",NumberHoursAgo:"{0} hours ago",NumberHoursAgoSimple:"{0}h",NumberHoursAgoAria:"{0} hours",NumberDayAgo:"{0} day ago",NumberDaysAgo:"{0} days ago",NumberDaysAgoSimple:"{0}d",NumberDaysAgoAria:"{0} days",NumberWeekAgo:"{0} week",NumberWeeksAgo:"{0} weeks",NumberWeeksAgoSimple:"{0}w",NumberWeeksAgoAria:"{0} weeks",NumberMonthAgo:"{0} month",NumberMonthsAgo:"{0} months",NumberMonthsAgoSimple:"{0}mo",NumberMonthsAgoAria:"{0} months",NumberYearAgo:"{0} year",NumberYearsAgo:"{0} years",NumberYearsAgoSimple:"{0}y",NumberYearsAgoAria:"{0} years",TimeYesterday:"Yesterday at {0}",TimeDayOfWeek:"{0} at {1}"},h={Minute:{one:"{0} دقيقة",two:"دقيقتان",threeToTen:"{0} دقائق",elevenPlus:"{0} دقيقة"},Hour:{one:"{0} ساعة",two:"ساعتان",threeToTen:"{0} ساعات",elevenPlus:"{0} ساعة"},Day:{one:"{0} يوم",two:"يومان",threeToTen:"{0} أيام",elevenPlus:"{0} يوما"},Week:{one:"{0} أسبوع",two:"{0} أسبوع",threeToTen:"{0} أسابيع",elevenPlus:"{0} أسبوعا"},Month:{one:"{0} شهر",two:"{0} شهر",threeToTen:"{0} أشهر",elevenPlus:"{0} شهرا"},Year:{one:"{0} عام",two:"{0} عام",threeToTen:"{0} أعوام",elevenPlus:"{0} عاما"}},d={Week:{one:"{0} שבוע",two:"{0} שבועיים",three:"{0} שבועות"},Month:{one:"{0} חודש",two:"{0} חודשיים",three:"{0} חודשים"},Year:{one:"{0} שנה",two:"{0} שנתיים",three:"{0} שנים"}},c={MsPerMinute:6e4,MsPerHour:36e5,MsPerDay:864e5,MsPerWeek:6048e5,MsPerMonth:2592e6,MsPerYear:31104e6};function u(t,i,e,n,r,u,l,v){const f=i&&i.toLowerCase();if(!(t instanceof Date)||isNaN(t.valueOf()))return"";if(u&&e)return function(t,i,e,s,n,r){if(!(t instanceof Date)||isNaN(t.valueOf()))return"";const o=c.MsPerMinute,a=c.MsPerHour,u=c.MsPerDay,l=c.MsPerWeek,v=c.MsPerMonth,f=c.MsPerYear,p=i.getTime()-t.getTime();if(p<o)return r?e.JustNowAria||"":n?e.JustNowSimple||"":e.JustNow||"";let m=f,w="Year";p<a?(m=o,w="Minute"):p<u?(m=a,w="Hour"):p<l?(m=u,w="Day"):p<v?(m=l,w="Week"):p<f&&(m=v,w="Month");const g=/^[Aa][Rr]-/.test(s),y=/^[Hh][Ee]-/.test(s),b=Math.floor(p/m);let C=null;C=g?function(t,i){if(t<2)return h[i].one;if(t<3)return h[i].two;if(t<11)return h[i].threeToTen;return h[i].elevenPlus}(b,w):y?function(t,i,e,s){if(s||"Minute"==e||"Hour"==e||"Day"==e)return t[`Number${e}${i>1||s?"s":""}Ago${s?"Simple":""}`];if(i<2)return d[e].one;if(i<3)return d[e].two;return d[e].three}(e,b,w,n):r?e[`Number${w}sAgoAria`]:e[`Number${w}${b>1||n?"s":""}Ago${n?"Simple":""}`];return C?C.replace("{0}",b):""}(t,new Date,e,f,l,v);if(!e&&"zh-cn"===f)return"";e||(e=a);const p=(r=r||new s.e).localizedDateString(t,f);n||(n=0);return new o(e,f,r).transform(t,p,n)}function l(t){return t.toLocaleString("ja-JP",{hour12:!1,hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit",timeZone:"Asia/Tokyo"}).replace("午後","").replace("午前","")}function v(t){return f(t,30)}function f(t,i){if(!t)return!0;if(!i||i<0)return!1;try{const e=new Date(t);if(isNaN(e.getTime()))return!0;const s=(new Date).getTime()-e.getTime();return Math.floor(s/c.MsPerDay)>=i}catch{return!0}}},73150:function(t,i,e){e.d(i,{fk:function(){return n}});var s=e(68480);class n{}n.refreshRiver=new s.P("RiverRefresh"),n.repaintRiver=new s.P("RiverRepaint"),n.riverRefreshed=new s.P("RiverRefreshed"),n.riverQueryUpdated=new s.P("RiverQueryUpdated"),n.riverLocationUpdated=new s.P("RiverLocationUpdated");new s.P("RailUpdate")},74180:function(t,i,e){e.d(i,{f:function(){return n}});var s=e(56589);class n{constructor(){this.config={},this.strings={},this.initialized=!1}async initConfig(t){var i,e;this.initialized||(this.config=await this.getConfigFromRef(t)||{},this.strings=(null===(i=this.config)||void 0===i?void 0:i.localizedStrings)||{},this.initialized=!!this.config&&!(null===(e=this.config)||void 0===e||!e.localizedStrings))}getConfig(){return this.config}getLocStrings(){return this.strings}async getConfigFromRef(t){try{const i=(null==t?void 0:t.configRef)||this.configRef,e=await s.L.getConfig(i);return null==e?void 0:e.properties}catch(t){return{}}}}},76284:function(t,i,e){e.d(i,{V:function(){return s}});const s=e(64332).DI.createContext()},83065:function(t,i,e){e.d(i,{e:function(){return r}});var s,n=e(48566);!function(t){t[t.Default=0]="Default",t[t.Medium=1]="Medium",t[t.MonthDate=2]="MonthDate",t[t.Weekday=3]="Weekday",t[t.Time=4]="Time"}(s||(s={}));class r{constructor(){this.dateFormatOptionsMap=new Map,this.setSupportsLocaleSpecifiers(),this.dateFormatOptionsMap.set(s.Medium,{year:"numeric",month:"short",day:"numeric"}),this.dateFormatOptionsMap.set(s.MonthDate,{month:"short",day:"numeric"}),this.dateFormatOptionsMap.set(s.Weekday,{weekday:"short"}),this.dateFormatOptionsMap.set(s.Time,{hour:"numeric",minute:"numeric"})}overrideDateFormat(t,i){t&&i&&this.dateFormatOptionsMap.set(t,i)}localizedDateString(t,i){return this.formatDate(t,s.Default,i)}localizedDateStringMedium(t,i){return this.formatDate(t,s.Medium,i)}localizedMonthDate(t,i){return this.formatDate(t,s.MonthDate,i)}localizedWeekday(t,i){return this.formatDate(t,s.Weekday,i)}formatTimeFromDate(t,i){return this.supportsLocaleSpecifiers&&this.dateFormatOptionsMap?t.toLocaleTimeString(i,this.dateFormatOptionsMap.get(s.Time)):t.toTimeString()}format(t){if(!t)return"";for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];return n.Qf.Format(t,...e)}localizedNumberString(t,i){return this.supportsLocaleSpecifiers?t.toLocaleString(i):t.toString()}formatDate(t,i,e){let n=null;if(this.supportsLocaleSpecifiers)if(i===s.Default)n=t.toLocaleDateString(e);else if(this.dateFormatOptionsMap){const s=this.dateFormatOptionsMap.get(i);n=t.toLocaleDateString(e,s)}return null===n&&(n=t.toDateString()),null!==n?n.replace(/\u200E/g,"").replace(/\u200F/g,""):n}setSupportsLocaleSpecifiers(){this.supportsLocaleSpecifiers=(()=>{try{(0).toLocaleString("i")}catch(t){return"RangeError"===t.name}return!1})()}}},96244:function(t,i,e){e.d(i,{V:function(){return w}});var s=e(56911),n=e(16813),r=e(17720),o=e(16091),a=e(60815),h=e(69583),d=e(98216),c=e(89980),u=e(54761),l=e(93468),v=e(65022),f=e(10117);var p=e(83003);class m{constructor(){this.config={},this.shouldDisplayFeedLevelCF=!1,this.forceDisableCoolDown=!1,this.forceFeedLevelCSATsignal=!1,this.setConfig=t=>{this.config=t},this.triggerFeedLevelCFDisplayIfConditionMet=async()=>{var t;const i=this.forceFeedLevelCSATsignal||(null===(t=await async function(t){try{var i;const e=await f.V_.getWpoOptimizationData(t);if(!e)return null;const s=e.filter(t=>(null==t?void 0:t.type)===u.Ar.feedContextualFeedback),n=(null==s?void 0:s.length)>0&&!(null===(i=s[0])||void 0===i||null===(i=i.properties)||void 0===i||!i.showFeedCF);if(n)return d.YT.addOrUpdateTmplProperty("wpopromflcf","1"),{showFeedCF:n}}catch(t){const i="Error in getting wpo feed-level contextual feedback promotion data";(0,l.vV)(v.nwt,i,`error:${t}`)}return null}())||void 0===t?void 0:t.showFeedCF),e=this.getInCoolDown();i&&e&&d.YT.addOrUpdateTmplProperty("feedCFBlocked","1"),i&&!e&&(this.config.enableNurturingTriggerCSAT&&this.callNurturingToTriggerCF("feedLevelCF"),this.shouldDisplayFeedLevelCF=!0)},this.triggerCFDisplayIfConditionMet=(t,i)=>{if(this.thumbnailCardData)return;const e=t.defaultLayout[0],s=e.wpoMetadata;let n=(null==s?void 0:s.cFMetadataType)||(null==e?void 0:e.type);const r=null==s?void 0:s.isGA,o=this.getInCoolDown();if(r&&o&&d.YT.addOrUpdateTmplProperty("cardCFBlocked",s.cfId||"1"),r&&!o){var a;s.cfId||(s.cfId="00002",n=p.pL.Article);let r=null===(a=t.C1)||void 0===a?void 0:a[0];r&&r.mapRawData&&(r=r.mapRawData()),this.thumbnailCardData={...e,...r,cardSize:"1u",colSpan:1,cFMetadataType:n},this.thumbnailCardTemplate=i,this.isThumbnailCardInWhiteList()&&this.config.enableNurturingTriggerCSAT&&this.callNurturingToTriggerCF(s.cfId)}},this.shouldDisplayCSAT=t=>this.getInCoolDown()?(d.YT.addOrUpdateTmplProperty("cardCFBlocked",t||"1"),!1):(this.config.enableNurturingTriggerCSAT&&this.callNurturingToTriggerCF(t),!0),this.callNurturingToTriggerCF=t=>{const i={id:"popupCF",group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"ContextualFeedbackCardLevel"},contentModel:{title:"cf title",description:"cf description",contentType:n.r.CallToChoice,choiceOptions:[]}};(0,h.sn)().then(e=>{e.sendInternalPlacement(i),d.YT.addOrUpdateTmplProperty("cfNurturingCalled",t||"1")})};const t=new URLSearchParams(window.location.search);this.forceDisableCoolDown=!(null==t||!t.get("forceCSATCoolDown")),this.forceFeedLevelCSATsignal=!(null==t||!t.get("forceCSATSignal"))}static getInstance(){return r.vv.get("__contextualFeedbackController__",()=>new m)}getInCoolDown(){return!this.forceDisableCoolDown&&(void 0===this.inCoolDown&&(this.inCoolDown=this.hasRecentShown()),this.inCoolDown)}resetInCoolDown(){this.inCoolDown=void 0}hasRecentShown(){const t=(0,c.Lg)().getObject("isGAShow");if(!t)return!1;const i=new Date(t.universal);return((new Date).getTime()-i.getTime())/864e5<=14}isThumbnailCardInWhiteList(){var t;return this.config.thumbnailCardType===(null===(t=this.thumbnailCardData)||void 0===t?void 0:t.childTemplateType)}}(0,s.Cg)([a.sH],m.prototype,"shouldDisplayFeedLevelCF",void 0),(0,s.Cg)([a.sH],m.prototype,"thumbnailCardData",void 0),(0,s.Cg)([a.sH],m.prototype,"thumbnailCardTemplate",void 0);const w=(0,o.G)(m)},97413:function(t,i,e){e.d(i,{F:function(){return E}});var s=e(56911),n=e(44065),r=e(70177),o=e(88296),a=e(64332),h=e(76284),d=e(60815);class c{constructor(t){this.setConfig(t)}getCardTemplatesMap(){return this.config.cardTemplates}getLayoutTemplatesMap(){return this.config.useSharedLayoutTemplates&&!this.sharedlayoutTemplates&&(this.sharedlayoutTemplates=this.config.getLayoutTemplateMap()),this.config.layoutTemplates??this.config.getLayoutTemplateMap()??(this.config.useSharedLayoutTemplates?this.sharedlayoutTemplates:void 0)}getSuperCardsTemplatesMap(){return this.config.superCardsTemplates}getOverrideStyles(){return this.config.overrideStyles}getEnableSuperCardMemoize(){return!!this.config.enableSuperCardMemoize}getDisabledKeyListeners(){return this.config.disabledKeyListeners}setConfig(t){this.config=t}}(0,s.Cg)([d.sH],c.prototype,"config",void 0);class u{constructor(t){this.customDependenciesContainer=t,this.container=a.DI.getOrCreateDOMContainer(),this.setupInstanceType()}init(t){const i=new c(t);this.injectDependencies(i,t)}injectDependencies(t,i){this.container.has(h.V,!0)?this.container.get(h.V).setConfig(i):this.container.register(a.cH.instance(h.V,t))}setupInstanceType(){}}class l extends u{setupInstanceType(){}}var v=e(90905),f=e(87440),p=e(29307),m=e(9192),w=e(30817),g=e(13053),y=e(93468),b=e(65022),C=e(96950),T=e(96244),S=e(73150),A=e(21481),M=e(82286),D=e(77246),$=e(17720),_=e(27261),N=e(37492),x=e(41423),k=e(37416),R=e(39620),F=e(59545),L=e(16611),I=e(45083),P=e(17254),O=e(56639);class E extends A.U{constructor(){var t;super(...arguments),t=this,this.ensureObservableBeforeConnect=!0,this.isAboveTheFoldVisuallyReady=!1,this.overrideGapStyles="",this.overrideLayoutStyles="",this.riverSentinelHeight=1,this.waterfallSentinels=[],this.isSentinelInView=!1,this.paginationObserverMap=new Map,this.observerTuple=[],this.isWaterfall=!1,this.setRefreshPillRender=t=>{if(this.config.childExperienceReferencesWC&&this.config.childExperienceReferencesWC.pillWC){var i;const e=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector(`[instance-id="${this.config.childExperienceReferencesWC.pillWC.instanceId}"]`);t&&t>0?e.setAbsoluteTimer(!1,t):e.setAbsoluteTimer(!0)}},this.handleDocumentClick=t=>{var i,e;const s=t.composedPath()[0],n=this.feedManager,r=(null===(i=n.sdCardMenuProps)||void 0===i?void 0:i.referrerButton)&&(0,N.W)(n.sdCardMenuProps.referrerButton,s),o=(null===(e=this.sdCardMenuRef)||void 0===e?void 0:e.fluentMenu)&&(0,N.W)(this.sdCardMenuRef.fluentMenu,s);r||o||(n.sdCardMenuOpen=!1)},this.updateRegionsDataIfSentinelInView=async()=>{await(0,L.e1)(),this.isSentinelInView&&this.feedManager.updateRegionsData()},this.onRiverChanged=(t,i)=>{if(t.length!==i.length&&(0,D.S)()){if(i.length<=1&&P.T3.IsHeroNTP)return void this.updateRegionsDataIfSentinelInView();this.paginationMonitorTimeoutId&&clearTimeout(this.paginationMonitorTimeoutId),this.paginationMonitorTimeoutId=window.setTimeout(this.updateRegionsDataIfSentinelInView,100)}},this.refreshFeed=()=>{this.feedManager.callRefreshRegionsData()},this.growSentinel=(0,v.A)(()=>{var t;void 0!==(null===(t=this.config)||void 0===t?void 0:t.riverSentinelHeightPostScroll)&&this.config.riverSentinelHeightPostScroll>0&&(this.riverSentinelHeight=this.config.riverSentinelHeightPostScroll),window.removeEventListener("scroll",this.growSentinel)},100),this.setupPaginationObserver=()=>{this.observerTuple.map(t=>{let[i,e,s]=t;const r=(0,n.e)(e,s);i instanceof Array?i.forEach(t=>{null==r||r.observe(t),this.paginationObserverMap.set(t,r)}):i&&(null==r||r.observe(i),this.paginationObserverMap.set(i,r))})},this.clearPaginationObserver=()=>{this.paginationObserverMap.forEach((t,i)=>{null==t||t.unobserve(i)}),this.paginationObserverMap.clear()},this.updateLayout=t=>{const i=this.getLayout(t);this.feedManager.updateLayout(i)},this.getDefaultConfigWithOverrides=function(){var i,e;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.overriddenConfig;if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return(0,f.A)({},t.config,s);const n=null===(i=(0,x.w)().getSelectedPivot())||void 0===i||null===(i=i.pivotId)||void 0===i?void 0:i.toLowerCase();if(!P.T3.isWindowsDashboard&&t.config.enableFollowingFeed&&"following"===(n||t.instanceId)&&null!==(e=t.config)&&void 0!==e&&null!==(e=e.riverSectionCardProviderConfig)&&void 0!==e&&e.initialRequest){const i={...(0,p.A)(t.config),enableInfopaneDialtone:!1};return i.riverSectionCardProviderConfig.initialRequest.query="followingfeed",i.riverSectionCardProviderConfig.initialRequest.feedName="following",i.riverSectionCardProviderConfig.initialRequest.timeoutMs=3e3,i.riverSectionCardProviderConfig.initialRequest.sendFRESeenCount=!1,delete i.riverSectionCardProviderConfig.initialRequest.contentType,delete i.riverSectionCardProviderConfig.initialRequest.infopaneItemCount,(0,p.A)({...i,...s})}return t.config}}static get sharedfeedManagerReferredCount(){return $.vv.get(this.sharedfeedManagerReferredCountKey,()=>0)}static set sharedfeedManagerReferredCount(t){$.vv.set(this.sharedfeedManagerReferredCountKey,t)}shadowDomPopulated(){var t,i;if(!(0,D.S)())return;const{riverSentinel:e}=this;if(this.observerTuple.push([e,this.riverPaginationCallback.bind(this)]),this.config.paginationPrecacheMargin){const t=`0px 0px ${this.config.paginationPrecacheMargin}px 0px`;this.observerTuple.push([e,this.riverPaginationPrefetchCallback.bind(this),{rootMargin:t}])}this.setupPaginationObserver(),document.addEventListener("mousedown",this.handleDocumentClick),this.config.ignoreRefreshFeed||window.addEventListener("refreshFeed",this.refreshFeed),this.cardActionRef=null===(t=this.shadowRoot)||void 0===t||null===(i=t.querySelector)||void 0===i?void 0:i.call(t,"card-action")}async riverPaginationPrefetchCallback(t){t&&t.length&&t.some(t=>t.isIntersecting)&&this.feedManager.prefetchPaginationResponse()}async experienceConnected(){var t,i;if((0,m.cE)("SuperFeedExperienceConnected",(0,w.gU)()),this.config&&this.config.childExperienceReferencesWC&&this.config.childExperienceReferencesWC.superComponentData&&await k.D.initConfig(this.config.childExperienceReferencesWC.superComponentData),this.getFeedDependencyPromise){const t=(0,r.B1)("waitFeedDependency",!0);t.start();const{feedManager:i,layoutTemplateMap:e,importLayoutTemplateMap:s}=await this.getFeedDependencyPromise;t.markEnd(),this.feedManager=i,this.layoutTemplateMap=e,this.importLayoutTemplateMap=s}const e=(0,r.B1)("waitFeedInit",!0);e.start(),await this.initFeedManager(),null!==(t=this.feedManager)&&void 0!==t&&t.isShared&&E.sharedfeedManagerReferredCount++,d.cP.getNotifier(this.feedManager).subscribe({handleChange:()=>{if(this.feedManager.shouldReplayUpdateLayout){var t,i;const e=()=>{this.feedManager.replayedUpdateLayout||(this.feedManager.replayedUpdateLayout=!0,this.updateLayout((0,o.TU)().currentColumnArrangement))};null===(t=r.gn.get(this.feedManager.feedElementTagName))||void 0===t||t.topDownHydrateComplete.getResultAsync().then(e),null===(i=r.gn.get(this.feedManager.feedElementTagName))||void 0===i||i.selfHydrationComplete.getResultAsync().then(()=>window.requestAnimationFrame(()=>window.setTimeout(e,this.feedManager.feedTopDownHydrationTimeout)))}}},"shouldReplayUpdateLayout"),await this.feedConnected(),this.config&&this.config.childExperienceReferencesWC&&this.config.childExperienceReferencesWC.sharedTimestampUtil&&await R.ew.initConfig(this.config.childExperienceReferencesWC.sharedTimestampUtil),(0,o.TU)().subscribe(this.updateLayout);const s=(0,o.TU)().currentColumnArrangement;this.updateLayout(s),e.markEnd();const n=null===(i=this.config)||void 0===i||null===(i=i.riverSectionCardProviderConfig)||void 0===i||null===(i=i.initialRequest)||void 0===i?void 0:i.feedName;var a;this.feedManager.hasDoneInitialRender()||this.feedManager.skipInitialRender||$.vv.get("ssrRequestClosed")||("widgetsNTP"===n&&null!==(a=this.feedManager.widgets)&&void 0!==a&&null!==(a=a[0])&&void 0!==a&&a.feedData||this.feedManager.renderRegionsData());if(!(0,D.S)()){var h;const t=this.config;if(!t)throw new Error("Config is not defined in SSR");return!1===t.enableFeedSuperCards||(t.enableFeedSuperCards||"widgetsNTP"===(null===(h=this.config)||void 0===h||null===(h=h.riverSectionCardProviderConfig)||void 0===h||null===(h=h.initialRequest)||void 0===h?void 0:h.feedName)||t.showHeroAboveNav&&P.T3.IsHeroNTP||(0,_.iA)().includes("ocid=wind_spot_2"))&&this.initializeSuperContainerLoader(),void 0!==t.riverSentinelHeight&&(this.riverSentinelHeight=t.riverSentinelHeight),this.isAboveTheFoldVisuallyReady=!0,await this.feedManager.waitForSectionsRenderComplete(),void(0,m.cE)("SSR.SuperFeedDataReady",(0,w.gU)())}this.config.useOptimizedPagination||this.feedManager.addRiverChangedCallback(this.onRiverChanged),S.fk.refreshRiver.registerObserver(async()=>{this.refreshFeed()}),(0,F.Qc)().then(()=>this.isAboveTheFoldVisuallyReady=!0),(0,D.S)()&&(0,I.GP)().then(()=>{T.V.setConfig(this.config),T.V.triggerFeedLevelCFDisplayIfConditionMet()});const c=this.config;c&&(!1===c.enableFeedSuperCards||(c.enableFeedSuperCards||"widgetsNTP"===n&&this.config.enableWidgetsRegion)&&this.initializeSuperContainerLoader(),void 0!==c.riverSentinelHeight&&(this.riverSentinelHeight=c.riverSentinelHeight),void 0!==c.riverSentinelHeightPostScroll&&c.riverSentinelHeightPostScroll>0&&window.addEventListener("scroll",this.growSentinel))}beforeHydration(){return this.isAboveTheFoldVisuallyReady=!0,this.feedManager.waitForSectionsRenderComplete()}disconnectedCallback(){var t,i,e;(super.disconnectedCallback(),null!==(t=this.feedManager)&&void 0!==t&&t.isShared&&E.sharedfeedManagerReferredCount--,E.sharedfeedManagerReferredCount)||(null===(e=this.feedManager)||void 0===e||e.disConnect());(0,o.TU)().unsubscribe(this.updateLayout),this.clearPaginationObserver(),this.isSentinelInView=!1,!(0,D.S)()||null!==(i=this.config)&&void 0!==i&&i.ignoreRefreshFeed||window.removeEventListener("refreshFeed",this.refreshFeed),window.removeEventListener("scroll",this.growSentinel),document.removeEventListener("mousedown",this.handleDocumentClick),this.paginationMonitorTimeoutId&&clearTimeout(this.paginationMonitorTimeoutId)}async riverPaginationCallback(t){var i;if(!t||!t.length)return;const e=t[1]??t[0];(this.isWaterfall||this.config.enableSentinelForPL3&&null!==(i=this.feedManager)&&void 0!==i&&i.layout3InDiscover?t.some(t=>t.isIntersecting):e.isIntersecting)?(this.isSentinelInView=!0,this.config.ignoreRefreshRegion||await this.feedManager.updateRegionsData(!!this.config.paginationPrecacheMargin),this.config.useOptimizedPagination&&(0,g.D)(()=>{this.isSentinelInView&&(this.isSentinelInView=!1,this.clearPaginationObserver(),this.setupPaginationObserver())})):this.isSentinelInView=!1}initializeSuperContainerLoader(){var t,i,e,s;const n=Object.assign({},this.config,this.configOverride),r=(0,O.cE)(),o=n.enableSuperInfopane?{"article-card":"cs-article-card","content-card":"cs-article-card","native-ad-card":"cs-native-ad-card","infopane-card":"cs-infopane-card","web-content-card":"cs-article-card-no-hide-story"}:{"article-card":"cs-article-card","content-card":"cs-article-card","native-ad-card":"cs-native-ad-card","web-content-card":"cs-article-card-no-hide-story"};n.enableSuperInfopane&&n.enableImmersiveInfopane&&(o["infopane-card"]="cs-infopane-card-immersive"),n.enableSuperInfopane&&n.enableInfopaneFontSize28&&(o["infopane-card"]="cs-infopane-card-28"),n.enableFeedSuperCardsUnderline?(o["article-card"]="cs-article-card-underline",o["content-card"]="cs-article-card-underline",o["native-ad-card"]="cs-native-ad-card-underline"):n.useMobile?(o["article-card"]="cs-article-card-no-hover",o["content-card"]="cs-article-card-no-hover",o["native-ad-card"]="cs-native-ad-card-no-hover",o["web-content-card"]="cs-article-card-no-hover",o["video-card"]="cs-video-card-no-hover",n.enableMemoizeInfopane&&(o["content-group"]="content-group"),(n.enableLargeImgDualtoneCard||n.enableSmallImgDualtoneCard)&&(o["article-card"]="cs-article-card-no-hover-dense",o["video-card"]="cs-video-card-no-hover-dense"),(n.enableLightDensefeedMobile||n.enableHalfUCardForAll&&!n.enableDenseHalfUCardForMobile)&&(o["article-card"]="cs-article-card-no-hover-light",o["content-card"]="cs-article-card-no-hover-light",o["web-content-card"]="cs-article-card-no-hover-light",o["video-card"]="cs-article-card-no-hover-light"),n.enableTopAdCard&&null!=r&&r.isOEM&&(o["native-top-ad-card"]="cs-native-top-ad-card")):n.enableSuperCardsAdsLoggingBundles||n.enableSuperCardsAdsImprLog?o["native-ad-card"]="cs-native-ad-card-logging":n.enableSuperCardsAdsCTABundles?o["native-ad-card"]="cs-native-ad-card-cta":n.enableFeedSuperCardsSmallerFont?(o["article-card"]="cs-article-card-smaller-font",o["content-card"]="cs-article-card-smaller-font",o["native-ad-card"]="cs-native-ad-card-smaller-font"):n.enableFeedSuperCardsT1Font?(o["article-card"]="cs-article-card-t1-font",o["content-card"]="cs-article-card-t1-font",o["native-ad-card"]="cs-native-ad-card-t1-font"):n.enableFeedSuperCardsT2Font?(o["article-card"]="cs-article-card-t2-font",o["content-card"]="cs-article-card-t2-font",o["native-ad-card"]="cs-native-ad-card-t2-font"):n.enableEntNewsBundles&&(o["article-card"]="cs-article-card-ent"),n.enableSuperVideoCard&&(o["video-card"]="cs-video-card",n.enableFeedSuperCardsT1Font&&(o["video-card"]="cs-video-card-t1-font")),"prg-ad-ris1"===(null==n||null===(t=n.adTemplateConfig)||void 0===t?void 0:t.configType)&&(o["native-ad-card"]="cs-native-ad-card-ris"),n.enableSafeAds&&null!==M.A&&void 0!==M.A&&M.A.getAdbStatus()&&(o["native-ad-card"]="cs-native-ad-card-safe"),2!==n.enableBlendInAdSlugStyle&&3!==n.enableBlendInAdSlugStyle||(o["native-ad-card"]="cs-native-ad-card-bi"),4===n.enableBlendInAdSlugStyle&&(o["native-ad-card"]="cs-native-ad-without-footer"),n.enableGeometricAds&&(o["native-ad-card"]="cs-native-ad-card-geometric"),!n.enableSuperInfopane&&n.enableAppErrorForSuperIfp&&(0,y.vV)(b.wi4,"Monitor Widget Error Infopane Template - Old MSN Template, enableImmersiveInfopane is "+n.enableImmersiveInfopane+" and disable1UImmersiveInfopane is "+n.disable1UImmersiveInfopane),null!==(i=n.adTemplateConfig)&&void 0!==i&&i.enableVAPhase2WithShimmer&&(o["native-ad-card"]="cs-native-ad-card-default"),null!==(e=n.adTemplateConfig)&&void 0!==e&&e.enableVAPhase2WithShimmer||null==n||null===(s=n.adTemplateConfig)||void 0===s||!s.enableVAPhase2||(o["native-ad-card"]="cs-native-ad-card-va-phase2");const h=a.DI.getOrCreateDOMContainer(this);this.superContainerLoader=new l(h);const d=this.feedManager.cardTemplateMap;if(d)for(const t in o)void 0===d[t]&&(d[t]=C.qy``);this.initOptions={...n,getLayoutTemplateMap:this.feedManager.getLayoutTemplateMap.bind(this.feedManager),cardTemplates:d,superCardsTemplates:o,useSharedLayoutTemplates:!!n.enableWidgetsRegion,overrideStyles:n.useMobile?this.overrideLayoutStyles+this.overrideGapStyles:""},this.superContainerLoader.init(this.initOptions)}riverFeedElementChanged(){!this.config.onlyServeAdsWhenSectionInView||this.config.enableFeedSuperCards||this.feedMutationObserver||!this.riverFeedElement||this.riverFeedElement.shadowRoot||(this.feedMutationObserver=new MutationObserver(()=>{if(this.riverFeedElement&&this.riverFeedElement.children){const t=Array.from(this.riverFeedElement.children).filter(t=>"MSFT-FEED-LAYOUT"===t.tagName&&!t.isPlaceholder);this.feedManager.onFeedLayoutElementsChanged(t)}}),this.feedMutationObserver.observe(this.riverFeedElement,{childList:!0}))}}E.sharedfeedManagerReferredCountKey=Symbol("sharedfeedManagerReferredCount"),(0,s.Cg)([d.sH],E.prototype,"isAboveTheFoldVisuallyReady",void 0),(0,s.Cg)([d.sH],E.prototype,"overriddenConfig",void 0),(0,s.Cg)([d.sH],E.prototype,"overrideGapStyles",void 0),(0,s.Cg)([d.sH],E.prototype,"overrideLayoutStyles",void 0),(0,s.Cg)([d.sH],E.prototype,"riverSentinelHeight",void 0),(0,s.Cg)([d.sH],E.prototype,"riverFeedElement",void 0),(0,s.Cg)([d.sH],E.prototype,"feedManager",void 0)}}]);