"use strict";(self.homePageWebpackChunks=self.homePageWebpackChunks||[]).push([["web-components_follow-publisher-button_dist_index_js"],{2553:function(t,e,i){i.d(e,{AT:function(){return s},hv:function(){return l},jf:function(){return d}});var r=i(16091),a=i(17720),o=i(69089);const n=Symbol("RubyCardMapSegment"),s=(0,r.G)({getInstance:()=>a.vv.get(n,()=>new Map([["Weather",o.s.WeatherCard],["Weather_Nowcast",o.s.NowcastWeatherCard],["Weather_TeaserRain",o.s.RainTodayWeatherCard],["Sports",o.s.SportsCard],["Finance",o.s.FinanceCard],["CasualGame",o.s.CasualGamesCard],["Shopping",o.s.ShoppingCard],["DailyBrief",o.s.DailyBriefCard],["DailyMoment",o.s.cegrowthCard]]))}),c=Symbol("RubyActionBasedCardMapSegment"),d=(0,r.G)({getInstance:()=>a.vv.get(c,()=>new Map([["News_CreatorSpotlight",{definitionName:"News_CreatorSpotlight",targetType:"ContentGroup"}],["News_BreakingNews",{definitionName:"News_BreakingNews",targetType:"Notification"}],["News_ForYouNews",{definitionName:"News_ForYouNews",targetType:"Notification"}],["News_SaveForLater",{definitionName:"News_SaveForLater",targetType:"ContentGroup"}],["Weather_SevereWeather",{definitionName:"Weather_SevereWeather",targetType:"Notification"}],["News_CatchUpStack",{definitionName:"News_CatchUpStack",targetType:"ContentGroup"}],["News_TopStories",{definitionName:"News_TopStories",targetType:"ContentGroup"}],["News_TrendingNow",{definitionName:"News_TrendingNow",targetType:"ContentGroup"}],["News_DailyWonder",{definitionName:"News_DailyWonder",targetType:"ContentGroup"}],["News_WatchGoldShorts",{definitionName:"News_WatchGoldShorts",targetType:"ContentGroup"}]]))}),l=Object.freeze([{telemetryName:"Weather",widgetName:"Weather",id:"weather",isGated:!1,infoCards:[{cardName:"Forecast",telemetryName:"Forecast",isEnabled:!0,id:"forecast",isGated:!1,cardTypes:["Weather"],parentId:"weather"},{cardName:"Severe weather alerts",telemetryName:"SevereWeather",isEnabled:!0,id:"severe_weather",isGated:!1,cardTypes:["Weather_SevereWeather"],parentId:"weather"},{cardName:"Nowcast",telemetryName:"NowcastWeather",isEnabled:!0,id:"nowcast",isGated:!1,cardTypes:["Weather_Nowcast"],parentId:"weather"},{cardName:"Rain today",telemetryName:"RainToday",isEnabled:!0,id:"rain_today",isGated:!1,cardTypes:["Weather_TeaserRain"],parentId:"weather"}]},{telemetryName:"Moments",widgetName:"Moments in time",id:"moments",isGated:!1,infoCards:[{cardName:"Today's moment",telemetryName:"TodaysMoment",isEnabled:!0,id:"todays_moment",isGated:!1,cardTypes:["DailyMoment"],parentId:"moments"}]},{widgetName:"Finance",telemetryName:"Finance",id:"finance",isGated:!1,infoCards:[{cardName:"Market updates",telemetryName:"MarketUpdates",isEnabled:!0,id:"market_updates",isGated:!1,cardTypes:["Finance"],parentId:"finance"},{cardName:"Price alert",telemetryName:"PriceAlert",isEnabled:!0,id:"price_alert",isGated:!0,cardTypes:["Finance_PriceMovement"],parentId:"finance"}]},{widgetName:"Shopping",telemetryName:"Shopping",id:"shopping",isGated:!1,infoCards:[{cardName:"Price drop",telemetryName:"PriceDrop",isEnabled:!0,id:"price_drop",isGated:!1,cardTypes:["Shopping"],parentId:"shopping"}]},{widgetName:"Games",telemetryName:"Games",id:"games",isGated:!1,infoCards:[{cardName:"Games to play",telemetryName:"GamesToPlay",isEnabled:!0,id:"games_to_play",isGated:!1,cardTypes:["CasualGame"],parentId:"games"}]},{widgetName:"Sports",telemetryName:"Sports",id:"sports",isGated:!1,infoCards:[{cardName:"Upcoming events",telemetryName:"UpcomingEvents",isEnabled:!0,id:"upcoming_events",isGated:!1,cardTypes:["Sports"],parentId:"sports"},{cardName:"Score updates",telemetryName:"ScoreUpdates",isEnabled:!0,id:"score_updates",isGated:!0,cardTypes:["Sports_ScoreUpdates"],parentId:"sports"}]},{widgetName:"Picks for you",telemetryName:"Picks",id:"picks",isGated:!1,infoCards:[{cardName:"Daily wonder",telemetryName:"DailyWonder",isEnabled:!0,id:"daily_wonder",isGated:!1,cardTypes:["News_DailyWonder"],parentId:"picks"}]},{widgetName:"News",telemetryName:"News",id:"news",isGated:!1,infoCards:[{cardName:"Copilot daily",telemetryName:"CopilotDaily",isEnabled:!0,id:"copilot_daily",isGated:!0,cardTypes:["News_CopilotDaily"],parentId:"news"},{cardName:"Breaking news",telemetryName:"BreakingNews",isEnabled:!0,id:"breaking_news",isGated:!1,cardTypes:["News_BreakingNews"],parentId:"news"},{cardName:"Save for later",telemetryName:"SaveForLater",isEnabled:!0,id:"save_for_later",isGated:!1,cardTypes:["News_SaveForLater"],parentId:"news"},{cardName:"For you",telemetryName:"ForYou",isEnabled:!0,id:"for_you",isGated:!1,cardTypes:["News_ForYouNews"],parentId:"news"},{cardName:"Catch-up news",telemetryName:"CatchUpNews",isEnabled:!0,id:"catch_up_news",isGated:!1,cardTypes:["News_CatchUpStack"],parentId:"news"},{cardName:"Top stories",telemetryName:"TopStories",isEnabled:!0,id:"top_stories",isGated:!1,cardTypes:["News_TopStories"],parentId:"news"},{cardName:"Trending now",telemetryName:"TrendingNow",isEnabled:!0,id:"trending_now",isGated:!1,cardTypes:["News_TrendingNow"],parentId:"news"}]},{widgetName:"Entertainment",telemetryName:"Entertainment",id:"entertainment",isGated:!1,infoCards:[{cardName:"Creator spotlight",telemetryName:"CreatorSpotlight",isEnabled:!0,id:"creator_spotlight",isGated:!1,cardTypes:["News_CreatorSpotlight"],parentId:"entertainment"},{cardName:"Entertainment Break",telemetryName:"News_WatchGoldShorts",isEnabled:!0,id:"watch_goldshorts",isGated:!1,cardTypes:["News_WatchGoldShorts"],parentId:"entertainment"}]}])},4968:function(t,e,i){i.d(e,{f:function(){return c}});var r=i(64187),a=i(74849),o=i(42792),n=i(99657),s=i(36452);const c=a.A.partial`position: relative; z-index: ${n.D};`;a.A`
    ${o.e}
    ${o.nH}

    ${(0,r.V)("grid")} :host {
        grid-template-rows: auto 1fr minMax(16px, auto);
        grid-template-columns: 100%;
        ${c}
    }

    .content {
        padding: 0 var(--sd-card-content-padding-inline, 16px);
        overflow: hidden;
    }

    ::slotted([slot="header"]) {
        grid-row: 1;
    }
    ::slotted([slot="footer"]) {
        grid-row: 3;
    }

    ::slotted([slot="image"]) {
        position: absolute;
        bottom: 0;
        right: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: -1;
    }

    /* Ensure neutral buttons have a stroke per the design */
    ::slotted(fluent-button[appearance="neutral"]),
    ::slotted(fluent-anchor[appearance="neutral"]) {
        border: 1px solid ${s.I2};
    }

    ::slotted(fluent-button[appearance="neutral"]:hover),
    ::slotted(fluent-anchor[appearance="neutral"]:hover) {
        border-color: ${s.mb};
    }

    ::slotted(fluent-button[appearance="neutral"]:active),
    ::slotted(fluent-anchor[appearance="neutral"]:active) {
        border-color: ${s.MY};
    }

    .header-overlay,
    .footer-overlay {
        position: absolute;
        background: rgba(255, 255, 255, 0.46);
        height: 100%;
        width: 100%;
        opacity: 0;
    }

    .header-overlay {
        grid-row: 1 / span 1;
    }

    .footer-overlay {
        grid-row: 3 / span 1;
    }

    .gradient {
        position: absolute;
        grid-row: 2 / span 1;
        height: 100%;
        width: 100%;
        opacity: 0;
        background: linear-gradient(
            180deg,
            rgba(255, 255, 255, 0.46) 0%,
            rgba(255, 255, 255, 0) 22%,
            rgba(255, 255, 255, 0) 86%,
            rgba(255, 255, 255, 0.46) 100%
        );
    }

    @media (prefers-color-scheme: dark) {
        .header-overlay,
        .footer-overlay {
            background: rgba(0, 0, 0, 0.54);
        }

        .gradient {
            background: linear-gradient(
                180deg,
                rgba(0, 0, 0, 0.54) 0%,
                rgba(0, 0, 0, 0) 22%,
                rgba(0, 0, 0, 0) 86%,
                rgba(0, 0, 0, 0.54) 100%
            );
        }
    }

    :host([immersive-card]) .header-overlay,
    :host([immersive-card]) .footer-overlay,
    :host([immersive-card]) .gradient {
        opacity: 1;
    }
`.withBehaviors(o.kc)},13302:function(t,e,i){i.d(e,{_:function(){return h}});var r=i(17720),a=i(17254),o=i(48608),n=i(31653),s=i(8353),c=i(86948),d=i(57759),l=i(19993),u=i(44205);async function h(t){t.telemetry||(t.telemetry={});const e=(0,c.NP)();let i=(0,s.F6)(),h=(0,s.I6)();const p=(0,s.DP)();if(!i){const t=await async function(){var t;const e="OcvFeedbackAuth";if(r.vv.has(e))return r.vv.get(e);const i=null===(t=(0,o._W)())||void 0===t?void 0:t.access_token;return i?await(0,d.w)(async()=>{const t=new URL(`https://api.msn.${a.T3.IsChinaCompliance?"cn":"com"}/auth/token/v1/validation/usertoken`);l.WR.getCommonParams2("Peregrine").forEach(e=>t.searchParams.set(e.key,e.value));const o=await l.WR.getBaseRequestData("POST");o.headers["Content-Type"]="application/json",o.body=JSON.stringify({accessToken:i});const n=await fetch(t.href,o),s=await n.json(),c=null==s?void 0:s.claims;return c&&r.vv.set(e,c),c},"authTokenValidation"):void 0}();i=null==t?void 0:t.puid,h=null==t?void 0:t.tenantId}switch(e){case"MSA":t.complianceChecks={authenticationType:"MSA",ageGroup:u.P2[p]},t.telemetry.loggableUserId="p:"+i,t.telemetry.tenantId=n.nt;break;case"AAD":t.complianceChecks={authenticationType:"AAD",ageGroup:u.P2[p]},t.telemetry.loggableUserId="ap:"+i,t.telemetry.tenantId=h;break;default:t.complianceChecks={authenticationType:"Unauthenticated",ageGroup:u.P2[u.P2.Undefined]},t.telemetry.loggableUserId="",t.telemetry.tenantId="00000000-0000-0000-0000-000000000000"}}},34773:function(t,e,i){var r;i.d(e,{C:function(){return r}}),function(t){t.Block="Block",t.Unblock="Unblock",t.Save="Save",t.Unsave="Unsave",t.Mute="Mute",t.MuteWebVideo="MuteWebVideo",t.Follow="Follow",t.Unfollow="Unfollow",t.InterestFailure="InterestFailure",t.ShowMore="ShowMore",t.ShowFewer="ShowFewer",t.Hide="Hide",t.DisableNotification="DisableNotification",t.EnableNotification="EnableNotification",t.RecommendedInterestsFailure="RecommendedInterestsFailure",t.Refresh="Refresh",t.Pin="Pin",t.Unpin="Unpin",t.HideTopic="HideTopic",t.UnhideTopic="UnhideTopic",t.HideSource="HideSource",t.UnhideSource="UnhideSource",t.WindowsInformation="WindowsInformation",t.Error="Error",t.Default="Default",t.ConnectionError="ConnectionError",t.MuteError="MuteError",t.Fre="Fre",t.TuneYourFeed="TuneYourFeed",t.Report="ReportContent"}(r||(r={}))},44205:function(t,e,i){var r,a,o,n;i.d(e,{G4:function(){return r},Ij:function(){return n},P2:function(){return o},vO:function(){return s}}),function(t){t.Ocv="Ocv",t.Ods="Ods"}(r||(r={})),function(t){t.NotConfigured="Not Configured",t.Enabled="Enabled",t.Disabled="Disabled"}(a||(a={})),function(t){t[t.Undefined=0]="Undefined",t[t.MinorWithoutParentalConsent=1]="MinorWithoutParentalConsent",t[t.MinorWithParentalConsent=2]="MinorWithParentalConsent",t[t.Adult=3]="Adult",t[t.NotAdult=4]="NotAdult",t[t.MinorNoParentalConsentRequired=5]="MinorNoParentalConsentRequired"}(o||(o={})),function(t){t[t.feedbackDefault=2224]="feedbackDefault",t[t.windowsFeed=2475]="windowsFeed",t[t.edgeChromium=2231]="edgeChromium"}(n||(n={}));class s{constructor(){this.manifestType="Sas",this.appId=n.feedbackDefault,this.source="Client",this.type="Idea"}}},45478:function(t,e,i){i.d(e,{MsnFollowPublisherButton:function(){return U}});var r=i(56911),a=i(92011),o=i(96950),n=i(60402);const s=o.qy`<button ${(0,n.K)("followButton")} part="button" data-t="${t=>{var e,i,r;return null===(e=t.isFollowing?null===(i=t.telemetryData)||void 0===i?void 0:i.unfollow:null===(r=t.telemetryData)||void 0===r?void 0:r.follow)||void 0===e?void 0:e.getMetadataTag()}}" class="follow-button${t=>t.isFollowing?" active":" inactive"}" title="${t=>{var e,i;return t.isFollowing?null===(e=t.strings)||void 0===e?void 0:e.followingTooltip:null===(i=t.strings)||void 0===i?void 0:i.followTooltip}}" @click=${t=>t.clickHandler(!0)}><span class="follow-button-icon" part="follow-button-icon"><img src=${t=>t.buttonIcon} aria-hidden="true"/></span><span class="follow-button-text">${t=>{var e,i;return t.isFollowing?null===(e=t.strings)||void 0===e?void 0:e.followingText:null===(i=t.strings)||void 0===i?void 0:i.followText}}</span></button>`;var c,d,l=i(74849),u=i(22131),h=i(4968),p=i(12870),v=i(75096);const w="macOS"===(null===(c=window)||void 0===c||null===(c=c.navigator)||void 0===c||null===(c=c.userAgentData)||void 0===c?void 0:c.platform)&&"ntp"===p.Rb.ClientSettings.pagetype?"14px":"18px",b="macOS"===(null===(d=window)||void 0===d||null===(d=d.navigator)||void 0===d||null===(d=d.userAgentData)||void 0===d?void 0:d.platform)&&"ntp"===p.Rb.ClientSettings.pagetype?"0":"-1px 0 0 0",m=l.A` :host{--attrib-btn-icon:#212121;--attrib-btn-icon-hover:#242424;--attrib-btn-icon-active:#242424;--attrib-btn-border:#D1D1D1;--attrib-btn-border-hover:#C7C7C7;--attrib-btn-border-active:#B3B3B3;--attrib-btn-bg:#FFFFFF;--attrib-btn-bg-hover:#F5F5F5;--attrib-btn-bg-active:#E0E0E0}`,g=l.A` :host{--attrib-btn-icon:#FFFFFF;--attrib-btn-icon-hover:#FFFFFF;--attrib-btn-icon-active:#FFFFFF;--attrib-btn-border:#666666;--attrib-btn-border-hover:#757575;--attrib-btn-border-active:#6B6B6B;--attrib-btn-bg:#292929;--attrib-btn-bg-hover:#3D3D3D;--attrib-btn-bg-active:#1F1F1F}`,f=l.A` :host{${h.f} display:block;overflow:clip visible;transition:all 0.3s cubic-bezier(0,0.8,0,1) 0s}.follow-button{border-radius:4px;height:21px;width:unset;font-size:12px;padding:0 5px;margin-inline-start:4px;margin-top:-2px;border:1px solid transparent;justify-content:center;z-index:1;display:flex;flex-direction:row;align-items:center;cursor:pointer;font-family:var(--body-font)}.follow-button.inactive{border-radius:4px;color:var(--attrib-btn-icon);background:var(--attrib-btn-bg);border-color:var(--attrib-btn-border)}.follow-button.inactive:hover{color:var(--attrib-btn-icon-hover);background:var(--attrib-btn-bg-hover);border-color:var(--attrib-btn-border-hover)}.follow-button.inactive:active{color:var(--attrib-btn-icon-active);background:var(--attrib-btn-bg-active);border-color:var(--attrib-btn-border-active)}.follow-button.active{border-radius:4px;color:var(--attrib-btn-icon);background:var(--attrib-btn-bg);border-color:var(--attrib-btn-border)}.follow-button.active:hover{color:var(--attrib-btn-icon-hover);background:var(--attrib-btn-bg-hover);border-color:var(--attrib-btn-border-hover)}.follow-button.active:active{color:var(--attrib-btn-icon-active);background:var(--attrib-btn-bg-active);border-color:var(--attrib-btn-border-active)}.follow-button-icon{margin:${b};padding-inline-end:5px;justify-content:center}.follow-button-text{height:${w}}.follow-button-icon img{width:9px;height:9px}`.withBehaviors((0,u.C7)(m),(0,u.G2)(g),new v.X(["collapseWidth"],t=>t.collapseWidth?l.A`:host { width: ${t.collapseWidth}px; pointer-events: auto; }`:l.A`:host { width: 0px; pointer-events: none; }`));var y,S,C,_,N=i(17254),T=i(60815),F=i(38493),I=i(52088),k=i(61226),$=i(30216),M=i(83117),P=i(34773);!function(t){t[t.auto=0]="auto",t[t.show=1]="show",t[t.onhover=2]="onhover",t[t.onactivehover=3]="onactivehover",t[t.hide=4]="hide"}(y||(y={})),function(t){t[t.auto=0]="auto",t[t.show=1]="show",t[t.onactive=2]="onactive",t[t.hide=3]="hide"}(S||(S={})),function(t){t[t.Unfollowed=0]="Unfollowed",t[t.Following=1]="Following",t[t.Subscribed=2]="Subscribed",t[t.Unavailable=3]="Unavailable"}(C||(C={})),function(t){t[t.feedCard=0]="feedCard",t[t.content=1]="content"}(_||(_={}));var A=i(11372),E=i(47149);const G=`${(0,N.rA)().StaticsUrl}/latest/follow/CheckLight.svg`,x=`${(0,N.rA)().StaticsUrl}/latest/follow/CheckDark.svg`,O=`${(0,N.rA)().StaticsUrl}/latest/follow/PlusLight.svg`,R=`${(0,N.rA)().StaticsUrl}/latest/follow/PlusDark.svg`;class D extends a.L{constructor(){var t;super(...arguments),t=this,this.defaultFollowState=C.Unavailable,this.context=_.feedCard,this.iconBehavior=S.auto,this.visibilityBehavior=y.auto,this.darkModeMediaQuery=window.matchMedia("(prefers-color-scheme: dark)"),this.collapseWidth=0,this.contentCardHovered=!1,this.followButtonHovered=!1,this.currentState=C.Unavailable,this.darkTheme=this.darkModeMediaQuery.matches,this.themeChangeHandler=t=>{this.darkTheme=t.matches},this.mouseenterHandler=()=>{this.contentCardHovered=!0,this.updateAttributionButtonWidth()},this.mouseleaveHandler=()=>{this.contentCardHovered=!1,this.updateAttributionButtonWidth()},this.clickHandler=function(){var e;let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t.clickOverride)return void t.clickOverride(t.currentState);const r=t.publisherProfileId;if(!r)return;const a=(0,k.J6)();if(!a)return;const o=e=>{i&&t.enableToast&&t.publisherName&&t.displayFollowToast(e,r,t.publisherName)},n={actionPosition:t.followButton&&(null===(e=I.W.getLineage(I.W.get(t.followButton)))||void 0===e?void 0:e.lineage)||`${(0,N.rA)().AppType}>FollowPublisherButton>UndefinedLineage`,contentId:t.contentId||"undefined"};t.currentState===C.Following?(t.currentState=C.Unfollowed,a.Unfollow(r,n).then(t=>o(!1),()=>{}),t.updateAttributionButtonWidth()):(t.currentState=C.Following,a.Follow(r,n).then(t=>o(!0),()=>{}),t.updateAttributionButtonWidth())}}get isFollowing(){return this.currentState===C.Following}get isSubscribed(){return this.currentState===C.Subscribed}get buttonIcon(){return this.darkTheme?this.isFollowing?x:R:this.isFollowing?G:O}get buttonText(){var t,e;return this.isFollowing?null===(t=this.strings)||void 0===t?void 0:t.followingText:null===(e=this.strings)||void 0===e?void 0:e.followText}connectedCallback(){var t,e,i;super.connectedCallback(),this.updateCurrentState(),this.updateBehaviors(),this.attachHoverHandlersForContentCard(),this.darkModeMediaQuery.addEventListener("change",this.themeChangeHandler),this.listenToCardActionUpdates&&this.registerCardActionFollowStatusListener(),this.telemetryData=(t=this.publisherName,e=this.publisherId??this.publisherProfileId,i=this.contentId,{follow:new E.$({name:"FollowButton",behavior:A.MS.Follow,action:A.EG.Click,content:{id:i,brand:t,brandId:e}}),unfollow:new E.$({name:"FollowingButton",behavior:A.MS.Unfollow,action:A.EG.Click,content:{id:i,brand:t,brandId:e}})})}disconnectedCallback(){super.disconnectedCallback(),this.unattachHoverHandlersForContentCard(),this.darkModeMediaQuery.removeEventListener("change",this.themeChangeHandler),this.cardActionFollowStatusListener&&this.cardActionFollowStatusListener()}registerCardActionFollowStatusListener(){this.cardActionFollowStatusListener=k.Pi.registerPublisherFollowStatusListener(t=>{let{profileId:e,value:i}=t;e===this.publisherProfileId&&(this.currentState=i?C.Following:C.Unfollowed,this.updateAttributionButtonWidth())})}attachHoverHandlersForContentCard(){this.parentCardElement&&(this.parentCardElement.addEventListener("mouseenter",this.mouseenterHandler),this.parentCardElement.addEventListener("mouseleave",this.mouseleaveHandler),this.parentCardElement.addEventListener("focusin",this.mouseenterHandler),this.parentCardElement.addEventListener("focusout",this.mouseleaveHandler))}unattachHoverHandlersForContentCard(){this.parentCardElement&&(this.parentCardElement.removeEventListener("mouseenter",this.mouseenterHandler),this.parentCardElement.removeEventListener("mouseleave",this.mouseleaveHandler),this.parentCardElement.removeEventListener("focusin",this.mouseenterHandler),this.parentCardElement.removeEventListener("focusout",this.mouseleaveHandler))}updateCurrentState(){const t=this.publisherProfileId;if(!t)return;const e=k.Pi.publisherFollowStatus[t];this.overrideFollowState?this.currentState=this.defaultFollowState:void 0!==e?this.currentState=e?C.Following:C.Unfollowed:void 0!==this.cardActionStatus?this.currentState=0!==(this.cardActionStatus&$.J.followedPublisher)?C.Following:C.Unfollowed:this.currentState===C.Unavailable&&(this.currentState=this.defaultFollowState)}updateBehaviors(){this.visibilityBehavior===y.auto&&this.iconBehavior===S.auto&&(this.visibilityBehavior===y.auto&&(this.visibilityBehavior=this.currentState===C.Following?y.hide:y.onhover),this.iconBehavior===S.auto&&(this.iconBehavior=S.show),this.updateAttributionButtonWidth())}updateAttributionButtonWidth(){switch(this.visibilityBehavior){case y.hide:this.collapseWidth=0;break;case y.onhover:window.requestAnimationFrame(()=>{this.contentCardHovered?this.collapseWidth=this.followButton?this.followButton.getBoundingClientRect().width+5:0:this.collapseWidth=0});break;case y.onactivehover:window.requestAnimationFrame(()=>{this.contentCardHovered||this.currentState===C.Following?this.collapseWidth=this.followButton?this.followButton.getBoundingClientRect().width+5:0:this.collapseWidth=0});break;case y.show:window.requestAnimationFrame(()=>{this.collapseWidth=this.followButton?this.followButton.getBoundingClientRect().width+5:0})}}displayFollowToast(t,e,i){var r;const a=t?`${e}-channelstore-follow`:`${e}-channelstore-unfollow`;M.g.renderToast({id:a,toastType:t?P.C.Follow:P.C.Unfollow,inputText:i,expirationInMs:3e3,buttonText:null===(r=this.strings)||void 0===r?void 0:r.undoText,onClick:async()=>{this.clickHandler(!1)}})}}(0,r.Cg)([T.sH],D.prototype,"iconBehavior",void 0),(0,r.Cg)([T.sH],D.prototype,"visibilityBehavior",void 0),(0,r.Cg)([(0,F.CF)({attribute:"collapse"})],D.prototype,"collapseWidth",void 0),(0,r.Cg)([(0,F.CF)({mode:"boolean"})],D.prototype,"contentCardHovered",void 0),(0,r.Cg)([(0,F.CF)({mode:"boolean"})],D.prototype,"followButtonHovered",void 0),(0,r.Cg)([T.sH],D.prototype,"currentState",void 0),(0,r.Cg)([T.sH],D.prototype,"darkTheme",void 0),(0,r.Cg)([T.sH],D.prototype,"telemetryData",void 0);let U=class extends D{};U=(0,r.Cg)([(0,a.E)({name:"msn-follow-publisher-button",template:s,styles:f})],U)},61226:function(t,e,i){i.d(e,{Pi:function(){return L},J6:function(){return K}});var r=i(68154),a=i(28006),o=i(65022),n=i(93468),s=i(17254),c=i(12870),d=i(2429),l=i(36090),u=i(98216),h=i(11372),p=i(74326),v=i(19993),w=i(57759),b=i(50677),m=i(56408),g=i(83117),f=i(34773),y=i(29252),S=i(44205),C=i(13302),_=i(10160),N=i(77246),T=i(29231);const F="data-view-context",I="data-widget",k="widget-visible";class ${static getInstance(t){const e=this._instance||(this._instance=new this);return e.observeWidgetVisibile(),e}static removeInstance(){this._instance&&(this._instance.observer.disconnect(),this._instance.observer=void 0,this._instance.widgetDom=void 0,this._instance.widgetDataDom=void 0,this._instance=void 0)}getViewContext(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.getWidgetDom(),this.getWidgetContextData(),this.viewContext}getWidgetAttributes(){return(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.getWidgetDom(),this.getWidgetData(),this.widgetAttributes}constructor(){this.getWidgetContextData()}getWidgetDom(){const t=this.getWidgetByClassName(_.JV);t&&(this.widgetDom=t);const e=this.getWidgetByClassName(_.AF);return e&&(this.widgetDataDom=e),this.widgetDom}getWidgetByClassName(t){if(!t)return;const e=(0,N.S)()&&document.getElementsByClassName(t);if(e&&e.length>0){return e[0]}}getWidgetContextData(){var t,e;const i=(null===(t=this.widgetDom)||void 0===t?void 0:t.getAttribute(F))??(null===(e=this.widgetDataDom)||void 0===e?void 0:e.getAttribute(F));if(!i){var r;this.getWidgetData();const t=null===(r=this.widgetAttributes)||void 0===r?void 0:r.pcsAdditionalQsp;if(t){const e=new URLSearchParams(t),i=e.get("id"),r=e.get("scenario");this.viewContext={quoteId:i,scenario:r}}return}try{const t=JSON.parse(i);this.viewContext={...this.viewContext,quoteId:t.QuoteId||t.quoteid,duration:t.Duration||t.duration,scenario:t.Scenario||t.scenario,isEarningsEnabled:t.isEarningsEnabled}}catch(t){return}}getWidgetData(){var t,e;const i=(null===(t=this.widgetDom)||void 0===t?void 0:t.getAttribute(I))??(null===(e=this.widgetDataDom)||void 0===e?void 0:e.getAttribute(I));if(i)try{const t=JSON.parse(i);this.widgetAttributes={...t}}catch(t){return}}observeWidgetVisibile(){this.widgetDom&&(this.observer&&this.observer.disconnect(),this.observer=new MutationObserver((t,e)=>{const i=this.widgetDom.getAttribute(k);i&&/^\s*(true|1)\s*$/i.test(i.toLowerCase())&&u.YT.scheduleContentViewEvent(T.ym.Load)}),this.observer.observe(this.widgetDom,{attributeFilter:[k]}))}}var M=i(17720),P=i(6727),A=i(63456),E=i(2462),G=i(86948),x=i(35849),O=i(48622),R=i(64747),D=i(30216),U=i(2553);const W="https://petrol.office.microsoft.com/v1/feedback";class L{static get publisherFollowStatusListenerId(){return M.vv.get("__CardActionServiceClientPublisherFollowStatusListenerIdKey__",()=>1)}static set publisherFollowStatusListenerId(t){M.vv.set("__CardActionServiceClientPublisherFollowStatusListenerIdKey__",t)}static get showMoreFewerStatusListenerId(){return M.vv.get("__CardActionServiceClientShowMoreFewerStatusListenerIdKey__",()=>1)}static set showMoreFewerStatusListenerId(t){M.vv.set("__CardActionServiceClientShowMoreFewerStatusListenerIdKey__",t)}static get publisherFollowStatus(){return M.vv.get("__CardActionServiceClientPublisherFollowStatusKey__",()=>({}))}static set publisherFollowStatus(t){M.vv.set("__CardActionServiceClientPublisherFollowStatusKey__",t)}static get _publisherFollowStatusListeners(){return M.vv.get("__CardActionServiceClient_publisherFollowStatusListenersKey__",()=>new Map)}static set _publisherFollowStatusListeners(t){M.vv.set("__CardActionServiceClient_publisherFollowStatusListenersKey__",t)}static get _showMoreFewerStatusListeners(){return M.vv.get("__CardActionServiceClient_showMoreFewerStatusListenersKey__",()=>new Map)}static set _showMoreFewerStatusListeners(t){M.vv.set("__CardActionServiceClient_showMoreFewerStatusListenersKey__",t)}static get showMoreFewerStatus(){return M.vv.get("__CardActionServiceClientShowMoreFewerStatusKey__",()=>({}))}static set showMoreFewerStatus(t){M.vv.set("__CardActionServiceClientShowMoreFewerStatusKey__",t)}static get topicFollowStatus(){return M.vv.get("__CardActionServiceClientTopicFollowStatusKey__",()=>({}))}static set topicFollowStatus(t){M.vv.set("__CardActionServiceClientTopicFollowStatusKey__",t)}static get saveStatus(){return M.vv.get("__CardActionServiceClientSaveStatusKey__",()=>({}))}static set saveStatus(t){M.vv.set("__CardActionServiceClientSaveStatusKey__",t)}static get publisherMuteStatus(){return M.vv.get("__CardActionServiceClientPublisherMuteStatusKey__",()=>({}))}static set publisherMuteStatus(t){M.vv.set("__CardActionServiceClientPublihserMuteStatusKey__",t)}static getSharedWidgetScenario(){const t=$.getInstance().getViewContext(!0);return null==t?void 0:t.scenario}static isFinanceScenario(){const t=this.getSharedWidgetScenario();return t&&("watchlist"===t||"market"===t||"stock"===t||"earnings"===t)}static setPublisherFollowStatus(t,e){L.publisherFollowStatus[t]=e,L._publisherFollowStatusListeners.forEach(i=>{i({profileId:t,value:e})})}static setShowMoreFewerStatus(t,e){L.showMoreFewerStatus[t]=e,L._showMoreFewerStatusListeners.forEach(i=>{i({contentId:t,value:e})})}static clearPublisherFollowStatus(){L.publisherFollowStatus={}}static setTopicFollowStatus(t,e){L.topicFollowStatus[t]=e}static setSaveStatus(t,e){L.saveStatus[t]=e}static setPublisherMuteStatus(t,e){L.publisherMuteStatus[t]=e}static registerPublisherFollowStatusListener(t){const e=L.publisherFollowStatusListenerId;return L._publisherFollowStatusListeners.set(e,t),L.publisherFollowStatusListenerId+=1,()=>L._publisherFollowStatusListeners.delete(e)}static registerShowMoreFewerStatusListener(t){const e=L.showMoreFewerStatusListenerId;return L._showMoreFewerStatusListeners.set(e,t),L.showMoreFewerStatusListenerId+=1,()=>L._showMoreFewerStatusListeners.delete(e)}constructor(t,e){var i;this.fetchImpl=t,this.additionalHeaders=e,this.isWindowsDashboard="windowsNewsPlus"===s.T3.AppType||"winWidgets"===s.T3.AppType,this.isWindowsBoardsForRuby="winWidgets"===s.T3.AppType&&"startfeed"===(null===(i=s.T3.CurrentRequestTargetScope)||void 0===i?void 0:i.pageType)&&"ruby"===s.T3.UxMode,this.isWindowsShellV2="windowsShellV2"===s.T3.AppType,this.isTravelVertical="travel"===s.T3.AppType,this.isBingHomepage="bingHomepage"===s.T3.AppType,this.isRuby="msn"===s.T3.AppType,this.isFinanceVertical="finance"===s.T3.AppType,this.isShareWidgets="sharedWidgets"===s.T3.AppType,this.isFinanceSharedWidget=this.isShareWidgets&&L.isFinanceScenario(),this.providersServiceEndpointURL=(0,p.nI)("./Msn/Providers"),this.cardActionsServiceEndpointURL=(0,p.nI)("./Graph/Actions"),this.ocid="feeds",this.onChangePublisherFollowStatus=t=>{var e,i;const r=null==t||null===(e=t.detail)||void 0===e?void 0:e.id,a=null==t||null===(i=t.detail)||void 0===i?void 0:i.follow;r&&void 0!==a&&L.setPublisherFollowStatus(r,a)},this.getUpvoteStatus=async t=>{const e=await this.getCardActionStatus(t,D.X.Upvote);return e&&e.value&&e.value.length>0},this.getDownvoteStatus=async t=>{const e=await this.getCardActionStatus(t,D.X.Downvote);return e&&e.value&&e.value.length>0},this.getCardActionStatus=async(t,e)=>{const i=this.cardActionsServiceEndpointURL,r={method:"GET",headers:{...await v.WR.getOneServiceHeaders(),...this.additionalHeaders},credentials:"include"},a=await this.getOneServiceCommonParam();a.push({key:"$filter",value:`actionType eq '${e}' and targetId eq '${t}'`}),a.forEach(t=>t.value&&i.searchParams.set(t.key,t.value));try{const a=await(0,w.w)(async()=>await this.fetchImpl(i.href,r),`getCardAction${e}`);if(a.status>=400){const i=`OneService returned error response. Status: ${a.status} for actionType: ${e}, targetId: ${t}`;throw new Error(i)}return(0,b.FH)(this.getPreloadReloadReason(e)),(0,y.T4)(),a.json()}catch(t){u.YT.sendAppErrorEvent({...o.Bik,message:"Error while posting action for card action",pb:{...o.Bik.pb,customMessage:`url: ${i.href}, error: ${t}`}})}},this.isWindowsBoardsForRuby?this.ocid="rubyprong2":this.isWindowsDashboard?this.ocid="winp2":this.isWindowsShellV2?this.ocid="feeds":c.Rb.IsBlendedEnterprise?this.ocid="entnewsntp":this.isTravelVertical?this.ocid="travel-verthp-feeds":this.isBingHomepage?this.ocid="Peregrine":this.isRuby?this.ocid="rubyntp":this.isFinanceVertical?this.ocid="pdp-peregrine":this.isFinanceSharedWidget&&(this.ocid="hpwidget"),this.initPublisherServiceClientPromise(),this.initTopicsDataConnector(),this.addEventListeners()}getTopicDataConnector(){return this.topicsDataConnector||this.initTopicsDataConnector(),this.topicsDataConnector}initPublisherServiceClientPromise(){let t;this.publisherServiceClientPromise=new Promise(e=>{t=e});(async()=>{const{PublisherServiceClient:e}=await i.e("msnews/publishers-service-client").then(i.bind(i,69023));t(new e((0,N.S)()?window.fetch.bind(window):fetch))})()}initTopicsDataConnector(){this.topicsDataConnector=(0,x.zP)(a.YL)}static getUndoCallbackParams(t,e,i){let r={status:t,action:null,sendRequest:!0};return t&D.J.hidden?(t&D.J.mute?(r.status=t^D.J.mute,r.action=D.X.Mute):t&D.J.report?(r.status=t^D.J.report,r.action=D.X.Report):t&D.J.showFewer&&t&D.J.hide?(r.status=t^D.J.showFewer,r.action=D.X.ShowFewer):t&D.J.showMore&&t&D.J.hide?(r.status=t^D.J.showMore,r.action=D.X.ShowMore):"like-button"===e&&t&D.J.hide&&t&D.J.followedPublisher?(r.status=t^D.J.followedPublisher,r.action=D.X.FollowPublisher):t&D.J.hideTopic?(r.status=t^D.J.hideTopic,r.action=D.X.HideTopic):t&D.J.dismiss&&(r.status=t^D.J.dismiss,r.sendRequest=!1),r.status^=D.J.hidden,i&&(r.status^=D.J.hide,r.action=D.X.Hide)):r="like-button"===e?{status:t^D.J.hide,action:"Like-TellUsMore",sendRequest:!1}:t&D.J.hide?{status:t^D.J.hide,action:D.X.Hide,sendRequest:!0}:{status:t^D.J.showFewer,action:D.X.ShowFewer,sendRequest:!0},r}setAdditionalHeaders(t){this.additionalHeaders=t}async handleShowMoreLessWithCommunityReactions(t,e,r,a){const{SocialServiceAdapter:o,ItemTypes:n,BinaryReactionType:s}=await Promise.all([i.e("libs_social-data-service_dist_service_SocialService_js"),i.e("top-comments-card")]).then(i.bind(i,21868));o.sendContentReaction({item:n.contents,id:`${t}_${e}`,reactionType:r?s.upvote:s.downvote,reset:a})}async ShowFewer(t,e,i,r){if(L.setShowMoreFewerStatus(t,i),e&&e.useCommunityReactions&&e.locale&&(this.handleShowMoreLessWithCommunityReactions(t,e.locale,!1,!1),!e.useVoteActions))return!0;const a=e&&e.useVoteActions?D.X.Downvote:D.X.Dislike;return this.PostCardActionRequest(t,a,r??null,e)}async UnshowFewer(t,e,i){if(L.setShowMoreFewerStatus(t,i),e&&e.useCommunityReactions&&e.locale&&(this.handleShowMoreLessWithCommunityReactions(t,e.locale,!1,!0),!e.useVoteActions))return!0;const r=e&&e.useVoteActions?D.X.Downvote:D.X.Dislike;return this.DeleteCardActionRequest(t,r)}async ShowMore(t,e,i,r){if(L.setShowMoreFewerStatus(t,i),e&&e.useCommunityReactions&&e.locale&&(this.handleShowMoreLessWithCommunityReactions(t,e.locale,!0,!1),!e.useVoteActions))return!0;const a=e&&e.useVoteActions?D.X.Upvote:D.X.Like;return this.PostCardActionRequest(t,a,r??null,e)}async UnshowMore(t,e,i){if(L.setShowMoreFewerStatus(t,i),e&&e.useCommunityReactions&&e.locale&&(this.handleShowMoreLessWithCommunityReactions(t,e.locale,!0,!0),!e.useVoteActions))return!0;const r=e&&e.useVoteActions?D.X.Upvote:D.X.Like;return this.DeleteCardActionRequest(t,r)}async saveContent(t,e,i){return L.setSaveStatus(t,!0),this.PostCardActionRequest(t,D.X.Save,i??null,e)}async unsaveContent(t){return L.setSaveStatus(t,!1),this.DeleteCardActionRequest(t,D.X.Save)}async Follow(t,e){L.setPublisherFollowStatus(t,!0);const i=await this.publisherServiceClientPromise;try{return await i.updateSourceFollowState(t,!0,e)}catch(e){throw L.setPublisherFollowStatus(t,!1),u.YT.sendAppErrorEvent({...o.OZt,message:"Error while following publisher for card action",pb:{...o.OZt.pb,customMessage:`targetId: ${t}, error: ${e}`}}),e}}async Unfollow(t,e,i){L.setPublisherFollowStatus(i||t,!1);const r=await this.publisherServiceClientPromise;try{return await r.updateSourceFollowState(t,!1,e)}catch(e){throw L.setPublisherFollowStatus(t,!0),u.YT.sendAppErrorEvent({...o.OZt,message:"Error while unfollowing publisher for card action",pb:{...o.OZt.pb,customMessage:`targetId: ${t}, error: ${e}`}}),e}}async FollowTopic(t,e,i){L.setTopicFollowStatus(t,!0);try{var r;return null===(r=this.getTopicDataConnector())||void 0===r?void 0:r.followTopic(t,e,!1,i)}catch(e){throw L.setTopicFollowStatus(t,!1),u.YT.sendAppErrorEvent({...o.lZi,message:"Error while following topic for card action",pb:{...o.lZi.pb,customMessage:`targetId: ${t}, error: ${e}`}}),e}}async UnfollowTopic(t){L.setTopicFollowStatus(t,!1);try{var e;return null===(e=this.getTopicDataConnector())||void 0===e?void 0:e.unfollowTopic(t)}catch(e){throw L.setTopicFollowStatus(t,!0),u.YT.sendAppErrorEvent({...o.lZi,message:"Error while unfollowing topic for card action",pb:{...o.lZi.pb,customMessage:`targetId: ${t}, error: ${e}`}}),e}}async Hide(t,e,i){return e&&e.usePdpService&&e.segmentType?this.HideSegment(e.segmentType):this.PostCardActionRequest(t,D.X.Dislike,i||null,e)}async Unhide(t){return this.DeleteCardActionRequest(t,D.X.Dislike)}async Mute(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SourceProvider",i=arguments.length>2?arguments[2]:void 0;return L.setPublisherMuteStatus(t,!0),this.PostCardActionRequest(t,D.X.Mute,e,i)}async Unmute(t){return L.setPublisherMuteStatus(t,!1),this.DeleteCardActionRequest(t,D.X.Mute)}async Disable(t,e){return this.PostCardActionRequest(t,D.X.Disabled,e)}async undoAdFeedback(t){return this.DeleteCardActionRequest(t,D.X.Dislike)}async Report(t,e,i,a,o,n,d,l,u){let w=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"",b=arguments.length>10?arguments[10]:void 0,m=arguments.length>11?arguments[11]:void 0,g=arguments.length>12?arguments[12]:void 0;const f=c.Rb.ClientSettings?c.Rb.ClientSettings.aid:"",y=s.T3&&s.T3.HostPage.topDomain;let S=g==r.vq||o===h.b5.WebContent?"web":"msn";"ugcPost"===g&&(S="ugcPost");const C=(0,r._D)(u),_={serviceType:"oneservice",oneServiceTraceId:"",oneServiceActivityId:f},N={activityId:f,feedbackTags:e,feedbackText:i},T={activityId:(0,P.DA)(),market:s.T3&&s.T3.CurrentMarket||"",contentId:t,source:S,headlineImage:d&&V(d.src),headlineText:a,abstract:n,offensive:C,url:l};if(b&&m){const t=(0,r.Zn)(b.imageQualityOtherVisualQualityTags),e=(0,r.vF)(b.suspectedAIOrBotCreatedTags);t.length&&(T.imageQualityOtherVisualQuality=t),e.length&&(T.aidetection=e)}JSON.stringify({article:{id:t},canvas:{name:s.T3.AppType,version:navigator.userAgent,pageType:w||c.Rb.ClientSettings.pagetype},data:N,appEnvironment:s.T3,clientSettings:c.Rb.ClientSettings,extSchema:_});const F=JSON.stringify(T),I="msn.cn"===y?r.LX:(0,p.pN)().origin+r.cM,k={...{...await v.WR.getOneServiceHeaders(),...this.additionalHeaders},"Content-Type":"application/json"};m&&(0!=C.length||T.aidetection)&&this.reportFeedbackService(F,I,k)}async reportGem(t,e,i,a,o){var n;const c=(0,P.DA)(),d=(0,r._D)(i),l={activityId:c,market:s.T3&&s.T3.CurrentMarket||"",contentId:t,source:"gem",signature:e,canvas:this.ocid,url:o||(null===(n=window.location)||void 0===n?void 0:n.href)||"",headlineImage:"",headlineText:"",abstract:""};if(0===d.length&&!a)return;d.length>0&&(l.offensive=d),a&&(l.gemFeedback=[]);const u="msn.cn"===(s.T3&&s.T3.HostPage.topDomain)?r.LX:(0,p.pN)().origin+r.cM,h={...await v.WR.getOneServiceHeaders(),...this.additionalHeaders,"Content-Type":"application/json"};this.reportFeedbackService(JSON.stringify(l),u,h)}async reportFeedbackService(t,e,i){const r={method:"POST",headers:i,body:t,credentials:"include"};let a;try{if(a=await fetch(e,r),a.status>=400)throw new Error(a.statusText)}catch(t){u.YT.sendAppErrorEvent({...o.HN5,message:"Error while posting action for card action",pb:{...o.HN5.pb,customMessage:`url: ${e}, error: ${t}`}})}return a}async reportNonCMS(t,e,i,r,a,o,n){this.ReportOCV(t,e,i,r,a,o,n)}async ReportOCV(t,e,i,r,a,s,c){let d=!1;const l=await this.createOcvFeedbackData(t,e,i,r,a,s,c),u={method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)};try{const t=await this.fetchImpl(W,u);if(t.ok)d=!0;else{const e=`Error code: ${t.status} Error message: ${t.statusText} Request params: ${u} Service url: ${W}`;(0,n.vV)(o.QZG,"Request is not valid, it has no content, or the manifest is not formatted correctly",e)}}catch(t){const e=`Error code: ${t?t.code:"undefined"} Error message: ${t?t.message:"undefined"} Request params: ${u} Service url: ${W}`;(0,n.c_)(t,o.lbM,"Exception reporting feedback to OCV",e)}}async createOcvFeedbackData(t,e,i,r,a,o,n){var d,l,h;const p=new S.vO,v=null===c.Rb||void 0===c.Rb?void 0:c.Rb.ClientSettings,w=null===s.T3||void 0===s.T3?void 0:s.T3.HostPage,b=(null==v?void 0:v.aid)||"",m=[o?"1S":"","true"===((null==v?void 0:v.static_page)||"")?"PCS":""].join(" ").trim()||"None",g=(null===s.T3||void 0===s.T3||null===(d=s.T3.CurrentRequestTargetScope)||void 0===d||null===(d=d.pageExperiments)||void 0===d?void 0:d.join(","))||"",f=null===s.T3||void 0===s.T3||null===(l=s.T3.CurrentRequestTargetScope)||void 0===l?void 0:l.browser;let _="";if(a){const t=a.split("|");_=t&&t.length&&t[0]}else{const t=u.YT.getPageMetadata().JoinIdProps.IDXId;if(t){_=t.split(",").slice(0,10).toString()}a=(0,y.Xq)()}const N={serviceType:"oneservice",oneServiceTraceId:_,oneServiceActivityId:""},T={NotRelevant:e.NotRelevant,ImageQuality:e.BlurryImage,MisleadingTitle:e.Misleading,OutdatedArticle:e.Outdated,DuplicateArticle:e.Duplicate,OffensiveContent:e.Offensive,Vertical:r,SuspectedAIOrBot:e.SuspectedAIOrBot,CopyrightAndTrademarkViolation:e.CopyrightAndTrademarkViolation},F=JSON.stringify(T);return u.YT.sendTraceInfoEvent(N),p.submitTime=(new Date).toISOString(),p.clientFeedbackId=(0,P.DA)(),p.comment=i,p.rating=4,p.application={appData:JSON.stringify({ScreenResolution:window&&window.screen?[screen.width,screen.height].join("x"):"",articleId:t,debugId:a,activityID:b,staticFallback:m,vertical:w&&w.verticalKey||"Prod",errorClassification:F,whyAmISeeReasons:n})},p.telemetry={audience:(null===s.T3||void 0===s.T3?void 0:s.T3.CurrentMarket)||"",audienceGroup:"Production",channel:(null==w?void 0:w.categoryKey)||"",deviceType:(null==v?void 0:v.deviceFormFactor)||"",errorClassification:F,featureArea:(null==v?void 0:v.pagetype)||"",flights:g,isUserSubscriber:(0,G.Fo)(),platform:null===(h=s.T3.CurrentRequestTargetScope)||void 0===h?void 0:h.os,processSessionId:b,sourceContext:s.T3.AppType},p.web={browser:(null==f?void 0:f.browserType)||"",browserVersion:(null==f?void 0:f.version)||"",sourcePageName:(null==w?void 0:w.subcategoryKey)||"",sourcePageURI:""},await(0,C._)(p),p}async ReportAd(t,e){if(c.Rb.CurrentFlightSet.has("prg-ad-fbck-log")&&!(0,d.V1)(t))return void(0,n.vV)(o.C8f,`Cannot send ad feedback: invalid or empty feedback URL. Value: '${t}'`);let i;(0,d.bJ)(t)?(i=(0,d.Re)(t,"${FEEDBACK}",encodeURIComponent(e||""),"f"),i=(0,d.Re)(i,"${CANVAS}",encodeURIComponent(s.T3.AppType),"canvas"),u.YT.addOrUpdateTmplProperty("adFeedbackUrlMonetize","1")):i=t.concat(`&f=${e}`);let r=new Image(1,1);r.src=i,r=null}async GetProviderIcon(t){const e=await this.GetPublisherDetails(t);return(0,A.A)(e,"value[0].logos[0].imageLink.href",void 0)}async PostCardActionEvent(t,e,i){let a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>null,n=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0,d=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=arguments.length>7?arguments[7]:void 0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:5e3,p=arguments.length>9&&void 0!==arguments[9]&&arguments[9],v=arguments.length>10?arguments[10]:void 0,w=arguments.length>11?arguments[11]:void 0,b=arguments.length>12?arguments[12]:void 0,m=arguments.length>13?arguments[13]:void 0,y=arguments.length>14?arguments[14]:void 0;switch(e){case D.X.ShowMore:t&D.J.showMore?(d&&g.g.renderToast({id:f.C.ShowMore+`-${i}`,toastType:f.C.ShowMore,expirationInMs:h,onClick:()=>{n?n(i,t^D.J.showMore,e,!0):this.PostCardActionEvent(t^D.J.showMore,e,i,o)},referrerButton:u}),a=await this.ShowMore(i,w,t,y)):(d&&g.g.expireToast(f.C.ShowMore+`-${i}`),a=await this.UnshowMore(i,w,t)),o(i,t,e);break;case D.X.ShowFewer:t&D.J.showFewer?(d&&g.g.renderToast({id:f.C.ShowFewer+`-${i}`,toastType:f.C.ShowFewer,expirationInMs:h,onClick:()=>{n?n(i,t^D.J.showFewer,e,!0):this.PostCardActionEvent(t^D.J.showFewer,e,i,o)},referrerButton:u}),a=await this.ShowFewer(i,w,t,y)):(d&&g.g.expireToast(f.C.ShowFewer+`-${i}`),a=await this.UnshowFewer(i,w,t)),o(i,t,e);break;case D.X.Save:a=Boolean(L.saveStatus[i])?await this.unsaveContent(i):await this.saveContent(i,w,y),o(i,t,e);break;case D.X.FollowPublisher:{const r=w;a=t&D.J.followedPublisher?await this.Follow(c,r):await this.Unfollow(c,r),o(i,t,e);break}case D.X.FollowTopic:{const r=w;a=t&D.J.followedTopic?await this.FollowTopic(c,m,r):await this.UnfollowTopic(c),o(i,t,e);break}case D.X.Hide:a=t&D.J.hide?await this.Hide(i,w,y):await this.Unhide(i),o(i,t,e);break;case D.X.HideTopic:a=t&D.J.hideTopic?await this.PostCardActionRequest(c,D.X.Mute,"TagBase"):await this.DeleteCardActionRequest(c,D.X.Mute);break;case D.X.Mute:if(t&D.J.mute){(t&D.J.followedPublisher||!0===L.publisherFollowStatus[m])&&this.Unfollow(c,w,m);const n=c===r.vq||(null==w?void 0:w.isWebVideo),p=n?r.vq:c,v=n?"Source":"SourceProvider";if(a=null!=w&&w.isWebVideo?await this.Mute(p,v):await this.Mute(p,v,w),a)o(i,t,D.X.Mute,void 0,void 0,p);else if(b&&b(),s.T3.CurrentMarket===l.DX.ENUS)return void setTimeout(()=>{d&&g.g.renderToast({id:`${f.C.MuteError}-${e}-${i}`,toastType:f.C.MuteError,expirationInMs:h,referrerButton:u,positionElRef:null==u?void 0:u.offsetParent})},300)}else a=await this.Unmute(c);break;case D.X.ReportAd:o(i,t,e);break;default:return}p&&!a&&g.g.renderToast({id:`${f.C.ConnectionError}-${e}-${i}`,toastType:f.C.ConnectionError,inputText:v&&v.personalizationErrorText,expirationInMs:h,referrerButton:u})}async GetPublisherDetails(t){const e=this.providersServiceEndpointURL,i={method:"GET",headers:{...await v.WR.getOneServiceHeaders(),...this.additionalHeaders}};[{key:"ids",value:t},...await this.getOneServiceCommonParam()].forEach(t=>t.value&&e.searchParams.set(t.key,t.value));try{const r=await(0,w.w)(async()=>await this.fetchImpl(e.href,i),"getProviderDetails");if(!r.ok){const e=`OneService returned error response. Status: ${r.status} for providerId: ${t}`;throw new Error(e)}return r.json()}catch(t){u.YT.sendAppErrorEvent({...o.Bik,message:"Error while calling getPublisherDetails action for card action",pb:{...o.kOp.pb,customMessage:`url: ${e.href}, error: ${t}`}})}}async DeleteCardActionRequest(t,e){const i=this.cardActionsServiceEndpointURL,r={method:"DELETE",credentials:"include",headers:{...await v.WR.getOneServiceHeaders(),...this.additionalHeaders}};[{key:"$filter",value:`actionType eq '${e}' and targetId eq '${t}'`},...await this.getOneServiceCommonParam()].forEach(t=>t.value&&i.searchParams.set(t.key,t.value));try{const a=await(0,w.w)(async()=>await this.fetchImpl(i.href,r),`deleteCardAction${e}`);if(a.status>=400){const i=`OneService returned error response. Status: ${a.status} for actionType: ${e} and targetId: ${t}`;throw new Error(i)}return(0,b.FH)(this.getPreloadReloadReason(e)),(0,y.T4)(),a}catch(t){u.YT.sendAppErrorEvent({...o.kOp,message:"Error while calling delete action for card action",pb:{...o.kOp.pb,customMessage:`url: ${i.href}, error: ${t}`}})}}async HideSegment(t){if("CasualGame"===t)return O.d.updateGamingCardsEnableStatus([{cardType:R.g.CasualGamesCard,enabled:!1}]);const e=U.AT.get(t);if(e)return O.d.updateSegmentCardsEnableStatus([{cardType:e,enabled:!1}]);const i=U.jf.get(t);return i&&O.d.disableSpotlightCard(null==i?void 0:i.definitionName,null,null==i?void 0:i.targetType)}async PostCardActionRequest(t,e,i,r){const a=this.cardActionsServiceEndpointURL;let n=JSON.stringify({actionType:e,targetId:t,targetType:i,metadata:r,...r&&{degree:"Customized"}});null!=r&&r.useDefinitionName&&(n=JSON.stringify({actionType:e,definitionName:t,targetType:i,metadata:r,...r&&{degree:"Customized"}}));const s={method:"POST",body:n,headers:{...await v.WR.getOneServiceHeaders(),...this.additionalHeaders},credentials:"include"};(await this.getOneServiceCommonParam()).forEach(t=>t.value&&a.searchParams.set(t.key,t.value));try{const r=await(0,w.w)(async()=>await this.fetchImpl(a.href,s),`getCardAction${e}`);if(r.status>=400){const a=`OneService returned error response. Status: ${r.status} for actionType: ${e}, targetId: ${t} and targetType: ${i}`;throw new Error(a)}return(0,b.FH)(this.getPreloadReloadReason(e)),(0,y.T4)(),r.json()}catch(t){u.YT.sendAppErrorEvent({...o.HN5,message:"Error while posting action for card action",pb:{...o.HN5.pb,customMessage:`url: ${a.href}, error: ${t}`}})}}async getOneServiceCommonParam(){return this.isWindowsDashboard||this.isTravelVertical||this.isRuby?v.WR.getOneServiceParamsWithoutAuth(s.T3.UserId,this.ocid,!1):await this.isUserSignedIn()?v.WR.getOneServiceParamsWithAuth(s.T3.UserId,this.ocid,!this.isFinanceVertical&&!this.isFinanceSharedWidget&&!c.Rb.IsBlendedEnterprise||this.isWindowsShellV2):"edgeChromium"===s.T3.AppType&&(0,E.Ri)("lt")&&(0,E.Ri)("aace")?((0,n.vV)(o.mD0,"CardActionServiceClient: lt cookie present. aace cookie present.",void 0,{...o.mD0.pb}),v.WR.getOneServiceParamsWithAuth(s.T3.UserId,this.ocid,!c.Rb.IsBlendedEnterprise||this.isWindowsShellV2)):v.WR.getOneServiceParamsWithoutAuth(s.T3.UserId,this.ocid,!this.isFinanceVertical&&!this.isFinanceSharedWidget&&!c.Rb.IsBlendedEnterprise||this.isWindowsShellV2)}async isUserSignedIn(){if(c.Rb.UserIsSignedIn)return!0;return 2===await(0,G.XK)()}getPreloadReloadReason(t){switch(t){case D.X.Mute:return m.u.MutePublisher;case D.X.Save:return m.u.Save;case D.X.Like:return m.u.Like;case D.X.Dislike:return m.u.Dislike;case D.X.Disabled:return m.u.Disabled;default:return m.u.SettingsChange}}addEventListeners(){window.addEventListener("trackPublisherFollowStatus",this.onChangePublisherFollowStatus)}removeEventListeners(){window.removeEventListener("trackPublisherFollowStatus",this.onChangePublisherFollowStatus)}}class B extends L{constructor(t,e){let i;i=t||((0,N.S)()?window.fetch.bind(window):fetch),super(i,e)}}let H;const K=(t,e)=>H?(e&&H.setAdditionalHeaders(e),H):(H=new B(t,e),H);function V(t){if(t&&t.startsWith("//")){return`${(0,N.S)()?window.location.protocol:"https:"}${t}`}return t}},64747:function(t,e,i){var r;i.d(e,{g:function(){return r}}),function(t){t.ConnectToXbox="ConnectToXbox",t.CasualGamesCard="CasualGamesCard",t.CompeteCard="CompeteCard",t.InterestGroupCard="InterestGroupCard",t.HighlightsCard="HighlightsCard",t.PersonalizationCard="PersonalizationCard",t.LivestreamCard="LivestreamCard",t.ProMatchesCard="ProMatchesCard",t.ProTournamentsCard="ProTournamentsCard",t.RecentlyPlayedCard="RecentlyPlayedCard",t.RecommendedCard="RecommendedCard",t.RecoVideoCard="RecoVideoCard",t.RedditCard="RedditCard",t.RewardsCard="RewardsCard",t.UpcomingGamesCard="UpcomingGamesCard",t.UpsellGamerModeCard="UpsellGamerModeCard",t.VideoCard="VideoCard"}(r||(r={}))},68154:function(t,e,i){i.d(e,{LX:function(){return s},Zn:function(){return a},_D:function(){return r},cM:function(){return n},vF:function(){return o},vq:function(){return c}});const r=t=>{const e=[],i={TextProfanity:"TextProfanity",Profanity:"TextProfanity",SubstanceAbuse:"SubstanceAbuse",Violence:"Violence",Misinformation:"MisinformationCovid",Other:"Other",AdultImage:"AdultImage",RacyImage:"RacyImage",AdultAndRacyImage:"AdultAndRacy",SuicideOrSelfHarm:"SuicideAndSelfHarm",BullyingAndHarassment:"BullyingAndHarassment",HateSpeech:"HateSpeech",Spam:"Spam",ChildAbuse:"ChildAbuse",TerrorismOrViolentExtremism:"TerrorismOrViolentExtremism",Gambling:"Gambling",RegulatedGoods:"RegulatedGoods",UnverifiedMedicalClaims:"UnverifiedMedicalClaims",Hoax:"Hoax"};return t&&Object.keys(t).forEach(r=>{t[r]&&e.push(i[r])}),e},a=t=>{const e=[],i={reportBlurryImage:"reportBlurryImage",reportLongBlockOfUnFormatted:"reportLongBlockOfUnFormatted",reportTooManyLink:"reportTooManyLink",reportInsufficientInformation:"reportInsufficientInformation",reportExpectedMediaNotFound:"reportExpectedMediaNotFound",reportDuplicateContentOrMedia:"reportDuplicateContentOrMedia",Other:"Other"};return t&&Object.keys(t).forEach(r=>{t[r]&&e.push(i[r])}),e},o=t=>{const e=[],i={UndisclosedAIgengerated:"AIGeneratedMedia",AIGeneratedPromotion:"PromotionalAdLinks",IncorectInfo:"IncorrectInformation",Nonsensical:"NonsenseMedia",FakedImgOfPublicFigures:"FakedImagesOfRealPeopleOrEvents",ImpossiblePhysicalAppearance:"ImpossiblePhysicalAppearance",ContentIdentifiesItselfAsAIGenerated:"ContentItselfIdsAsAI",PlagiarismC:"reportPlagiarismChecked",other:"other"};return t&&Object.keys(t).forEach(r=>{t[r]&&"PlagiarismC"!=r&&"other"!=r&&e.push(i[r])}),e},n="/service/moderation/api/reportanissue",s="https://assets.msn.cn/service/moderation/api/reportanissue",c="WebVideo"},83117:function(t,e,i){i.d(e,{g:function(){return n}});var r=i(98216),a=i(65022),o=i(93468);class n{static renderToast(t){const e=()=>{this.renderToastCallback?this.renderToastCallback(t):r.YT.sendAppErrorEvent((0,o.$5)(a.HBg,"Undefined toast render callback function"))};if(n.waitForCallbackReadyTimeout>0&&"undefined"!=typeof window&&void 0!==window.setTimeout){const t=window.setTimeout(()=>{e()},n.waitForCallbackReadyTimeout);n.ready&&n.ready.then(()=>{clearTimeout(t),e()})}else e()}static setRenderToastCallback(t){this.renderToastCallback=t,this.readyResolveFn()}static expireToast(t){this.expireToastCallback?this.expireToastCallback(t):r.YT.sendAppErrorEvent((0,o.$5)(a.kZg,"Undefined toast expire callback function"))}static setExpireToastCallback(t){this.expireToastCallback=t}static setCurrentToast(t,e){this.currentToastId!==t&&(this.currentToastId=t,this.renderToastCallback=e,e&&this.readyResolveFn(),this.currentToastIdChangeCallbacks.forEach(e=>e(t)),this.renderToast())}static addCurrentToastIdChangeCallback(t){t&&this.currentToastIdChangeCallbacks.push(t)}static setWaitForCallbackReadyTimeout(t){n.waitForCallbackReadyTimeout=t}}n.ready=new Promise(t=>n.readyResolveFn=t),n.currentToastIdChangeCallbacks=[]},99657:function(t,e,i){i.d(e,{D:function(){return n},I:function(){return o}});var r=i(68136);const{create:a}=r.G,o=a("sloppy-click-z-index",1),n=a("click-z-index",1)}}]);