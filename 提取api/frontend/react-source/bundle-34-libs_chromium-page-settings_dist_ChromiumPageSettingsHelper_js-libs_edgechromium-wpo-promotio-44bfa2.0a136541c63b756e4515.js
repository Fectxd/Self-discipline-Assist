"use strict";(self.homePageWebpackChunks=self.homePageWebpackChunks||[]).push([["libs_chromium-page-settings_dist_ChromiumPageSettingsHelper_js-libs_edgechromium-wpo-promotio-44bfa2"],{155:function(e,t,i){i.d(t,{V:function(){return r}});var n=i(96950),a=i(11622);const r=n.qy`${e=>{var t,i;let n="",r="";if("RealEstateCarousel"===(null===(t=e.mapperArgs)||void 0===t||null===(t=t.cardMetadata)||void 0===t?void 0:t.type))n="Carousel",r="RealEstateCarousel";else n="SD",r="RealEstateSdCard";return e.telemetryObject&&(e.telemetryObject.contract.name=r),(0,a.yN)(e.configInfo,{properties:{mapperArgs:e.mapperArgs,parentTelemetry:e.telemetryObject,feedLayoutCardSize:e.cardSize,wpoMetadata:e.wpoMetadata,cardType:n,dataType:null===(i=e.mapperArgs)||void 0===i||null===(i=i.cardMetadata)||void 0===i?void 0:i.dataType,hasLoadedCallback:e.hasLoadedCallback},attributes:{style:`grid-area:${e.gridArea};`,class:`${e.cardSize}`},telemetryObject:e.telemetryObject})}}`},1415:function(e,t,i){i.d(t,{l:function(){return W}});var n,a=i(67067),r=i(19608),o=i(86500),s=i(930),l=i(31422),d=i(80541),c=i(12984),u=i(11372),h=i(17254);!function(e){e.MoneyCard="MoneyCard",e.MoneyAddWatchlistCard="MoneyAddWatchlistCard",e.GoBackView="go_back_view",e.AddToWatchlist="add_to_watchlist",e.TitleClick="money_header",e.SwitchValue="switch_showing_value",e.SeeMore="seemore",e.SeeMoreEdge="SeeMore",e.Customization="moneycard_customization",e.MenuAddWatchlist="moneycard_customization_add_watchlist",e.MenuDataProvider="moneycard_customization_data_provider",e.MenuHide="moneycard_customization_hide",e.MenuMore="moneycard_customization_more",e.QuoteItem="money_stock",e.SuggestedQuoteItem="suggested_money_stock",e.MoneyNavDirectionLeft="MoneyNavDirectionLeft",e.MoneyNavDirectionRight="MoneyNavDirectionRight",e.MoneyNavigation="MoneyNavigation",e.NavDefault="default",e.NavWatchlist="watchlist",e.NavRecent="recent",e.NavMarket="market",e.NavCurrencies="currencies",e.NavMovers="movers",e.NavGainers="gainers",e.NavLosers="losers",e.Vertical="finance",e.MoneyCategory="money",e.HeaderLinkHL="Money",e.SeeMoreHL="See more",e.CustomizationHL="moneycard_customization",e.MenuAddWatchlistHL="Add symbol",e.MenuDataProviderHL="About this data",e.MenuHideHL="Hide this card",e.MenuMoreHL="More settings",e.AddSymbolHL="Add Symbol",e.SuggestedQuoteAddToWatchlist="suggestedQuote_addToWatchlist",e.GoBackViewHL="Go back"}(n||(n={}));var v=i(5044),p=i(94425),f=i(18731),g=i(13509),m=i(28746),y=i(7187);const C="--quote-list-grid-rows: repeat(auto-fill, 44px);\n--quote-list-grid-gap: 0px;\n--quote-row-padding: 4px 8px;\n--title-margin: 0 16px 10px;\n--quote-list-margin-top: 10px;",b=252,w=252;function T(e){const{cardMetadata:t,parentTelemetryObject:i,cardSlot:a,cardStateData:l,openLinksInNewTab:d,localizedStrings:g,configOptions:m,sdCardActionClickHandler:y,handleNavClick:C,handleAddToWatchlist:b,refreshMoneyCardData:w}=e,{layouts:T}=a,R=T&&Object.values(T)&&Object.values(T).length?Object.values(T)[0]:s.uE._1x_1y,W=R===s.uE._1x_1y?c.PO.half:c.PO.full,E=m&&m.moneyCardConfig,H=((e,t)=>{if(!e)return;const i=e.addOrUpdateChild({name:n.MoneyCard,action:u.EG.View,behavior:u.MS.Undefined,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory}}),a=e.addOrUpdateChild({name:n.MoneyAddWatchlistCard,action:u.EG.View,behavior:u.MS.Undefined,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory}}),r=a.addOrUpdateChild({name:n.GoBackView,action:u.EG.Click,behavior:u.MS.Customize,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory,headline:n.GoBackViewHL}}),o=a.addOrUpdateChild({name:n.AddToWatchlist,action:u.EG.Click,behavior:u.MS.Customize,destinationUrl:"",type:u.MJ.DropDown,content:{headline:"",type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory}}),s=i.addOrUpdateChild({name:n.TitleClick,action:u.EG.Click,behavior:u.MS.Navigate,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory,headline:n.HeaderLinkHL}}),l=i.addOrUpdateChild({name:n.SwitchValue,action:u.EG.Click,behavior:u.MS.Undefined,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory}}),d=i.addOrUpdateChild({name:n.SeeMore,action:u.EG.Click,behavior:u.MS.Navigate,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory,headline:n.SeeMoreHL}}),c=i.addOrUpdateChild({name:n.SeeMoreEdge,action:u.EG.View,behavior:u.MS.Undefined,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory}}),v=i.addOrUpdateChild({name:n.NavWatchlist,action:u.EG.Click,behavior:u.MS.Navigate,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory,headline:n.NavWatchlist}}),p=i.addOrUpdateChild({name:n.NavRecent,action:u.EG.Click,behavior:u.MS.Navigate,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory,headline:n.NavRecent}}),f=i.addOrUpdateChild({name:n.NavMarket,action:u.EG.Click,behavior:u.MS.Navigate,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory,headline:n.NavMarket}}),g=i.addOrUpdateChild({name:n.NavCurrencies,action:u.EG.Click,behavior:u.MS.Navigate,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory,headline:n.NavCurrencies}}),m=i.addOrUpdateChild({name:n.NavMovers,action:u.EG.Click,behavior:u.MS.Navigate,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory,headline:n.NavMovers}}),y=i.addOrUpdateChild({name:n.NavGainers,action:u.EG.Click,behavior:u.MS.Navigate,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory,headline:n.NavGainers}}),C=i.addOrUpdateChild({name:n.NavLosers,action:u.EG.Click,behavior:u.MS.Navigate,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory,headline:n.NavLosers}}),b=i.addOrUpdateChild({name:n.Customization,action:u.EG.Click,behavior:u.MS.More,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory,headline:n.CustomizationHL}}),w=i.addOrUpdateChild({name:n.MenuAddWatchlist,action:u.EG.Click,behavior:u.MS.Customize,type:u.MJ.ActionButton,overrideDestinationUrl:t.financeWatchlistPage,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory,headline:n.MenuAddWatchlistHL}}),T=i.addOrUpdateChild({name:n.SuggestedQuoteAddToWatchlist,action:u.EG.Click,behavior:u.MS.Add,type:u.MJ.ActionButton,content:{headline:n.SuggestedQuoteAddToWatchlist,type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory}}),S=i.addOrUpdateChild({name:n.MenuDataProvider,action:u.EG.Click,behavior:u.MS.Navigate,type:u.MJ.ActionButton,overrideDestinationUrl:t.financeDataProviderPage,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory,headline:n.MenuDataProviderHL}}),k=i.addOrUpdateChild({name:n.MenuHide,action:u.EG.Click,behavior:u.MS.Hide,type:u.MJ.ActionButton,destinationUrl:"",content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory,headline:n.MenuHideHL}}),M=i.addOrUpdateChild({name:n.MenuMore,action:u.EG.Click,behavior:u.MS.Navigate,type:u.MJ.ActionButton,overrideDestinationUrl:`https://${h.T3.NavTargetHostName}/${h.T3.CurrentMarket}/feed/personalize/settings`,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory,headline:n.MenuMoreHL}}),$=i.addOrUpdateChild({name:n.MoneyNavDirectionLeft,action:u.EG.Click,behavior:u.MS.Undefined,type:u.MJ.Carousel,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory,headline:n.MoneyNavDirectionLeft}}),F=i.addOrUpdateChild({name:n.MoneyNavDirectionRight,action:u.EG.Click,behavior:u.MS.Undefined,type:u.MJ.Carousel,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory,headline:n.MoneyNavDirectionRight}}),I=i.addOrUpdateChild({name:n.MoneyNavigation,action:u.EG.View,behavior:u.MS.Undefined,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory}}),x=i.addOrUpdateChild({name:n.NavWatchlist,action:u.EG.Click,behavior:u.MS.Undefined,type:u.MJ.NavBar,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory,headline:n.NavWatchlist}}),R=i.addOrUpdateChild({name:n.NavRecent,action:u.EG.Click,behavior:u.MS.Undefined,type:u.MJ.NavBar,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory,headline:n.NavRecent}}),P=i.addOrUpdateChild({name:n.NavMarket,action:u.EG.Click,behavior:u.MS.Undefined,type:u.MJ.NavBar,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory,headline:n.NavMarket}}),A=i.addOrUpdateChild({name:n.NavCurrencies,action:u.EG.Click,behavior:u.MS.Undefined,type:u.MJ.NavBar,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory,headline:n.NavCurrencies}}),D=i.addOrUpdateChild({name:n.NavMovers,action:u.EG.Click,behavior:u.MS.Undefined,type:u.MJ.NavBar,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory,headline:n.NavMovers}}),O=i.addOrUpdateChild({name:n.NavGainers,action:u.EG.Click,behavior:u.MS.Undefined,type:u.MJ.NavBar,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory,headline:n.NavGainers}}),N=i.addOrUpdateChild({name:n.NavLosers,action:u.EG.Click,behavior:u.MS.Undefined,type:u.MJ.NavBar,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory,headline:n.NavLosers}}),_=i.addOrUpdateChild({name:n.NavDefault,action:u.EG.View,behavior:u.MS.Undefined,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory}}),L=i.addOrUpdateChild({name:n.NavWatchlist,action:u.EG.View,behavior:u.MS.Undefined,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory}}),z=i.addOrUpdateChild({name:n.NavRecent,action:u.EG.View,behavior:u.MS.Undefined,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory}}),W=i.addOrUpdateChild({name:n.NavMarket,action:u.EG.View,behavior:u.MS.Undefined,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory}}),E=i.addOrUpdateChild({name:n.NavCurrencies,action:u.EG.View,behavior:u.MS.Undefined,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory}}),H=i.addOrUpdateChild({name:n.NavMovers,action:u.EG.View,behavior:u.MS.Undefined,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory}}),j=i.addOrUpdateChild({name:n.NavGainers,action:u.EG.View,behavior:u.MS.Undefined,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory}}),U=i.addOrUpdateChild({name:n.NavLosers,action:u.EG.View,behavior:u.MS.Undefined,content:{type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory}});return{componentRoot:e,moneyCard:i,moneyAddWatchlistCard:a,goBackView:r,addToWatchlist:o,titleClick:s,switchValue:l,seeMore:d,seeMoreContainer:c,seeMoreWatchlist:v,seeMoreRecent:p,seeMoreMarket:f,seeMoreCurrencies:g,seeMoreMovers:m,seeMoreGainers:y,seeMoreLosers:C,actionButton:b,menuAddWatchlist:w,menuDataProvider:S,menuHide:k,menuMore:M,moneyNavDirectionLeft:$,moneyNavDirectionRight:F,navContainer:I,navWatchlist:x,navRecent:R,navMarket:P,navCurrencies:A,navMovers:D,navGainers:O,navLosers:N,suggestedQuoteAddToWatchlist:T,quoteContainerDefault:_,quoteContainerWatchlist:L,quoteContainerRecent:z,quoteContainerMarket:W,quoteContainerCurrencies:E,quoteContainerMovers:H,quoteContainerGainers:j,quoteContainerLosers:U}})(i,E),j=function(e){if(!e||!e.cardStyle||"WinDashboard"!=e.cardStyle)return"Default";return"WinDashboard"}(E),U=function(e,t,i,a){if(!e||!e.data)return null;const r=JSON.parse(e.data);if(!r||null==r.userSignedIn||!r.quoteItems||!r.dataFrom)return null;const s=4,l=r.userSignedIn;let d=r.quoteItems,c=!1;a&&a.quoteItems&&(d=a.quoteItems,c=!0);const u=r.dataFrom;let h=r.recommendQuoteItems||[];a&&a.suggestedQuoteItems&&(h=a.suggestedQuoteItems);const v=o.po.ShowData,p={dataFrom:u,cardType:v,userSignedIn:l,quoteItems:d.slice(0,s).map(e=>function(e,t,i){const a=n.QuoteItem,r=I(e,t,a),o=x(e,i,r);return o}(e,t,c)),suggestedQuoteItems:h.map(e=>function(e,t,i){const a=n.SuggestedQuoteItem,r=I(e,t,a),o=x(e,i,r);return o}(e,t,c))};return p}(t,H,0,l)||{},B="zh-cn"===(0,h.rA)().CurrentMarket,q=function(e,t,i,n){if("Edge"===(null==t?void 0:t.cardStyle))return o.po.EdgeShowData;if(n||null!=t&&t.disableInLineAddWatchlist||!i)return o.po.ShowData;if(!e||!e.cardType)return i.cardType;return e.cardType}(l,E,U,B),G=(null==E?void 0:E.disableHalfHeightCardAction)&&W===c.PO.half;let V,K,J,Z;const Q=(0,v.En)();E&&(V=(0,p.bI)(N(E.financeLandingPageLink,Q)),K=(0,p.bI)(N(E.financeWatchlistPage,Q)),J=E.financeDataProviderPage,Z=E.swapGainLossColor);const X=function(e,t,i,n){if(!e||!t)return null;i===c.bN.Market&&e.tabList&&(e.tabList=e.tabList.filter(e=>"watchlist"!=e.tabType));const a=e.tabList&&e.tabList.map(e=>({tabType:e.tabType,tabContent:t.moneyCardTabs[e.tabType].title,seeMoreLink:N(e.seeMoreLink,n),seeMoreContent:t.moneyCardTabs[e.tabType].seeMore,headerLink:N(e.headerLink,n),headerContent:t.moneyCardTabs[e.tabType].title}));return a}(E,g,U.dataFrom,Q),Y=function(e,t){if(e&&e.activeTab)return e.activeTab;if(t&&t.length>0)return t[0].tabType;return null}(l,X),ee=k(U.quoteItems,R,q,j),te=function(e,t,i,n,a){if(!e||!a)return[];if(i===o.po.EdgeShowData)return e.slice(0,3-a.length);if(t===s.uE._1x_1y)return e.slice(0,2-a.length);if(t===s.uE._1x_2y&&"Default"===n)return e.slice(0,4-a.length);if(t===s.uE._1x_2y&&"WinDashboard"===n)return e.slice(0,5-a.length);return e}(U.suggestedQuoteItems,R,q,j,ee),ie=function(e,t,i){var n;if(null==e||!e.quoteItems||0===(null===(n=e.quoteItems)||void 0===n?void 0:n.length))return"";const[a,r]=z(e),o=function(e){let t="";null!=e&&e.enableSuggestedQuotes&&(t="--quote-list-grid-rows: repeat(auto-fill, 46px); --quote-row-padding: 5px 8px;");return t}(i),s=function(e,t,i,n){let a="";if(null!=n&&n.enableSuggestedQuotes){const e=8*t,n=54+4*(i-6),r=20;a=`--quote-grid-columns: ${252-e-n-(r+10)}px ${e}px ${n}px ${r}px;`}return a}(0,a,r,i),l=o.concat(s);return l}(U,0,E),ne={id:"moneyCard",childTemplateType:o.nf.get(q),disableCardAction:G,layout:W,cardStyle:j,openLinksInNewTab:d,moneyCardContentData:{titleContent:P(g,q,U.dataFrom,U.userSignedIn,E.disableInLineAddWatchlist),link:D(V,K,U.dataFrom,U.userSignedIn,E.disableInLineAddWatchlist,q),footerContent:A(g,q,Y,W,U.quoteItems),footerLink:O(V,K,U.dataFrom,q,Y,X),searchPlaceholder:g.searchPlaceholder,noSuggestionHint:g.noSuggestionHint,goBackLabel:g.goBackLabel,swapGainLossColor:Z,showSuggestions:$(l),noSuggestion:F(l),disableFooter:_(W,U.quoteItems),layoutDirection:E.layoutDirection,enableTooltip:null==E?void 0:E.enableTooltip,quoteItemToolTip:null==g?void 0:g.quoteItemToolTip,enableAutoRefreshQuote:null==E?void 0:E.enableAutoRefreshQuote,intervalAutoRefreshQuote:null==E?void 0:E.intervalAutoRefreshQuote},userSignedIn:!B&&U.userSignedIn,cardType:q,dataProviderLink:J,quoteItems:ee,suggestedQuoteItems:te,suggestedQuotesStyle:ie,enableSuggestedQuotes:null==E?void 0:E.enableSuggestedQuotes,tabList:X,activeTab:Y,dataFrom:U.dataFrom,searchSuggestions:M(l),gradientConfig:{enableGradientStyles:E.enableGradientStyles,gradientBrightLevel:E.gradientBrightLevel},moneyCardStyles:L(U,W,j),toggleSDCardActionMenu:y&&(e=>function(e,t,i,n,a,r){const o=e.currentTarget,s={menuItems:S(t,n,a,r),referrerButton:o,requestContext:new f.bb},l={cardName:n.moneyCardHeaderTitle};i(s,"money-card",l)}(e,U.userSignedIn,y,g,H,E)),handleNavClick:C,handleAddToWatchlist:b,refreshMoneyCardData:w,telemetryContext:H,addSymbolOptStr:g.addSymbolOptStr,signinOptStr:g.signinOptStr,hideCardOptStr:g.hideCardOptStr,dataProviderOptStr:g.dataProviderOptStr,moreSettingOptStr:g.moreSettingOptStr,suggestedQuotesTitle:g.moneyCardSuggestedQuotesTitle,moreOptionsTooltip:g.moreOptionsTooltip,sdCardMoreSettingAriaLabel:g.sdCardMoreSettingAriaLabel};return(0,r.bw)({id:"moneyCard",experienceType:void 0,mapperArgs:e},ne,(e,t)=>{const i=t.cardSize;return{layout:i===s.uE._1x_2y?c.PO.full:c.PO.half,quoteItems:k(U.quoteItems,i,q,j)}})}function S(e,t,i,n){let a=[];return null!=n&&n.enableAddWatchlist&&e&&a.push({glyph:m.A,title:t.addSymbolOptStr,id:"addWatchlist",telemetryTag:i&&i.menuAddWatchlist&&i.menuAddWatchlist.getMetadataTag()}),null!=n&&n.enableHideCard&&a.push({glyph:l.A,title:t.hideCardOptStr,id:"hide",telemetryTag:i&&i.menuHide&&i.menuHide.getMetadataTag()}),a=a.concat({glyph:g.A,title:t.dataProviderOptStr,id:"dataProvider",telemetryTag:i&&i.menuDataProvider&&i.menuDataProvider.getMetadataTag()}),null!=n&&n.enableMoreSetting&&a.push({glyph:d.A,title:t.moreSettingOptStr,id:"more",ariaLabel:t.sdCardMoreSettingAriaLabel,telemetryTag:i&&i.menuMore&&i.menuMore.getMetadataTag()}),a}function k(e,t,i,n){return e?i===o.po.EdgeShowData?e.slice(0,3):t===s.uE._1x_1y?e.slice(0,2):t===s.uE._1x_2y&&"Default"===n?e.slice(0,4):t===s.uE._1x_2y&&"WinDashboard"===n?e.slice(0,5):e:[]}function M(e){return e&&e.searchSuggestions?e.searchSuggestions:[]}function $(e){return!(!e||(0,y.isNullOrUndefined)(e.showSuggestions))&&e.showSuggestions}function F(e){return!(!e||(0,y.isNullOrUndefined)(e.noSuggestion))&&e.noSuggestion}function I(e,t,i){return null==t?void 0:t.moneyCard.addOrUpdateChild({name:i,action:u.EG.Click,behavior:u.MS.Navigate,content:{headline:e.symbol,type:u.b5.StructuredData,vertical:n.Vertical,category:n.MoneyCategory}})}function x(e,t,i){var n;return{changePcnt:e.changePcnt,changeValue:e.changeValue,displayName:e.displayName,gain:e.gain,id:e.id,price:e.price,securityType:e.securityType,unchanged:e.unchanged,quoteHref:t?e.quoteHref:(n=e.quoteHref,"zh-cn"===(0,h.rA)().CurrentMarket?`https://www.msn.cn${n}`:`https://www.msn.com${n}`),symbol:R(e),telemetryTag:`${i&&i.getMetadataTag()}`}}function R(e){var t;return(null===(t=e.securityType)||void 0===t?void 0:t.toLowerCase())===c.tr.Currency.toLowerCase()&&e.symbol&&6==e.symbol.length?e.symbol.slice(0,3)+"/"+e.symbol.slice(3):e.symbol}function P(e,t,i,n,a){return t===o.po.AddWatchlist?e.moneyCardAddSymbolTitle:t===o.po.EdgeShowData?e.moneyCardHeaderTitle:n&&i===c.bN.Watchlist?e.moneyCardWatchlistTitle:e.moneyCardMarketTitle}function A(e,t,i,n,a){if(_(n,a))return null;var r;if(t===o.po.EdgeShowData&&(e&&e.moneyCardTabs&&i))return null===(r=e.moneyCardTabs[i])||void 0===r?void 0:r.seeMore;return e.seeMoreMoney}function D(e,t,i,n,a,r){return r===o.po.EdgeShowData?e:n&&i===c.bN.Watchlist?t:e}function O(e,t,i,n,a,r){return n===o.po.EdgeShowData?a&&r&&r.length>0?r.find(e=>e.tabType===a).seeMoreLink:e:i===c.bN.Watchlist?t:e}function N(e,t){if(!t||!e)return e;const i=new URL(e);return i.searchParams.append("ocid",t),i.href}function _(e,t){return e===c.PO.half&&(null==t?void 0:t.length)>=2}function L(e,t,i){var n;if(null==e||!e.quoteItems||0===(null===(n=e.quoteItems)||void 0===n?void 0:n.length))return C;const a=function(e,t){const[i,n]=z(e),a="Default"===t?b:w,r=9*i,o=58+4*(n-6);return`--quote-grid-columns: ${a-r-o}px ${r}px ${o}px;`}(e,i);return t===c.PO.full&&"Default"===i?a.concat("--title-margin: 0 16px 12px;"):t===c.PO.half&&"Default"===i?a.concat(C):t===c.PO.full&&"WinDashboard"===i?a.concat("--quote-list-grid-rows: repeat(auto-fill, 36px);\n--quote-list-grid-gap: 7px;\n--quote-row-padding: 0 8px;"):t===c.PO.half&&"WinDashboard"===i?a.concat("--quote-list-grid-rows: repeat(auto-fill, 44px);\n--quote-list-grid-gap: 0px;\n--quote-row-padding: 4px 8px;\n--title-margin: 0 16px 10px;\n--quote-list-margin-top: 10px;"):void 0}function z(e){let t=6,i=6;return e.quoteItems&&e.quoteItems.map(e=>{e.changePcnt&&e.changePcnt.length>t&&(t=e.changePcnt.length),e.changeValue&&e.changeValue.length>t&&(t=e.changeValue.length),e.price&&e.price.length>i&&(i=e.price.length)}),[i,t]}const W={getFeedDataForCard:e=>T(e),viewTemplate:a.B}},1698:function(e,t,i){i.d(t,{H:function(){return s}});var n=i(93551),a=i(93468),r=i(65022),o=i(19608);const s={getFeedDataForCard:e=>function(e){try{var t;const{configOptions:i,cardMetadata:n,goToPersonalizeSettingsCallback:a,parentTelemetryObject:r,sdCardActionClickHandler:s,refreshSDCardSection:l,visualReadinessCallback:d}=e,c="boost-ad-card",u={id:c,childTemplateType:"boost-ad-card",goToPersonalizeSettingsCallback:a,parentTelemetryObject:r,sdCardActionClickHandler:s,refreshFeed:l,boostAdCardMetadata:n,boostAdCardConfigInfo:i&&i,visualReadinessCallback:d};return(0,o.bw)({id:c,experienceType:null===(t=u.boostAdCardConfigInfo)||void 0===t||null===(t=t.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},u,null,!0)}catch(e){(0,a.c_)(e,r.Azd,"Error in Boost Ad Card Mapper")}}(e),viewTemplate:n.x}},2553:function(e,t,i){i.d(t,{AT:function(){return s},hv:function(){return c},jf:function(){return d}});var n=i(16091),a=i(17720),r=i(69089);const o=Symbol("RubyCardMapSegment"),s=(0,n.G)({getInstance:()=>a.vv.get(o,()=>new Map([["Weather",r.s.WeatherCard],["Weather_Nowcast",r.s.NowcastWeatherCard],["Weather_TeaserRain",r.s.RainTodayWeatherCard],["Sports",r.s.SportsCard],["Finance",r.s.FinanceCard],["CasualGame",r.s.CasualGamesCard],["Shopping",r.s.ShoppingCard],["DailyBrief",r.s.DailyBriefCard],["DailyMoment",r.s.cegrowthCard]]))}),l=Symbol("RubyActionBasedCardMapSegment"),d=(0,n.G)({getInstance:()=>a.vv.get(l,()=>new Map([["News_CreatorSpotlight",{definitionName:"News_CreatorSpotlight",targetType:"ContentGroup"}],["News_BreakingNews",{definitionName:"News_BreakingNews",targetType:"Notification"}],["News_ForYouNews",{definitionName:"News_ForYouNews",targetType:"Notification"}],["News_SaveForLater",{definitionName:"News_SaveForLater",targetType:"ContentGroup"}],["Weather_SevereWeather",{definitionName:"Weather_SevereWeather",targetType:"Notification"}],["News_CatchUpStack",{definitionName:"News_CatchUpStack",targetType:"ContentGroup"}],["News_TopStories",{definitionName:"News_TopStories",targetType:"ContentGroup"}],["News_TrendingNow",{definitionName:"News_TrendingNow",targetType:"ContentGroup"}],["News_DailyWonder",{definitionName:"News_DailyWonder",targetType:"ContentGroup"}],["News_WatchGoldShorts",{definitionName:"News_WatchGoldShorts",targetType:"ContentGroup"}]]))}),c=Object.freeze([{telemetryName:"Weather",widgetName:"Weather",id:"weather",isGated:!1,infoCards:[{cardName:"Forecast",telemetryName:"Forecast",isEnabled:!0,id:"forecast",isGated:!1,cardTypes:["Weather"],parentId:"weather"},{cardName:"Severe weather alerts",telemetryName:"SevereWeather",isEnabled:!0,id:"severe_weather",isGated:!1,cardTypes:["Weather_SevereWeather"],parentId:"weather"},{cardName:"Nowcast",telemetryName:"NowcastWeather",isEnabled:!0,id:"nowcast",isGated:!1,cardTypes:["Weather_Nowcast"],parentId:"weather"},{cardName:"Rain today",telemetryName:"RainToday",isEnabled:!0,id:"rain_today",isGated:!1,cardTypes:["Weather_TeaserRain"],parentId:"weather"}]},{telemetryName:"Moments",widgetName:"Moments in time",id:"moments",isGated:!1,infoCards:[{cardName:"Today's moment",telemetryName:"TodaysMoment",isEnabled:!0,id:"todays_moment",isGated:!1,cardTypes:["DailyMoment"],parentId:"moments"}]},{widgetName:"Finance",telemetryName:"Finance",id:"finance",isGated:!1,infoCards:[{cardName:"Market updates",telemetryName:"MarketUpdates",isEnabled:!0,id:"market_updates",isGated:!1,cardTypes:["Finance"],parentId:"finance"},{cardName:"Price alert",telemetryName:"PriceAlert",isEnabled:!0,id:"price_alert",isGated:!0,cardTypes:["Finance_PriceMovement"],parentId:"finance"}]},{widgetName:"Shopping",telemetryName:"Shopping",id:"shopping",isGated:!1,infoCards:[{cardName:"Price drop",telemetryName:"PriceDrop",isEnabled:!0,id:"price_drop",isGated:!1,cardTypes:["Shopping"],parentId:"shopping"}]},{widgetName:"Games",telemetryName:"Games",id:"games",isGated:!1,infoCards:[{cardName:"Games to play",telemetryName:"GamesToPlay",isEnabled:!0,id:"games_to_play",isGated:!1,cardTypes:["CasualGame"],parentId:"games"}]},{widgetName:"Sports",telemetryName:"Sports",id:"sports",isGated:!1,infoCards:[{cardName:"Upcoming events",telemetryName:"UpcomingEvents",isEnabled:!0,id:"upcoming_events",isGated:!1,cardTypes:["Sports"],parentId:"sports"},{cardName:"Score updates",telemetryName:"ScoreUpdates",isEnabled:!0,id:"score_updates",isGated:!0,cardTypes:["Sports_ScoreUpdates"],parentId:"sports"}]},{widgetName:"Picks for you",telemetryName:"Picks",id:"picks",isGated:!1,infoCards:[{cardName:"Daily wonder",telemetryName:"DailyWonder",isEnabled:!0,id:"daily_wonder",isGated:!1,cardTypes:["News_DailyWonder"],parentId:"picks"}]},{widgetName:"News",telemetryName:"News",id:"news",isGated:!1,infoCards:[{cardName:"Copilot daily",telemetryName:"CopilotDaily",isEnabled:!0,id:"copilot_daily",isGated:!0,cardTypes:["News_CopilotDaily"],parentId:"news"},{cardName:"Breaking news",telemetryName:"BreakingNews",isEnabled:!0,id:"breaking_news",isGated:!1,cardTypes:["News_BreakingNews"],parentId:"news"},{cardName:"Save for later",telemetryName:"SaveForLater",isEnabled:!0,id:"save_for_later",isGated:!1,cardTypes:["News_SaveForLater"],parentId:"news"},{cardName:"For you",telemetryName:"ForYou",isEnabled:!0,id:"for_you",isGated:!1,cardTypes:["News_ForYouNews"],parentId:"news"},{cardName:"Catch-up news",telemetryName:"CatchUpNews",isEnabled:!0,id:"catch_up_news",isGated:!1,cardTypes:["News_CatchUpStack"],parentId:"news"},{cardName:"Top stories",telemetryName:"TopStories",isEnabled:!0,id:"top_stories",isGated:!1,cardTypes:["News_TopStories"],parentId:"news"},{cardName:"Trending now",telemetryName:"TrendingNow",isEnabled:!0,id:"trending_now",isGated:!1,cardTypes:["News_TrendingNow"],parentId:"news"}]},{widgetName:"Entertainment",telemetryName:"Entertainment",id:"entertainment",isGated:!1,infoCards:[{cardName:"Creator spotlight",telemetryName:"CreatorSpotlight",isEnabled:!0,id:"creator_spotlight",isGated:!1,cardTypes:["News_CreatorSpotlight"],parentId:"entertainment"},{cardName:"Entertainment Break",telemetryName:"News_WatchGoldShorts",isEnabled:!0,id:"watch_goldshorts",isGated:!1,cardTypes:["News_WatchGoldShorts"],parentId:"entertainment"}]}])},4146:function(e,t,i){i.d(t,{Z:function(){return n}});const n={getFeedDataForCard:null,viewTemplate:i(44364).h}},5965:function(e,t,i){i.d(t,{a:function(){return o}});var n=i(96950),a=i(11622),r=i(17254);const o=n.qy`
    ${e=>(e.TopCommentsCardConfigInfo={instanceId:"TopCommentsCard",configRef:{experienceType:"TopCommentsCard",instanceSrc:"default"}},n.qy` 
    ${e=>e.TopCommentsCardConfigInfo&&(0,a.yN)(e.TopCommentsCardConfigInfo,{attributes:{style:`grid-area:${e.gridArea}`,class:`${e.cardSize}`,size:`${e.cardSize}`},properties:{cardMetadata:e.cardMetadata,cardLayout:e.cardSize,parentTelemetry:e.parentTelemetryObject,goToPersonalizeSettingsCallback:e.goToPersonalizeSettingsCallback,refreshFeedCallback:e.refreshFeedCallback,isWidgetRegion:e.isWidgetRegion,turnOffWidgetsRegionCallback:e.turnOffWidgetsRegionCallback,manageWidgetsRegionCallback:e.manageWidgetsRegionCallback,hideCardCallback:e.hideCardCallback},memoize:"winWidgets"!==r.T3.AppType})}
`)}
`},7881:function(e,t,i){i.d(t,{x:function(){return l}});var n=i(97799),a=i(93468),r=i(65022),o=i(19608),s=i(77512);const l={getFeedDataForCard:e=>function(e){let t;try{const{configOptions:n,parentTelemetryObject:l,cardMetadata:d,refreshSDCardSection:c,refreshFeedCallback:u,goToPersonalizeSettingsCallback:h,sdCardActionClickHandler:v}=e,p=n&&n;try{const e=d&&d.data&&JSON.parse(d.data);t={id:"bingHealthFitnessCard",childTemplateType:"health-fitness-card",parentTelemetryObject:l,bingHealthFitnessAnswerConfigInfo:p,bingHealthFitnessCardData:e,healthFitnessCarouselData:e,sdCardActionClickHandler:v,refreshFeed:c||u,goToPersonalizeSettingsCallback:h,refreshSDCardSection:c}}catch(t){return(0,a.vV)(r.YGv,`Error in transforming data = ${JSON.stringify(e)}`),(0,s.wc)()}try{var i;return(0,o.bw)({id:"bingHealthFitnessCard",experienceType:null==p||null===(i=p.configRef)||void 0===i?void 0:i.experienceType,mapperArgs:e},t)}catch(i){return(0,a.vV)(r.YGv,`Error in populating layouts and position telemetry = ${JSON.stringify(e)}`),(0,s.wc)(t)}}catch(t){(0,a.vV)(r.YGv,`Error in feed layout mapperargs = ${JSON.stringify(e)}`)}return(0,s.wc)()}(e),viewTemplate:n.P}},7946:function(e,t,i){i.d(t,{L:function(){return a}});var n=i(76992);const a={getFeedDataForCard:e=>(0,n.c)(e),viewTemplate:i(59966).H}},9071:function(e,t,i){i.d(t,{Z:function(){return r}});var n=i(96950),a=i(11622);const r=n.qy`
    ${e=>(0,a.yN)(e.cashbackCarouselCardConfigInfo,{attributes:{style:`grid-area:${e.gridArea}`,class:`${e.cardSize}`},properties:{cardMetadata:e.cardMetadata,parentTelemetry:e.parentTelemetryObject,cardSize:e.cardSize,goToPersonalizeSettingsCallback:e.goToPersonalizeSettingsCallback,sdCardActionClickHandler:e.sdCardActionClickHandler,refreshFeedCallback:e.refreshFeedCallback}})}
`},10332:function(e,t,i){i.d(t,{C:function(){return s}});var n=i(96950),a=i(11622),r=i(47149),o=i(11372);const s=n.qy`
${e=>{var t,i,n,s,l,d,c,u,h;return e.prismCardConfigInfo&&(0,a.yN)(e.prismCardConfigInfo,{properties:{cardLayout:e.cardLayout,cardMetadata:e.cardMetadata,wpoMetadata:e.wpoMetadata,parentTelemetry:e.parentTelemetryObject,inspirationRootServerData:e.inspirationRootServerData,goToPersonalizeSettingsCallback:e.goToPersonalizeSettingsCallback,refreshSDCardSection:e.refreshSDCardSection},events:{hideCardCallback:e.hideCardCallback},telemetryObject:new r.$({type:o.MJ.Module,name:e.prismCardConfigInfo.configRef.experienceType,ext:{evergreen:null===(t=e.inspirationRootServerData)||void 0===t||null===(t=t.prismTopicData)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.contentSource,firstImage:(null===(i=e.inspirationRootServerData)||void 0===i||null===(i=i.prismData)||void 0===i||null===(i=i[0])||void 0===i||null===(i=i[0])||void 0===i?void 0:i.murl)??(null===(n=e.inspirationRootServerData)||void 0===n||null===(n=n.prismTopicData)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.items)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.turl)??(null===(s=e.inspirationRootServerData)||void 0===s||null===(s=s.prismTopicData)||void 0===s||null===(s=s[1])||void 0===s||null===(s=s.items)||void 0===s||null===(s=s[0])||void 0===s?void 0:s.turl),itemID:(null===(l=e.inspirationRootServerData)||void 0===l||null===(l=l.prismData)||void 0===l||null===(l=l[0])||void 0===l||null===(l=l[0])||void 0===l?void 0:l.id)??(null===(d=e.inspirationRootServerData)||void 0===d||null===(d=d.prismTopicData)||void 0===d||null===(d=d[0])||void 0===d||null===(d=d.items)||void 0===d||null===(d=d[0])||void 0===d?void 0:d.id),topicUrl:null===(c=e.inspirationRootServerData)||void 0===c||null===(c=c.prismTopicData)||void 0===c||null===(c=c[0])||void 0===c?void 0:c.clickUrl,...null===(u=e.parentTelemetryObject)||void 0===u||null===(u=u.contract)||void 0===u?void 0:u.ext,enableNrt:null===(h=e.inspirationRootServerData)||void 0===h||null===(h=h.prismTopicData)||void 0===h?void 0:h.some(e=>{var t;return"true"===(null==e||null===(t=e.metaData)||void 0===t?void 0:t.enableNrt)})}})})}}`},11654:function(e,t,i){i.d(t,{F:function(){return r}});var n=i(96950),a=i(11622);const r=n.qy`
<fluent-card
    style="grid-area:${e=>e.gridArea};contain:unset"
    class="${e=>e.cardSize}"
>
    ${e=>e.rewardsAnswerConfigInfo&&(0,a.yN)(e.rewardsAnswerConfigInfo,{properties:{parentTelemetry:e.parentTelemetryObject,telemetryExt:e.telemetryExt,backendData:e.dataToPassToComponent,cardSizeMetadata:e.cardSize,goToPersonalizeSettingsCallback:e.goToPersonalizeSettingsCallback,refreshSDCardSection:e.refreshSDCardSection,displaySettings:e.displaySettings,navigateToURLCallback:e.navigateToURLCallback,isDarkModeForMobile:e.isDarkModeForMobile}})}
</fluent-card>
`},12916:function(e,t,i){i.d(t,{I:function(){return r}});var n=i(96950),a=i(11622);const r=n.qy`${e=>{var t;return(0,a.yN)(e.configInfo,{properties:{mapperArgs:e.mapperArgs,parentTelemetry:e.telemetryObject,feedLayoutCardSize:e.cardSize,wpoMetadata:e.wpoMetadata,cardType:"SD",dataType:null===(t=e.mapperArgs)||void 0===t||null===(t=t.cardMetadata)||void 0===t?void 0:t.dataType,hasLoadedCallback:e.hasLoadedCallback},attributes:{style:`grid-area:${e.gridArea};`,class:`${e.cardSize}`},telemetryObject:e.telemetryObject})}}`},12984:function(e,t,i){i.d(t,{l4:function(){return p},PO:function(){return n},po:function(){return r},bN:function(){return o},tr:function(){return a}});var n,a,r,o,s=i(56911),l=i(38493),d=i(60815),c=i(56863),u=i(92011);class h extends u.L{}class v extends((0,c.rf)(h)){constructor(){super(...arguments),this.proxy=document.createElement("input")}}!function(e){e.full="full",e.half="half"}(n||(n={})),function(e){e.Currency="currencyPair",e.Commodity="future",e.ETF="etf",e.Funds="fund",e.Indices="index",e.Stocks="stock"}(a||(a={})),function(e){e.ShowData="showData",e.EmptyWatchlist="emptyWatchlist",e.AddWatchlist="addWatchlist"}(r||(r={})),function(e){e.Watchlist="watchlist",e.Market="market"}(o||(o={}));class p extends v{constructor(){super(...arguments),this.layout=n.half,this.optionSwitch=!1,this.target="_blank",this.showChangeValue=!1,this.swapGainLossColor=!1}getQuoteColor(e,t,i,n,a){return t?a:this.swapGainLossColor?e?i:n:e?n:i}optionClicked(){this.$emit("action-click-option");const e=this.titleArea.querySelector("#option-button");e&&e.focus()}blurOption(){const e=this.titleArea.querySelector("#option-button");e&&e.blur()}onBlurOption(){this.$emit("action-blur-option")}onTitleClicked(){this.$emit("action-title-clicked")}changeShowingValue(){this.showChangeValue=!this.showChangeValue}handleTextInput(){this.inputControl&&(this.value=this.inputControl.value,this.$emit("action-text-input",this.inputControl.value))}addToWatchlist(e){this.inputControl&&(this.inputControl.value="",this.value=""),this.$emit("action-add-to-watchlist",e)}addSymbolAction(e){0===e.button&&(this.$emit("action-add-symbol"),this.blurOption())}hideCardAction(e){0===e.button&&(this.$emit("action-hide-card"),this.blurOption())}dataProviderAction(e){0===e.button&&(this.$emit("action-data-provider"),this.blurOption(),window.open(this.dataProviderLink))}moreSettingAction(e){0===e.button&&(this.$emit("action-more-setting"),this.blurOption())}}(0,s.Cg)([l.CF],p.prototype,"layout",void 0),(0,s.Cg)([l.CF],p.prototype,"titleStr",void 0),(0,s.Cg)([l.CF],p.prototype,"titleLink",void 0),(0,s.Cg)([(0,l.CF)({mode:"boolean"})],p.prototype,"userSignedIn",void 0),(0,s.Cg)([l.CF],p.prototype,"dataFrom",void 0),(0,s.Cg)([l.CF],p.prototype,"quoteItems",void 0),(0,s.Cg)([(0,l.CF)({mode:"boolean"})],p.prototype,"optionSwitch",void 0),(0,s.Cg)([l.CF],p.prototype,"cardType",void 0),(0,s.Cg)([(0,l.CF)()],p.prototype,"footer",void 0),(0,s.Cg)([(0,l.CF)()],p.prototype,"footerLink",void 0),(0,s.Cg)([(0,l.CF)()],p.prototype,"dataProviderLink",void 0),(0,s.Cg)([l.CF],p.prototype,"target",void 0),(0,s.Cg)([d.sH],p.prototype,"showChangeValue",void 0),(0,s.Cg)([(0,l.CF)({mode:"boolean"})],p.prototype,"swapGainLossColor",void 0),(0,s.Cg)([l.CF],p.prototype,"addSymbolBtnStr",void 0),(0,s.Cg)([l.CF],p.prototype,"emptyWatchlistStr",void 0),(0,s.Cg)([l.CF],p.prototype,"searchSuggestions",void 0),(0,s.Cg)([(0,l.CF)({mode:"boolean"})],p.prototype,"showSuggestions",void 0),(0,s.Cg)([l.CF],p.prototype,"searchPlaceholder",void 0),(0,s.Cg)([(0,l.CF)({mode:"boolean"})],p.prototype,"noSuggestion",void 0),(0,s.Cg)([l.CF],p.prototype,"noSuggestionHint",void 0),(0,s.Cg)([l.CF],p.prototype,"addSymbolOptStr",void 0),(0,s.Cg)([l.CF],p.prototype,"hideCardOptStr",void 0),(0,s.Cg)([l.CF],p.prototype,"dataProviderOptStr",void 0),(0,s.Cg)([l.CF],p.prototype,"moreSettingOptStr",void 0)},13302:function(e,t,i){i.d(t,{_:function(){return h}});var n=i(17720),a=i(17254),r=i(48608),o=i(31653),s=i(8353),l=i(86948),d=i(57759),c=i(19993),u=i(44205);async function h(e){e.telemetry||(e.telemetry={});const t=(0,l.NP)();let i=(0,s.F6)(),h=(0,s.I6)();const v=(0,s.DP)();if(!i){const e=await async function(){var e;const t="OcvFeedbackAuth";if(n.vv.has(t))return n.vv.get(t);const i=null===(e=(0,r._W)())||void 0===e?void 0:e.access_token;return i?await(0,d.w)(async()=>{const e=new URL(`https://api.msn.${a.T3.IsChinaCompliance?"cn":"com"}/auth/token/v1/validation/usertoken`);c.WR.getCommonParams2("Peregrine").forEach(t=>e.searchParams.set(t.key,t.value));const r=await c.WR.getBaseRequestData("POST");r.headers["Content-Type"]="application/json",r.body=JSON.stringify({accessToken:i});const o=await fetch(e.href,r),s=await o.json(),l=null==s?void 0:s.claims;return l&&n.vv.set(t,l),l},"authTokenValidation"):void 0}();i=null==e?void 0:e.puid,h=null==e?void 0:e.tenantId}switch(t){case"MSA":e.complianceChecks={authenticationType:"MSA",ageGroup:u.P2[v]},e.telemetry.loggableUserId="p:"+i,e.telemetry.tenantId=o.nt;break;case"AAD":e.complianceChecks={authenticationType:"AAD",ageGroup:u.P2[v]},e.telemetry.loggableUserId="ap:"+i,e.telemetry.tenantId=h;break;default:e.complianceChecks={authenticationType:"Unauthenticated",ageGroup:u.P2[u.P2.Undefined]},e.telemetry.loggableUserId="",e.telemetry.tenantId="00000000-0000-0000-0000-000000000000"}}},13509:function(e,t){t.A='<svg width="15" height="15" viewBox="0 0 15 15" fill="none"><path clip-rule="evenodd" d="M7.5 9c0 .7-.24 1.33-.63 1.84l2.77 2.77a.37.37 0 1 1-.53.53l-2.77-2.77A3 3 0 1 1 7.5 9Zm-3 2.25a2.25 2.25 0 1 0 0-4.5 2.25 2.25 0 0 0 0 4.5Z"/><path clip-rule="evenodd" d="M4.13 2.25c-.21 0-.38.17-.38.38v2.7c-.26.05-.51.13-.75.23V2.63C3 2 3.5 1.5 4.13 1.5h3.8c.3 0 .6.12.8.33l2.94 2.94c.21.2.33.5.33.8v6.8c0 .63-.5 1.13-1.13 1.13h-.44c-.05-.15-.14-.3-.26-.42l-.33-.33h1.04c.2 0 .37-.17.37-.38V6H8.62C8 6 7.5 5.5 7.5 4.87V2.25H4.12Zm4.12.16v2.46c0 .21.17.38.38.38h2.46L8.25 2.41Z"/></svg>'},13668:function(e,t,i){i.d(t,{z:function(){return a}});var n=i(26641);const a={getFeedDataForCard:e=>(0,n.BQ)(e),viewTemplate:n.wT}},13772:function(e,t,i){i.d(t,{n:function(){return r}});var n=i(91144),a=i(61777);const r={getFeedDataForCard:e=>(0,a.ad)(e),viewTemplate:n.RT}},14535:function(e,t,i){i.d(t,{au:function(){return u}});var n,a=i(54761),r=i(41820),o=i(48172),s=i(65022),l=i(93468),d=i(69118);function c(e){try{var t,i;const n=d.h.getWpoTreatmentsWithType(a.Ar.uxMessage,e);return(null==n?void 0:n.length)>0&&null!==(t=n[0])&&void 0!==t&&t.properties?null===(i=n[0])||void 0===i?void 0:i.properties:null}catch(e){const t="Error in getting wpo uxmessge promotion data";(0,l.vV)(s.rSI,t,`error:${e}`)}}async function u(){const e=c(!0),{featUX:t=""}=e||{},i=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(",").reduce((e,t)=>{const[i,n]=t.split(":");return"0"!==n&&"1"!==n||(e[i]="1"===n),e},{})}(t),n=i.IsCSDAU7dSum;void 0!==n?await o.f.savePreferenceSetting(r.bJ.nonDAU7d,!n):await o.f.savePreferenceSetting(r.bJ.nonDAU7d,null,!0);const a=i.IsCSDAU30dSum;void 0!==a?await o.f.savePreferenceSetting(r.bJ.nonDAU30d,!a):await o.f.savePreferenceSetting(r.bJ.nonDAU30d,null,!0)}!function(e){e.IsCSDAU7dSum="IsCSDAU7dSum",e.IsCSDAU30dSum="IsCSDAU30dSum"}(n||(n={}))},14784:function(e,t,i){i.d(t,{$:function(){return s}});var n=i(80360),a=i(93468),r=i(65022),o=i(19608);const s={getFeedDataForCard:e=>function(e){try{var t;const{configOptions:i,cardMetadata:n,parentTelemetryObject:a,cardSlot:r,sdCardActionClickHandler:s,refreshFeedCallback:l,goToPersonalizeCallback:d,supportedSdCardActionMenuItems:c,isDynamicFeed:u,isWidget:h,activeBoard:v}=e,p="shopping-carousel-prong-wc",f={id:p,parentTelemetryObject:a,childTemplateType:"shopping-carousel-prong-wc",sdCardActionClickHandler:s,refreshFeedCallback:l,goToPersonalizeCallback:d,supportedSdCardActionMenuItems:c,isDynamicFeed:u,isWidget:h,shoppingCardMetadata:n,shoppingCarouselProngWCConfigInfo:i&&i,cardType:v?`${n.type}_${v}`:n.type};return(0,o.bw)({id:p,experienceType:null===(t=f.shoppingCarouselProngWCConfigInfo)||void 0===t||null===(t=t.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},f)}catch(e){(0,a.c_)(e,r.Odo,"Error in Shopping Carousel Prong Mapper")}}(e),viewTemplate:n.n}},16686:function(e,t,i){i.d(t,{T:function(){return s}});var n=i(96950),a=i(11622),r=i(17254);const o=n.qy` 
    ${e=>e.digestCardConfigInfo&&(0,a.yN)(e.digestCardConfigInfo,{attributes:{style:`grid-area:${e.gridArea}`,class:`${e.cardSize}`,size:`${e.cardSize}`},properties:{wpoMetadata:e.wpoMetadata,cardMetadata:e.cardMetadata,cardSize:e.cardSize,parentTelemetry:e.parentTelemetryObject,goToPersonalizeSettingsCallback:e.goToPersonalizeSettingsCallback,refreshFeedCallback:e.refreshFeedCallback,visualReadinessCallback:e.visualReadinessCallback,hasLoadedCallback:e.hasLoadedCallback,useSpotlightMenu:e.isSpotlightZone,supportedSdCardActionMenuItems:e.supportedSdCardActionMenuItems,sdCardActionClickHandler:e.sdCardActionClickHandler,isWidgetRegion:e.isWidgetRegion,turnOffWidgetsRegionCallback:e.turnOffWidgetsRegionCallback,manageWidgetsRegionCallback:e.manageWidgetsRegionCallback,hideCardCallback:e.hideCardCallback,underlineTitle:e.underlineTitle},memoize:"winWidgets"!==r.T3.AppType&&"windowsShellV2"!==r.T3.AppType})}
`,s=n.qy`
    ${o}
`},17755:function(e,t,i){i.d(t,{H:function(){return a}});var n=i(26641);const a={getFeedDataForCard:e=>(0,n.BQ)(e),viewTemplate:i(84793).t}},18570:function(e,t,i){var n,a;i.d(t,{b:function(){return a},u:function(){return n}}),function(e){e.MainImage="MainImage",e.Title="Title",e.LogoProvider="LogoProvider",e.AdLabel="AdLabel",e.AdChoice="AdChoice",e.CallToAction="CallToAction",e.PopupDisclaimer="PopupDisclaimer"}(n||(n={})),function(e){e.Row="Row",e.Column="Col"}(a||(a={}))},20540:function(e,t,i){var n,a,r,o,s,l,d;i.d(t,{L3:function(){return o}}),function(e){e.Article="article",e.Gallery="gallery",e.Video="video",e.Win32="win32",e.UWP="uwp",e[e.Module=8]="Module",e[e.ActionButton=11]="ActionButton",e[e.Navigation=14]="Navigation",e[e.WebView=31]="WebView",e[e.SmartList=35]="SmartList"}(n||(n={})),function(e){e[e.Taboola=0]="Taboola",e[e.Outbrain=1]="Outbrain",e[e.MediaNet=2]="MediaNet",e[e.Editor=3]="Editor",e[e.Personalization=4]="Personalization",e[e.Autocuration=5]="Autocuration"}(a||(a={})),function(e){e[e.MUID=0]="MUID",e[e.ANID=1]="ANID",e[e.AAD=2]="AAD"}(r||(r={})),function(e){e.StartPage="startpage",e.SpartanDhp="default",e.SpartanNtp="default",e.ArticleVnext="article_vnext",e.GalleryVnext="gallery_vnext",e.GalleryClassic="gallery_classic",e.GalleryFlex="gallery_flex",e.ArticleFlex="article_flex",e.StockDetailsPage="stockdetails",e.TeamStatsPage="teamstats",e.Xfeed="xfeed",e.Interests="cinterests"}(o||(o={})),function(e){e.DHP="dhp",e.NTP="ntp",e.Article="article",e.Gallery="gallery",e.Video="video"}(s||(s={})),function(e){e.Emmx="emmx",e.Prime="prime",e.Spartan="spartan",e.ChromeExt="chromeext",e.IEExt="ieext"}(l||(l={})),function(e){e[e.Empty=0]="Empty",e[e.SearchBox=1]="SearchBox",e[e.TopSites=2]="TopSites",e[e.Suggested=4]="Suggested",e[e.ContentFeed=8]="ContentFeed",e[e.WinFRE=16]="WinFRE"}(d||(d={}))},22573:function(e,t,i){i.d(t,{Z:function(){return u},B:function(){return c}});var n=i(93468),a=i(65022),r=i(17720),o=i(18570);function s(e){let t=0;const i=/[\u4e00-\u9fff\u3040-\u30ff\u1100-\u11ff\u3130-\u318f\uac00-\ud7af]/;for(let n=0;n<e.length;n++){const a=e[n];i.test(a)?t+=2:t+=1}return t}const l=(0,r.$U)({1:{templateId:1,enableDefaultCta:!0,fontSizing:[{componentType:o.u.Title,calculateBreakpoint:s,rules:[{lessThan:24,fontSizePx:32,lineHeightPx:40,maxLines:2},{lessThan:50,fontSizePx:28,lineHeightPx:36,maxLines:3},{lessThan:78,fontSizePx:24,lineHeightPx:32,maxLines:4},{lessThan:9999,fontSizePx:20,lineHeightPx:28,maxLines:4}]}],layout:{layoutType:o.b.Row,children:[{componentType:o.u.MainImage},{className:"ad-text-col",children:[{componentType:o.u.LogoProvider},{componentType:o.u.Title},{componentType:o.u.CallToAction},{className:"ad-footer",children:[{componentType:o.u.PopupDisclaimer},{componentType:o.u.AdLabel},{componentType:o.u.AdChoice}]}]}]},subTemplateTypes:{infopane:{cssVariables:{enableBackgroundImage:!0}},"two-square":{isNonImmersive:!0}}},2:{templateId:2,enableDefaultCta:!0,fontSizing:[{componentType:o.u.Title,calculateBreakpoint:s,rules:[{lessThan:24,fontSizePx:28,lineHeightPx:36,maxLines:3},{lessThan:50,fontSizePx:24,lineHeightPx:32,maxLines:4},{lessThan:74,fontSizePx:20,lineHeightPx:28,maxLines:5},{lessThan:9999,fontSizePx:16,lineHeightPx:22,maxLines:6}]}],layout:{layoutType:o.b.Row,children:[{componentType:o.u.MainImage},{className:"ad-text-col",children:[{componentType:o.u.LogoProvider},{componentType:o.u.Title},{componentType:o.u.CallToAction},{className:"ad-footer",children:[{componentType:o.u.PopupDisclaimer},{componentType:o.u.AdLabel},{componentType:o.u.AdChoice}]}]}]},subTemplateTypes:{infopane:{cssVariables:{enableBackgroundImage:!0}},"two-square":{isNonImmersive:!0}}},3:{templateId:3,enableDefaultCta:!0,fontSizing:[{componentType:o.u.Title,calculateBreakpoint:s,rules:[{lessThan:40,fontSizePx:20,lineHeightPx:28,maxLines:4},{lessThan:9999,fontSizePx:16,lineHeightPx:22,maxLines:6}]}],layout:{layoutType:o.b.Row,children:[{componentType:o.u.MainImage},{className:"ad-text-col",children:[{componentType:o.u.LogoProvider},{componentType:o.u.Title},{componentType:o.u.CallToAction},{className:"ad-footer",children:[{componentType:o.u.PopupDisclaimer},{componentType:o.u.AdLabel},{componentType:o.u.AdChoice}]}]}]},subTemplateTypes:{infopane:{cssVariables:{enableBackgroundImage:!0}},"two-square":{isNonImmersive:!0}}}});var d=i(87440);function c(e,t,i){if(!e||e<=0)return null;if(null!=i&&i.some(t=>t.templateId===e))return null;const r=l.current[e.toString()];if(!r)return(0,n.vV)(a.o1l,"MissingAdCardDTSConfig",`Not found templateId ${e}. Available: ${Object.keys(l.current).join(",")}`),null;const{subTemplateTypes:o,...s}=r,c=null==o?void 0:o[t||""];return t&&!c&&(0,n.vV)(a.o1l,"MissingAdCardDTSConfig",`Not found subTemplateType ${t} for templateId ${e}. Available: ${Object.keys(o||{}).join(",")}`),(0,d.A)({styleKey:`${e}_${t}`},s,c)}function u(e,t){const i=t.calculateBreakpoint(e),n=t.rules.find(e=>i<e.lessThan);return n?{fontSizePx:n.fontSizePx,lineHeightPx:n.lineHeightPx,maxLines:n.maxLines}:null}},22723:function(e,t,i){i.d(t,{d:function(){return a}});var n=i(52201);const a=i(96950).qy`
<content-group-card
    config-instance-src=${e=>e.contentGroupCardConfigInfo&&(0,n.v)(e.contentGroupCardConfigInfo)}
    config-shared-ns=${e=>e.contentGroupCardConfigInfo&&e.contentGroupCardConfigInfo.configRef&&e.contentGroupCardConfigInfo.configRef.sharedNs}
    instance-id=${e=>e.contentGroupCardConfigInfo&&e.contentGroupCardConfigInfo.instanceId}
    :cardSize=${e=>e.cardSize}
    :wpoMetadata=${e=>e.wpoMetadata}
    :isDarkMode=${e=>e.isDarkMode}
    :contentGroupCardMetadata=${e=>e.contentGroupCardMetadata}
    :parentTelemetryObject=${e=>e.parentTelemetryObject}
    :refreshFeedCallback=${e=>e.refreshFeedCallback}
    :goToPersonalizeCallback=${e=>e.goToPersonalizeCallback}
    :goToPersonalizeSettingsCallback=${e=>e.goToPersonalizeSettingsCallback}
    :getReplacementCardsCallback=${e=>e.getReplacementCardsCallback}
    :hasLoadedCallback=${e=>e.hasLoadedCallback}
    style="grid-area:${e=>e.gridArea};contain:unset;content-visibility:visible"
    class="${e=>e.cardSize}"
    size="${e=>e.cardSize}"
></content-group-card>`},23781:function(e,t,i){i.d(t,{X:function(){return r}});var n=i(40562),a=i(90901);const r={getFeedDataForCard:e=>(0,a.W)(e),viewTemplate:n.z}},24315:function(e,t,i){i.d(t,{gL:function(){return sn},r6:function(){return Gi}});var n=i(56911),a=i(61226),r=i(30216),o=i(84855),s=i(10160),l=i(8701);var d=i(74956),c=i(77512),u=i(23768),h=i(59545),v=i(89151),p=i(65022),f=i(30817),g=i(13053),m=i(16253),y=i(83003),C=i(79426),b=i(98216),w=i(12870),T=i(45186),S=i(82669),k=i(18272),M=i(46422),$=i(617),F=i(92028),I=i(76225),x=Math.max;var R=function(e){if(!e||!e.length)return[];var t=0;return e=(0,M.A)(e,function(e){if((0,I.A)(e))return t=x(e.length,t),!0}),(0,F.A)(t,function(t){return(0,k.A)(e,(0,$.A)(t))})};var P=function(e,t){if(!e||!e.length)return[];var i=R(e);return null==t?i:(0,k.A)(i,function(e){return(0,S.A)(t,void 0,e)})},A=(0,T.A)(function(e){var t=e.length,i=t>1?e[t-1]:void 0;return i="function"==typeof i?(e.pop(),i):void 0,P(e,i)});const D=e=>{const t=`TTVR.${e}`;return(0,v.Iw)().some(e=>{let[i,n]=e;return i===t})};class O{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v.wL+"Complete";this.contentCardMarkers=new Set,this.contentCardMarkersBeforeTracking=new Set,this.visualReadinessCallbackSetTimes=0,this.maxVisualReadinessCallbackSetTimes=1,this.uiDependenciesReleased=!1,this.feedType=e,this.feedSetPromise=new C.e,this.subMilestoneMarkers=[this.feedSetPromise.getResultAsync()],this.milestoneMarkerPromises=new Map,this.maxVisualReadinessCallbackSetTimes=t,this.ttsrMarkerToUse=i,u.m.updateAboveTheFoldVisuallyReady.registerObserver(()=>{this.uiDependenciesReleased=!0})}releaseUIDependencies(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.uiDependenciesReleased||((0,v.yi)(this.feedType),this.callMilestoneData(),this.uiDependenciesReleased=!0,e&&b.YT.sendAppErrorEvent({...p.t9r,pb:{...p.t9r.pb,customMessage:`FeedType: ${this.feedType}, core feed items are missing, forcing markers to unblock`,isPrerender:null===w.Rb||void 0===w.Rb?void 0:w.Rb.IsPrerender}}))}callMilestoneData(){var e;const t=(0,h.Kl)();t&&(null===u.m||void 0===u.m||null===(e=u.m.updateVisuallyReadyTiming)||void 0===e||null===(e=e.getActionSender(t))||void 0===e||e.send((0,h.ez)(this.feedType,void 0,void 0,void 0,window.performance.now())))}genTtvrCb(e){return()=>{const t=(0,m.nA)(e);if(this.visualReadinessCallbackSetTimes<this.maxVisualReadinessCallbackSetTimes)this.contentCardMarkersBeforeTracking.add(t);else if(t&&this.contentCardMarkers.has(t)){const e=(0,f.ZF)();e.isSSRCompleted?(0,g.D)(()=>{const i=e[this.ttsrMarkerToUse];(0,v.oO)(t,!1,i,!1)}):(0,v.oO)(t)}}}track(e,t,i){if(this.visualReadinessCallbackSetTimes===this.maxVisualReadinessCallbackSetTimes)return;if(e.length!==t.length){const i=t.filter(e=>e.type!==y.pL.ChannelFilterCard&&e.type!==y.pL.DynamicFilteredChannel);if(e.length===i.length)return;b.YT.sendAppErrorEvent({...p.sFb,pb:{...p.sFb.pb,customMessage:`FeedType: ${this.feedType}, length of layoutFeedElements and length cardMetadataList mismatch for TTVR tracker`,layoutFeedElements:JSON.stringify(e.map(e=>e&&(0,c.Yd)(e)?e.id:"unmapped lazy element")),cardMetadataList:JSON.stringify(t.map(e=>e&&e.type))}})}const n=e=>{var t;this.milestoneMarkerPromises.has(e)&&(null===(t=this.milestoneMarkerPromises.get(e))||void 0===t||t.set())},a=A(t,e,(e,t)=>({metadata:e,element:t??{childDOMOrder:1/0}})),r=(null==a?void 0:a.sort((e,t)=>e.element.childDOMOrder-t.element.childDOMOrder))||[];let o=0;for(let e=0;e<r.length&&o<i;e++){const t=r[e].element,i=r[e].metadata,a=t.id;o+=(0,m.v3)(t.cardSize);const s=m.U6[a];let l="",d=!1;if(s){if(D(s))continue;l=`TTVR.${s}`,(0,v.vj)(s,m.Kg,!0,n),d=!0}else if(i&&(0,m.Fs)(i)){const e=(0,m.nA)(i);if(this.contentCardMarkersBeforeTracking.has(e))continue;(0,v.vj)(e,m.rP,!1,n),this.contentCardMarkers.add(e),l=`TTVR.${e}`,d=!0}!this.milestoneMarkerPromises.has(l)&&d&&this.milestoneMarkerPromises.set(l,new C.e)}this.visualReadinessCallbackSetTimes++,this.feedSetPromise.set(),this.subMilestoneMarkers=this.subMilestoneMarkers.concat(this.getPromises()),this.visualReadinessCallbackSetTimes<this.maxVisualReadinessCallbackSetTimes||Promise.allSettled(this.subMilestoneMarkers).then(()=>{this.subMilestoneMarkers=[],this.callMilestoneData();const e=(0,f.ZF)();e.isSSRCompleted?(0,g.D)(()=>{const t=e[this.ttsrMarkerToUse];(0,v.yi)(this.feedType,!1,t,!1)}):(0,v.yi)(this.feedType);const t=this.pageRevealRevalidatePromise;this.pageRevealRevalidatePromise=void 0,t&&t.set()})}getPromises(){return[...this.milestoneMarkerPromises.values()].map(e=>e.getResultAsync())}getPageRevalidateResultAsync(){return this.pageRevealRevalidatePromise=new C.e,this.visualReadinessCallbackSetTimes=0,this.milestoneMarkerPromises.clear(),this.feedSetPromise=new C.e,this.subMilestoneMarkers=[this.feedSetPromise.getResultAsync()],this.pageRevealRevalidatePromise.getResultAsync()}}var N=i(93468),_=i(78873),L=i(69816),z=i(25950);class W{constructor(e){this.sdCardList=[],this.sdCardProvider=new _.B(e)}async fetchUpdatedSDCard(){var e;if(!this.sdCardList.length)return;let t;try{var i;t=await this.sdCardProvider.fetch({contentType:this.sdCardList.join(",")}),(null===(i=t)||void 0===i?void 0:i.status)===L.EY.Success&&((e,t)=>{const i=Object.keys(t.cards),n=Object.values(t.cards).flatMap(e=>e).map(e=>e.type),a=e.filter(e=>!i.includes(e)).join(",");(null==a?void 0:a.length)>0&&(null==e?void 0:e.length)>0&&(null==e?void 0:e.length)!==(null==n?void 0:n.length)&&(0,N.vV)(p.hC4,"Missing segments in SD response","",{missingSegments:a,receivedSegments:i,requestedSegments:e,receivedSegmentTypes:n,shouldSampleErrorsForTreatement1:!0})})(this.sdCardList,t)}catch(e){(0,N.c_)(e,p.Cdh,"SD Card Update Fail for new feed.")}return null===(e=t)||void 0===e?void 0:e.cards}clearSDCardList(){this.sdCardList.length=0}addSDCard(e){e.map(e=>{var t;null===(t=e.cards)||void 0===t||t.map(e=>{let{type:t}=e;const i=t;z.x[i]&&this.sdCardList.push(z.x[i])})})}}var E=i(56500);class H{constructor(e,t){const i={...e,initialRequest:{...e.initialRequest}};t&&(i.initialRequest.feedId=t),e.initialRequest.infopaneCount&&(i.initialRequest.infopaneItemCount=e.initialRequest.infopaneCount),i.initialRequest.disableFlatViewResponse=!0,this.oneServiceCardProvider=new E.f(i),this.reachedEnd=!1}clearCache(){this.reachedEnd=!1,this.oneServiceCardProvider&&this.oneServiceCardProvider.clearCache()}async fetch(e,t,i,n,a,r,o,s){var l;if(this.reachedEnd)return;let d=null===(l=this.previousFeedAPIResponse)||void 0===l?void 0:l.nextPageRequest;a&&(d={});const c={...d,count:e,start:t};let u;c.userFreCandidatesSetId=r,c.feedId=o,void 0!==s&&(c.query="contentconsumption",c.contentId=s,c.flightData="prg-1sw-ccntxt-ann"),i&&(c.query=n?"frefeedback":"frefeedbackneg"),a&&(c.start=void 0,c.query="UserFre"),(i||a||o||s)&&(c.infopaneItemCount=void 0,c.timeoutMs=1500);try{u=await this.oneServiceCardProvider.fetch(c);const e=u&&u.cardMetadata&&u.cardMetadata.length;this.reachedEnd=i||a?this.reachedEnd:e&&!u.nextPageRequest||!e,e&&!a&&(i?u.cardMetadata=u.cardMetadata.map(e=>(e&&e.cardContent&&e.cardContent.badges?e.cardContent.badges.unshift({type:"explicitLike"}):e={...e,cardContent:{...e.cardContent,badges:[{type:"explicitLike"}]}},e)):this.previousFeedAPIResponse=u)}catch(e){(0,N.c_)(e,p.PU3,"Content fetch failed for SuperFeed card replacements.",`Failed with exception : ${e}`)}return u}}class j{constructor(e){this.regionKeys=e,this.initialRowCount={C1:0,C2:0,C3:0,C4:0,C5:0},this.reset()}setInitialRowCount(e){this.initialRowCount=e,this.reset()}updateRowCount(e,t){const i=this.rowCounts[t],{rowHeightPx:n}=e,a={};try{for(const e of Object.keys(this.initialRowCount)){const t=i[e],r=n&&n[e]&&n[e].length||0;a[e]=t+r/2}}catch(e){}this.rowCounts[t]=a}addExtPropertiesToCards(e,t,i,n,a){if(!e||!t)return;const r=this.rowCounts[i];for(const t of e)if(t.rowCount=r,t.debugId=a,t.traceIdIndex=n,t.subItems||t.subCards){const e=t.subItems||t.subCards;for(const t of e)t.rowCount=r}this.updateRowCount(t,i)}reset(){this.rowCounts=this.regionKeys.reduce((e,t)=>({...e,[t]:this.initialRowCount}),{})}}var U=i(14591);class B{constructor(e){this.handleLocationDataChange=e=>{e&&e.source!==U.fC.Feed&&this.callback()},this.callback=e}register(){U.lj.subscribe(U.qy.Location,this.handleLocationDataChange,{fireImmediately:!1})}unregister(){U.lj.unsubscribe(U.qy.Location,this.handleLocationDataChange)}}var q=i(7922),G=i(91532),V=i(49986),K=i(51275),J=i(99271),Z=i(44944),Q=i(55602),X=i(95046);const Y={[G.C.dailyWonderCopilotCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.dailyWonderCopilotCard)},[G.C.dailyWonderQuoteCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.dailyWonderCopilotCard),e.configOptions&&(e.configOptions={...e.configOptions,instanceId:t.type})},[G.C.dailyMomentsCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.dailyMomentsCard)},[G.C.shoppingBannerSdCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.shoppingBannerSdCard)},[G.C.dailyBriefCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.dailyBriefCard)},[G.C.dailyGreetingCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.dailyGreetingCard)},[G.C.shoppingRiverCard]:(e,t,i)=>{var n;if(t.type===y.pL.ShoppingRiver1)ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.shoppingRiverCard1);else if(t.type===y.pL.ShoppingRiver2){var a;ee(e,null===(a=i.childExperienceReferencesWC)||void 0===a?void 0:a.shoppingRiverCard2)}else if(t.type===y.pL.ShoppingRiver3){var r;ee(e,null===(r=i.childExperienceReferencesWC)||void 0===r?void 0:r.shoppingRiverCard3)}else{var o;ee(e,null===(o=i.childExperienceReferencesWC)||void 0===o?void 0:o.shoppingRiverCard)}i.enableShoppingRiverReportAds&&(e.configOptions={...e.configOptions,enableAdFeedbackV1UpdatePhase1:i.enableAdFeedbackV1UpdatePhase1,enableNativeAdReplaceWithNews:i.enableNativeAdReplaceWithNews,enableInstantHide:i.enableInstantHide,enableDismissCallback:i.enableDismissCallback,useHideConfirmationNewStoryText:i.useHideConfirmationNewStoryText,useHideStoryFeedbackAlternativeStrings:i.useHideStoryFeedbackAlternativeStrings,enableHideStoryFeedback:i.enableHideStoryFeedback})},[G.C.sharedHeroNewsCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.sharedHeroNewsCard)},[G.C.widgetsNotificationsCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.widgetsNotificationsCard)},[G.C.donationNpoCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.donationNpoCard)},[G.C.entertainmentPremierCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.entertainmentPremierCard)},[G.C.bingDailyQuizCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.bingDailyQuizCard)},[G.C.richCalendarCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.richCalendarCard)},[G.C.electionCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.ElectionCard)},[G.C.communityCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.communityCard)},[G.C.hotListCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.hotListCard)},[G.C.tabbedInfopaneCard]:(e,t,i)=>{e.configOptions={...e.configOptions}},[G.C.mangaCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.mangaCard)},[G.C.mangaCarousel]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.mangaCarousel)},[G.C.shoppingSdCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.shoppingCard)},[G.C.realEstateCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.realEstateCard)},[G.C.prismCarouselCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.prismCarouselCard)},[G.C.shoppingEventsDealCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.eventSDCardShopping)},[G.C.topCommentsCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.topCommentsCard)},[G.C.trendingSearchCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.trendingSearchCard),e.configOptions={...i,...e.configOptions}},[G.C.commuteCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.commuteCard)},[G.C.digestCard]:(e,t,i)=>{var n,a;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.digestCard),e.configOptions={digestCard:null===(a=i.childExperienceReferencesWC)||void 0===a?void 0:a.digestCard}},[G.C.contentCard]:(e,t,i)=>{e.isProviderInFooter=i.isProviderInFooter},[G.C.webContentCard]:(e,t,i)=>{e.isProviderInFooter=i.isProviderInFooter},[G.C.responsiveAdCard]:(e,t,i)=>{e.isProviderInFooter=i.isProviderInFooter},[G.C.responsiveCard]:(e,t,i)=>{e.isProviderInFooter=i.isProviderInFooter},[G.C.responsiveInfopaneCard]:(e,t,i)=>{te(e,t,i)},[G.C.infopaneCard]:(e,t,i)=>{te(e,t,i)},[G.C.comicsCarouselCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.selectCarousel)},[G.C.selectCarouselCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.selectCarousel)},[G.C.editorsPickCarouselCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.selectCarousel)},[G.C.dailyFixGamesCarouselCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.selectCarousel)},[G.C.localNewsCarCard]:(e,t,i)=>{var n,a;i.useMobile||i.isMsnMobile?ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.trendingNowWC):ee(e,null===(a=i.childExperienceReferencesWC)||void 0===a?void 0:a.selectCarousel)},[G.C.moneyTopicStripeCarouselCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.selectCarousel)},[G.C.weatherHeroExperienceCarouselCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.selectCarousel)},[G.C.spotlightCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.spotlightCardWC)},[G.C.TopicFeedCard]:(e,t,i)=>{var n,a,r,o,s,l,d,c,u,h,v;switch((0,X.o)(e)){case G.C.hotListCard:ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.hotListCard);break;case G.C.digestCard:ee(e,null===(a=i.childExperienceReferencesWC)||void 0===a?void 0:a.digestCard);break;case G.C.selectCarouselCard:ee(e,null===(r=i.childExperienceReferencesWC)||void 0===r?void 0:r.selectCarousel);break;case G.C.topCommentsCard:ee(e,null===(o=i.childExperienceReferencesWC)||void 0===o?void 0:o.topCommentsCard);break;case G.C.spotlightCard:ee(e,null===(s=i.childExperienceReferencesWC)||void 0===s?void 0:s.spotlightCardWC);case G.C.topStoriesCard:}e.configOptions={selectCarousel:null===(l=i.childExperienceReferencesWC)||void 0===l?void 0:l.selectCarousel,linkedInCard:null===(d=i.childExperienceReferencesWC)||void 0===d?void 0:d.linkedInCard,spotlightCard:null===(c=i.childExperienceReferencesWC)||void 0===c?void 0:c.spotlightCardWC,digestCard:null===(u=i.childExperienceReferencesWC)||void 0===u?void 0:u.digestCard,hotListCard:null===(h=i.childExperienceReferencesWC)||void 0===h?void 0:h.hotListCard,topCommentsCard:null===(v=i.childExperienceReferencesWC)||void 0===v?void 0:v.topCommentsCard,useLightShadow:i.useLightShadow,lightShadowVal:i.lightShadowVal,...e.configOptions}},[G.C.shoppingCarouselCard]:(e,t,i)=>{var n,a,r,o;t.type===y.pL.EdgeShoppingCard&&(e.configOptions=null===(o=i.childExperienceReferencesWC)||void 0===o?void 0:o.edgeShoppingCard);t.type===y.pL.ShoppingCarousel&&null!==(n=i.childExperienceReferencesWC)&&void 0!==n&&n.shoppingCarousel&&(e.configOptions=i.childExperienceReferencesWC.shoppingCarousel),t.type===y.pL.ShoppingCarousel2&&null!==(a=i.childExperienceReferencesWC)&&void 0!==a&&a.shoppingCarousel2&&(e.configOptions=i.childExperienceReferencesWC.shoppingCarousel2),t.type==y.pL.Shopping1688Carousel&&null!==(r=i.childExperienceReferencesWC)&&void 0!==r&&r.shopping1688Carousel&&(e.configOptions=i.childExperienceReferencesWC.shopping1688Carousel)},[G.C.shoppingBuyingGuidePremiumCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.shoppingBGPremiumCard)},[G.C.shoppingVideoCarouselCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.selectCarousel)},[G.C.weatherCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.weatherCard)},[G.C.weatherHeroExperience]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.weatherHeroExperience)},[G.C.moneyCard]:(e,t,i)=>{},[G.C.contentGroupCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.contentGroupCard)},[G.C.horoscopeAnswerCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.horoscopeCard)},[G.C.electionsCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.electionsCard)},[G.C.denseCard]:(e,t,i)=>{var n;e.enableArticleTimestamps=i.enableArticleTimestamps,e.localizedStrings=i.localizedStrings,e.enableNewTimestampFormatForJAJP=i.enableNewTimestampFormatForJAJP,ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.denseCard)},[G.C.trendingNowCard]:function(e,t,i){var n,a;i.useMobile||i.isMsnMobile?ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.trendingNowWC):ee(e,null===(a=i.childExperienceReferencesWC)||void 0===a?void 0:a.trendingNowWC)},[G.C.moneyInfoCardWC]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.moneyInfoCardWC)},[G.C.healthCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.bingHealthCard)},[G.C.healthFitnessCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.bingHealthFitnessCard)},[G.C.healthTipCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.healthTipWC)},[G.C.healthRiverCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.healthRiverWC)},[G.C.onThisDayCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.onThisDayCard)},[G.C.qnaCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.qnaCard)},[G.C.quizCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.quizCard)},[G.C.prismCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.prismCard)},[G.C.rewardsCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.rewardsCard)},[G.C.recipesCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.recipesCard)},[G.C.esportsCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.esportsCard)},[G.C.gamingRecentlyPlayedCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.gamingRecentlyPlayedCard)},[G.C.trafficCard]:(e,t,i)=>{var n,a;i.useMobile&&!i.isMsnMobile?ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.commuteCard):ee(e,null===(a=i.childExperienceReferencesWC)||void 0===a?void 0:a.trafficCard)},[G.C.trafficHero]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.trafficHero)},[G.C.momentInTimeHero]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.momentInTimeHero)},[G.C.travelDestinationCard]:(e,t,i)=>{var n,a,r,o,s;const l=t.dataType;var d;if(null!=i&&null!==(n=i.childExperienceReferencesWC)&&void 0!==n&&n.travelSdHotelsCard&&t&&["HotelList","HotelListingResult"].includes(l))ee(e,null===(d=i.childExperienceReferencesWC)||void 0===d?void 0:d.travelSdHotelsCard);else if(null!=i&&null!==(a=i.childExperienceReferencesWC)&&void 0!==a&&a.travelSdFlightsCard&&t&&["FlightPriceTrends","FlightPriceTrendsList"].includes(l)){var c;ee(e,null===(c=i.childExperienceReferencesWC)||void 0===c?void 0:c.travelSdFlightsCard)}else if(null!=i&&null!==(r=i.childExperienceReferencesWC)&&void 0!==r&&r.travelSdThemesCard&&t&&["ThemeCardList","ThemeInspiration"].includes(l)){var u;ee(e,null===(u=i.childExperienceReferencesWC)||void 0===u?void 0:u.travelSdThemesCard)}else if(null!=i&&null!==(o=i.childExperienceReferencesWC)&&void 0!==o&&o.travelSdDestinationsCard&&t&&["DestinationList","Destination"].includes(l)){var h;ee(e,null===(h=i.childExperienceReferencesWC)||void 0===h?void 0:h.travelSdDestinationsCard)}else if(null!=i&&null!==(s=i.childExperienceReferencesWC)&&void 0!==s&&s.travelSdCarrentalsCard&&t&&["CarRentalList"].includes(l)){var v;ee(e,null===(v=i.childExperienceReferencesWC)||void 0===v?void 0:v.travelSdCarrentalsCard)}else{var p;ee(e,null===(p=i.childExperienceReferencesWC)||void 0===p?void 0:p.travelDestination)}},[G.C.travelDestinationCarouselCard]:(e,t,i)=>{var n,a;const r=t.dataType;var o;if(null!=i&&null!==(n=i.childExperienceReferencesWC)&&void 0!==n&&n.travelHotelCarousel&&t&&["HotelList"].includes(r))ee(e,null===(o=i.childExperienceReferencesWC)||void 0===o?void 0:o.travelHotelCarousel);else if(null!=i&&null!==(a=i.childExperienceReferencesWC)&&void 0!==a&&a.travelFlightCarousel&&t&&["FlightPriceTrends"].includes(r)){var s;ee(e,null===(s=i.childExperienceReferencesWC)||void 0===s?void 0:s.travelFlightCarousel)}else{var l;ee(e,null===(l=i.childExperienceReferencesWC)||void 0===l?void 0:l.travelCarousel)}},[G.C.sportsCard]:(e,t,i)=>{var n,a;null!==(n=i.childExperienceReferencesWC)&&void 0!==n&&n.sportsCard&&(ee(e,null===(a=i.childExperienceReferencesWC)||void 0===a?void 0:a.sportsCard),e.configOptions=i)},[G.C.sportsOlympicCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.sportsOlympicCard)},[G.C.autosCarouselCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.autosCarousel)},[G.C.relatedNewsCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.digestCard)},[G.C.publisherListCard]:(e,t,i)=>{var n;null!==(n=i.childExperienceReferencesWC)&&void 0!==n&&n.publisherList&&(e.configOptions={publisherList:i.childExperienceReferencesWC.publisherList})},[G.C.marketplaceCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.marketplaceCardWC)},[G.C.recommendedInterestsCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.recommendedInterestsCard),e.configOptions={...e.configOptions,enableHideStoryFeedback:!0,enableInstantHide:!0,enableDismissCallback:!0}},[G.C.pollsCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.pollsCardWC)},[G.C.nativeAdCard]:function(e,t,i){if(!i.skipNativeAdCardMetadataProcess&&i&&e&&e.cardMetadata&&e.cardMetadata.data){const t=JSON.parse(e.cardMetadata.data);if(t&&t.items&&t.items[0]&&((0,K.pg)(t.items[0],t.items[0].assets),e.cardMetadata.placement&&(e.cardMetadata.placement=(0,K.Yt)(t,i.adBeaconServiceConfig))),i.enableNativeAdWC){(new J.I).updateTemplate(t,i.adTemplateConfig)}e.cardMetadata.data=JSON.stringify(t),e.cardMetadata.template=t.template}},[G.C.sectionHeaderCard]:(e,t,i,n)=>{const{index:a,cardMetadataList:r}=n,o=r[a+1];let s=o&&o.type;Z.G[s]===G.C.TopicFeedCard&&o&&o.feed&&o.feed.canonicalName&&(s=o.feed.canonicalName),e.configOptions={...e.configOptions,RiverSectionHeaderCardType:s}},[G.C.topStoriesCard]:(e,t,i,n)=>{const{index:a,cardMetadataList:r}=n,o=a-1>=0?r[a-1]:null;if(o){const t=o.type;t&&Z.G[t]===G.C.sectionHeaderCard&&(e.configOptions={...e.configOptions,disableTopStoriesCardHeading:!0,useSectionHeaderTopStories:!0,useTopStoriesRibbonCarousel:!0,useTopStoriesRibbon4Carousel:!0})}null!=i&&i.useRightRailLayout&&(e.configOptions={...i,useRightRailTopStories:!0,useGradientTopStories:!1})},[G.C.casualGamesCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.casualGamesCard)},[G.C.casualGamesCarouselCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.casualGamesCarouselCard)},[G.C.casualGamesProng2CarouselCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.casualGamesProng2CarouselCard)},[G.C.channelFilterCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.channelFilterCard)},[G.C.articleFreCard]:(e,t,i)=>{ee(e,i.childExperienceReferencesWC&&i.childExperienceReferencesWC.articleFreCard),e.configOptions={...e.configOptions,enableHideStoryFeedback:!0,enableInstantHide:!0,enableDismissCallback:!0,useHideConfirmationNewStoryText:!0}},[G.C.shoppingCarouselProngWC]:(e,t,i)=>{var n,a;i.useMobile&&!i.isMsnMobile?ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.selectCarousel):ee(e,null===(a=i.childExperienceReferencesWC)||void 0===a?void 0:a.shoppingCarouselProngWC)},[G.C.shoppingFashionCarouselWC]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.shoppingFashionCarouselWC)},[G.C.cashbackCarouselCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.cashbackCarouselCard)},[G.C.contentGroup]:(e,t,i)=>{var n,a;i.useMobile||i.isMsnMobile?ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.contentGroup):ee(e,null===(a=i.childExperienceReferencesWC)||void 0===a?void 0:a.contentGroup)},[G.C.winAppCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.winAppCard)},[G.C.promotedAdCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.promotedAdCard),i.enableFlightMismatchTmpl&&(null===b.YT||void 0===b.YT||b.YT.addOrUpdateTmplProperty("promotedAdWceLoaded","1"))},[G.C.boostAdCard]:(e,t,i)=>{var n;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.boostAdCard)},[G.C.dailyWonderVideoListCard]:(e,t,i)=>{var n,a;ee(e,null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.digestCard),e.configOptions={digestCard:null===(a=i.childExperienceReferencesWC)||void 0===a?void 0:a.digestCard}}},ee=(e,t)=>{var i,n,a;t?((0,Q.uC)(t),e.configOptions=t):(e.configOptions=null,b.YT.sendAppErrorEvent({...p.GdV,message:"Can not load SD card WCE",pb:{...p.GdV.pb,cardMetadata:null===(i=e.cardMetadata)||void 0===i?void 0:i.type,layoutTemplateName:e.layoutTemplateName,customMessage:`Error: empty config options for feed card type ${null===(n=e.cardMetadata)||void 0===n?void 0:n.type}`,debugId:null===(a=e.cardMetadata)||void 0===a?void 0:a.debugId}}),e.emptySDCardConfigCallback&&e.emptySDCardConfigCallback())},te=(e,t,i)=>{var n,a,r;if(!i.enableUmf)if(i.isMsnMobile)(0,Q.uC)(null===(n=i.childExperienceReferencesWC)||void 0===n?void 0:n.selectCarousel),e.configOptions.configRef=null===(a=i.childExperienceReferencesWC)||void 0===a?void 0:a.selectCarousel.configRef,e.configOptions.instanceId=null===(r=i.childExperienceReferencesWC)||void 0===r?void 0:r.selectCarousel.instanceId;else if(i.useMobile){var o,s,l;(0,Q.uC)(null===(o=i.childExperienceReferencesWC)||void 0===o?void 0:o.contentGroup),e.configOptions.configRef=null===(s=i.childExperienceReferencesWC)||void 0===s?void 0:s.contentGroup.configRef,e.configOptions.instanceId=null===(l=i.childExperienceReferencesWC)||void 0===l?void 0:l.contentGroup.instanceId}else{e.activeIndicator=!1;const n=null==t?void 0:t.wpoMetadata,a=n&&(n.infopaneFirstSlideTransitionSpeedInDecimalSeconds||n.infopaneFirstSlideTransitionSpeedInSeconds),r=n&&(n.infopaneRemainingSlidesTransitionSpeedInDecimalSeconds||n.infopaneRemainingSlidesTransitionSpeedInSeconds);e.autoRotateIntervalMs=i.overrideAutoRotateIntervalMs||1e3*r||i.autoRotateIntervalMs||5e3,e.firstAutoRotateIntervalMs=i.overrideAutoRotateIntervalMs||1e3*a||i.firstAutoRotateIntervalMs,e.configOptions={...e.configOptions},delete e.configOptions.useArticleCardTemplate}};var ie=i(55331),ne=i(57109),ae=i(1698),re=i(79569),oe=i(82911),se=i(26641);const le={getFeedDataForCard:e=>(0,se.BQ)(e),viewTemplate:se.wT};var de=i(70438),ce=i(30010),ue=i(31752),he=i(36653),ve=i(71854),pe=i(31371),fe=i(30972),ge=i(50976),me=i(76865),ye=i(17755),Ce=i(13668),be=i(26020),we=i(7881),Te=i(37895),Se=i(63267),ke=i(13772),Me=i(58094),$e=i(36532),Fe=i(28076),Ie=i(4146),xe=i(1415),Re=i(36687),Pe=i(32779),Ae=i(88880),De=i(90048),Oe=i(37842),Ne=i(97609),_e=i(52143),Le=i(65639),ze=i(87979),We=i(98826),Ee=i(31634),He=i(57029),je=i(50349),Ue=i(63218),Be=i(96950),qe=i(11622),Ge=i(17254);const Ve=Be.qy`
    ${e=>(0,qe.yN)({configRef:e.relatedNewsCardConfigInfo.configRef,instanceId:"RelatedNewsCard"},{attributes:{style:`grid-area:${e.gridArea}`,class:`${e.cardSize}`},properties:{wpoMetadata:e.wpoMetadata,cardMetadata:e.cardMetadata,cardSize:e.cardSize,cardOverrides:e.overrides,parentTelemetry:e.parentTelemetryObject,removeProductivityCard:e.refreshSDCardSection,navigateToPersonalizeSetting:e.goToPersonalizeSettingsCallback,hasLoadedCallback:e.hasLoadedCallback},memoize:"winWidgets"!==Ge.T3.AppType&&"windowsShellV2"!==Ge.T3.AppType})}
`;var Ke=i(19608);const Je={getFeedDataForCard:e=>function(e){try{var t;const{cardSlot:i,configOptions:n,parentTelemetryObject:a,cardMetadata:r,goToPersonalizeSettingsCallback:o,refreshSDCardSection:s,hasLoadedCallback:l}=e,d=n&&n.relatedNewsCardConfig||n;if(!r||!i)throw new Error("Missing required parameters");if(r.feed={canonicalName:"relatedNews"},r.subCards=r.subItems??r.subCards,!r.subCards||r.subCards.length<2)throw(0,N.vV)(p.k_$,"Service context returned too few subcards in metadata",`metadata:${JSON.stringify(r)}.`),new Error("Missing required parameters");const c={id:"relatedNewsCard",childTemplateType:"related-news-card",parentTelemetryObject:a,relatedNewsCardConfigInfo:d,cardMetadata:r,overrides:{neutralColor:d?d.neutralColor:void 0},goToPersonalizeSettingsCallback:o,refreshSDCardSection:s,hasLoadedCallback:l};return(0,Ke.bw)({id:"relatedNewsCard",experienceType:null==d||null===(t=d.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},c)}catch(e){(0,N.c_)(e,p._7,"Error in feed-layout related news card Mapper")}return null}(e),viewTemplate:Ve};var Ze=i(75633),Qe=i(30668),Xe=i(89768),Ye=i(35666),et=i(82437),tt=i(87743),it=i(7946),nt=i(92945),at=i(14784);const rt={getFeedDataForCard:e=>function(e){try{var t;const{configOptions:i,cardMetadata:n,parentTelemetryObject:a,sdCardActionClickHandler:r,refreshFeedCallback:o,goToPersonalizeCallback:s}=e,l="shopping-fashion-carousel-wc",d={id:l,parentTelemetryObject:a,childTemplateType:"shopping-fashion-carousel-wc",sdCardActionClickHandler:r,refreshFeedCallback:o,goToPersonalizeCallback:s,shoppingCardMetadata:n,shoppingFashionCarouselWCConfigInfo:i&&i};return(0,Ke.bw)({id:l,experienceType:null===(t=d.shoppingFashionCarouselWCConfigInfo)||void 0===t||null===(t=t.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},d)}catch(e){(0,N.c_)(e,p.Odo,"Error in Shopping fashion Carousel Mapper")}}(e),viewTemplate:i(39978).D};var ot,st=i(32756),lt=i(97716),dt=i(23781),ct=i(41607),ut=i(94031),ht=i(2934),vt=i(66603),pt=i(90587),ft=i(33956),gt=i(97110),mt=i(83449),yt=i(34348);!function(e){e.Text="text",e.HTML="html",e.Markdown="markdown"}(ot||(ot={}));var Ct=i(51600);const bt=e=>{var t;const i=null==e||null===(t=e.images)||void 0===t?void 0:t[0];if(!i||!i.url)return;if(i.source&&!["msn","bing"].includes(i.source))return i.url;return(0,Ct.oQ)(i.url,{enableDpiScaling:!0,devicePixelRatio:1})},wt=e=>{var t,i,n;const a=null==e||null===(t=e.subCards)||void 0===t?void 0:t.find(e=>"GemInsight"===e.type);return{insightTitle:null==a||null===(i=a.encodedTitle)||void 0===i||null===(i=i.filter(e=>e.encodingType===ot.HTML))||void 0===i||null===(i=i[0])||void 0===i?void 0:i.data,insightDetail:null==a||null===(n=a.encodedSubTitle)||void 0===n||null===(n=n.filter(e=>e.encodingType===ot.HTML))||void 0===n||null===(n=n[0])||void 0===n?void 0:n.data}},Tt=e=>{var t;const i=["GemPrompts","Gem_Prompts"],n=null==e||null===(t=e.subCards)||void 0===t||null===(t=t.filter(e=>i.includes(e.type)))||void 0===t||null===(t=t[0])||void 0===t?void 0:t.subCards;return null==n?void 0:n.map(e=>({title:e.title||e.data||"",url:e.url,onClick:()=>!0}))};var St=i(669);const kt={viewTemplate:Be.qy`
<cx-gem-greeting
    id=${e=>e.id}
    :greetingHtml=${e=>e.greetingHtml}
    :href=${e=>e.href}
    :prompts=${e=>e.prompts}
    :rootTelemetryObject=${e=>e.parentTelemetryObject}
    :visualReadinessCallback=${e=>e.visualReadinessCallback}
    size="${e=>e.size||"1u"}"
    style=${e=>e.gridArea?`grid-area: ${e.gridArea};`:""}
    sub-type=${e=>e.subType}
></cx-gem-greeting>
`,getFeedDataForCard:function(e){const{cardMetadata:t,parentTelemetryObject:i,cardSlot:n,visualReadinessCallback:a}=e,r=t,{title:o,prompts:s}=(e=>{var t;const i=(null===(t=e.encodedTitle)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.data)||"",{insightTitle:n,insightDetail:a}=wt(e),r=Tt(e);return{title:i,insightTitle:n,insightDetail:a,imageSrc:bt(e),prompts:r,url:e.url}})(r),l={...r,childTemplateType:"gem-greeting-card",href:(0,St.Dv)((null==r?void 0:r.url)||s&&s.length&&s[0].url||""),parentTelemetryObject:i,greetingHtml:o,prompts:s.slice(0,1),gridArea:null==n?void 0:n.grid_area,type:y.pL.GemGreeting,visualReadinessCallback:a};return(0,Ke.bw)({id:null==r?void 0:r.id,experienceType:y.pL.GemGreeting,mapperArgs:e},l)}},Mt=(G.C.articleFreCard,ie._,G.C.autosCarouselCard,ne.B,G.C.boostAdCard,ae.H,G.C.casualGamesCard,oe.D,G.C.casualGamesProng2CarouselCard,G.C.cashbackCarouselCard,re.j,G.C.communityCard,de.m,G.C.contentCardPreview1x,ce.m,G.C.contentCard,ce.m,G.C.contentGroupCard,ue.d,G.C.dailyBriefCard,he.W,G.C.dailyMomentsCard,pe.B,G.C.digestCard,fe.j,G.C.electionsCard,me.Z,G.C.electionCard,ge.y,G.C.esportsCard,Ce.z,G.C.followingFREInlineCard,be.g,G.C.entertainmentPremierCard,ye.H,G.C.healthFitnessCard,we.x,G.C.healthTipCard,Te.O,G.C.hideStoryCard,Se.e,G.C.infopaneCard,ke.n,G.C.infopaneSlideCard,ce.m,G.C.interestManagementCard,Me.g,G.C.localNewsCarCard,it.L,G.C.mangaCard,$e.b,G.C.marketplaceCard,Fe.G,G.C.moneyAddWatchlistCard,Ie.Z,G.C.moneyCard,xe.l,G.C.moneyInfoCardWC,Re.j,G.C.nativeAdCard,Pe.$,G.C.onThisDayCard,Ae.s,G.C.placeholderCard,De.M,G.C.pollsCard,Oe.N,G.C.prismCard,Ne.i,G.C.prismCarouselCard,_e.W,G.C.profileCarouselCard,Le.s,G.C.promotedAdCard,ze.o,G.C.qnaCard,We.t,G.C.quizCard,Ee.O,G.C.realEstateCard,He.n,G.C.recipesCard,je.E,G.C.recommendedInterestsCard,Ue.l,G.C.relatedNewsCard,G.C.responsiveAdCard,Ze.k,G.C.responsiveCard,Qe.v,G.C.responsiveInfopaneCard,Xe.V,G.C.rewardsCard,Ye.B,G.C.richCalendarCard,et.n,G.C.topCommentsCard,tt.w,G.C.dailyGreetingCard,ve.v,G.C.shoppingBuyingGuidePremiumCard,nt.W,G.C.shoppingCarouselProngWC,at.$,G.C.shoppingFashionCarouselWC,G.C.sportsCard,st.a,G.C.spotlightCard,lt.H,G.C.topStoriesCard,dt.X,G.C.TopicFeedCard,ct.C,G.C.trafficCard,ut.U,G.C.travelDestinationCard,ht.t,G.C.trendingSearchCard,vt.i,G.C.videoCard,pt.O,G.C.weatherCard,ft.j,G.C.webContentCard,ce.m,G.C.widgetPlaceholderCard,gt.k,G.C.widgetsNotificationsCard,mt.u,G.C.winAppCard,yt.w,G.C.gemGreetingCard,{[G.C.autosCarouselCard]:o.WG6,[G.C.boostAdCard]:o.Op9,[G.C.casualGamesCard]:o.ymm,[G.C.casualGamesProng2CarouselCard]:o.W2,[G.C.cashbackCarouselCard]:o.EUj,[G.C.communityCard]:o.XTG,[G.C.contentGroupCard]:o.ojW,[G.C.dailyBriefCard]:o.nau,[G.C.dailyMomentsCard]:o.iR_,[G.C.digestCard]:o.cpF,[G.C.electionCard]:o.nwD,[G.C.esportsCard]:o.s7z,[G.C.followingFREInlineCard]:o.pt1,[G.C.entertainmentPremierCard]:o.skx,[G.C.healthFitnessCard]:o.ct7,[G.C.healthTipCard]:o.Lwu,[G.C.mangaCard]:o.Ir6,[G.C.marketplaceCard]:o.JY9,[G.C.moneyCard]:o.SWl,[G.C.moneyInfoCardWC]:o.ahW,[G.C.onThisDayCard]:o.B34,[G.C.pollsCard]:o.ktl,[G.C.prismCard]:o.AOC,[G.C.prismCarouselCard]:o.JxY,[G.C.qnaCard]:o.Qb0,[G.C.quizCard]:o.zHB,[G.C.realEstateCard]:o.ArF,[G.C.recipesCard]:o.Lz8,[G.C.recommendedInterestsCard]:o.gJ$,[G.C.relatedNewsCard]:o.cpF,[G.C.rewardsCard]:o.adn,[G.C.richCalendarCard]:o.wNB,[G.C.topCommentsCard]:o.DZv,[G.C.dailyGreetingCard]:o.avx,[G.C.shoppingBuyingGuidePremiumCard]:o.JCG,[G.C.shoppingCarouselProngWC]:o.yFt,[G.C.shoppingFashionCarouselWC]:o.Yac,[G.C.sportsCard]:o.tX4,[G.C.spotlightCard]:o.IUg,[G.C.topStoriesCard]:o.cpF,[G.C.TopicFeedCard]:o.cpF,[G.C.trafficCard]:o.xm,[G.C.travelDestinationCard]:o.WNH,[G.C.trendingSearchCard]:o.tKm,[G.C.videoCard]:o.Jqf,[G.C.weatherCard]:o.IRE,[G.C.weatherHeroExperience]:o.UoA,[G.C.widgetsNotificationsCard]:o.B7V,[G.C.winAppCard]:o.nR3});var $t=i(84278),Ft=i(20450),It=i(13312),xt=i(70177),Rt=i(4442),Pt=i(27942),At=i(71507),Dt=i(60306),Ot=i(74227),Nt=i(930),_t=i(96244),Lt=i(77246),zt=i(17720),Wt=i(10291),Et=i(8866),Ht=i(39484),jt=i(79798),Ut=i(67387),Bt=i(28469),qt=i(56018),Gt=i(94425),Vt=i(85159),Kt=i(18731),Jt=i(89980),Zt=i(53384),Qt=i(19548),Xt=i(86676),Yt=i(55593),ei=i(20160),ti=i(84080),ii=i(11372),ni=i(44119),ai=i(45083),ri=i(15003),oi=i(41423),si=i(5044),li=i(21841),di=i(99863),ci=i(68706),ui=i(6916),hi=i(75538),vi=i(38405),pi=i(18284),fi=i(29307),gi=i(8292),mi=i(80025),yi=Object.prototype.hasOwnProperty,Ci=(0,mi.A)(function(e,t,i){yi.call(e,i)?++e[i]:(0,gi.A)(e,i,1)}),bi=i(70487),wi=i(87405),Ti=i(39152),Si=i(20540),ki=i(47149),Mi=i(48520),$i=i(54030);const Fi="LoadingPlaceholder";function Ii(e){const t=window&&window.chrome&&window.chrome.ntpSettingsPrivate;t&&t.logLoadingError&&("visible"===document.visibilityState?Promise.resolve():new Promise(e=>{document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&e()},{once:!0})})).then(()=>{t.logLoadingError(e)})}var xi,Ri,Pi=i(60815),Ai=i(81949);function Di(e,t){if(e){const i=(0,Ut.q9)(t);(0,oi.w)().switchPivot({pivotId:e.pivotId,configIndexHref:e.configIndexHref,configIndexRef:i??e.configIndexRef,context:{...e.context,isRequestFromSdCardAddRemoveClick:!0},telemetryPageName:Si.L3.Interests,display:e.displayName})}}!function(e){e.SwitchToPageSettings="SwitchToPageSettings",e.SwitchToNewsSettingsInPersonalizePivot="SwitchToNewsSettingsInPersonalizePivot"}(xi||(xi={})),function(e){e.edgePageSettings="EdgePageSettings",e.chromiumPageSettings="ChromiumPageSettings",e.proActiveCanvasSettingHandler="ProActiveCanvasHandler",e.localStorageSettings="LocalStorageSettings"}(Ri||(Ri={}));var Oi=i(29252);class Ni{constructor(e,t){this.countTmpl=e,this.droppedTmpl=t,this.reasonsCount=0,this.droppedCount=0}stampTmpl(){b.YT.addOrUpdateTmplProperty(this.countTmpl,this.reasonsCount.toString()),b.YT.addOrUpdateTmplProperty(this.droppedTmpl,this.droppedCount.toString())}}var _i=i(70056);class Li extends Ni{constructor(){super("rbdgbfr","rbdgafr")}processBadges(e){const t=e.metadata.reasons;if(!t.length)return;t.some(e=>e.type===_i.ac.TRENDING)&&(this.reasonsCount++,1!==t.length&&(e.metadata.reasons=t.filter(e=>e.type!==_i.ac.TRENDING),this.droppedCount++))}}class zi extends Ni{constructor(){super("xplrrsncnt","xplrrsndrp")}processBadges(e){var t;const i=null===(t=e.metadata)||void 0===t?void 0:t.reasons;if(null==i||!i.length)return;i.some(e=>e.type===_i.ac.EXPLORE)&&(this.reasonsCount++,1!==i.length&&(e.metadata.reasons=i.filter(e=>e.type!==_i.ac.EXPLORE),this.droppedCount++))}}class Wi{constructor(){this.badgeProcessors=[new Li,new zi]}processFeed(e){try{const t=e.map(e=>(((0,hi.MD)(e)||e.type===y.pL.TopicFeed)&&e.subCards?e.subCards.forEach(e=>this.processCard(e)):(0,hi.MD)(e)&&e.subItems?e.subItems.forEach(e=>this.processCard(e)):e.metadata&&this.processCard(e),e));return this.badgeProcessors.forEach(e=>e.stampTmpl()),t}catch(e){(0,N.vV)((0,N.$5)(p.N84,"Error in filtering reasons badges with multiple recall paths"),"")}return e}processCard(e){(e=>{var t;return(null===(t=e.metadata)||void 0===t||null===(t=t.reasons)||void 0===t?void 0:t.length)>0})(e)&&this.badgeProcessors.forEach(t=>t.processBadges(e))}}var Ei,Hi=i(99928);class ji{constructor(){this.staleMinutesThreshold=5,this.lastFeedResponseTime=0,this.idleCount=0,this.staleFrequency=0,this.onFeedHidden=()=>{this.idleCount++},this.onFeedVisible=()=>{(0,ai.GP)().then(()=>{this.checkStaleOnFeedVisibility()})},this.onVisibilityChange=()=>{(0,Lt.S)()&&(document.hidden?this.onFeedHidden():this.onFeedVisible())},this.checkStaleOnFeedVisibility=async()=>{const e=Math.round(performance.now()-this.lastFeedResponseTime);if(e>60*this.staleMinutesThreshold*1e3){var t;null===b.YT||void 0===b.YT||b.YT.addOrUpdateTmplProperty("staleOnIdle","1"),null===b.YT||void 0===b.YT||b.YT.addOrUpdateTmplProperty("staleFrequency",String(++this.staleFrequency)),this.logStaleOnFeedVisibility&&(0,N.vV)(p.Tuh,"Feed was stale when user returned to the page.","",{timeSinceLastResponse:e,wasIdle:Boolean(this.idleCount),idleCount:this.idleCount,shouldSampleErrorsForTreatement1:!0});await(null===(t=this.onFeedStale)||void 0===t?void 0:t.call(this))&&(this.lastFeedResponseTime=performance.now())}}}static get instance(){return zt.vv.get(this.instanceKey)}static set instance(e){zt.vv.set(this.instanceKey,e)}static getInstance(){return ji.instance||(ji.instance=new ji),ji.instance}init(e){let{staleMinutesThreshold:t,logStaleOnFeedVisibility:i,onFeedStale:n,disableDocumentVisibilityListener:a}=e;t&&(this.staleMinutesThreshold=t),this.logStaleOnFeedVisibility=i,this.onFeedStale=n,this.lastFeedResponseTime=performance.now(),a||(0,ai.GP)().then(()=>{document.addEventListener("visibilitychange",this.onVisibilityChange)})}dispose(){document.removeEventListener("visibilitychange",this.onVisibilityChange),this.idleCount=0}markFeedRefreshed(){this.lastFeedResponseTime=performance.now()}}ji.instanceKey=Symbol("instance"),function(e){e.pill="pill",e._1x_halfy="_1x_halfy",e._2x_halfy="_2x_halfy",e._1x_1y="_1x_1y",e._1x_2y="_1x_2y",e._1x_3y="_1x_3y",e._1x_4y="_1x_4y",e._1x_5y="_1x_5y",e._2x_1y="_2x_1y",e._2x_2y="_2x_2y",e._2x_3y="_2x_3y",e._2x_4y="_2x_4y",e._2x_6y="_2x_6y",e._3x_1y="_3x_1y",e._3x_2y="_3x_2y",e._3x_3y="_3x_3y",e._4x_1y="_4x_1y",e._4x_2y="_4x_2y",e._5x_1y="_5x_1y",e._5x_2y="_5x_2y",e._25u="0.25u",e._05u="0.5u",e._075u="0.75u",e._1u="1u",e._125u="1.25u",e._15u="1.5u",e._175u="1.75u",e._2c="_2x_2y",e._2u="_1x_4y",e._3u="_1x_6y"}(Ei||(Ei={}));(0,pi.A)(e=>Array(e).fill(146));function Ui(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=e.filter(e=>{var i,n;let[a,r]=e;const o=null===(i=r.contract)||void 0===i?void 0:i.ext,{cardsForVPOffset:s}=t;return r&&s&&(s.has(a.tagName)||s.has(null===(n=r.contract)||void 0===n?void 0:n.name))&&(null==o?void 0:o.row)&&(null==o?void 0:o.col)&&o.width&&o.height});n.length>0&&function(e,t){e.sort((e,t)=>{const i=e[1].contract.ext,n=t[1].contract.ext;return i.row===n.row?i.col-n.col:i.row-n.row});const i=e[0],n=i[0],a=i[1].contract.ext,r=n.getBoundingClientRect();a.ofx=r.left,a.ofy=r.top;const o=12;let s=a.ofx,l=a.ofy,d=a.row;for(let i=1;i<e.length;i++){const n=e[i][1],r=n.contract.ext,c=e[i-1][1].contract.ext;if(r.row===d&&r.col===c.col?(r.ofx=s,r.ofy=l):r.row===d?(r.ofx=s+c.width+o,r.ofy=l,s=r.ofx):(s=a.ofx,l+=(c.height+o)*(r.row-d),r.ofx=s,r.ofy=l,d=r.row),t){const t=e[i][0],a=t.getBoundingClientRect();console.log(`Calculated: (${r.ofx}, ${r.ofy}), Actual: (${a.left}, ${a.top})`),(Math.abs(r.ofx-a.left)>o||Math.abs(r.ofy-a.top)>o)&&(console.warn(`Large position difference detected for card ${i} (${n.contract.name})\n`),console.log(`HTML: ${t.outerHTML}`))}}}(n,i)}function Bi(e,t,i,n,a){if(!e.type)return(0,N.vV)(p.Ov9,"Card type not found","Card type is not specified in cardMetadata",{cardMetadataType:"undefined",experience:n,debugId:e.debugId,region:t,source:a,subType:null==e?void 0:e.subType,cardId:null==e?void 0:e.cardId}),null;const{useCaseInsensCardTypeMap:r,useSpotlightOverrid:o}=i;let s;return e.type&&(s=r?(0,Z.t)().get(e.type):Z.G[e.type],null!=o&&o.includes(e.type)&&(s=G.C.spotlightCard)),s||((0,N.vV)(p.F8Z,"Card type not found",void 0,{cardMetadataType:e.type,experience:n,debugId:e.debugId,region:t}),null)}const qi=e=>Object.entries(e),Gi={river:"riverTelemetry",triver:"riverTelemetry",hero:"heroTelemetry",rightrail:"rightrailTelemetry",Rail:"RailTelemetry",rail:"RailTelemetry",overlay:"overlayTelemetry",banner:"bannerTelemetry",backup:"backupTelemetry",coachmark:"coachmarkTelemetry",header:"headerTelemetry",notification:"notificationTelemetry",widgets:"widgetsTelemetry"},Vi={[It._4.C1]:2,[It._4.C2]:3,[It._4.C3]:5,[It._4.C4]:6,[It._4.C5]:8,[It._4.C6]:0},Ki={[It._4.C1]:1,[It._4.C2]:2,[It._4.C3]:3,[It._4.C4]:4,[It._4.C5]:5,[It._4.C6]:6},Ji=304;let Zi=!1;const Qi={river:{name:"River",headline:"RiverSection"},triver:{name:"River",headline:"RiverSection"},hero:{name:"HeroContainer",headline:"HeroContainer"},rightrail:{name:"RightRailCards",headline:"RightRailSection"},Rail:{name:"RailCards",headline:"RailSection"},rail:{name:"WindowsTopStripe",headline:"WindowsTopStripe"},overlay:{name:"Overlay",headline:"OverlaySection"},banner:{name:"Banner",headline:"BannerSection"},backup:{name:"BackupCards",headline:"BackupSection"},coachmark:{name:"Coachmark",headline:"CoachmarkSection"},header:{name:"Header",headline:"HeaderSection"},notification:{name:"Notification",headline:"NotificationSection"},widgets:{name:"Widgets",headline:"WidgetsSection"}},Xi=()=>({[It._4.C1]:[{cards:[]}],[It._4.C2]:[{cards:[]}],[It._4.C3]:[{cards:[]}],[It._4.C4]:[{cards:[]}],[It._4.C5]:[{cards:[]}],[It._4.C6]:[{cards:[]}]}),Yi=()=>({[It._4.C1]:new Map,[It._4.C2]:new Map,[It._4.C3]:new Map,[It._4.C4]:new Map,[It._4.C5]:new Map,[It._4.C6]:new Map});let en;const tn=e=>new Promise(t=>setTimeout(t,e)),nn=e=>(0,Lt.S)()?(en||(en=Promise.all([(0,v.dT)(),(0,ai.GP)().then(()=>Promise.race([(0,v.uR)(),tn(1e4)]))]),e&&(en=en.then(()=>tn(e)))),en):new Promise(()=>{});var an;!function(e){e.AdChoice="adChoice",e.DataProvider="dataProvider",e.Edit="edit",e.Hide="hide",e.Large="large",e.Medium="medium",e.More="more",e.MuteNotification="muteNotification",e.NotificationSettings="notificationSettings",e.PinCard="pinCard",e.RemoveWidget="removeWidget",e.Small="small",e.UnpinCard="unpinCard"}(an||(an={}));const rn=["banner","notification"],on=[];class sn{get baseItemHandlerMap(){return this.menuItemHandlerMap}hasDoneInitialRender(){return!this.isFirstRender}constructor(e){var t=this;this.options=e,this.isShared=!1,this.ignorePrefetchHandlerForRefresh=!1,this.foundTopSectionInRiver=!1,this.showFREConfirmation=!1,this.hasCardsInLastResponse=!1,this.shouldReplayUpdateLayout=!1,this.widgetCardsList=[],this.isStopUpdateFeedData=!1,this.requestType=0,this.hasPaginationTimingUnloadEvent=!1,this.adRiverRegionName="river",this.adInfopaneRegionName="infopane",this.shouldSendWidgetMismatchErrorOnDismiss=!1,this.startWpoAdRankIndex=0,this.menuItemHandlerMap={[an.More]:()=>this.navigateToPersonalizeSetting(),[an.AdChoice]:function(e){let{menuItem:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i.clickAction(),t.dismissSDCardMenu()},[an.Hide]:function(e){let{feedLayoutCardType:i,menuItem:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i!==G.C.boostAdCard&&("windowsShellV2"!==Ge.T3.AppType||i!==G.C.cashbackCarouselCard&&i!==G.C.promotedAdCard)||(n.clickAction(),t.dismissSDCardMenu())}},this.justResized=!1,this.emptyFeedCallbackList=new Array,this.feedBadgeProcessor=new Wi,this.adsServingDeferredMetadata={},this.renderedWaterfallElements=[],this.pendingFeedLayoutRenderHandlers={},this.pendingWaterfallRenderHandlers={},this.disConnected=!1,this.infopaneInSecondSection=!1,this.hasFullWidthFreFirstSection=!1,this.ttvrRows=2,this.ttvrHeight=608,this.sectionIdx=1,this.riverSectionIndex=1,this.disableActionMenuOnAds=!1,this.feedElementKeyMap=new Map([[o.jCw,bi.u.gridViewFeed],[o.HPc,bi.u.waterfallViewFeed]]),this.heroCardCount=0,this.heroSectionIndex=1,this.widgetsCardCount=0,this.widgetsSectionIndex=0,this.railCardCount=0,this.railSectionIndex=0,this.riverCardCount=0,this.adsSectionIndex=0,this.enableRotateOnlyOnce=!1,this.channelFilterFlightMismatch=!1,this.paginationFeedResponseQueue=new Array,this.paginationTimings=[],this.isWaterfallFeedResizing=!1,this.rowsToRenderPerLayout={[It._4.C1]:9,[It._4.C2]:5,[It._4.C3]:4,[It._4.C4]:3,[It._4.C5]:2,[It._4.C6]:2},this.customWaterfallSections=[],this.numWaterfallSectionsRendered=0,this.receivedCardCount=0,this.sectionTrackerEnabled=!1,this.feedTopDownHydrationTimeout=5e3,this.replayedUpdateLayout=!1,this.skipBitMasking=!1,this.masterCardMapWpoItems=new Map,this.masterLayoutCardList={river:Xi()},this.masterPlacementTracker={river:Yi()},this.placementTrackerRow=0,this.trackFeedGaps=!1,this.skipInitialRender=!1,this.infopaneWpoIdKey="",this.onlyRenderRows=!1,this.enableHalfUCards=!1,this.isOverlayStampChecked=!1,this.initedPromise=new C.e,this.waterfallRenderedHeightsMap=new Map,this.hasTtfrUnloadHandler=!1,this.initialized=!1,this.infopaneWithColSpan=!1,this.feedResponseLayout3Debug=[],this.sdCardTypeToCardNameMapping=new Map([["weather-card","Weather"],["money-info-card","Finance"],["sports-card","Sports"],["traffic-card","Traffic"],["daily-brief-card","DailyBrief"],["rich-calendar-card","RichCalendar"]]),this.renderNextFeedLayout=e=>{performance.mark("TTFR.start"),this.consumeUnrenderedFeedLayout(),this.feedEventAggregator.publish(Ot.KS.OnFeedRendered,{isFirstRender:e??this.isFirstRender,feedName:this.feedName}),window.dispatchEvent(new CustomEvent("onFeedRendered"))},this.handleFeedResponse=async function(e){var i;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.isStatic=null==e?void 0:e.isStatic,t.responseSource=null==e?void 0:e.responseSource,n||(t.requestType=1),t.config.enableGreyBlock&&(t.hasCardsInLastResponse=t.responseContainsCardsData(e)),t.config.isWaterfallFeed&&t.isStatic&&(0,N.vV)(p.M0z,"Obtain a static fallback from WPO on waterfall feed",void 0,{...p.M0z.pb,customMessage:`layout: ${t.layout}`});const{enableFilterResponse:a,riverSectionCardProviderConfig:r}=t.config;if((0,Lt.S)()&&e&&"following"===(null==r||null===(i=r.initialRequest)||void 0===i?void 0:i.feedName)){var o;const i=null===(o=t.followingExperienceManager)||void 0===o?void 0:o.transformResponse(e,a);if(!a&&i){t.channelFilterFlightMismatch=!0;const{traceIdIndex:i,debugId:n}=e;(0,N.vV)(p.Z1_,"",void 0,{...p.Z1_.pb,customMessage:"Removed channel carousel due to flight mismatch between service and client",isPrerender:null===w.Rb||void 0===w.Rb?void 0:w.Rb.IsPrerender,debugId:n,traceIdIndex:i})}}if(e){var s;const{traceIdIndex:i,debugId:n}=e,a=(e,a)=>{if(rn.includes(e))return;var r;t.infopaneInSecondSection&&"river"===e&&a&&a.length&&a[0]&&(t.hasFullWidthFreFirstSection=(null===(r=a[0].cards)||void 0===r?void 0:r.findIndex(e=>e.type===y.pL.UserInterestTopicAndProvider))>-1);const o="Rail"===e&&t.config.isWaterfallFeed,s=["Col1","Col2"].includes(e)&&t.config.layout3InDiscover;for(const r of a){const l=t.getLayoutTemplate(r.layoutTemplate)??null;if(l)t.cardExtTelemetryHelper.addExtPropertiesToCards(r.cards,l,e,i,n||void 0);else if(o||"backup"===e||"previewcards"===e)for(const e of r.cards)e.debugId=n||void 0,e.traceIdIndex=i;if(!s&&!r.layoutTemplate&&"previewcards"!==e&&!o){const e=Object.getOwnPropertyNames(r),t=a.indexOf(r);let i=0,n="";if(r.cards&&r.cards.length>0){i=r.cards.length;for(const e of r.cards)e.type&&(""!=n&&(n+=","),n+=e.type)}(0,N.vV)(p.mue,"layoutTemplate Undefined.",void 0,{...p.mue.pb,sectionProperties:e,sectionIndex:t,cardCount:i,cardTypes:n})}}const l=(e,r)=>{var o;const s=null===(o=e.find(e=>e.region===r))||void 0===o?void 0:o.sections;var l,d;"river"===r&&e===t.unrenderedRegionsData&&t.feedResponseLayout3Debug.push({traceIdIndex:i,debugId:n,data:{template:null==a||null===(l=a[0])||void 0===l?void 0:l.layoutTemplate,length:null==a||null===(d=a[0])||void 0===d||null===(d=d.cards)||void 0===d?void 0:d.length},type:"pushUnrenderedSections"});s?s.push(...a):e.push({region:r,sections:[...a]})};l(t.unrenderedRegionsData,e),l(t.backupUnrenderedRegionsData,e),t.sdCardHelper.addSDCard(a),t.config.proactiveRenderingWhenIdle&&(!t.config.proactiveFasterNonPrerender||null!==w.Rb&&void 0!==w.Rb&&w.Rb.IsPrerender?nn(t.config.proactiveRenderDelay).then(t.proactivelyRenderRiverWhenIdle):(0,v.dT)().then(t.proactivelyRenderRiverWhenIdle))},r=e=>"river"===e&&t.config.isWaterfallFeed||"hero"===e&&t.config.enableHeroWaterfall||"widgets"===e&&t.config.enableWidgetsLayout3;if(e.sections){var l;let o=e.sections;const s=null===(l=o)||void 0===l?void 0:l.find(e=>"cardData_river"===e.region);if(!t.config.isWaterfallFeed&&s){var d,c;const e=await t.convertWaterfallToTemplateProng2(s);o=null===(d=o)||void 0===d?void 0:d.filter(e=>"cardData_river"!==e.region&&"river"!==e.region),null===(c=o)||void 0===c||c.push({region:"river",subSections:e})}for(const e of o||[])if(r(e.region)){let a=e.waterfallSections;e.requestedColumnCount!==Ki[t.layout]&&(a=[t.convertWaterfallFallback(e.subSections,Ki[t.layout],null==e?void 0:e.requestedColumnCount)]),t.requestedColCountForWaterfallFeed=e.requestedColumnCount,"hero"===e.region&&await t.ensureLayoutTemplateMapLoaded(),t.ingestUnrenderedWaterfallSection(e.region,a,i,n)}else{const i=e.subSections||[];await t.ensureLayoutTemplateMapLoaded(),a(e.region,i)}}else if(e.regions)for(const o of e.regions||[])if(r(o.region)){let e=o.waterfallSections;const a=o.sections;(null==o?void 0:o.requestedColumnCount)!==Ki[t.layout]&&(e=[t.convertWaterfallFallback(a,Ki[t.layout],null==o?void 0:o.requestedColumnCount)]),t.requestedColCountForWaterfallFeed=o.requestedColumnCount,"hero"===o.region&&await t.ensureLayoutTemplateMapLoaded(),t.ingestUnrenderedWaterfallSection(o.region,e,i,n)}else if("widgets"!=o.region){const e=o.sections||[];await t.ensureLayoutTemplateMapLoaded(),a(o.region,e)}t.userContext=(null===(s=e.metadata)||void 0===s?void 0:s.userContext)||{}}return t.feedEventAggregator.publish(Ot.KS.OnFeedResponseRetrieved,{response:e}),!!e},this.updateFeedData=async function(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(performance.mark("TTFR.start"),t.reportRenderingMarkers(),t.isFetching?t.isSubsequentRequest=!0:t.isSubsequentRequest=!1,t.isFetching||t.isStopUpdateFeedData)return!1;if(t.config.disableInfiniteScroll&&1===t.requestType)return!1;2!==t.requestType||i||"winWidgets"===Ge.T3.AppType||(t.requestType=1);const n=Math.round(performance.now());if(e&&1===t.requestType){const a=await t.getPrecachedPaginationResponse(e);if(a)return t.trackPaginationTimings(n,!0),t.handleFeedResponse(a,i)}t.isFetching=!0;const a=(0,xt.B1)("waitFeedFetch",!0);0===t.requestType&&a.start();const r=await t.fetchFeed();if(0===t.requestType&&a.markEnd(),t.config.enableWidgetsRegion&&await t.ensureLayoutTemplateMapLoaded(),b.YT.addOrUpdateTmplProperty("hadPagination","1"),t.config.isWaterfallFeed){var o,s;const e=t.getBasicDivideWaterfallOptions("river");e.columnsOffset=null===(o=t.river[t.riverSectionIndex-1])||void 0===o?void 0:o.waterfallFeedColumnsOffset,t.preprocessLayout3Response(r,e);const i=null==r||null===(s=r.regions)||void 0===s?void 0:s.find(e=>"hero"===e.region);if(t.config.enableHeroWaterfall&&i)if(t.isWaterfallFeedResizing&&i.requestedColumnCount!==Ki[t.layout])(0,N.vV)(p.yK8,"Invalid requested column",void 0,{...p.yK8.pb,customMessage:`requestedColumnCount:${i.requestedColumnCount};column:${Ki[t.layout]}`});else if(i.sections){const{traceIdIndex:e,debugId:n}=r,a=t.getBasicDivideWaterfallOptions("hero");delete a.firstRequest,i.waterfallSections=t.divideWaterfallResponse(i.sections,a,e,n),i.requestedColumnCount=a.requestedColumnCount}}if(t.config.enableWidgetsLayout3){var l;const e=null==r||null===(l=r.regions)||void 0===l?void 0:l.find(e=>"widgets"===e.region);if(t.isWaterfallFeedResizing&&e&&e.requestedColumnCount!==Ki[t.layout])(0,N.vV)(p.DYU,"Invalid requested column",void 0,{...p.DYU.pb,customMessage:`requestedColumnCount:${null==e?void 0:e.requestedColumnCount};column:${Ki[t.layout]}`});else if(null!=e&&e.sections){const{traceIdIndex:i,debugId:n}=r,a=t.getBasicDivideWaterfallOptions("widgets");delete a.firstRequest,e.waterfallSections=t.divideWaterfallResponse(e.sections,a,i,n),e.requestedColumnCount=a.requestedColumnCount}}else t.config.enableWidgetsRegion&&t.regionKeys.includes("widgets")&&t.handleWidgetsResponse(r);return t.trackPaginationTimings(n),t.handleFeedResponse(r,i)},this.callRefreshRegionsData=async function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(t.isStopUpdateFeedData=!1),null!=e&&e.skipBitMasking&&(t.skipBitMasking=e.skipBitMasking,t.shouldSendWidgetMismatchErrorOnDismiss=!0),t.feedEventAggregator.publish(Ot.KS.OnStartFeedRefresh,e??{}),a.Pi.clearPublisherFollowStatus(),t.resetParameters(e),await t.renderRegionsData(!1,!0),t.feedEventAggregator.publish(Ot.KS.OnFeedRefreshed,e??{}),null!=e&&e.preventOnFeedRefreshed||window.dispatchEvent(new CustomEvent("onFeedRefreshed",{detail:{isFromChannelFilter:null==e?void 0:e.isFromChannelFilter}})),t.skipBitMasking=!1},this.updateCacheAndRefreshRegionsData=async(e,t)=>{this.handleHideWidgetsAction(e,t),this.skipBitMasking=e??!1,await(0,Oi.r8)(),await this.callRefreshRegionsData(),this.skipBitMasking=!1},this.loadLazyDataMappings=e=>{this.river&&this.river[0]&&this.river[0].feedData&&!this.config.isWaterfallFeed&&this.loadLazyDataMappingsImpl(e,this.river),this.hero&&this.hero[0]&&this.hero[0].feedData&&!this.config.enableHeroWaterfall&&this.loadLazyDataMappingsImpl(e,this.hero),this.widgets&&this.widgets[0]&&this.widgets[0].feedData&&this.loadLazyDataMappingsImpl(e,this.widgets)},this.loadLazyDataMappingsImpl=(0,Ht.a)((e,t)=>{t.forEach(t=>{const i=t.feedData;this.loadLazyDataMappingForSection(i[e])})}),this.loadLazyDataMappingForSection=(0,pi.A)(e=>{e.forEach((t,i)=>{(0,c.Yd)(t)||(e[i]=t.mapRawData())})}),this.shouldServeAdsWhenSectionInView=e=>!!((0,Lt.S)()&&e&&this.config.firstAdsWhenInView)||this.config.onlyServeAdsWhenSectionInView&&!e&&(0,Lt.S)(),this.updateCardAction=(e,t,i,n,a)=>{const r={succeed:!1};if(this.feedEventAggregator.publish(Ot.KS.OnStartCardActionUpdate,{cardId:e,nextCardStatus:t,postCardActionPromise:i,targetId:n,resFromFeedEvent:r}),r.succeed)return;["river","rightrail","hero"].forEach(r=>this.updateCardActionInRegion(r,e,t,i,n,a))},this.updateCardActionInRegion=(e,t,i,n,a,o)=>{var s;let l=0;const d=(null===(s=this.config)||void 0===s?void 0:s.enableInstantHide)&&!o&&i&r.J.hidden&&!(i&r.J.mute)&&!(i&r.J.hideTopic),c=a&&(0,li.ju)(a,i),u=!!c,h=new Map,v=e=>{u&&c(e,a)&&(l++,e.id&&h.set(e.id,e))},p=(0,V.Vy)(i),f=this[e].map((i,a)=>{if(!i.cardMetadataList)return i;let r=!1;const o=(0,li.k4)(i.cardMetadataList,(i,o,s)=>{var l;if(i.type===y.pL.TopStories&&i.subCards)return i.subCards.forEach(e=>{e.id===t&&(e.actions=p,r=!0),v(e)}),i;null!=i&&null!==(l=i.type)&&void 0!==l&&l.includes(y.pL.ShoppingRiver)&&t===i.type&&(i.id=t),d&&i.id===t&&this.updateCardWithCardId(e,a,t,n,()=>{const i=this.getCardWithCardIdInSections(e,a,o,t);var n;return void 0!==s?(0,li.FD)(null==i||null===(n=i.subItems)||void 0===n?void 0:n[s]):(0,li.FD)(i)},i),v(i);const c=(0,li.iU)(i,t,p);return r=r||c,i});if(r){if(this.config.isWaterfallFeed){const n=this.mapWaterfallFeedData(o,{region:e,parentTelemetryObject:this[Gi[e]]}),a=n.defaultLayout.find(e=>(0,Hi.rp)(e.childTemplateType));return this.replaceCardInWaterfallFeed((e,i)=>{if(e&&e.id===t){const e=(i?a.slideContentData:n.defaultLayout).find(e=>e.id===t);return e}if(i)return e}),{...i,updatedFeedData:n,cardMetadataList:o}}return{...i,feedData:this.mapFeedData(o,{layoutTemplateName:i.templateId,region:e,parentTelemetryObject:this[Gi[e]]}),cardMetadataList:o}}return i});if(u){const{sections:i}=this.unrenderedRegionsData.find(t=>{let{region:i}=t;return i===e})||{};i&&i.forEach(e=>{let{cards:t}=e;t.forEach(e=>v(e))}),l&&this.updateReplacedCards(e,l,t,a,n,c,h)}this[e]=f},this.getCardWithCardIdInSections=(e,t,i,n)=>{var a;let r=null===(a=this[e][t])||void 0===a||null===(a=a.cardMetadataList)||void 0===a?void 0:a[i];var o;this.config.isWaterfallFeed&&(r&&(null===(o=r)||void 0===o?void 0:o.id)===n||this[e].map(e=>{e.cardMetadataList&&e.cardMetadataList.forEach(e=>{(null==e?void 0:e.id)!==n||(r=e)})}));return r},this.updateCardWithCardId=(e,t,i,n,a,r)=>{n.then(async()=>{const[n]=await Promise.all([this.getContentForCardReplacements(1),new Promise(e=>{this.instantReplaceIdMap[i]=setTimeout(e,li.FZ)})]);if((0,jt.I)(n)||!a())return;if(this.config.isWaterfallFeed){const t=new Map;return t.set(i,r),void this.replaceCardInWaterfall(e,n,t)}const o=this[e][t].cardMetadataList||[],s=(0,li.k4)(o,e=>{if(e.id===i){const t=n[0];return"nativead"===e.type&&"article"===t.type||((0,li.fy)(e)||(0,li.T3)(t),(0,li.hR)(e)||(0,li.bB)(t)),t}return e});this.updateFeedSectionBySectionIndex(e,s,t),this.config.scrollToTopWhenResize&&this.updateBackUpFeedsData(n[0],i)})},this.updateBackUpFeedsData=(e,t)=>{t&&e&&this.backupUnrenderedRegionsData.forEach(i=>{var n;null===(n=i.sections)||void 0===n||n.forEach(i=>{i.cards.forEach((n,a)=>{if(n.type===y.pL.Infopane&&n.subItems){const i=n.subItems;i.forEach((a,r)=>{t===a.id&&n.subItems&&(i[r]=e)})}else t===n.id&&(i.cards[a]=e)})})})},this.replaceCardInWaterfall=function(e,i,n){let a,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(0===n.size||(0,jt.I)(i))return;const o=new Map;for(const[e,t]of n.entries())(e.startsWith("nativead-infopane")||e.startsWith("nativead-resinfopane"))&&null!=t&&t.regionIndex&&o.set(t.regionIndex,e);const s=[];let l=!1,d=0;for(const u of n.keys()){const h=n.get(u);if(a=`${e}_wfcard${h.wpoId}`,d<i.length&&i[d]){if(r&&!h.wpoId){s.push(h),d++;continue}if(t.masterCardMapWpoItems.has(a)){var c;const e={...t.masterCardMapWpoItems.get(a),...i[d],augments:(null===(c=i[d])||void 0===c?void 0:c.augments)||[],column:h.column,colSpan:h.colSpan,order:h.order};t.masterCardMapWpoItems.set(a,e),n.set(u,e),s.push(e),d++}else{const e=t.masterCardMapWpoItems.get(t.infopaneWpoIdKey);if("infopane"===(null==e?void 0:e.type)){const a=e.subItems??e.subCards??[];for(let e=0;e<a.length;e++){const t=a[e];let r,s;if("nativead"===t.type||"cmsad"===t.type?(s=o.get(e+1),s&&(r=n.get(s))):r=n.get(t.id),r){const o={...r,...i[d]};"nativead"===t.type||"cmsad"===t.type?s&&n.set(s,i[d]):n.set(t.id,o),a[e]=o,l=!0,d++}}l&&(s.push(e),t.masterCardMapWpoItems.set(t.infopaneWpoIdKey,e))}}}}const u=t.mapWaterfallFeedData(s,{region:e,parentTelemetryObject:t[Gi[e]]}),h=u.defaultLayout.find(e=>(0,Hi.rp)(e.childTemplateType)),v=u.defaultLayout.filter(e=>!(0,Hi.rp)(e.childTemplateType)),p=new Map;for(const e of n.keys()){let t;if(h){var f;const i=null===(f=n.get(e))||void 0===f?void 0:f.id;t=h.slideContentData.find(e=>e.id===i)}t||(t=v.shift()),p.set(e,t)}t.replaceCardInWaterfallFeed((e,t)=>e&&e.id&&p.has(e.id)?p.get(e.id):t?e:void 0),t[e].map(e=>{const t=e.cardMetadataList;null==t||t.forEach((e,i)=>{if(e&&"infopane"===e.type){if(h){var a;const e=null===(a=t[i])||void 0===a?void 0:a.subItems;null==e||e.forEach((t,i)=>{t&&t.id&&n.has(t.id)&&(e[i]=n.get(t.id))})}}else e&&e.id&&n.has(e.id)&&(t[i]=n.get(e.id))})})},this.updateReplacedCards=(e,t,i,n,a,r,o)=>{a.then(async()=>{const[a]=await Promise.all([this.getContentForCardReplacements(t),new Promise(e=>{this.instantReplaceIdMap[i]=setTimeout(e,li.FZ)})]);if((0,jt.I)(a))return;if(this.config.isWaterfallFeed)return void this.replaceCardInWaterfall(e,a,o);let s=!0,l=0;const d=this[e].map(e=>{if(!e.cardMetadataList)return null;let t=!1;const o=(0,li.k4)(e.cardMetadataList,e=>{if(e.type===y.pL.TopStories){var o;return{...e,subCards:null===(o=e.subCards)||void 0===o?void 0:o.map(e=>{if(r(e,n)&&a.length>l){t=!0;const i=a[l++];return(0,li.fy)(e)||(0,li.T3)(i),(0,li.hR)(e)||(0,li.bB)(i),{...i.cardContent,...i.metadata,type:i.type}}return e})}}if(e.id!==i||(0,li.FD)(e)||(s=!1),s&&r(e,n)&&a.length>l){t=!0;const i=a[l++];return(0,li.fy)(e)||(0,li.T3)(i),(0,li.hR)(e)||(0,li.bB)(i),i}return e});return t?o:null});if(this.config.scrollToTopWhenResize){const e=(0,fi.A)(a);o.forEach(t=>{const i=e.shift();i&&this.updateBackUpFeedsData(i,t.id||"")})}if(s){d.forEach((t,i)=>{t&&t.every(e=>e)&&this.updateFeedSectionBySectionIndex(e,t,i)});const{sections:t}=this.unrenderedRegionsData.find(t=>{let{region:i}=t;return i===e})||{};t&&t.forEach(e=>{e.cards=(0,li.k4)(e.cards,e=>{if(r(e,n)&&a.length>l){const t=a[l++];return(0,li.fy)(e)||(0,li.T3)(t),(0,li.hR)(e)||(0,li.bB)(t),t}return e})})}})},this.updateFeedSectionBySectionIndex=(e,t,i)=>{const n=Ci(t,"id"),a=t.some(e=>e.id&&n[e.id]>1);this[e]=this[e].map((n,r)=>i!==r||a?n:{...n,feedData:this.mapFeedData(t,{layoutTemplateName:n.templateId,region:e,parentTelemetryObject:this[Gi[e]],prevCardCount:n.prevCardCount}),cardMetadataList:t})},this.replaceCardInWaterfallFeed=e=>this.updateCardInWaterfall((t,i)=>{if(i)return t.map(t=>e(t,i));let n;return t.forEach((a,r)=>{const o=e(a,i);o&&(t.splice(r,1,o),n=o)}),n}),this.isInfopaneInWidecard=e=>!(!0===this.config.disableWideCard&&e),this.updateCardInWaterfall=e=>{const t=e=>`${e.id}-${e.childTemplateType}-${e.cardActionStatus}`,i=(e,i)=>{if(e.length!==i.length)return!0;for(let n=0;n<e.length;n++)if(t(e[n])!==t(i[n]))return!0;return!1};this.waterfall.forEach((t,n)=>{var a;if(t.columns.forEach((a,r)=>{this.isInfopaneInWidecard(t.rowRendering)||a.forEach((t,a)=>{if((0,Hi.rp)(t.childTemplateType)){const o=t.slideContentData,s=e(o,!0)||[];if(i(o,s)){const e={...t,slideContentData:s};this.waterfall[n].columns[r].splice(a,1,e)}}});let o=e(a,!1);if(this.enableHalfUCards&&o&&a.find(e=>"halfu"===e.subType)){var s,l;const e=null===(s=this.waterfall[n].customRowSection)||void 0===s||null===(s=s.find(e=>"halfu-group"===e.id))||void 0===s?void 0:s.subCards;let t=null===(l=this.waterfall[n].customRowSection)||void 0===l?void 0:l.findIndex(e=>{var t;return e.wpoId===(null===(t=o)||void 0===t?void 0:t.wpoId)});if("halfu"===o.subType&&e){var d;const i=o.wpoId===e[0].wpoId;o={...o,childTemplateType:"halfu-group",id:"halfu-group",subCards:i?[o,e[1]]:[e[0],o]},t=null===(d=this.waterfall[n].customRowSection)||void 0===d?void 0:d.findIndex(e=>"halfu-group"===e.id)}var c;if(void 0!==t&&t>=0)null===(c=this.waterfall[n].customRowSection)||void 0===c||c.splice(t,1,o)}}),"infopane"===(null===(a=t)||void 0===a||null===(a=a.wideCard)||void 0===a?void 0:a.type)){var r;const a={...null===(r=t)||void 0===r?void 0:r.wideCard},o=e(a.slideContentData,!0)||[];i(a.slideContentData,o)&&(a.slideContentData=o,t={...t,wideCard:a},this.waterfall.splice(n,1,t))}})},this.heightReadyCallback=(e,t)=>{this.waterfallRenderedHeightsMap.set(e,t)},this.reactionCallback=async()=>{this.config.invalidatePrerenderRiverOnActions&&(0,ri.i6)(this.experienceId)},this.getReplacementCardsCallback=async function(e,i,n){let a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:15,l=await t.getContentForCardReplacements(s,!r&&!o,n,void 0,void 0,r,o);if(t.retryTimer&&(window.clearTimeout(t.retryTimer),t.retryTimer=void 0),(0,jt.I)(l)||t.lastFreTimestamp&&t.currentFreTimestamp&&t.currentFreTimestamp<=t.lastFreTimestamp){if(a)return void(t.retryTimer=window.setTimeout(()=>t.getReplacementCardsCallback(e,i,n,!1,r,o,s),2e3));t.lastFreTimestamp=Date.now(),l=[]}if(t.lastFreTimestamp=t.currentFreTimestamp,l=l.filter(e=>!(i&&i.some(t=>t===e.id))),n&&e&&e.cardContent&&e.metadata&&((0,jt.I)(e.cardContent.badges)?e.cardContent.badges=[{type:"explicitLike"}]:e.cardContent.badges.unshift({type:"explicitLike"}),l.unshift(e)),(0,jt.I)(l))return;l=l.filter((e,t,i)=>t===i.findIndex(t=>e.id===t.id));const d=Array.prototype.concat(...t.river.map(e=>e.cardMetadataList));l=l.filter(e=>!d.find(t=>{var i;return"infopane"===t.type?null===(i=t.subItems)||void 0===i?void 0:i.find(t=>t.id===e.id):t.id===e.id}));let c=0,u=0,h=0;if(void 0!==r||void 0!==o){const e=t.feedElementKeyMap.get(t.experienceId);await t.ensureLayoutTemplateMapLoaded();const i=t.getLayoutTemplateMap();if(void 0!==i){const{lastSectionIndex:n,lastRowIndex:a}=(0,di._z)(e,i,t.layout,t.river,12,0);u=n,h=a+1}}if(t.river.forEach((e,i)=>{if(!e.cardMetadataList||i<u)return null;const n=void 0!==e.templateId?t.getLayoutTemplate(e.templateId)??null:null,{cardSlots:a}=i===u&&h>0&&n?n:{cardSlots:[]};let r=!1;const o=(0,li.k4)(e.cardMetadataList,(e,n,o)=>{if(i===u&&h>0){const i=a[n],r=i.telemetryRowCol&&i.telemetryRowCol[t.layout];if((r&&r.length?r[0]-1:0)<h)return e}if(void 0===o&&e.cardContent&&e.cardContent.provider&&l&&l.length>c){r=!0;const t=l[c++];return(0,li.fy)(e)||(0,li.T3)(t),(0,li.hR)(e)||(0,li.bB)(t),t}return e});r&&t.updateFeedSectionBySectionIndex("river",o,i)}),(void 0!==r||void 0!==o)&&l&&l.length>c){const e=l.slice(c);for(let i=0;i+5<=e.length;i+=5){const n=e.slice(i,i+5),a={feedData:t.mapFeedData(n,{layoutTemplateName:"msft-five-card-five-col",region:"river",parentTelemetryObject:t[Gi.river],prevCardCount:t.riverCardCount}),templateId:"msft-five-card-five-col",cardMetadataList:n,hasPlaceHolderAds:!1,prevCardCount:t.riverCardCount};t.riverCardCount+=n.length,t.river=[...t.river,a]}}},this.toggleSDCardMenu=e=>{this.sdCardMenuProps=e,this.sdCardMenuOpen=!this.sdCardMenuOpen,"function"==typeof(null==e?void 0:e.onSdCardMenuOpenChanged)&&e.onSdCardMenuOpenChanged(this.sdCardMenuOpen)},this.dismissSDCardMenu=()=>{this.sdCardMenuOpen=!1},this.turnOffWidgetsRegion=()=>{window.dispatchEvent(new CustomEvent("turnOffWidgetsRegion"))},this.manageWidgetsRegion=()=>{window.dispatchEvent(new CustomEvent("manageWidgetsRegion"))},this.navigateToPersonalizeSetting=()=>{var e;if(!this.config.openPersonalizeWithoutRouter)return Ai.QB.navigate("experience-settings");if(this.config.openPersonalizeDirectly){const e=new URL(Ti.By.replace(Ti.li,Ge.T3.CurrentMarket),Ti.dU),t=(0,si.En)();return t&&e.searchParams.set("ocid",t),this.config.addCvidToUrl&&e.searchParams.set("cvid",b.YT.getRequestId()),void window.open(e.href,"_blank")}const t=this.config.oneRiverInterestsPivotInfo,i=this.config.pivotsNavInstanceId;if(t)if(null!==(e=t.context)&&void 0!==e&&e.navigateToPersonalize){var n;const e="myInterests_experienceSettings",i=null===(n=t.children)||void 0===n?void 0:n.find(t=>t.pivotId===e);i&&Di(i,this.config.interestsWCConfigRefType)}else if(i){const e=(0,oi.w)(i),n=(0,Ut.q9)(this.config.interestsWCConfigRefType),a=n&&"oneriver.editinterests"==t.pivotId?n:t.configIndexRef;e.switchPivot({pivotId:t.pivotId,configIndexHref:t.configIndexHref,configIndexRef:a,context:{isRequestFromSdCardAddRemoveClick:!0},telemetryPageName:"Xfeed",display:t.displayName})}else Di(t,this.config.interestsWCConfigRefType)},this.openChannelStoreCallBack=e=>{const{useChannelStore:t}=this.config;b.YT.addOrUpdateTmplProperty("ChannelStoreLaunched","1"),t?window.dispatchEvent(new CustomEvent("launchChannelStore",{detail:{selectedNavId:"muted-publishers"==e?"blocked":"discover"}})):this.navigateToPersonalizeCallback(e)},this.navigateToPersonalizeCallback=e=>{var t;const{interestsWCConfigRefType:i,openPersonalizeWithoutRouter:n,oneRiverInterestsPivotInfo:a,openPersonalizeDirectly:r,useChannelStore:o}=this.config;if(o)return void window.dispatchEvent(new CustomEvent("launchChannelStore"));if(r){const t=new URL(Ti.IC.replace(Ti.li,Ge.T3.CurrentMarket)+(e?`#${e}`:""),Ti.dU),i=(0,si.En)();return i&&t.searchParams.set("ocid",i),void window.open(t.href,"_blank")}if(!n&&Ai.QB.getRouteById("personalize"))return void Ai.QB.navigate("personalize",{scrollToSection:e});if("windows"===Ge.T3.AppType){return void(0,oi.w)().switchPivot({pivotId:"myInterests",context:{hash:e}})}if(!a)return;const s=(0,oi.w)(this.config.pivotsNavInstanceId);let l={};"muted-publishers"===e?l={isRequestFromMutePublisherToast:!0,noScroll:!0}:"followed-interests"===e?l={scrollToFollowedInterests:!0,noScroll:!0}:null!==(t=a.context)&&void 0!==t&&t.navigateToPersonalize&&(l=a.context);const d=(0,Ut.q9)(i);s.switchPivot({pivotId:a.pivotId,configIndexHref:a.configIndexHref,configIndexRef:d??a.configIndexRef,context:{...l,isRequestFromSdCardAddRemoveClick:!1},telemetryPageName:Si.L3.Interests,display:a.displayName})},this.mapFeedData=function(e,i){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{region:r,layoutTemplateName:o,parentTelemetryObject:s,colOverride:l,visualReadinessCallback:d,refreshFeedCallback:c,isPinnedRegion:u,isInitiatedByPinAction:h,isRefresh:v,isSpotlightZone:f,prevCardCount:g,isCalledForSpotlightAction:m,overrideColumnLayout:y}=i,C={defaultLayout:[],C6:[],C5:[],C4:[],C3:[],C2:[],C1:[]},b=void 0!==o?t.getLayoutTemplate(o):null;if(!b)return"overlay"===r||t.config.isWaterfallFeed||(0,N.vV)(p.Deh,"Invalid layout template used.",void 0,{...p.Deh.pb,customMessage:`layoutTemplateName: ${o}`}),C;if(t.validateTemplateFeedData(e,b,o),e.forEach((p,w)=>{var T,S,k;let M=Bi(p,r,t.config,t.experienceId,"l2");if(null===M)return;const $=Object.assign({},t.config,null===(T=t.config)||void 0===T?void 0:T[r]),{rowHeightPx:F,colWidthPx:I,gutterPx:x,cardSlots:R}=b,P=R[w];M=t.adjustFeedLayoutCardTypeGrid(p,M,$,o),p.feedLayoutCardType=M,t.feedEventAggregator.publish(Ot.KS.OnStartCardArgsCreate,{feedLayoutCardType:M,cardMetadata:p,cardSlot:P,config:$});const A=i.rowCount??e[0].rowCount;let D;t.config.enableLazyDataMapping&&n&&(D=y?y(p):t.layout);const O={...t.getBasicCardArgsForMapping(p,r,M,s,g,P,d,c),layoutTemplateName:o,handleAdFeedbackSubmit:$.useMobile?void 0:(0,a.J6)().ReportAd,rowCount:A,flattenedRightRail:"rightrail"===r&&(null===(S=$.rightrail)||void 0===S?void 0:S.renderFlattenedDesign),rowHeightPx:F,colWidthPx:I,gutterPx:x,colOverride:l,notificationMetadata:m?p.notificationMetadata:void 0,columnLayout:D,...t.appendixFeedStyleArgs};null===(k=Y[M])||void 0===k||k.call(Y,O,p,$,{cardMetadataList:e,index:w}),t.feedEventAggregator.publish(Ot.KS.OnCardArgsCreated,{feedLayoutCardType:M,cardMetadata:p,args:O,isPinnedRegion:u,isInitiatedByPinAction:h,isRefresh:v,isSpotlightZone:f});t.cardMappingProcessing(p,O,M,C,$,(e,t,i)=>{const n=qi(e);n&&n.forEach(e=>{var t;let[n,a]=e;null===(t=i[n])||void 0===t||t.push(...a??[])})},o,{slotIndex:w,cardSlots:R})}),t.config.enableLazyDataMapping){const e=t.getSSRColumnLayout(t.config.enableOneColumn);e&&t.layout!==e&&t.loadLazyDataMappingForSection(C[e])}return C},this.sdCardActionClickHandler=(e,t)=>{e.menuItems.forEach(i=>{const n=i.id,a=this.menuItemHandlerMap[n];a&&(i.onClick=n=>a(n,{actionsMenuProps:e,feedLayoutCardType:t,menuItem:i}))}),e.onDismiss=this.dismissSDCardMenu,this.toggleSDCardMenu(e)},this.getTimeoutForWinhpGm=()=>{if(window&&window.navigator){const e=window.navigator,t=e&&e.connection&&e.connection.downlink;return t&&t<3?45e3:15e3}return 15e3},this.cardActionClickHandler=(e,t,i,n,o,s,l,d,c,u)=>{(0,li.x0)(i,t)&&this.instantReplaceIdMap[e]&&(clearTimeout(this.instantReplaceIdMap[e]),delete this.instantReplaceIdMap[e]),this.hideStoryEntryPointMap&&(this.hideStoryEntryPointMap[e]=u),t&r.J.dismiss&&(this.cardActionDismissCallback=()=>{c&&c(),this.cardActionDismissCallback=void 0});const h=u?{Reason:u}:void 0;let v;v=i===r.X.Mute&&(null===w.Rb||void 0===w.Rb?void 0:w.Rb.CurrentFlightSet.has("prg-rm-dupmute"))||i===r.X.Hide&&("like-button"===u||"dislike-button"===u)?Promise.resolve():(0,a.J6)().PostCardActionEvent(t,i,e,void 0,n&&o?o:void 0,s,l,d&&d.target||void 0,void 0,void 0,void 0,h,()=>{const i=a.Pi.getUndoCallbackParams(t,u||"hide-button");this.cardActionClickHandler(e,i.status,i.action,i.sendRequest,void 0,s)}),this.updateCardAction(e,t,v,s,"like-button"===u),i==r.X.Mute?this.config.invalidatePrerenderOnActions?(0,ri.TI)(3):this.config.invalidatePrerenderRiverOnActions&&(0,ri.i6)(this.experienceId):i==r.X.Hide&&this.config.invalidPrdRiverOnHide&&((0,ri.i6)(this.experienceId),b.YT.addOrUpdateTmplProperty("invalidPrdRiverOnHide","1"))},this.shareActionHandler=(e,t,i)=>{this.options&&this.options.shareActionHandler&&this.options.shareActionHandler(e,t,i)},this.setCardActionRef=e=>{this.cardActionRef=e},this.initCardAction=e=>{const t=this.cardActionRef||(0,wi.pr)(this.elementKey).cardActionRef;t&&t.updateCardActionProps&&(this.cardActionRef&&(t.useFastAnchoredRegion=!0),t.updateCardActionProps({...e,context:{pivotId:this.config.pivotsNavInstanceId}}))},this.getHasLoadedCallback=e=>()=>{this.replaceCardInWaterfallFeed((t,i)=>{if(t&&void 0===t.loading&&(t.childTemplateType===e||t.cardMetadata&&t.cardMetadata.feedLayoutCardType===e)){return{...t,loading:!1,hasLoadedCallback:void 0}}if(i)return t})},this.getLogWidgetsRegionClickFunction=e=>()=>{window.dispatchEvent(new CustomEvent("logWidgetsRegionClick",{detail:{cardType:e}}))},this.getVisualReadinessCallback=(e,t,i)=>{const n=this.config.enableGlobalMonitor?null:this.ttvrHelper.genTtvrCb(t),a=this.vpReadyHelper&&this.vpReadyHelper.genCheck(e,t);let r="",o=!1,s="";var l,d;this.config.enableGlobalMonitor&&(r=(null===(l=(0,ci.cC)(t))||void 0===l?void 0:l.key(t))||"",o=!("edgeChromium"===Ge.T3.AppType&&!window.isSSREnabled||!this.config.enableAdsNewTtvr||t.type!==y.pL.NativeAd&&t.type!==y.pL.CmsAd),s=(null===(d=(0,ui.Ax)(t))||void 0===d?void 0:d.key(t,i))||"");if(n||a||r||s||o)return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1?arguments[1]:void 0;2&e&&n&&n(),1&e&&a&&a(t),r&&(0,ci.rd)(r),s&&(0,ui.hy)(s),o&&(0,hi.qv)()}},this.setFallbackFeed=function(e){var i,n,a,r,o,s,l,d;let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.isFirstRender)return;if(t.emptyFeedCallbackList.forEach(e=>e()),t.disableDefaultFallback)return;const u=t.config,h={title:u.localizedStrings.emptyFeedMessage,subTitle:void 0,isEmptyRiverError:!0,isEnhancedVerticalsFallbackFeed:u.enableFallbackVerticalsFeed,emptyFallbackFeedCardsMetadata:t.buildFallbackVerticalCardsMetadata(),refreshButton:{title:u.localizedStrings.emptyRiverRefreshButtonText,onClick:()=>t.callRefreshRegionsData(),telemetryObject:new ki.$({name:"RefreshButton",type:ii.MJ.ActionButton,behavior:ii.MS.Rearrange})}};!(0,Lt.S)()||navigator.onLine||(h.title=u.localizedStrings.offlineFeedMessageHeader,h.subTitle=u.localizedStrings.offlineFeedMessageSubheader);(0,Bt.X3)()===Bt.pT.Disconnected&&t.logAppErrorToEdgeAndCsTelemetry(p.agw,"Superfeed fallback rendered with no internet connectivity.",{feedType:t.experienceId,isPrerender:null===w.Rb||void 0===w.Rb?void 0:w.Rb.IsPrerender}),t.fallbackFeed=Object.assign({},h,c),b.YT.addOrUpdateTmplProperty("feedFallbackEncountered","1");const v=null===(i=t.lastResponse)||void 0===i||null===(i=i.serviceContext)||void 0===i?void 0:i.fdHead,f=null===(n=t.lastResponse)||void 0===n||null===(n=n.regions)||void 0===n?void 0:n.map(e=>null==e?void 0:e.region),g=null===(a=t.lastResponse)||void 0===a?void 0:a.status,m=null===(r=t.lastResponse)||void 0===r?void 0:r.appError;t.logAppErrorToEdgeAndCsTelemetry(p.xHX,"Superfeed fallback rendered",{customMessage:`Superfeed fallback has been rendered, layoutMode: ${t.feedDisplaySetting}, widgetsData: ${t.widgets},                     response: ${e}, layout: ${t.layout}, isSubsequentRequest: ${t.isSubsequentRequest},                     lastResponse: { status: ${g}, regions: ${f},                     appError: ${m}, flightDataHeader: ${v}},                     responseStatus: ${null===(o=t.dataProvider)||void 0===o?void 0:o.responseStatus},                     rawWPOresponse: ${null===(s=t.dataProvider)||void 0===s?void 0:s.rawFetchCallResponse},                     jsonResponseFromWPO: ${null===(l=t.dataProvider)||void 0===l?void 0:l.jsonResponseFromWPO}`,feedType:t.experienceId,isOnline:navigator.onLine,isPrerender:null===w.Rb||void 0===w.Rb?void 0:w.Rb.IsPrerender,isPrerenderBeforeReveal:(0,ai.EZ)()});const{enableFilterResponse:y,riverSectionCardProviderConfig:C}=t.config;var T;(0,Lt.S)()&&y&&"following"===(null==C||null===(d=C.initialRequest)||void 0===d?void 0:d.feedName)&&(null===(T=t.followingExperienceManager)||void 0===T||T.showFallbackFeed())},this.setPublisherFallbackFeed=e=>{const t=this.config,i={title:t.localizedStrings.blockedPublisherMessage,subTitle:void 0,isEnhancedVerticalsFallbackFeed:t.enableFallbackVerticalsFeed,emptyFallbackFeedCardsMetadata:this.buildFallbackVerticalCardsMetadata(),managePublisherButton:{title:t.localizedStrings.blockedPublisherButtonText,onClick:()=>this.openChannelStoreCallBack("muted-publishers"),telemetryObject:new ki.$({name:"managePublisher",type:ii.MJ.ActionButton,behavior:ii.MS.Rearrange})}};this.publisherFallbackFeed=i,this.forceMarkSectionsRenderComplete(),b.YT.addOrUpdateTmplProperty("feedNoPublisherFallbackEncountered","1");const n=!(0,Lt.S)()||navigator.onLine;this.logAppErrorToEdgeAndCsTelemetry(p.iv3,"Superfeed no publisher fallback rendered",{customMessage:"Superfeed insufficient fallback has been rendered",feedType:this.experienceId,isServerSide:!(0,Lt.S)(),isOnline:n,isPrerender:null===w.Rb||void 0===w.Rb?void 0:w.Rb.IsPrerender})},this.handleOnlineTransition=()=>{this.isFirstRender&&this.callRefreshRegionsData()},this.proactivelyRenderRiverWhenIdle=()=>{if(!(0,Lt.S)())return;(0,qt.E)(()=>{this.justResized?this.justResized=!1:(this.hasRemainingRiverSection()&&(this.renderNextFeedLayout(),this.proactivelyRenderRiverWhenIdle()),this.trackFeedGaps=this.config.enableFeedBlankMonitor||!1,this.trackFeedGaps&&(0,ai.GP)().then(()=>{this.waterfall.forEach(e=>{e.enableMonitor=!0})}))})},this.onFeedLayoutElementsChanged=e=>{this.renderedFeedLayoutElements=e,Object.keys(this.pendingFeedLayoutRenderHandlers).forEach(t=>{const i=Number(t),n=e[i];n&&(this.pendingFeedLayoutRenderHandlers[i](n),delete this.pendingFeedLayoutRenderHandlers[i])})},this.onHeroFeedLayoutElementsChanged=e=>{},this.onWaterfallElementsChanged=e=>{for(let t=e.length-1;t>=0;t--){const i=e[t],n=Number(i.getAttribute("section-index"));if(this.renderedWaterfallElements[n]){if(this.renderedWaterfallElements[n].length===Ki[this.layout])continue;this.renderedWaterfallElements[n].push(i)}else this.renderedWaterfallElements[n]=[i]}Object.keys(this.pendingWaterfallRenderHandlers).forEach(e=>{const t=Number(e),i=(this.renderedWaterfallElements||[])[t];i&&this.pendingWaterfallRenderHandlers[t](i,t)})},this.buildFallbackVerticalCardsMetadata=()=>{if(!this.config.fallbackVerticalCardData)return[];const e=[];return this.config.fallbackVerticalCardData.forEach(t=>{if(!(t&&t.localizedStringKey&&t.documentId&&t.redirectUrl))return;const i=this.config.localizedStrings.fallbackVerticalTitles[t.localizedStringKey],n=(0,Gt.bI)(t.redirectUrl),a=(0,si.En)(),r=a?n+`?ocid=${a}`:n,o={title:i,pageUrl:r,imageUrl:(0,Ct.XP)(t.documentId,{width:84,height:84,enableDpiScaling:!0,devicePixelRatio:2}),telemetryObject:new ki.$({name:"FallbackVertical_"+i,type:ii.MJ.ActionButton,behavior:ii.MS.Navigate,content:{headline:r}})};e.push(o)}),e},this.getRiverPlaceholderData=(0,pi.A)(e=>(0,Vt.J)(`superfeed-placeholder-data-${e}`,1,()=>{const t=Vi[e],i=`msft-placeholder-${e.toLowerCase()}`,n=new Array(t).fill({type:y.pL.PlaceholderCard});return{feedData:this.mapFeedData(n,{layoutTemplateName:i,region:"river",parentTelemetryObject:this[Gi.river]}),templateId:i,cardMetadataList:n,isPlaceholder:!0}})()),this.isFeedFetching=()=>this.isFetching,this.adOffsets=(e,t)=>{const i=[];return e.map(e=>{const n=[...e.cards].reverse(),a=n.findIndex(e=>e.type===y.pL.NativeAd||e.type===y.pL.CmsAd);if(a>=0){const e=n.slice(0,a).reduce((e,i)=>e+(i.height?i.height:t),0);i.push(e)}else i.push(-1)}),i},this.formatToWaterfallData=(e,t,i)=>{const n=["c1","c2","c3","c4","c5"],{expectedColumns:a,skipSectionTracker:r=!1,rowRendering:o=!1}=i;let s={childTemplateMap:this.cardTemplateMap,columns:[],sectionTrackerTag:this.sectionTrackerEnabled?"cs-section-tracker":void 0,rowRendering:o,id:t.toString()};const l=[],d=[];for(let i=0;i<n.length&&i<a;i++){const a=e[n[i]];if(a instanceof Array)if(o)a.forEach(e=>{d.push(e)});else{if(this.sectionTrackerEnabled&&!r&&!o){const e={childTemplateType:"cs-section-tracker",id:(t+1).toString()};this.config.moveAdsTrackerToSectionStart&&this.config.adsTrackerMoveThreshold&&t>=this.config.adsTrackerMoveThreshold?a.unshift(e):a.push(e)}l.push(a)}}if(o&&(d.sort((e,t)=>(e.wpoRank||0)-(t.wpoRank||0)),this.sectionTrackerEnabled&&!r&&d.push({childTemplateType:"cs-section-tracker",id:(t+1).toString()}),l.push(d)),l.length&&(s={childTemplateMap:this.cardTemplateMap,columns:l,sectionTrackerTag:this.sectionTrackerEnabled?"cs-section-tracker":void 0,rowRendering:o,onBlankMonitorResult:this.reportWaterfallBrokenLayout,enableMonitor:this.trackFeedGaps,id:t.toString()},this.isInfopaneInWidecard(o))){var c,u,h;const e=null===(c=l[0])||void 0===c?void 0:c.findIndex(e=>"infopane"===(null==e?void 0:e.type));if(e>-1&&null!==(u=(l[0]||[])[e])&&void 0!==u&&u.colSpan&&"infopane"===(null===(h=(l[0]||[])[e])||void 0===h?void 0:h.type)){const t=l[0].splice(e,1)[0];s.wideCard=t,s.wideCardSize=t.colSpan}}if(this.enableHalfUCards){var v;const e=null===(v=s.columns)||void 0===v||null===(v=v[0])||void 0===v?void 0:v.filter(e=>"halfu"===(null==e?void 0:e.subType));if(null!=e&&e.length){const t=[...s.columns[0]],i=e[0],n=t.indexOf(i),a=e[1],r=t.indexOf(a);t.splice(r,1),t[n]={...i,childTemplateType:"halfu-group",id:"halfu-group",subCards:[i,a]},s.customRowSection=t}}return s},this.reportWaterfallBrokenLayout=e=>{if(e.result){let r={};var t,i,n,a;if(this.requestContext||(this.requestContext=new Kt.bb),(0,Lt.S)())r={innerWidth:(0,Kt.KP)(null===(t=this.requestContext)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.innerWidth,"innerWidth"),innerHeight:(0,Kt.KP)(null===(i=this.requestContext)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.innerHeight,"innerHeight"),outerWidth:(0,Kt.KP)(null===(n=this.requestContext)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.outerWidth,"outerWidth"),devicePixelRatio:(0,Kt.KP)(null===(a=this.requestContext)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.devicePixelRatio,"devicePixelRatio")};(0,N.vV)(p.kyo,"Error in Layout rendering, white space has been detected",`Layout has pixel delta: ${e.delta} with threshold: ${e.threshold}`,{...p.kyo.pb,...e,sampled:!0,layout:this.layout,winDimensions:r})}},this.getShouldResetOrder=(e,t)=>{var i;if(this.onlyRenderRows){var n;return this.countCardsInRowRenderedWaterfall(null===(n=this[t])||void 0===n?void 0:n[0])!==this.getCardsPerSection()*Ki[this.layout]}return e.length!==(null===(i=this[t])||void 0===i||null===(i=i[0])||void 0===i||null===(i=i.columns)||void 0===i?void 0:i.length)},this.countCardsInRowRenderedWaterfall=e=>{var t;let i=0;return null==e||null===(t=e.columns)||void 0===t||t[0].map(e=>{i+=e.colSpan?e.colSpan:1}),null!=e&&e.wideCard&&i++,i},this.getPreCardOrder=(e,t)=>this.onlyRenderRows?this.getPreRowCardOrder(e):this.getPreColumnCardOrder(e,t),this.getPreColumnCardOrder=(e,t)=>{var i;if(!e||!e.length)return 0;const n=e[e.length-1];if(null==n||!n.columns||(null==n||null===(i=n.columns)||void 0===i?void 0:i.length)<=t)return 0;const a=this.getCardOrderFromCardInPrevWaterfallCol(e,e.length-1,t);return a||(null!=n&&n.wideCard&&n.wideCard.order||0)},this.getCardOrderFromCardInPrevWaterfallCol=(e,t,i)=>{var n,a;const r=e[t],o=null==r||null===(n=r.columns)||void 0===n?void 0:n[i].concat((null===(a=this.incompleteWaterfallRow)||void 0===a||null===(a=a.waterfall)||void 0===a||null===(a=a.columns)||void 0===a?void 0:a[i])||[]);if(o){const e=o;for(let t=e.length-1;t>=0;t--){const i="cs-section-tracker"===o[t].childTemplateType,n=(0,vi.G9)(o[t]);var s;if(!i&&!n)return(null===(s=e[t])||void 0===s?void 0:s.order)||0}}return 0},this.getPreRowCardOrder=e=>{var t;if(!e||!e.length)return 0;const i=null===(t=e[e.length-1])||void 0===t||null===(t=t.columns)||void 0===t?void 0:t[0];if(!i.length)return 0;for(let e=i.length-1;e>=0;e--){const t=i[e],n="cs-section-tracker"===t.childTemplateType,a=(0,vi.G9)(t);if(!n&&!a)return t.order||0}return 0},this.mapWaterfallFeedData=(e,t)=>{const{region:i,parentTelemetryObject:n,visualReadinessCallback:a,refreshFeedCallback:r,isRefresh:o,prevCardCount:s}=t,l={defaultLayout:[],C6:[],C5:[],C4:[],C3:[],C2:[],C1:[]};return e.forEach((t,d)=>{var c,u;let h=Bi(t,i,this.config,this.experienceId,"waterfall");if(null===h)return void this.feedEventAggregator.publish(Ot.KS.OnCardMappingError,{cardMetadata:t});if("placeholder-card"===h)return;const v=Object.assign({},this.config,null===(c=this.config)||void 0===c?void 0:c[i]);h=this.adjustFeedLayoutCardTypeResponsive(t,h,v),t.feedLayoutCardType=h,this.feedEventAggregator.publish(Ot.KS.OnStartCardArgsCreate,{feedLayoutCardType:h,cardMetadata:t,config:v});const p={cardHeight:t.height||Ji,colSpan:t.colSpan||0,useFeed2CardSize:h===G.C.nativeAdCard&&!!v.excludeFeed3AdCard,isHalfUCard:"halfu"===t.subType},f=this.simulateCardSlot(d,p),g=t.colSpan||1,m=g&&300*g+(g-1)*Nt.iw,y={col:t.column,order:t.order,height:this.getCardHeight(t),width:m,rank:this.getCardOrderofDom(t)},C={...this.getBasicCardArgsForMapping(t,i,h,n,s,f,a,r),waterfallCardSlot:y,cardHeightPx:t.height,heightReadyCallback:this.heightReadyCallback,region:i,hasLoadedCallback:v.enableSDShimmerEffect&&this.getHasLoadedCallback(h),emptySDCardConfigCallback:()=>this.feedEventAggregator.publish(Ot.KS.OnCardMappingError,{cardMetadata:t}),clearAdCache:this.adsResponseCache&&(async()=>{var e;return null===(e=this.adsResponseCache)||void 0===e?void 0:e.clearCache()})};null===(u=Y[h])||void 0===u||u.call(Y,C,t,v,{cardMetadataList:e,index:d}),this.feedEventAggregator.publish(Ot.KS.OnCardArgsCreated,{feedLayoutCardType:h,cardMetadata:t,args:C,isRefresh:o});this.cardMappingProcessing(t,C,h,l,v,(e,t,i)=>{var n,a;const r={...null===(n=e.defaultLayout)||void 0===n?void 0:n[0],...null===(a=e.C1)||void 0===a?void 0:a[0],height:t.height,column:t.column,order:t.order,colSpan:t.colSpan,wpoId:t.wpoId,adjacentCardIds:t.adjacentCardIds,isPartialBrandSafety:t.isPartialBrandSafety};e.defaultLayout[0]=r;const o=qi(e);null==o||o.forEach(e=>{let[t,n]=e;var a;"defaultLayout"===t&&(null===(a=i.defaultLayout)||void 0===a||a.push(...n??[]))})},"WaterfallFeed")}),l},this.processWidgetsData=function(e,i){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{region:r,layoutTemplateName:o,parentTelemetryObject:l,colOverride:d,visualReadinessCallback:c,refreshFeedCallback:u,isPinnedRegion:h,isInitiatedByPinAction:v,isRefresh:f,isSpotlightZone:g,prevCardCount:m,isCalledForSpotlightAction:y,overrideColumnLayout:C}=i,b={defaultLayout:[],C6:[],C5:[],C4:[],C3:[],C2:[],C1:[]},w=void 0!==o?t.getLayoutTemplate(o):null;if(!w)return"overlay"===r||t.config.isWaterfallFeed||(0,N.vV)(p.Deh,"Invalid layout template used.",void 0,{...p.Deh.pb,customMessage:`layoutTemplateName: ${o}`}),b;t.validateTemplateFeedData(e,w,o);const T=[];return e.forEach((s,p)=>{var S,k,M;let $=Bi(s,r,t.config,t.experienceId,"widgets");if(null===$)return;var F;if(t.config.enableWidgetsRegion)if("topic-feed-card"==$&&null!=s&&null!==(F=s.id)&&void 0!==F&&F.includes("topstories"))T.push("TopStories");else{const e=t.sdCardTypeToCardNameMapping.get($);e&&(T.push(e),t.widgetCardsList&&t.widgetCardsList.push($))}const I=Object.assign({},t.config,null===(S=t.config)||void 0===S?void 0:S[r]),{rowHeightPx:x,colWidthPx:R,gutterPx:P,cardSlots:A}=w,D=A[p];$=t.adjustFeedLayoutCardTypeGrid(s,$,I,o),s.feedLayoutCardType=$,t.feedEventAggregator.publish(Ot.KS.OnStartCardArgsCreate,{feedLayoutCardType:$,cardMetadata:s,cardSlot:D,config:I});const O=i.rowCount??e[0].rowCount;let N;t.config.enableLazyDataMapping&&n&&(N=C?C(s):t.layout);const _={...t.getBasicCardArgsForMapping(s,r,$,l,m,D,c,u),layoutTemplateName:o,handleAdFeedbackSubmit:I.useMobile?void 0:(0,a.J6)().ReportAd,rowCount:O,flattenedRightRail:"rightrail"===r&&(null===(k=I.rightrail)||void 0===k?void 0:k.renderFlattenedDesign),rowHeightPx:x,colWidthPx:R,gutterPx:P,colOverride:d,notificationMetadata:y?s.notificationMetadata:void 0,columnLayout:N,onSDCardClick:t.getLogWidgetsRegionClickFunction($),...t.appendixFeedStyleArgs};if(null===(M=Y[$])||void 0===M||M.call(Y,_,s,I,{cardMetadataList:e,index:p}),t.config.enableWidgetsRegion&&(0,Lt.S)()){var L;const e=Mt[$],t=e&&(null===(L=I.childExperienceReferencesWC)||void 0===L?void 0:L[e.replace(e[0],e[0].toLowerCase())]);t&&on.push(t)}t.feedEventAggregator.publish(Ot.KS.OnCardArgsCreated,{feedLayoutCardType:$,cardMetadata:s,args:_,isPinnedRegion:h,isInitiatedByPinAction:v,isRefresh:f,isSpotlightZone:g});t.cardMappingProcessing(s,_,$,b,I,(e,t,i)=>{var n,a;const r={...null===(n=e.defaultLayout)||void 0===n?void 0:n[0],...null===(a=e.C1)||void 0===a?void 0:a[0],height:146,subType:"halfu",cardLayout:"_1x_1y",column:t.column,order:t.order,colSpan:t.colSpan,wpoId:t.wpoId};e.defaultLayout[0]=r;const o=qi(e);o&&o.forEach(e=>{var t;let[n,a]=e;null===(t=i[n])||void 0===t||t.push(...a??[])})},"WidgetsRegionFeed")}),t.config.enableWidgetsRegion&&on.length>0&&(0,Lt.S)()&&(0,Jt.Lg)().setObject(s.xP,on),t.config.enableWidgetsRegion&&t.validateAndLogWidgets(T),b},this.infopaneColspanProcessing=e=>{if(!this.infopaneWithColSpan)return"C1"===this.layout?1:2;const t=e.colSpan||1,i=Ki[this.layout];return t>i&&(0,N.vV)(p.hm6,"Infopane colSpan exceeds number of columns in layout",void 0,{...p.hm6.pb,layout:this.layout,infopaneColspan:e.colSpan,numColumns:i}),t},this.getCardFromMasterList=(e,t,i)=>{const n=`${t}_wfcard${null==e?void 0:e.wpoId}`,a=this.masterCardMapWpoItems.get(n);if(!a){const t=[...this.masterCardMapWpoItems.keys()].pop()||"no cards";return void(0,N.vV)(p.YfR,"Could not find Card in master card map",`Lookup for ${n}`,{...p.YfR.pb,totalCardsInMap:this.masterCardMapWpoItems.size,placementLookup:JSON.stringify(e),lastCardId:t,debugId:i})}let r=!1;return a.wpoRank!==e.wpoRank&&(a.wpoRank=e.wpoRank,r=!0),a.colSpan!==e.colSpan&&(a.colSpan=e.colSpan,r=!0),a.type===y.pL.Infopane&&(a.colSpan=this.infopaneColspanProcessing(a),r=!0),r&&this.masterCardMapWpoItems.set(n,a),a},this.parseViewableSection=(e,t,i,n,a)=>{const{requestedColumnCount:r,isResizing:o,regionKey:s,firstRequest:l,rowRendering:d}=i,c=this.customWaterfallSections||[],u=[Array.from({length:r},(e,t)=>({column:t+1,cards:[],newFullSection:d,rowRendering:d}))];let h=!1;const v=l||o;return e.forEach((e,i)=>{const n=e.cards;let o=0,l=0,p=t;for(const e of n){var f;if(!(this.config.rowsInSectionNonPrerender&&!w.Rb.IsPrerender)&&(!this.config.splitFirstSectionOnServerSide||this.config.splitFirstSectionOnServerSide&&(!(0,Lt.S)()||(null===(f=this.needsHydration)||void 0===f?void 0:f.call(this))))&&v&&c.length&&c[o]&&(p=c[o][Ki[this.layout]-1]),!u[o]){const e=Array.from({length:r},(e,t)=>({column:t+1,cards:[],newFullSection:d,rowRendering:d}));u.push(e)}let t=e;if("placeholder"===t.type){d?(u[o][i].cards.push(t),++l,l===p&&(o++,l=0)):(o++,l=0),`${s}_wfcard${t.placeholderId}`===this.infopaneWpoIdKey&&(this.infopaneWithColSpan=!0,h=!1);continue}if(t=this.getCardFromMasterList(e,s,a),!t)continue;const n=this.processCardInViewableSection(u,t,e,h,l,o,i,p);h=n.hasInfoPane,l=n.cardCount,o=n.subSection}}),u},this.processCardInViewableSection=(e,t,i,n,a,r,o,s)=>(t.wpoId=i.wpoId,t.wpoRank=this.receivedCardCount+(t.wpoRank??0),((e,t)=>{this.enableHalfUCards&&("halfu"===e.subType&&(delete e.subType,delete e.height),t.height&&(e.height=t.height,146===t.height&&this.onlyRenderRows&&(e.subType="halfu")))})(t,i),e[r][o].cards.push(t),a+="halfu"===t.subType?.5:1,t.adjacentCardIds=i.adjacentCardIds,t.isPartialBrandSafety=i.isPartialBrandSafety,this.infopaneWithColSpan||(t.type===y.pL.Infopane&&(n=!0),n&&"C1"!==this.layout&&1===o&&(++a,n=!1)),a===s&&(r++,a=0),{hasInfoPane:n,cardCount:a,subSection:r}),this.validateNewSections=(e,t)=>{const{isResizing:i,regionKey:n,firstRequest:a}=t;if(a&&!i){const t=e[0];!(t[0].cards.findIndex(hi.MD)>-1||t[0].cards.findIndex(hi.ib)>-1)&&this.config.enableInfopaneDialtone&&(0,Lt.S)()&&(0,N.vV)(p.cwh,"",void 0,{...p.t9r.pb,customMessage:`FeedType: ${this.experienceId} has missing or invalid infopane. region: ${n}`,isPrerender:null===w.Rb||void 0===w.Rb?void 0:w.Rb.IsPrerender})}},this.forceReplaceTopRightCardToDisplayAd=e=>{const t={data:void 0,dataType:void 0,type:"DisplayAdCard",configInstanceSrc:"waterfall",enableSafeAds:!0,instanceId:"rectangle1",enableExtraAdSlug:!0};if(e.length>=2){var i;const n=e[e.length-1],a=null===(i=n.cards)||void 0===i?void 0:i[0];a&&(n.cards[0]={...a,...t})}},this.lastBannerInjectedBeforeEnd=!1,this.isColumnBasedResponse=e=>{var t;return void 0!==(null==e||null===(t=e.sections)||void 0===t?void 0:t.find(e=>"cardData"===e.region||"cardData_river"===e.region))??!1},this.getSSRColumnLayout=function(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const i=null===(e=window.ssrSizes)||void 0===e||null===(e=e.ssrCol)||void 0===e?void 0:e.toUpperCase();return i!==It._4.C1||t?i:It._4.C2},this.rebaseAdsAfterResizeInit=e=>{const t=new Map;this.placementTrackerRow=0;for(const e of this.masterCardMapWpoItems.values())if("nativead"===(null==e?void 0:e.type)||"cmsad"===(null==e?void 0:e.type)){const i=t.get(e.type)||[];i.push(e.wpoAdRank??0),t.set(e.type,i)}if(t.size)for(const[n,a]of t){var i;const t=[];let r=this.config.enableWpoAdRank?this.startWpoAdRankIndex-1:0;for(let e=0;e<a.length;e++)r+=1,t.push(r);null===(i=this.masterPlacementTracker[e])||void 0===i||i[this.layout].set(n,t)}},this.relayoutWaterfallFeed=()=>{const e=Ki[this.layout];if(!this.waterfall.length||this.waterfall[this.waterfall.length-1].columns.length!==e||this.onlyRenderRows){var t,i;this.renderedWaterfallElements=[],this.riverCardCount=0,this.pendingWaterfallRenderHandlers=[],this.unrenderedRegionsData=[],this.incompleteWaterfallRow=void 0,null===(t=this.waterfallRenderedHeightsMap)||void 0===t||t.clear(),this.lastPageOffsets=void 0,this.rebaseAdsAfterResizeInit("river");const n={requestedColumnCount:e,appendCards:!1,isResizing:!0,skipInitialCheck:!0,regionKey:"river",rowRendering:this.onlyRenderRows,firstRequest:!0},a=this.divideWaterfallResponse([],n,void 0,void 0);let r;0===((null==a||null===(i=a[0])||void 0===i||null===(i=i[0])||void 0===i?void 0:i.cards)||[]).length&&(null===b.YT||void 0===b.YT||b.YT.addOrUpdateTmplString(`noCardsInWaterfallWhenRelayout:${(new Date).toISOString()}`));let o=!1;this.config.rowsInSectionNonPrerender&&!w.Rb.IsPrerender?(o=!!this.config.scrollToTopWhenResize&&a.length*this.config.rowsInSectionNonPrerender>this.rowsToRenderPerLayout[this.layout]*(this.config.scrollTopSectionCount||10),r=o||0===this.numWaterfallSectionsRendered?Math.ceil(2*this.rowsToRenderPerLayout[this.layout]/this.config.rowsInSectionNonPrerender):a.length):(o=!!this.config.scrollToTopWhenResize&&this.numWaterfallSectionsRendered>(this.config.scrollTopSectionCount||10),r=o||0===this.numWaterfallSectionsRendered?2:this.numWaterfallSectionsRendered),this.numWaterfallSectionsRendered=0,this.requestedColCountForWaterfallFeed=e;const s=a.slice(r),l=a.slice(0,r),d=l.length>0;if(this.justResized=!0,(0,ui.RE)(),l.forEach(async(e,t)=>{this.consumeUnrenderedWaterfallFeedLayout(0===t,"river",{waterfallKey:"waterfall",cardCountKey:"riverCardCount",sectionIndexKey:"riverSectionIndex"},[{columns:e}])}),s.length&&d){const e=s.map(e=>({columns:e}));this.unrenderedRegionsData=[{region:"river",waterfallSections:e}]}const c=this.processAdIndexesNewSubSections(a);this.feedEventAggregator.publish(Ot.KS.OnWaterfallResize,{newAdsIndexes:c,sectionIndexMax:a.length,scrollToTop:o,newSubSections:a}),this.relayoutHeroWaterfall(e),this.relayoutWidgets(e),this.isWaterfallFeedResizing=!1}},this.relayoutHeroWaterfall=e=>{if(this.config.enableHeroWaterfall&&(!this.heroWaterfall.length||this.heroWaterfall[this.heroWaterfall.length-1].columns.length!==e||this.onlyRenderRows)){this.heroCardCount=0;const t={requestedColumnCount:e,appendCards:!1,isResizing:!0,skipInitialCheck:!0,regionKey:"hero",rowRendering:this.onlyRenderRows},i=this.divideWaterfallResponse([],t,void 0,void 0);let n=!0;i.forEach(e=>{this.consumeUnrenderedWaterfallFeedLayout(n,"hero",{waterfallKey:"heroWaterfall",cardCountKey:"heroCardCount",sectionIndexKey:"heroSectionIndex"},[{columns:e}]),n=!1})}},this.relayoutWidgets=e=>{if(this.config.enableWidgetsLayout3&&(!this.widgetsWaterfall.length||this.widgetsWaterfall[this.widgetsWaterfall.length-1].columns.length!==e||this.onlyRenderRows)){this.widgetsCardCount=0;const t={requestedColumnCount:e,appendCards:!1,isResizing:!0,skipInitialCheck:!0,regionKey:"widgets",rowRendering:this.onlyRenderRows},i=this.divideWaterfallResponse([],t,void 0,void 0);let n=!0;i.forEach(e=>{this.consumeUnrenderedWaterfallFeedLayout(n,"widgets",{waterfallKey:"widgetsWaterfall",cardCountKey:"widgetsCardCount",sectionIndexKey:"widgetsSectionIndex"},[{columns:e}]),n=!1})}},this.processAdIndexesNewSubSections=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"nativead",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=e.map(e=>e.flatMap(e=>e.cards).filter(e=>e.type===t).map(e=>e.wpoAdRank||0)),a=[];let r=i;for(let e=0;e<n.length;e++)r=Math.max(...n[e].concat([r])),a.push(r);return a},this.stampOverlay=()=>{this.config.overlayStampString&&zt.vv&&zt.vv.get(this.config.overlayStampString)&&b.YT.addOrUpdateTmplProperty(this.config.overlayStampString,"1")},this.initStaleCardMonitor=()=>{var e;if((0,Lt.S)()&&this.config.enableStaleCardMonitor&&"myfeed"===(null===(e=(0,Zt.kP)())||void 0===e?void 0:e.toLowerCase())){var t;const e=this.config.enableAutoStaleSdRefresh?()=>this.refreshSDCard(!1):()=>{};null===(t=this.feedEventAggregator)||void 0===t||t.subscribeOnce(Ot.KS.OnFeedRendered,t=>{var i,n;const a=ji.getInstance();a.init({staleMinutesThreshold:this.config.staleLoggerInterval,disableDocumentVisibilityListener:this.config.disableStaleLoggerWebListener,logStaleOnFeedVisibility:!this.config.enableAutoStaleSdRefresh,onFeedStale:e}),null===(i=this.feedEventAggregator)||void 0===i||i.subscribe(Ot.KS.OnFeedRefreshed,e=>{a.markFeedRefreshed()}),null===(n=this.feedEventAggregator)||void 0===n||n.subscribe(Ot.KS.OnFeedDisconneted,e=>{a.dispose()})})}}}async init(e){var t,n,a;if(this.initialized)return;this.initialized=!0,this.river=[],this.hero=[],this.widgets=[],this.waterfall=[],this.heroWaterfall=[],this.widgetsWaterfall=[],this.rightrail=[],this.Rail=[],this.masterCardMapWpoItems=new Map,this.incompleteWaterfallRow=void 0,this.sdCardMenuOpen=!1,this.unrenderedRegionsData=[],this.backupUnrenderedRegionsData=[],this.isFirstRender=!0,this.lastResponse=void 0,this.isFetching=!1,this.isStopUpdateFeedData=!1,this.riverChangedCallbackList=[],this.emptyFeedCallbackList=[],this.ttvrSpaceTotal=1,this.appendixFeedStyleArgs={},this.instantReplaceIdMap={},this.hideStoryEntryPointMap={},this.readyForPrefetch=!1;const{config:r,experienceId:s,feedId:l,feedName:d,feedSource:c,regionKeys:u,layoutTemplateMap:h,importLayoutTemplateMap:v,elementKey:f,useProviderKey:g,emptyFeedCallback:m,riverChangedCallback:y,experienceTtvrCallback:w}=e;this.config=r,this.experienceId=s,this.adRiverRegionName=Ge.T3.IsHeroNTP?"riverlock":"river",this.adInfopaneRegionName=Ge.T3.IsHeroNTP?"infopanelock":"infopane",this.feedElementTagName=this.experienceId===o.HPc?"waterfall-view-feed":"grid-view-feed",this.regionKeys=u,this.feedId=l,this.useProviderKey=g,this.feedName=d,this.feedSource=c,this.isSuperDataProviderEnabled=this.config.enableSuperDataProvider??!1,this.infopaneInSecondSection=this.config.infopaneInSecondSection??!1,this.hasFullWidthFreFirstSection=!1,this.requestedColCountForWaterfallFeed=void 0,this.isXFeed=(null===(t=this.config.riverSectionCardProviderConfig)||void 0===t||null===(t=t.initialRequest)||void 0===t?void 0:t.feedId)!==this.feedId,this.adRenderPipedPromise=new C.e;const T=!(0,Lt.S)()&&this.config.sectionsToRenderOnServerSide||1;if(this.sectionsRenderComplete=new Rt.R(T),this.layoutTemplateMap=h,this.importLayoutTemplateMap=v,this.needsHydration=e.needsHydration,this.elementKey=f,this.lastFreTimestamp=Date.now(),this.disConnected=!1,this.isStatic=!1,this.responseSource=void 0,this.riverCardCount=0,this.receivedCardCount=0,this.onlyRenderRows=!this.config.enableDynamicWaterfall,this.numWaterfallSectionsRendered=0,this.enableHalfUCards=Boolean(this.config.enableHalfUCards&&this.onlyRenderRows),this.experienceTtvrCallback=w,null===(n=this.config.customWaterfallSections)||void 0===n||n.forEach(e=>{this.customWaterfallSections[e.sectionIndex]=e.numberRowsPerCx}),this.feedResponseLayout3Debug=[],this.initProvider(),(0,Lt.S)()){var S,k;if(At.x.initializeCache((null===(S=this.config)||void 0===S?void 0:S.samPageDedupeCacheSize)||0,void 0,null===(k=this.config)||void 0===k?void 0:k.dedupeConfigsByClientHintType),this.config.enableSingleRotationOnBattery){var M;const e=window&&window.navigator;null===(M=e.getBattery)||void 0===M||M.call(e).then(e=>{e.charging||(this.enableRotateOnlyOnce=!0)})}if(this.config.enableViewportOffset){const e=b.YT,t="1"===Qt._3.getQueryParameterByName("vpOffsetTestMode",window.location.href);e.setOffsetCalculationCallback((e,i)=>{Ui(e,i,t)}),e.setVPOffsetFlagIsValidCallback(()=>{const e=(0,Zt.kP)();return!!e&&"productivityhub"!==e.toLowerCase()})}}this.feedEventAggregator=new Xt.Q((e,t,i,n)=>{const a=n.feedLayoutCardType;return(0,N.vV)(p.naH,"Failed to execute subscription callback",void 0,{...p.naH.pb,customMessage:`Failed at ${t}, index ${i}`,failedCardType:a,feedType:this.experienceId,errorMessage:e&&"[object Error]"===toString.call(e)&&e.message})}),await this.initCommonHelpers(),await this.initCommonFeedBehavior(),this.subscribeFeedEvent(),sn.initMonitors(this),this.initStaleCardMonitor(),this.config.enableGreyBlock&&nn().then(()=>(0,qt.E)(()=>this.riverPlaceholderData=this.getRiverPlaceholderData(this.layout))),m&&this.emptyFeedCallbackList.push(m),y&&this.riverChangedCallbackList.push(y);const{enableFilterResponse:$,riverSectionCardProviderConfig:F}=this.config;if((0,Lt.S)()&&$&&"following"===(null==F||null===(a=F.initialRequest)||void 0===a?void 0:a.feedName)){const{followingExperienceManager:e}=await i.e("libs_following-experience-manager_dist_index_js").then(i.bind(i,16120));this.followingExperienceManager=e}if(this.config.overlayStampString&&this.stampOverlay(),(0,Yt.a)().get("vptest")&&(0,Lt.S)()){const e=await i.e("VpReadyHelper").then(i.bind(i,91313)).then(e=>{let{VpReadyHelper:t}=e;return t});this.vpReadyHelper=new e}this.initedPromise.set()}waitForInited(){return this.initedPromise.getResultAsync()}setInitializedForTesting(e){this.initialized=e}setTtvrRows(e){this.ttvrRows=e}async ensureLayoutTemplateMapLoaded(){if(!this.layoutTemplateMap&&this.importLayoutTemplateMap){this.layoutTemplateMap={};const e=await this.importLayoutTemplateMap();this.layoutTemplateMap=e}}getLayoutTemplateMap(){return this.layoutTemplateMap}getLayoutTemplate(e){var t;return null===(t=this.layoutTemplateMap)||void 0===t?void 0:t[e]}setTtvrHeight(e){this.ttvrHeight=e}async initCommonHelpers(){var e;const{feedId:t}=this;this.weatherHelper=new d.D;const i=null!==(e=this.options)&&void 0!==e&&e.isWidget?o.ySv:this.experienceId;this.ttvrHelper=new O(i,this.config.maxVisualReadinessCallbackSetTimes),this.sdCardHelper=new W(this.config.riverSectionCardProviderConfig),this.cardReplacementHelper=new H(this.config.cardUpdateProviderConfig??this.config.riverSectionCardProviderConfig,t),this.cardExtTelemetryHelper=new j(this.regionKeys),this.locationDataHelper=new B(this.updateCacheAndRefreshRegionsData),this.locationDataHelper.register(),this.initHelpers()}async initCommonFeedBehavior(){var e,t,i;const{feedId:n,feedName:a}=this;if(this.regionKeys.forEach(e=>{var t;this[Gi[e]]=new ki.$({name:Qi[e].name,content:{headline:n||a||Qi[e].headline},...null===(t=this.options)||void 0===t||null===(t=t.extendRegionTelemetryTagMap)||void 0===t?void 0:t[e]})}),null!==(e=this.config)&&void 0!==e&&e.showLoadingPlaceholder&&(this.loadingPlaceholderTelemetry=function(e){if(e)return(0,$i.N)(Fi,ii.MS.Show,ii.EG.View)}(this.riverTelemetry)),this.config.enableTemplateTracking&&function(e){const t=new Set,i=new Set;e.subscribe(Ot.KS.OnStartCardArgsCreate,e=>{let{feedLayoutCardType:t}=e;i.add(t),b.YT.addOrUpdateTmplString(`usedFeedLayoutCardType:${Array.from(i).join("||")}`)}),e.subscribe(Ot.KS.OnCardMappingProcessing,e=>{let{mappedFeedData:i}=e;if(i)for(const e of i.defaultLayout)e.childTemplateType&&t.add(e.childTemplateType);b.YT.addOrUpdateTmplString(`usedChildTemplateType:${Array.from(t).join("||")}`)}),e.subscribe(Ot.KS.OnFeedDisconneted,()=>{t.clear(),i.clear()})}(this.feedEventAggregator),(0,Lt.S)()||"1"!==Qt._3.getQueryParameterByName("logconfig",null===(t=window.location)||void 0===t?void 0:t.href)||(0,N.vV)(p.O_4,"No alert - log SSR CRS config",void 0,{...p.O_4.pb,config:JSON.stringify(this.config)}),(0,Lt.S)()&&this.config&&this.config.adCookieSyncConfig&&this.config.adCookieSyncConfig.isCookieSyncEnabled&&(this.cookieSyncService=new Dt.n(this.config.adCookieSyncConfig||{}),this.cookieSyncService.processCookieSync()),null!==(i=this.config)&&void 0!==i&&null!==(i=i.childExperienceReferencesWC)&&void 0!==i&&i.socialBarWC){const e=(0,ai.EZ)();if(this.config.skipWaitAdToLoadSbInPrd&&e)(0,Q.uC)(this.config.childExperienceReferencesWC.socialBarWC);else{const t=[this.adRenderPipedPromise.getResultAsync()];e&&t.push((0,ai.GP)()),Promise.all(t).then(()=>{var e;null!==(e=this.config.childExperienceReferencesWC)&&void 0!==e&&e.socialBarWC&&(0,Q.uC)(this.config.childExperienceReferencesWC.socialBarWC)})}}this.config&&this.config.enableSuperVideoCard&&this.config.childExperienceReferencesWC&&this.config.childExperienceReferencesWC.videoCardWC&&this.adRenderPipedPromise.getResultAsync().then(()=>{var e;null!==(e=this.config.childExperienceReferencesWC)&&void 0!==e&&e.videoCardWC&&(0,Q.uC)(this.config.childExperienceReferencesWC.videoCardWC)});const r=[(0,ai.GP)(),(0,h.Qc)()];Promise.all(r).then(()=>{this.readyForPrefetch=!0}),await this.initFeedBehavior()}waitForSectionsRenderComplete(){return this.sectionsRenderComplete.getResultAsync()}forceMarkSectionsRenderComplete(){this.sectionsRenderComplete.wasSet()||this.sectionsRenderComplete.reset(0)}disConnect(){var e;this.resetParameters(),this.disConnected=!0,this.locationDataHelper.unregister(),null===(e=this.feedEventAggregator)||void 0===e||e.publish(Ot.KS.OnFeedDisconneted,{}),this.renderAsNeededOnScroll&&window.removeEventListener("scroll",this.renderAsNeededOnScroll)}async updateRegionsData(e){this.lastResponse&&(this.isUpdateRegionsDataLoading=!0,(!this.config.useMobile||this.config.useMobile&&this.river.length>=this.ttvrHelper.maxVisualReadinessCallbackSetTimes)&&await(0,h.Qc)(),await this.renderRegionsData(e),this.isUpdateRegionsDataLoading=!1)}async renderRegionsData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const n=this.isFirstRender;if(this.feedEventAggregator.publish(Ot.KS.OnStartFeedRequest,{}),"off"!==this.feedDisplaySetting||this.config.enableWidgetsRegion||"following"===this.feedName){if(!this.hasRemainingRiverSection()){let n;if(!this.prefetchHandler||this.ignorePrefetchHandlerForRefresh&&i===ni.OQ.Bgtask?(n=await this.updateFeedData(e,t),this.ignorePrefetchHandlerForRefresh&&i===ni.OQ.Bgtask&&delete this.prefetchHandler):n=await this.prefetchHandler,!n)return void this.feedEventAggregator.publish(Ot.KS.OnFeedRequestFailed,{})}this.config.enableWidgetsRegion&&"off"===this.feedDisplaySetting||(this.renderNextFeedLayout(n),this.prefetchFeed())}else this.isFetching=!1}addRiverChangedCallback(e){this.riverChangedCallbackList.push(e)}shouldPrefetch(){var e,t;const i=this.config.numOfSectionsToPrefetch||2;let n;var a,r;this.config.isWaterfallFeed?n=null===(a=this.unrenderedRegionsData.find(e=>{let{region:t}=e;return"river"===t}))||void 0===a||null===(a=a.waterfallSections)||void 0===a?void 0:a.length:n=null===(r=this.unrenderedRegionsData.find(e=>{let{region:t}=e;return"river"===t}))||void 0===r||null===(r=r.sections)||void 0===r?void 0:r.length;return void 0!==n&&n<=i&&!this.prefetchHandler&&this.readyForPrefetch&&!(null!==(e=this.options)&&void 0!==e&&null!==(t=e.prefetchFeedDisabled)&&void 0!==t&&t.call(e))}prefetchFeed(){this.shouldPrefetch()&&(this.prefetchHandler=this.updateFeedData().catch(()=>!1).finally(()=>{delete this.prefetchHandler}))}removePrefetchHandler(){delete this.prefetchHandler}async convertWaterfallToTemplateProng2(e){const t=e,i=[];let n=0;for(;n<t.cards.length;){const e=t.cards.slice(n,n+3);i.push({region:"4c1r-3cards-t1",layoutTemplate:"4c1r-3cards-t1",cards:e}),n+=3}return(0,N.vV)(p.AbT,"Prong 2 layout 3 response found in non-water fall feed",void 0,{...p.AbT.pb,customMessage:`region: ${e.region}`,layoutTemplate:"layoutTemplate: 4c1r-3cards-t1"}),i}prefetchPaginationResponse(){if(1===this.requestType){const e=this.fetchFeed(!0);e&&this.paginationFeedResponseQueue.push(e)}}getPrecachedPaginationResponse(e){var t;if(e&&null!==(t=this.paginationFeedResponseQueue)&&void 0!==t&&t.length){const e=this.paginationFeedResponseQueue.shift();if(e)return e}}calculateSendTtfrMarkers(){const e={};["TTFR","responsiveLayoutRendering","consumeUnrenderedLayout"].forEach(t=>{let i=0;const n=performance.getEntriesByName(t)||[];n.forEach(e=>{i+=e.duration}),e[t]=i/n.length|1,e[`${t}_sample`]=n.length,performance.clearMeasures(t)}),e.TTFR&&b.YT.sendLoadTimeEvent({markers:e})}reportRenderingMarkers(){if(!(0,Lt.S)()||this.experienceId!==o.HPc)return;(10*Math.random()|1)<3&&this.calculateSendTtfrMarkers(),this.hasTtfrUnloadHandler||(window.addEventListener("beforeunload",this.calculateSendTtfrMarkers,{once:!0}),this.hasTtfrUnloadHandler=!0)}handleWidgetsResponse(e){var t;const i=null==e||null===(t=e.regions)||void 0===t?void 0:t.find(e=>"widgets"===(null==e?void 0:e.region));if(i){this.sdCardHelper.addSDCard(i.sections);const e=i.sections[0].cards,t=i.sections[0].layoutTemplate;if(i.requestedColumnCount=Ki[this.layout],0==this.widgets.length&&window.dispatchEvent(new CustomEvent("noWidgetsData",{detail:!1})),this.config.enableGlobalMonitor){const i=this.getLayoutTemplate(t)??null;this.isFirstRender&&i&&(0,ci.Qu)(e,i,this.layout,1,(0,v.CG)())}const n=this.processWidgetsData(e,{layoutTemplateName:t,region:"widgets",parentTelemetryObject:this[Gi.widgets]},this.config.enableLazyHeroFeedData);this.widgets=[{feedData:n,templateId:t,cardMetadataList:e}],["headingsonly","off"].includes(this.feedDisplaySetting)&&this.forceMarkSectionsRenderComplete()}else this.config.enableGlobalMonitor&&(0,ci.BC)(),2===this.requestType&&this.skipBitMasking&&(this.widgets=[],b.YT.addOrUpdateTmplProperty("widgetsCards",""))}getBasicDivideWaterfallOptions(e){return{requestedColumnCount:Ki[this.layout],appendCards:!0,isResizing:!1,skipInitialCheck:!1,regionKey:e,rowRendering:this.onlyRenderRows,firstRequest:0===this.requestType,isRefresh:2===this.requestType}}sendAdsBeaconIfHasAdsDataInResponse(e){e.forEach(e=>{var t;const i=null==e||null===(t=e.cards)||void 0===t?void 0:t.filter(e=>e&&(e.type===y.pL.NativeAd||e.type===y.pL.CmsAd)&&e.data);null==i||i.forEach(e=>{try{const i=JSON.parse(e.data);if((0,Lt.S)())(0,K.J)(i);else{var t;const n={id:e.id,crids:i.crids,beaconsJson:i.beaconsJson,clickBeaconJson:null===(t=i.items)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.clickBeacons};window.ssrAdData?window.ssrAdData.push(n):window.ssrAdData=[n]}}catch(t){(0,N.vV)(p.BKY,"Invalid JSON from WPO during the send beacon operation",void 0,{...p.BKY.pb,customMessage:`${t&&t.message}`,wpoJson:e.data})}})})}preprocessLayout3Response(e,t){var i;const n=null==e||null===(i=e.regions)||void 0===i?void 0:i.find(e=>e.region===t.regionKey);if(n){var a;if(this.config.enableWpoAdRank&&!0===t.firstRequest){var r;const e=(null===(r=n.sections[0].cards)||void 0===r?void 0:r.find(e=>e.type===y.pL.NativeAd))??void 0;this.startWpoAdRankIndex=e&&e.wpoAdRank?e.wpoAdRank:1;const t=2;this.startWpoAdRankIndex===t&&b.YT.addOrUpdateTmplProperty("low-ads-density","1")}const{traceIdIndex:i,debugId:o}=e;n.waterfallSections=this.divideWaterfallResponse(n.sections,t,i,o),n.requestedColumnCount=t.requestedColumnCount,this.config.rowsInSectionNonPrerender&&!w.Rb.IsPrerender&&"river"===t.regionKey&&t.firstRequest&&(null===(a=n.sections)||void 0===a?void 0:a.length)>0&&this.sendAdsBeaconIfHasAdsDataInResponse(n.sections)}}trackPaginationTimings(e,t){if(this.config.trackPaginationTimings&&this.paginationTimings){var i;const n={t:Math.round(performance.now())-e};t&&(n.c=1),null!==(i=this.paginationFeedResponseQueue)&&void 0!==i&&i.length&&(n.l=this.paginationFeedResponseQueue.length),this.paginationTimings.push(n),!this.hasPaginationTimingUnloadEvent&&(0,Lt.S)()&&(this.addPaginationTimingUnloadEvent(),this.hasPaginationTimingUnloadEvent=!0)}}addPaginationTimingUnloadEvent(){window.addEventListener("beforeunload",()=>{var e;(null===(e=this.paginationTimings)||void 0===e?void 0:e.length)&&b.YT.sendLoadTimeEvent({markers:this.paginationTimings})},{once:!0})}async refreshSDCard(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=await this.sdCardHelper.fetchUpdatedSDCard();if(i)return e&&b.YT.addOrUpdateTmplProperty("prerender_updateStaleRenderedSDCard","1"),this.updateUnRenderedSDCard(i),t&&this.updateRenderedSDCard(i),i}updateRenderedSDCard(e){if(this.config.isWaterfallFeed){const t=this.waterfall.map(t=>({...t,columns:t.columns.map(t=>t.map(t=>{var i;const n=null==t?void 0:t.type,a={...t},r=null===(i=e[z.x[n]])||void 0===i?void 0:i.find(e=>e.type===n);if(r){const e=`river_wfcard${t.wpoId}`,i={...this.masterCardMapWpoItems.get(e),...r};this.masterCardMapWpoItems.set(e,i);const n={column:a.column,order:a.order,...i};return this.mapWaterfallFeedData([n],{region:"river",parentTelemetryObject:this[Gi.river]}).defaultLayout.shift()}return t}))}));return void(this.waterfall=t)}this.regionKeys.forEach(t=>{var i;const n=[];null===(i=this[t])||void 0===i||i.forEach(i=>{const{cardMetadataList:a,templateId:r,prevCardCount:o}=i;if(!a)return void n.push(i);e&&a.forEach(z.vy,{response:e});const s={...i,feedData:this.mapFeedData(a,{layoutTemplateName:r,region:t,parentTelemetryObject:this[Gi[t]],prevCardCount:o}),cardMetadataList:a};n.push(s)}),this[t]=n})}updateUnRenderedSDCard(e){this.config.isWaterfallFeed?this.unrenderedRegionsData.forEach(t=>{let{waterfallSections:i}=t;null==i||i.forEach(t=>{t.columns.forEach(t=>{let{cards:i}=t;i.forEach(z.vy,{response:e})})})}):this.unrenderedRegionsData.forEach(t=>{let{sections:i}=t;null==i||i.forEach(t=>{let{cards:i}=t;i.forEach(z.vy,{response:e})})})}getPageRevalidateResultAsync(){return this.config.enableGlobalMonitor?(0,ci.l8)():this.ttvrHelper.getPageRevalidateResultAsync()}updateLayout(e){(0,Lt.S)()&&(this.config.isWaterfallFeed||Ge.T3.IsHeroNTP)&&window.ssrSizes&&window.ssrSizes.ssrCol&&window.ssrSizes.ssrCol.toUpperCase()!==e&&!this.replayedUpdateLayout&&!this.isFeedTopDownHydrationCompleteOrTimeout()&&(this.shouldReplayUpdateLayout=!0,e=this.getSSRColumnLayout(this.config.enableOneColumn));const t={oldLayout:e,layout:null};this.feedEventAggregator.publish(Ot.KS.BeforeUpdateLayout,{layoutResFromFeedEvent:t});const i=this.layout;this.layout=t.layout??e;const n=this.config.isWaterfallFeed&&i&&i!==this.layout;if(i&&this.layout!==i&&(b.YT.addOrUpdateTmplProperty("feedResizing","1"),this.config.sendResizeCostLoadTime&&(performance.mark("feedResizingStart"),requestAnimationFrame(()=>{performance.mark("feedResizingEnd"),performance.measure("feedResizing","feedResizingStart","feedResizingEnd")}),!Zi))){Zi=!0;const e=()=>{const e=performance.getEntriesByName("feedResizing");let t=0;for(const i of e)t+=Math.floor(i.duration);const i=e.length>0?Math.floor(t/e.length):0;b.YT.sendLoadTimeEvent({markers:{avgFeedResizeCost:i}})};window.addEventListener("beforeunload",e)}this.config.enableLazyDataMapping&&this.loadLazyDataMappings(this.layout),this.config.enableGreyBlock&&(0,Lt.S)()&&(this.riverPlaceholderData=this.getRiverPlaceholderData(e)),n&&(this.isWaterfallFeedResizing=!0,this.relayoutWaterfallFeed())}updateTtvrSpaceTotal(e){this.ttvrSpaceTotal=e}appendFeedStyleArgs(e){this.appendixFeedStyleArgs=e}riverChanged(e,t){void 0!==e&&void 0!==t&&this.riverChangedCallbackList.forEach(i=>i(e,t))}async getContentForCardReplacements(e,t,i,n,a,r,o){var s;if(this.isFetching||this.cardReplacementHelper.reachedEnd)return;this.isFetching=!0;const l=this.lastResponse,d=l&&((null===(s=l.nextPageRequest)||void 0===s?void 0:s.nextPageUrl)??l.nextPageUrl);let c=0;if(d){const e=new URLSearchParams(d);c=parseInt(e.get("newsSkip")||"0")}const u=await this.cardReplacementHelper.fetch(e,t||r||o?void 0:c,t,i,n,a,r||this.feedId,o);if(u&&!(0,jt.I)(u.cardMetadata)){if(d&&!t){const t=new URL(d);t.searchParams.set("newsSkip",""+(c+(e||0))),l.nextPageRequest?l.nextPageRequest.nextPageUrl=t.href:l.nextPageUrl=t.href}t&&(this.currentFreTimestamp=u.feedContext&&u.feedContext.lastFreActionTimestamp)}else(0,N.vV)(p.bHU,"",void 0,{...p.bHU.pb,customMessage:"Card replacement fetch failure due to invalid feed response. User sees hide confirmation card instead of replacement article"});return this.isFetching=!1,null==u?void 0:u.cardMetadata}hasRemainingRiverSection(){return this.config.isWaterfallFeed?!!this.unrenderedRegionsData.find(e=>{let{region:t,waterfallSections:i}=e;return"river"===t&&(null==i?void 0:i.length)}):!!this.unrenderedRegionsData.find(e=>{let{region:t,sections:i}=e;return"river"===t&&(null==i?void 0:i.length)})}consumeUnrenderedFeedLayout(){if(this.disConnected&&this.config.enableGlobalMonitor)return;const e="InfopaneFullyRendered",t=this.isFirstRender,i=(0,f.ZF)();t?i.FirstSectionRenderStart=Math.round((0,f.gU)()):i.SecondSectionRenderStart=Math.round((0,f.gU)());(0,f.zq)().sectionRenderStart=Math.round((0,f.gU)()),this.isFirstRender=!1,this.regionKeys.forEach(async n=>{const{sections:a,waterfallSections:r}=this.unrenderedRegionsData.find(e=>{let{region:t}=e;return t===n})||{};if(a||r){if("widgets"===n&&this.config.enableWidgetsLayout3)this.consumeUnrenderedWaterfallFeedLayout(t,n,{waterfallKey:"widgetsWaterfall",cardCountKey:"widgetsCardCount",sectionIndexKey:"widgetsSectionIndex"},r);else if("hero"===n)if(this.config.enableHeroWaterfall)this.consumeUnrenderedWaterfallFeedLayout(t,n,{waterfallKey:"heroWaterfall",cardCountKey:"heroCardCount",sectionIndexKey:"heroSectionIndex"},r);else{var o,s;t&&(this.hero=[]);const e=null==a?void 0:a.shift();if(!e||null===(o=e.cards)||void 0===o||!o.length)return;const{cards:i,layoutTemplate:r}=e;if(this.config.enableGlobalMonitor){if(t){const e=this.getLayoutTemplate(r)??null;e&&(0,ci.Zw)(i,e,this.layout,this.ttvrRows,(0,v.CG)())}(0,ui.D8)(i,n)}null!==(s=i[0])&&void 0!==s&&s.subCards||(i[0].subCards=[]);const l=this.mapFeedData(i,{layoutTemplateName:r,region:n,parentTelemetryObject:this[Gi[n]]},this.config.enableLazyHeroFeedData);this.hero=[...this.hero,{feedData:l,templateId:r,cardMetadataList:i}]}else if("river"===n&&this.config.isWaterfallFeed)this.consumeUnrenderedWaterfallFeedLayout(t,n,{waterfallKey:"waterfall",cardCountKey:"riverCardCount",sectionIndexKey:"riverSectionIndex"},r);else{if("river"===n){let n=null==a?void 0:a.shift();if(!n)return;if(n.isTopSection&&this.config.enableTopSectionInRiver){if(this.foundTopSectionInRiver=!0,this.consumeUnrenderedGridViewFeedLayout({isFirstRenderThisTime:t,InfopaneFullyRenderedMarkName:e,pageTimings:i,section:n,sections:a},{regionKey:"river",cardCountKey:"riverCardCount"}),n=null==a?void 0:a.shift(),!n)return;return await this.consumeUnrenderedGridViewFeedLayout({isFirstRenderThisTime:!1,InfopaneFullyRenderedMarkName:e,pageTimings:i,section:n,sections:a},{regionKey:"river",cardCountKey:"riverCardCount"})}return await this.consumeUnrenderedGridViewFeedLayout({isFirstRenderThisTime:t,InfopaneFullyRenderedMarkName:e,pageTimings:i,section:n,sections:a},{regionKey:"river",cardCountKey:"riverCardCount"})}{const e=null==a?void 0:a.splice(0);if((0,jt.I)(e))return;const i=this[n],r=null==e?void 0:e.map(e=>{const{layoutTemplate:t,cards:i}=e;return{feedData:this.mapFeedData(i,{layoutTemplateName:t,region:n,parentTelemetryObject:this[Gi[n]]}),templateId:t,cardMetadataList:i,isResponsiveWidthFeed:this.config.enableResponsiveWidth,hasPlaceHolderAds:!0,baseCardSize:this.config.baseCardSize}});this[n]=t?r:[...i,...r]}}this.sectionIdx++}else"hero"===n&&2===this.requestType&&t&&(this.hero=[])})}separateAdCardsMetadata(e){const t=[],i=[];return e.forEach(e=>{let n=(0,q.$f)(e.type);(this.config.splitFirstSectionOnServerSide||this.config.rowsInSectionNonPrerender)&&(n=n&&!e.data),(n?t:i).push(e)}),[t,i]}validateTemplateFeedData(e,t,i){var n;t.cardCount&&e&&t.cardCount!==e.length&&(0,N.vV)(p.Ayc,"1s and layout template card count mismatch",void 0,{...p.Ayc.pb,cardCount1S:e.length,cardCountLayoutTemplate:t.cardCount,debugId:null===(n=e[0])||void 0===n?void 0:n.debugId,layoutTemplate:i});!this.config.enableFeed3Cards&&void 0!==i&&$t.ak.includes(i)&&(0,N.vV)(p.EgO,"Waterfall flights mismatch between WPO and client",void 0,{...p.EgO.pb,customMessage:`layoutTemplateName: ${i}`})}setInitialRowCount(e){this.cardExtTelemetryHelper.setInitialRowCount(e)}resetParameters(e,t){var i,n,a;const{cleanRiver:r,isXFeed:o,feedId:s,useProviderKey:l}=e||{};if(t||(t=this),!t)return;r&&(t.river=[],t.waterfall=[]),t.requestType=2,t.isStatic=!1,t.responseSource=void 0,t.fallbackFeed=void 0,t.publisherFallbackFeed=void 0,t.unrenderedRegionsData=[],t.backupUnrenderedRegionsData=[],t.lastResponse=void 0,t.isFirstRender=!0,t.hideStoryEntryPointMap={},t.sdCardHelper.clearSDCardList(),t.cardReplacementHelper.clearCache(),t.cardExtTelemetryHelper.reset(),t.riverSectionIndex=1,t.hasFullWidthFreFirstSection=!1,t.renderedWaterfallElements=[],t.pendingWaterfallRenderHandlers=[],t.requestedColCountForWaterfallFeed=void 0,t.masterCardMapWpoItems=new Map,t.masterLayoutCardList={river:Xi()},t.masterPlacementTracker={river:Yi()},t.placementTrackerRow=0,t.incompleteWaterfallRow=void 0,t.numWaterfallSectionsRendered=0,null===(i=t.waterfallRenderedHeightsMap)||void 0===i||i.clear(),t.lastPageOffsets=void 0,void 0!==o&&(t.isXFeed=o),void 0!==s&&(t.feedId=s),void 0!==l&&(t.useProviderKey=l),sn.initMonitors(t),null===(n=t.feedEventAggregator)||void 0===n||n.publish(Ot.KS.OnParametersReset,e??{});const{enableFilterResponse:d,riverSectionCardProviderConfig:c}=t.config;var u;(0,Lt.S)()&&d&&"following"===(null==c||null===(a=c.initialRequest)||void 0===a?void 0:a.feedName)&&(null===(u=t.followingExperienceManager)||void 0===u||u.hideFallbackFeed())}static initMonitors(e){if(e.config.enableGlobalMonitor){var t;const i=null!==(t=e.options)&&void 0!==t&&t.isWidget?o.ySv:e.experienceId,n=e.config.enableFirstSectionFlush?Wt.Be:v.wL+"Complete";e.config.enableWidgetsRegion?e.config.useDedicatedWidgetsManager||!e.isShared?i===o.dXe?(0,ci.se)(i,e.experienceTtvrCallback):(0,ci.DU)(i,n):((0,ci.se)(o.dXe,e.experienceTtvrCallback),(0,ci.DU)(o.HPc,n)):(0,ci.DU)(i,n),(0,ui.RE)(e.config.blankDetectTimeout)}(0,Mi.G)()}logAppErrorToEdgeAndCsTelemetry(e,t,i){Ii(e.id),(0,N.vV)(e,t,void 0,{...e.pb,propertyBag:i})}responseContainsCardsData(e){return!(!e||(0,jt.I)(e.sections)&&(0,jt.I)(e.regions))}extractFollowingFREData(e){var t;let i;this.isOverlayStampChecked||(this.isOverlayStampChecked=!0,this.config.overlayStampString&&!zt.vv.get(this.config.overlayStampString)&&(zt.vv.set(this.config.overlayStampString,!0),b.YT.addOrUpdateTmplProperty(this.config.overlayStampString,"1")));const n=Array.isArray(e)&&(null===(t=e[0])||void 0===t?void 0:t.cardMetadataList);return Array.isArray(n)&&(i=n.find(e=>"UserInterestTopicAndProvider"===e.type)),i}handleFeedLayoutElementRendered(e,t){this.renderedFeedLayoutElements&&e<this.renderedFeedLayoutElements.length?t(this.renderedFeedLayoutElements[e]):this.pendingFeedLayoutRenderHandlers[e]=t}handleWaterfallElementRendered(e,t){this.renderedWaterfallElements&&e&&e<this.renderedWaterfallElements.length?t(this.renderedWaterfallElements[e],e):this.pendingWaterfallRenderHandlers[e]=t}isLastResponsePresent(){return!!this.lastResponse}shouldTrackSocialBar(){var e;return!!(null!==(e=this.config)&&void 0!==e&&null!==(e=e.childExperienceReferencesWC)&&void 0!==e&&e.socialBarWC&&this.config.skipWaitAdToLoadSbInPrd&&(0,ai.EZ)())}commonAdjustFeedLayoutCardType(e,t){let i=e;return i===G.C.serendipityCard&&(i=G.C.trendingNowCard),i===G.C.infopaneCard&&t.enableResponsiveInfopaneMap&&(i=G.C.responsiveInfopaneCard),i}adjustFeedLayoutCardTypeWithTemplateName(e,t,i){let n=e;return"content-group-map"!==i&&"content-dense-group-map"!==i||(n=G.C.contentGroup),("super-app-three-cards"===i||"super-app-full-wide-carousel"===i&&this.config.isMsnMobile&&this.config.enableSuperInfopane)&&n===G.C.infopaneCard&&(n=G.C.contentGroup),n}adjustFeedLayoutCardTypeGrid(e,t,i,n){let a=t;const r=a===G.C.contentCard&&e.type===y.pL.Video||a===G.C.videoCard,o=r&&!this.config.enableFeed3VideoCards;return e.isFirstSectionCard&&r&&b.YT.addOrUpdateTmplProperty("wtchVideoRendered","1"),a===G.C.topStoriesCard&&"winWidgets"===Ge.T3.AppType&&(a=G.C.digestCard,e.feed=e.feed||{canonicalName:"topstories"}),i.enableFeed3Cards&&!o&&(a=(0,$t.Gw)(a,i.excludeFeed3AdCard)),a=this.adjustFeedLayoutCardTypeWithTemplateName(a,i,n),a=this.commonAdjustFeedLayoutCardType(a,i),a}adjustFeedLayoutCardTypeResponsive(e,t,i){let n=t;return i.enableFeed3Cards&&(n=(0,$t.Gw)(n,i.excludeFeed3AdCard)),n=this.commonAdjustFeedLayoutCardType(n,i),n}validateMappedFeedData(e,t,i,n){if(t.type!==y.pL.LocalNewsFeed&&t.type!==y.pL.ChannelFilterCard&&t.type!==y.pL.DynamicFilteredChannel)if(e){var a,r;const o=null===(a=e.defaultLayout)||void 0===a?void 0:a[0];!(0,c.Yd)(o)||null!=o&&o.childTemplateType&&null!==(r=this.cardTemplateMap)&&void 0!==r&&r[o.childTemplateType]||((0,N.vV)(p.IBt,"Not support card template type",void 0,{...p.IBt.pb,cardMetadata:t.type,layoutTemplateName:n,experience:this.experienceId,customMessage:`Error: feed card type ${i} with card type ${null==o?void 0:o.childTemplateType} can not be found in card template map`,debugId:t.debugId}),this.feedEventAggregator.publish(Ot.KS.OnCardMappingError,{cardMetadata:t}))}else(0,N.vV)(p.IBt,"Mapped Feed Data is empty",void 0,{...p.IBt.pb,cardMetadata:t.type,layoutTemplateName:n,experience:this.experienceId,customMessage:`Error: feed card type ${i} mapped result is empty`,debugId:t.debugId}),this.feedEventAggregator.publish(Ot.KS.OnCardMappingError,{cardMetadata:t})}cardMappingProcessing(e,t,i,n,a,r,o,s){try{var d,c;let s;null!==w.Rb&&void 0!==w.Rb&&null!==(d=w.Rb.CurrentFlightSet)&&void 0!==d&&d.has("prg-ad-rmauctype")||null==t||!t.cardMetadata||!(0,q.$f)(t.cardMetadata.type)||(t.cardMetadata.adAuctionType=l.T.oneServiceAd),null!==w.Rb&&void 0!==w.Rb&&null!==(c=w.Rb.CurrentFlightSet)&&void 0!==c&&c.has("prg-ad-rmauctype")||null==t||!t.cardMetadata||!(0,q.$f)(t.cardMetadata.type)||(t.cardMetadata.adAuctionType=l.T.oneServiceAd);const h=i===G.C.shoppingRiverCard&&a.enableShoppingRiverReportAds;var u;if(a.useSharedTelemetry&&i in se.qq&&!h)s=(0,se.BQ)(t,i);else s=null===(u=this.cardDataMapperMap)||void 0===u||null===(u=u[i])||void 0===u?void 0:u.getFeedDataForCard(t);if(this.validateMappedFeedData(s,e,i,o),this.feedEventAggregator.publish(Ot.KS.OnCardMappingProcessing,{mappedFeedData:s}),s&&r(s,e,n),s&&this.config.enableThumbnailCSAT){const e=this.cardTemplateMap[s.defaultLayout[0].childTemplateType||""];_t.V.triggerCFDisplayIfConditionMet(s,e)}}catch(t){(0,N.vV)(p.jwY,"Mapped Feed Data not Generated",void 0,{...p.jwY.pb,cardMetadataType:e.type,layoutTemplateName:o,experience:this.experienceId,stack:`${t&&t.stack}`,customMessage:`Error: ${t&&t.message}`,debugId:e.debugId,isWaterfallFeed:this.config.isWaterfallFeed,feedResponseLayout3Debug:JSON.stringify(this.feedResponseLayout3Debug.slice(0,15)),...s}),this.feedEventAggregator.publish(Ot.KS.OnCardMappingError,{cardMetadata:e})}}getBasicCardArgsForMapping(e,t,i,n,r,o,s,l){var d,c,u;const h=Object.assign({},this.config,null===(d=this.config)||void 0===d?void 0:d[t]),v={feedName:this.feedName,cardMetadata:e,parentTelemetryObject:n,disableActionMenuOnAds:this.disableActionMenuOnAds,enableRotateOnlyOnce:this.enableRotateOnlyOnce,openLinksInNewTab:h.openLinksInNewTab??!0,openLinksInCurrentTab:h.openLinksInCurrentTab,cardActionBitMask:h.cardActionBitMask??li.LF,isAnaheimDesign:h.isAnaheimDesign??!0,goToPersonalizeCallback:this.navigateToPersonalizeCallback,goToPersonalizeSettingsCallback:this.navigateToPersonalizeSetting,turnOffWidgetsRegionCallback:this.turnOffWidgetsRegion,manageWidgetsRegionCallback:this.manageWidgetsRegion,initCardAction:this.initCardAction,cardActionDismissCallback:(0,Ft.i)(e,i)?this.cardActionDismissCallback:void 0,cardActionClickHandler:this.cardActionClickHandler,shareActionHandler:this.shareActionHandler,getReplacementCardsCallback:this.getReplacementCardsCallback,reactionCallback:this.reactionCallback,visualReadinessCallback:s??this.getVisualReadinessCallback(i,e,t),localizedStrings:h.localizedStrings,configOptions:h,stockImageData:h.stockImageData,enableRichSocialReaction:this.feedSource!==Ot.nn.Work&&h.enableRichSocialReactions,isAdFeedbackV1Enabled:Boolean(h.adFeedbackV1Enabled),enableHotListInDigestCard:Boolean(h.enableHotListInDigestCard),enableTopStoriesInHotListCard:Boolean(h.enableTopStoriesInHotListCard),handleAdFeedbackSubmit:(0,a.J6)().ReportAd,useInlineSvgIcons:!0,refreshFeedCallback:l??this.callRefreshRegionsData,refreshSDCardSection:()=>{this.updateCacheAndRefreshRegionsData("widgets"===t,i)},sdCardActionClickHandler:this.sdCardActionClickHandler,hideCardCallback:()=>{this.updateCacheAndRefreshRegionsData("widgets"===t,i)},dismissSDCardMenuCallback:this.dismissSDCardMenu,isClarityEnabled:h.isClarityEnabled,isIASEnabled:h.isIASEnabled,hideStoryEntryPointMap:this.hideStoryEntryPointMap,isBlurred:h.isBlurred,prevCardCount:r,adTimerInMS:h.adTimerInMS,cardSlot:o,isWidgetRegion:"widgets"===t,enableAdSponsoredText:h.enableAdSponsoredText},f=null===(c=v.cardMetadata.feedLayoutCardType)||void 0===c?void 0:c.indexOf("-"),g=f&&(null===(u=v.cardMetadata.feedLayoutCardType)||void 0===u?void 0:u.substring(0,f));if(on&&on.length>0&&"river"==t&&g&&this.config.enableWidgetsRegion)for(let e=0;e<on.length;e++){var m;null!==(m=on[e])&&void 0!==m&&null!==(m=m.instanceId.toLowerCase())&&void 0!==m&&m.includes(g)&&(this.turnOffWidgetsRegion(),window.dispatchEvent(new CustomEvent("noWidgetsData",{detail:!1})),(0,N.vV)(p.KPK,"River SDCard has conflict with widgetsSDCard.",void 0,{...p.KPK.pb,experience:this.experienceId,customMessage:"River has conflict with Widgets region. River Card: "+v.cardMetadata.feedLayoutCardType+" Widgets Card List: "+on}))}return v}async consumeUnrenderedGridViewFeedLayout(e,t){const{isFirstRenderThisTime:i,InfopaneFullyRenderedMarkName:n,pageTimings:a,section:r,sections:o}=e,{regionKey:s,cardCountKey:l}=t;if(!r||!o)return;let{cards:d,layoutTemplate:c}=r;if(this.config.enableGlobalMonitor){if(i){const e=this.getLayoutTemplate(c)??null;if(e){const t=this.config.enableTimeoutForWinhpGm?this.getTimeoutForWinhpGm():1e4;(0,ci.Zw)(d,e,this.layout,this.ttvrRows,(0,v.CG)(),t)}}if(this.shouldServeAdsWhenSectionInView(i)){const[e,t]=this.separateAdCardsMetadata(d),i=this[s].length;this.adsServingDeferredMetadata[i]=e,(0,ui.D8)(t,s)}else(0,ui.D8)(d,s)}d=this.feedBadgeProcessor.processFeed(d);const u=d.findIndex(hi.MD)>-1||d.findIndex(hi.ib)>-1;if(i||this.hasFullWidthFreFirstSection&&u){var g;performance.mark("consumeUnrenderedLayout_start");const e=performance.now();i&&(this[s]=[],this[l]=0);const t=!this.isFirstRender&&this.hasFullWidthFreFirstSection,a=e=>e.type===y.pL.TopicFeed,r=d.findIndex(a)>-1,{delayLoadSuInfConCards:M,enableSuperInfopane:$,useMobile:F}=this.config,I=this.config.enableFilterResponse||d.findIndex(hi.Pn)>-1||this.channelFilterFlightMismatch;if(u||r&&M){var m;const i=d.map(e=>{if(((0,hi.MD)(e)||a(e))&&F&&M&&$){var t;const i=e.subCards;return{...e,subCards:null==e||null===(t=e.subCards)||void 0===t?void 0:t.slice(0,1),fullSubItems:i}}if((0,hi.MD)(e)){var i;const t=null===(i=e.subItems??e.subCards)||void 0===i?void 0:i.map(e=>({...e,subItems:e.subItems??e.subCards}));return{...e,subItems:[t[0]],fullSubItems:t}}return{...e,isFirstSectionCard:!0}}),r={feedData:this.mapFeedData(i,{layoutTemplateName:c,region:s,parentTelemetryObject:this[Gi[s]]}),templateId:c,cardMetadataList:i,isResponsiveWidthFeed:this.config.enableResponsiveWidth,hasPlaceHolderAds:!0,baseCardSize:this.config.baseCardSize};b.YT.addOrUpdateTmplProperty("CardsInFirstSection",String(null==r||null===(m=r.cardMetadataList)||void 0===m?void 0:m.length)),this.config.enableGlobalMonitor||this.ttvrHelper.track(r.feedData[this.layout],i,this.ttvrSpaceTotal),this[s]=t?[this[s][0],r]:[r];const o=(0,f.ZF)();if(o.FirstSectionRenderEnd=Math.round((0,f.gU)()),!(0,Lt.S)())return;var C,T;if(this.vpReadyHelper&&this.vpReadyHelper.trackVpMarker(n),this.vpReadyHelper&&this.vpReadyHelper.track(r,this.shouldTrackSocialBar()),window.isSSRCompleted){if(await(null===(C=xt.gn.get("cs-responsive-infopane"))||void 0===C?void 0:C.topDownHydrateComplete.getResultAsync()),F)await(null===(T=xt.gn.get("select-carousel"))||void 0===T?void 0:T.topDownHydrateComplete.getResultAsync())}else await(0,h.Qc)();const l=t?this[s][1]:this[s][0],{cardMetadataList:u=[],hasPlaceHolderAds:p=!0}=l??{},g=u.map(e=>((0,hi.MD)(e)&&e.fullSubItems&&(e.subItems=e.fullSubItems,F&&(e.subCards=e.fullSubItems),delete e.fullSubItems),a(e)&&e.fullSubItems&&(e.subCards=e.fullSubItems,delete e.fullSubItems),e)),y={feedData:this.mapFeedData(g,{layoutTemplateName:c,region:s,parentTelemetryObject:this[Gi[s]]}),templateId:c,cardMetadataList:g,isResponsiveWidthFeed:this.config.enableResponsiveWidth,hasPlaceHolderAds:p,baseCardSize:this.config.baseCardSize};this[s]=t?[this[s][0],y,...this[s].slice(2)]:[y,...this[s].slice(1)],(0,v.tD)("InfopaneDataReady",performance.now()),this.weatherHelper.hasWeatherCard(g)&&this.weatherHelper.register(),requestAnimationFrame(()=>{(0,ei.CI)(n),(0,v.tD)(n,performance.now())}),performance.mark("consumeUnrenderedLayout_end"),performance.measure("consumeUnrenderedLayout","consumeUnrenderedLayout_start","consumeUnrenderedLayout_end"),o.consumeUnrenderedLayout=Math.round(performance.now()-e)}else{const e={feedData:this.mapFeedData(d,{layoutTemplateName:c,region:s,parentTelemetryObject:this[Gi[s]]}),templateId:c,cardMetadataList:d,isResponsiveWidthFeed:this.config.enableResponsiveWidth,hasPlaceHolderAds:!0,baseCardSize:this.config.baseCardSize};this.config.enableGlobalMonitor||this.ttvrHelper.track(e.feedData[this.layout],d,this.ttvrSpaceTotal),this.vpReadyHelper&&this.vpReadyHelper.track(e,this.shouldTrackSocialBar()),this[s]=[e]}if(!u&&this.config.enableInfopaneDialtone){var S,k;this.infopaneInSecondSection&&(null==o?void 0:o.length)&&((null===(S=o[0])||void 0===S||null===(S=S.cards)||void 0===S?void 0:S.findIndex(hi.MD))>-1||(null===(k=o[0])||void 0===k||null===(k=k.cards)||void 0===k?void 0:k.findIndex(hi.ib))>-1)||(0,N.vV)(p.cwh,"",void 0,{...p.t9r.pb,customMessage:`FeedType: ${this.experienceId} has missing or invalid infopane. region: ${s}`,isPrerender:null===w.Rb||void 0===w.Rb?void 0:w.Rb.IsPrerender})}if(!I&&"following"===(null===(g=this.config.riverSectionCardProviderConfig)||void 0===g||null===(g=g.initialRequest)||void 0===g?void 0:g.feedName)){const e=zt.vv.get("OneServiceResponseDebugId");(0,N.vV)(p.Db6,"",void 0,{...p.t9r.pb,customMessage:`FeedType: ${this.experienceId} has missing or invalid channel carousel.`,isPrerender:null===w.Rb||void 0===w.Rb?void 0:w.Rb.IsPrerender,debugId:e})}}else{const e={feedData:this.mapFeedData(d,{layoutTemplateName:c,region:s,parentTelemetryObject:this[Gi[s]],prevCardCount:this[l]}),templateId:c,cardMetadataList:d,isResponsiveWidthFeed:this.config.enableResponsiveWidth,hasPlaceHolderAds:!0,baseCardSize:this.config.baseCardSize,prevCardCount:this[l]};this.config.enableGlobalMonitor||this.ttvrHelper.track(e.feedData[this.layout],d,this.ttvrSpaceTotal),a.SecondSectionRenderEnd=Math.round((0,f.gU)()),this[s]=[...this[s],e]}this[l]+=r.cards.length,this.adsSectionIndex++,this.sectionIdx++}async consumeUnrenderedWaterfallFeedLayout(e,t,i,n){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];performance.mark("consumeUnrenderedLayout_start");const{waterfallKey:r,cardCountKey:o,sectionIndexKey:s}=i,l="InfopaneFullyRendered",d=null==n?void 0:n.shift(),c=null==d?void 0:d.columns,u=null==c?void 0:c.some(e=>e.rowRendering);if(!c)return null;const g=(0,f.ZF)(),m={c5:[],c4:[],c3:[],c2:[],c1:[]},C=this.getShouldResetOrder(c,r),T=[];if(c.forEach((e,t)=>{const i=C?0:this.getPreCardOrder(this[r],t);let n=1,a=e.cards.map((e,a)=>{let r=i+a+n;return n="halfu"===(null==e?void 0:e.subType)?.5:1,r="halfu"===e.subType?r:Math.floor(r),{...e,column:t+1,order:r}});a=this.feedBadgeProcessor.processFeed(a),T.push(...a)}),this.config.enableGlobalMonitor&&!a)if(e&&(0,ci.hA)(d,this.ttvrHeight,this.config.baseCardSize||Ji,(0,v.CG)(),this.getInfopaneSize()),this.shouldServeAdsWhenSectionInView(e)){const[e,i]=this.separateAdCardsMetadata(T),n=this[t].length;this.adsServingDeferredMetadata[n]=e,(0,ui.D8)(i,t)}else(0,ui.D8)(T,t);if(e){var S;this[t]=[],this[o]=0,this[s]=1;const e=e=>e.type===y.pL.TopicFeed,{delayLoadSuInfConCards:i,enableSuperInfopane:n}=this.config,a=[];let d=!1,C=this.config.baseCardSize??Ji;const T=this.adRiverRegionName;c.forEach((r,o)=>{const s=r.cards;o+=1;let l=0;const c=s.findIndex(hi.MD)>-1||s.findIndex(hi.ib)>-1,u=s.findIndex(e)>-1;if(c||u&&i){d=!0;const c=s.map(t=>{if(l++,(0,hi.MD)(t)){var a;const e=null===(a=t.subItems??t.subCards)||void 0===a?void 0:a.map(e=>({...e,subItems:e.subItems??e.subCards}));return C=t.height||C,{...t,subItems:[e[0]],fullSubItems:e,column:o,order:l}}if(e(t)&&i&&n){var r;const e=t.subCards;return{...t,subCards:null==t||null===(r=t.subCards)||void 0===r?void 0:r.slice(0,1),fullSubItems:e,column:o,order:l}}return{...t,column:o,order:l,regionType:T,isFirstSectionCard:!0}}),u=this.mapWaterfallFeedData(c,{region:t,parentTelemetryObject:this[Gi[t]]}),h=this.convertColumnToColumnString(r.column);void 0!==h&&(m[h]=u.defaultLayout),a.push(c)}else{!d||2!==o||this.getInfopaneSize()!==Nt.uE._2x_2y&&this.getInfopaneSize()!==Nt.uE._2c||(l=1);const e=s.map(e=>(l++,{...e,column:o,order:l,regionType:T,isFirstSectionCard:!0})),i=this.mapWaterfallFeedData(e,{region:t,parentTelemetryObject:this[Gi[t]]}),n=this.convertColumnToColumnString(r.column);void 0!==n&&(m[n]=i.defaultLayout),a.push(e)}});const I=(0,vi.fe)(c,this.config.baseCardSize||Ji);this.infopaneWithColSpan||!d||this.getInfopaneSize()!==Nt.uE._2x_2y&&this.getInfopaneSize()!==Nt.uE._2c||(I[1]+=C);const x=(0,vi.ip)(I),R=this.adOffsets(c,this.config.baseCardSize||Ji),P=(0,vi.hq)(R,I),A={expectedColumns:Ki[this.layout],skipSectionTracker:!1,colOffset:x,rowRendering:u},D={feedData:m,templateId:"",cardMetadataList:a.flat(),isResponsiveWidthFeed:this.config.enableResponsiveWidth,hasPlaceHolderAds:!0,baseCardSize:this.config.baseCardSize,waterfall:this.formatToWaterfallData(m,this[t].length,A),waterfallFeedColumnsOffset:x,waterfallFeedColumnsOffsetForAds:P};this.config.enableWidgetsLayout3&&"widgetsWaterfall"===r&&(D.waterfall.id=r);const O=null===(S=D.cardMetadataList)||void 0===S?void 0:S.filter(e=>"placeholder"!=e.type);if(b.YT.addOrUpdateTmplProperty("CardsInFirstSection",String(null==O?void 0:O.length)),this.vpReadyHelper&&this.vpReadyHelper.track(D,this.shouldTrackSocialBar()),this[t]=[D],this[r]=[D.waterfall],g.FirstSectionRenderEnd=Math.round((0,f.gU)()),d){if(!(0,Lt.S)())return;var k;if(this.vpReadyHelper&&this.vpReadyHelper.trackVpMarker(l),window.isSSRCompleted)await(null===(k=xt.gn.get("cs-responsive-infopane"))||void 0===k?void 0:k.topDownHydrateComplete.getResultAsync());else this.isWaterfallFeedResizing||await(0,h.Qc)();const{cardMetadataList:i=[],hasPlaceHolderAds:n=!0}=this[t][0]??{},a=i.map(t=>((0,hi.MD)(t)&&t.fullSubItems&&(t.subItems=t.fullSubItems,delete t.fullSubItems),e(t)&&t.fullSubItems&&(t.subCards=t.fullSubItems,delete t.fullSubItems),t)),o=this.mapWaterfallFeedData(a,{region:t,parentTelemetryObject:this[Gi[t]]}),s={expectedColumns:Ki[this.layout],skipSectionTracker:!0,rowRendering:u},d={feedData:o,cardMetadataList:a,isResponsiveWidthFeed:this.config.enableResponsiveWidth,hasPlaceHolderAds:n,baseCardSize:this.config.baseCardSize,waterfall:this.formatToWaterfallData(m,this[t].length,s),waterfallFeedColumnsOffset:x,waterfallFeedColumnsOffsetForAds:P};if(this[t]=[d,...this[t].slice(1)],this.isInfopaneInWidecard(u)){var M;const e=null===(M=this[r][0].wideCard)||void 0===M?void 0:M.childTemplateType,t=null==o?void 0:o.defaultLayout.findIndex(t=>(null==t?void 0:t.childTemplateType)===e);if(t>-1){const e=o.defaultLayout.splice(t,1)[0],i={...this[r][0],wideCard:e,wideCardSize:null==e?void 0:e.colSpan};this[r].splice(0,1,i)}}else{const e=null==o?void 0:o.defaultLayout.find(e=>(0,Hi.rp)(null==e?void 0:e.childTemplateType));if(e){var $;const t=null===($=this[r][0].columns)||void 0===$||null===($=$[0])||void 0===$?void 0:$.findIndex(t=>t.childTemplateType===e.childTemplateType);var F;if(t>-1)null===(F=this[r][0].columns)||void 0===F||null===(F=F[0])||void 0===F||F.splice(t,1,e)}}(0,v.tD)("InfopaneDataReady",performance.now()),this.weatherHelper.hasWeatherCard(a)&&this.weatherHelper.register(),requestAnimationFrame(()=>{(0,ei.CI)(l),(0,v.tD)(l,performance.now())})}!d&&this.config.enableInfopaneDialtone&&O.length>0&&"hero"!==t&&(0,Lt.S)()&&(0,N.vV)(p.rZC,"",void 0,{...p.t9r.pb,customMessage:`FeedType: Waterfall has missing or invalid infopane. region: ${t}`,isPrerender:null===w.Rb||void 0===w.Rb?void 0:w.Rb.IsPrerender,isFirstRender:this.isFirstRender,currentSectionCount:this.waterfall.length})}else{var I;let e=0,i=this.config.baseCardSize||Ji;c.forEach((n,a)=>{const s=this.getPreCardOrder(this[r],a);let l=1;const d=n.cards.map((t,n)=>{e=t.colSpan||0,i=t.height||this.config.baseCardSize||Ji;let r=s+n+l;return l="halfu"===(null==t?void 0:t.subType)?.5:1,r="halfu"===t.subType?r:Math.floor(r),{...t,column:a+1,order:r}}),c=this.mapWaterfallFeedData(d,{region:t,parentTelemetryObject:this[Gi[t]],prevCardCount:this[o]}),u=this.convertColumnToColumnString(n.column);void 0!==u&&(m[u]=c.defaultLayout)});const n=(0,vi.fe)(c,this.config.baseCardSize||Ji);if(e)for(let e=1;e<n.length;e++)n[e]+=i;const a=(0,vi.ip)(n,this[t][this[s]-1].waterfallFeedColumnsOffset);this.enableHalfUCards&&-12===(null==a||null===(I=a.c3)||void 0===I?void 0:I.offset)&&(a.c3.offset=0);const l=this.adOffsets(c,this.config.baseCardSize||Ji),d=(0,vi.hq)(l,n,this[t][this[s]-1].waterfallFeedColumnsOffsetForAds),h={expectedColumns:Ki[this.layout],skipSectionTracker:!1,colOffset:a,rowRendering:u},v={feedData:m,templateId:"",cardMetadataList:T,isResponsiveWidthFeed:this.config.enableResponsiveWidth,hasPlaceHolderAds:!0,baseCardSize:this.config.baseCardSize,waterfall:this.formatToWaterfallData(m,this[t].length,h),waterfallFeedColumnsOffset:a,waterfallFeedColumnsOffsetForAds:d};this.config.enableWidgetsLayout3&&"widgetsWaterfall"===r&&(v.waterfall.id=r),g.SecondSectionRenderEnd=Math.round((0,f.gU)()),this[r].push(v.waterfall),this[t]=[...this[t],v],this[s]++}this.numWaterfallSectionsRendered++,this[o]+=T.length,performance.mark("consumeUnrenderedLayout_end"),performance.measure("consumeUnrenderedLayout","consumeUnrenderedLayout_start","consumeUnrenderedLayout_end"),g.consumeUnrenderedLayout=performance.getEntriesByName("consumeUnrenderedLayout")}convertColumnToColumnString(e){const t={1:Pt.j1.c1,2:Pt.j1.c2,3:Pt.j1.c3,4:Pt.j1.c4,5:Pt.j1.c5};if(void 0!==e)return t[e]??void 0}getCardsPerSection(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.config.rowsInSectionNonPrerender&&!w.Rb.IsPrerender)return this.config.rowsInSectionNonPrerender;let i=this.rowsToRenderPerLayout[this.layout];const n=this.customWaterfallSections;return e||t||!n.length||(i=n[n.length-1][Ki[this.layout]-1],i)?i:this.rowsToRenderPerLayout[this.layout]}getInfopaneSize(){return"C1"===this.layout?Nt.uE._1x_2y:Nt.uE._2x_2y}getColSpanCardSize(e){switch(e){case 1:default:return Nt.uE._1x_2y;case 2:return Nt.uE._2x_2y;case 3:return Nt.uE._3x_2y;case 4:return Nt.uE._4x_2y;case 5:return Nt.uE._5x_2y}}simulateCardSlot(e,t){const i="slot"+e.toString(),{cardHeight:n,colSpan:a,useFeed2CardSize:r,isHalfUCard:o}=t;let s=Et.MN[n]||Et.MN[304];return a&&(s=this.getColSpanCardSize(a)),r&&s===Nt.uE._1u&&(s=Nt.uE._1x_2y),o&&(s=Nt.uE._05u),{grid_area:i,layouts:{C1:s}}}ingestUnrenderedWaterfallSection(e,t,i,n){void 0!==i&&t.flat().forEach(e=>{e.cards.forEach(e=>{e&&(e.traceIdIndex=i)})});const a=this.unrenderedRegionsData.find(t=>t.region===e);if(null!=a&&a.waterfallSections){const e=t.map(e=>({columns:e}));a.waterfallSections=a.waterfallSections.concat(e)}else{var r;const a=t.map(e=>({columns:e}));this.unrenderedRegionsData.push({region:e,waterfallSections:a}),this.feedResponseLayout3Debug.push({traceIdIndex:i,debugId:n,length:null==a||null===(r=a[0])||void 0===r||null===(r=r.columns)||void 0===r?void 0:r.length,type:"waterfallIngest"})}const o=[];t.forEach(e=>{o.push(...e.flat())}),this.sdCardHelper.addSDCard(o),this.config.proactiveRenderingWhenIdle&&(!this.config.proactiveFasterNonPrerender||null!==w.Rb&&void 0!==w.Rb&&w.Rb.IsPrerender?nn(this.config.proactiveRenderDelay).then(this.proactivelyRenderRiverWhenIdle):(0,v.dT)().then(this.proactivelyRenderRiverWhenIdle))}convertWaterfallFallback(e,t,i){const n=Array.from({length:t},(e,t)=>({column:t+1,cards:[],layoutTemplate:""}));let a=["ColumnBasedLayout"];null==i&&(a=null==e?void 0:e.map(e=>null==e?void 0:e.layoutTemplate)),(0,N.vV)(p.khp,"Received column count doesn't match feed columns",void 0,{...p.khp.pb,customMessage:`feed: ${this.layout}, WPO: ${i}, ViewFeed: ${this.experienceId}, Templates: ${a}, Statics: ${this.isStatic}, responseSource: ${this.responseSource}`});let r=0;return e.forEach(e=>{e.cards.forEach(e=>{n[r].cards.push(e),e.type===y.pL.Infopane&&(e.id||"").indexOf("topstories")<0&&++r,++r,r>=t&&(r=0)})}),n}generateIntraFeedBannerAdCard(e){const t={id:"display-ad-banner",type:"DisplayAdBanner",configInstanceSrc:"waterfall",instanceId:"banner2",colSpan:e};return Array.from({length:e}).map((e,i)=>({column:i+1,cards:[0===i?t:{type:"placeholder"}],newFullSection:!0,rowRendering:!0}))}divideWaterfallResponse(e,t,i,n){const a=performance.now();performance.mark("FM.DivideResponse.start");const r=(0,fi.A)(e),{requestedColumnCount:o,appendCards:s,isResizing:l,skipInitialCheck:d,regionKey:c,firstRequest:u,isRefresh:h}=t,v=this.getCardsPerSection(u,l);if(!d&&r.some(e=>e.dataTemplate||e.layoutTemplate||0===e.cards.length))return[e];try{let e;var g;if(this.receivedCardCount=0===i?0:this.receivedCardCount,s&&(this.config.enableWpoAdRank&&(this.addLargestWpoAdRankToResponse(r),this.updateLargestWpoAdRankAllColums(r),this.updateLargestWpoAdRankPerWpoResponse(r)),this.storeWaterfallResponse(c,r)),this.rebaseAdRegionIndex(c),l)e=(null===(g=this.masterLayoutCardList[c])||void 0===g?void 0:g[this.layout])||[];else e=(r[0].columnLayoutList||[])[o-1];const d=this.parseViewableSection(e,v,t,i,n);if(this.config.forceInjectAdBanner&&!this.config.enableExtraDisplayAds){var m;const e=2,t=u||h?0:(null===(m=this.waterfall)||void 0===m?void 0:m.length)??0;t<e&&d.length>=e-t&&d.splice(e-t,0,this.generateIntraFeedBannerAdCard(o))}if(this.config.forceInjectAdBanner&&this.config.enableExtraDisplayAds){const e=d.length,t=Math.floor(e/2);let i=this.lastBannerInjectedBeforeEnd?1:2;for(let e=0;e<t;e++)i<d.length?(d.splice(i,0,this.generateIntraFeedBannerAdCard(o)),this.lastBannerInjectedBeforeEnd=!0):(d.push(this.generateIntraFeedBannerAdCard(o)),this.lastBannerInjectedBeforeEnd=!1),i+=3}this.config.forceInsertDisplayAdCard&&(u||h)&&d.length>=1&&this.forceReplaceTopRightCardToDisplayAd(d[0]),this.validateNewSections(d,t),this.feedEventAggregator.publish(Ot.KS.UpdateAdIndexes,{newSubSections:d});const p=(0,f.ZF)();return void 0===p.FirstDividWaterfallResponse&&(p.FirstDividWaterfallResponse=Math.round(performance.now()-a)),performance.mark("FM.DivideResponse.end"),performance.measure("FM.DivideResponse","FM.DivideResponse.start","FM.DivideResponse.end"),d}catch(a){const r=e=>{try{return e.map(e=>{var t,i;return{...e,cards:null===(t=e.cards)||void 0===t?void 0:t.map(e=>({id:e.wpoId,type:e.type})),columnLayoutList:null===(i=e.columnLayoutList)||void 0===i?void 0:i.map(e=>e.map(e=>({...e,cards:e.cards.map(e=>({id:e.wpoId}))})))}})}catch(t){return e}},o=8192;return(0,N.vV)(p.AX3,"Error when dividing the Waterfall response into sections",`Cards per Section: ${v} in layout ${this.layout}`,{...p.AX3.pb,traceIdIndex:i,debugId:n,err:a,errString:JSON.stringify(a),stack:null==a?void 0:a.stack,originalSection:JSON.stringify(r(e)).substring(0,o),customSection:this.config.customWaterfallSections,...t}),[e]}}storeToPlacementTracker(e,t){}rebaseAdRegionIndex(e){}updateLargestWpoAdRankAllColums(e){}updateLargestWpoAdRankPerWpoResponse(e){}addLargestWpoAdRankToResponse(e){}storeWaterfallResponse(e,t){t.forEach(t=>{for(const i of(null==t?void 0:t.cards)||[])this.masterCardMapWpoItems.set(`${e}_wfcard${i.wpoId}`,i),"infopane"===i.type&&(this.infopaneWpoIdKey=`${e}_wfcard${i.wpoId}`),this.storeToPlacementTracker(i,e);for(let i=0;i<((null==t?void 0:t.columnLayoutList)||[]).length;i++){const n=`C${i+1}`,a=null!=t&&t.columnLayoutList?t.columnLayoutList[i]:[{cards:[]}];this.masterLayoutCardList[e]||(this.masterLayoutCardList[e]=Xi());const r=this.masterLayoutCardList[e];0===r[n][0].cards.length?this.config.avoidCloneDeep?r[n]=a.map(e=>({cards:[...e.cards||[]]})):r[n]=a:a.forEach((e,t)=>{r[n][t].cards=r[n][t].cards.concat(e.cards)})}})}getCardOrderofDom(e){const{order:t,column:i}=e;return 1===t&&1===i?1:t&&t>0&&i&&i>0?(t-1)*Ki[this.layout]+(i-1):3e3}getCardHeight(e){var t;return null===(t=this.config)||void 0===t||!t.enableDynamicWaterfall||(null==e?void 0:e.feedLayoutCardType)!==G.C.nativeAdCard&&(null==e?void 0:e.feedLayoutCardType)!==G.C.responsiveAdCard?e.height??(this.config.baseCardSize||Ji):Hi.MG}isFeedTopDownHydrationCompleteOrTimeout(){var e;if(null!==(e=xt.gn.get(this.feedElementTagName))&&void 0!==e&&e.topDownHydrateComplete.wasSet())return!0;const t=performance.getEntriesByName(`${this.feedElementTagName}:hydration.selfHydrationComplete`)[0];return!!t&&(0,ti.C)(performance.now())-t.startTime>this.feedTopDownHydrationTimeout}handleHideWidgetsAction(e,t){if(!(this.config.enableWidgetsRegion&&(0,Lt.S)()&&e&&t))return;const i=(0,Jt.Lg)().getObject(s.W)||[],n=new Set(i),a=this.sdCardTypeToCardNameMapping.get(t);a&&(window.dispatchEvent(new CustomEvent("updateWidgetsToggles",{detail:a})),this.shouldSendWidgetMismatchErrorOnDismiss=!0,n.delete(a),(0,Jt.Lg)().setObject(s.W,Array.from(n)))}validateAndLogWidgets(e){b.YT.addOrUpdateTmplProperty("widgetsCards",e.toString());const t=(0,Lt.S)()&&(0,Jt.Lg)().getObject(s.W)||[];this.shouldSendWidgetMismatchErrorOnDismiss&&t.length&&"off"!==this.feedDisplaySetting&&e.length-t.length<0&&(this.shouldSendWidgetMismatchErrorOnDismiss=!1,(0,N.vV)(p.Cpl,"Hidden widgets and widgets response expected lengths do not match.",void 0,{...p.Cpl.pb,experience:this.experienceId,customMessage:`Widget cards present: ${e.toString()}. Widgets expected on this page: ${t.toString()}`})),(!t.length||e.length-t.length>0)&&(0,Jt.Lg)().setObject(s.W,e)}}(0,n.Cg)([Pi.sH],sn.prototype,"heroTelemetry",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"widgetsTelemetry",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"riverTelemetry",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"RailTelemetry",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"overlayTelemetry",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"rightrailTelemetry",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"bannerTelemetry",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"backupTelemetry",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"coachmarkTelemetry",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"headerTelemetry",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"notificationTelemetry",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"loadingPlaceholderTelemetry",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"river",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"triver",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"hero",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"widgets",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"widgetsWaterfall",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"railWaterfall",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"foundTopSectionInRiver",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"waterfall",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"heroWaterfall",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"riverPlaceholderData",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"overlay",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"rightrail",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"Rail",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"rail",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"banner",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"backup",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"coachmark",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"header",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"notification",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"layout",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"sdCardMenuProps",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"sdCardMenuOpen",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"userContext",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"fallbackFeed",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"publisherFallbackFeed",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"isUpdateRegionsDataLoading",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"showFREConfirmation",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"hasCardsInLastResponse",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"shouldReplayUpdateLayout",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"isInsufficientResponse",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"layout3InDiscover",void 0),(0,n.Cg)([Pi.sH],sn.prototype,"trackFeedGaps",void 0)},26020:function(e,t,i){i.d(t,{g:function(){return r}});var n=i(91488),a=i(19608);const r={getFeedDataForCard:e=>function(e){var t;const{configOptions:i,parentTelemetryObject:n,cardMetadata:r,refreshFeedCallback:o,cardActionClickHandler:s}=e,l=i&&i.childExperienceReferencesWC?i.childExperienceReferencesWC.followingFreFullWidth:i,d=r&&r.subCards,c={id:"followingFreInlineCard",childTemplateType:"following-fre-inline-card",parentTelemetryObject:n,followingFreInlineCardConfigInfo:l,interestsData:d,enableCard:d&&d.length&&d.some(e=>e.subCards&&e.subCards.length),refreshFeedCallback:o,cardActionClickHandler:s};return(0,a.bw)({id:"followingFreInlineCard",experienceType:null==l||null===(t=l.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},c)}(e),viewTemplate:n.q}},28076:function(e,t,i){i.d(t,{G:function(){return s}});var n=i(36316),a=i(93468),r=i(65022),o=i(19608);const s={getFeedDataForCard:e=>function(e){try{var t;const{configOptions:i,parentTelemetryObject:n,cardMetadata:a,refreshSDCardSection:r,goToPersonalizeSettingsCallback:s}=e,l=i&&i,d={id:"marketplace",childTemplateType:"marketplace-card",parentTelemetryObject:n,marketplaceCardConfigInfo:l,marketplaceData:a.data,refreshFeed:r,goToPersonalizeSettingsCallback:s};return(0,o.bw)({id:"marketplace",experienceType:null==l||null===(t=l.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},d)}catch(e){(0,a.c_)(e,r.f12,"Error in Marketplace Mapper")}}(e),viewTemplate:n.k}},28746:function(e,t){t.A='<svg width="11" height="12" viewBox="0 0 11 12" fill="none"><path d="M10.64 5.9v.7h-4.9v4.9h-.7V6.6H.14v-.7h4.9V1h.7v4.9h4.9Z" stroke="#000" stroke-opacity=".83" stroke-width=".2"/></svg>'},28941:function(e,t,i){i.d(t,{M:function(){return r}});var n=i(96950),a=i(11622);const r=n.qy`
    ${e=>(0,a.yN)(e.configInfo,{attributes:{style:`grid-area:${e.gridArea}`,class:`${e.cardSize}`},properties:{cardMetadata:e.cardMetadata,parentTelemetry:e.telemetryObject,cardSize:e.cardSize,goToPersonalizeSettingsCallback:e.goToPersonalizeSettingsCallback,refreshFeed:e.refreshFeed}})}
`},29525:function(e,t,i){i.d(t,{I:function(){return l}});var n=i(52201),a=i(96950),r=i(11622);const o=a.qy`
<div
    style="grid-area:${e=>e.gridArea};"
    class="${e=>e.cardSize}"
>
    ${e=>e.profileCarouselConfigInfo&&(0,r.yN)(e.profileCarouselConfigInfo,{properties:{renderType:"1u",profileMetadataList:e.profileMetadataList,parentTelemetryObject:e.parentTelemetryObject,refreshFeed:e.refreshFeed,goToPersonalizeCallback:e.goToPersonalizeCallback}})}
</div>
`,s=a.qy`
    <div
        style="grid-area:${e=>e.gridArea};"
        class="${e=>e.cardSize}"
    >
        <premium-profile-promo-card
            config-instance-src=${e=>e.profileCarouselConfigInfo&&(0,n.v)(e.profileCarouselConfigInfo)}
            instance-id=${e=>{var t;return null===(t=e.profileCarouselConfigInfo)||void 0===t?void 0:t.instanceId}}
            :profileMetadata=${e=>e.profileMetadataList[0]}
            :parentTelemetryObject=${e=>e.parentTelemetryObject}
            :refreshFeed=${e=>e.refreshFeed}
            :goToPersonalizeCallback=${e=>e.goToPersonalizeCallback}
        />
    </div>
`,l=a.qy`
    ${e=>e.isPremium?s:o}
`},30972:function(e,t,i){i.d(t,{j:function(){return r}});var n=i(16686),a=i(46753);const r={getFeedDataForCard:e=>(0,a.A)(e),viewTemplate:n.T}},31371:function(e,t,i){i.d(t,{B:function(){return u}});var n=i(96950),a=i(11622),r=i(17254);const o=n.qy` 
    ${e=>e.dailyMomentsCardConfigInfo&&(0,a.yN)(e.dailyMomentsCardConfigInfo,{attributes:{style:`grid-area:${e.gridArea}`,class:`${e.cardSize}`,size:`${e.cardSize}`},properties:{wpoMetadata:e.wpoMetadata,cardMetadata:e.cardMetadata,cardSize:e.cardSize,parentTelemetry:e.parentTelemetryObject,goToPersonalizeSettingsCallback:e.goToPersonalizeSettingsCallback,refreshFeedCallback:e.refreshFeedCallback,visualReadinessCallback:e.visualReadinessCallback,hasLoadedCallback:e.hasLoadedCallback,useSpotlightMenu:e.isSpotlightZone,supportedSdCardActionMenuItems:e.supportedSdCardActionMenuItems,sdCardActionClickHandler:e.sdCardActionClickHandler},memoize:"winWidgets"!==r.T3.AppType&&"windowsShellV2"!==r.T3.AppType})}
`,s=n.qy`
    ${o}
`;var l=i(93468),d=i(65022),c=i(19608);const u={getFeedDataForCard:e=>function(e){try{var t;const{configOptions:a,cardMetadata:r,cardSlot:o,parentTelemetryObject:s,goToPersonalizeSettingsCallback:u,refreshFeedCallback:h,visualReadinessCallback:v,hasLoadedCallback:p,supportedSdCardActionMenuItems:f,sdCardActionClickHandler:g,isSpotlightZone:m}=e;if(!r||"CEGrowth.DailyMoments"!==(null==r?void 0:r.id)||null==r||!r.data||!o)return(0,l.vV)(d.wIS,"Missing data in 1s response in Daily Moments Card Mapper"),null;let y;if(null!=r&&r.data)try{var i,n;if(y=JSON.parse(r.data),null===(i=y)||void 0===i||!i.CardDataList||!Array.isArray(y.CardDataList)||0===(null===(n=y)||void 0===n||null===(n=n.CardDataList)||void 0===n?void 0:n.length))return(0,l.vV)(d.wIS,"Missing cards data in 1s response in Daily Moments Card Mapper"),null}catch(e){return(0,l.c_)(e,d.SdS,"Cannot parse 1s json in DailyMomentsCardDataMapper",JSON.stringify(r.data)),null}const C=a,b=`daily-moments-card-${null==r?void 0:r.type}`,w={id:b,childTemplateType:"daily-moments-card",parentTelemetryObject:s,dailyMomentsCardConfigInfo:C,cardMetadata:r,goToPersonalizeSettingsCallback:u,refreshFeedCallback:h,visualReadinessCallback:v,hasLoadedCallback:p,supportedSdCardActionMenuItems:f,sdCardActionClickHandler:g,isSpotlightZone:m};return(0,c.bw)({id:b,experienceType:null==C||null===(t=C.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},w,null,!0)}catch(e){(0,l.c_)(e,d.E2i,"Error in feed-layout Daily Moments Card Mapper")}return null}(e),viewTemplate:s}},31422:function(e,t){t.A='<svg width="14" height="14" viewBox="0 0 14 14"><path d="M.4.15A.5.5 0 0 0 .37.8l.05.05 2.69 2.7A6.66 6.66 0 0 0 .46 7.36a.5.5 0 0 0 .97.25 5.66 5.66 0 0 1 2.39-3.36l1.2 1.2A2.67 2.67 0 0 0 8.8 9.25l3.95 3.94a.5.5 0 0 0 .75-.65l-.04-.05L9.37 8.4l-.8-.8L6.66 5.7 4.74 3.77l-.76-.75L1.13.15a.5.5 0 0 0-.71 0Zm5.33 6.03 2.36 2.35a1.67 1.67 0 0 1-2.36-2.35Zm1.2-3.85A6.66 6.66 0 0 0 5 2.62l.83.82a5.67 5.67 0 0 1 6.6 4.18.5.5 0 0 0 .96-.24 6.67 6.67 0 0 0-6.46-5.05Zm.13 2.34 2.53 2.54a2.67 2.67 0 0 0-2.53-2.54Z" fill-opacity=".83"/></svg>'},31634:function(e,t,i){i.d(t,{O:function(){return r}});var n=i(82670),a=i(19608);const r={getFeedDataForCard:e=>function(e){var t;const{configOptions:i,parentTelemetryObject:n,cardMetadata:r,goToPersonalizeSettingsCallback:o,refreshSDCardSection:s}=e,l={QuizData:[r]};if(null==l||null==l.QuizData||0===l.QuizData.length||null==l.QuizData[0].data||0===l.QuizData[0].data.length)return;const d=i&&i,c={id:"quizCard",childTemplateType:"quiz-card",parentTelemetryObject:n,quizAnswerConfigInfo:d,dataToPassToComponent:l.QuizData[0].data,goToPersonalizeSettingsCallback:o,refreshSDCardSection:s};return(0,a.bw)({id:"quizCard",experienceType:null==d||null===(t=d.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},c)}(e),viewTemplate:n.a}},31752:function(e,t,i){i.d(t,{d:function(){return l}});var n=i(22723),a=i(93468),r=i(65022),o=i(19608);function s(e){try{var t;const{configOptions:i,cardMetadata:n,cardSlot:s,parentTelemetryObject:l,refreshSDCardSection:d,refreshFeedCallback:c,goToPersonalizeCallback:u,goToPersonalizeSettingsCallback:h,getReplacementCardsCallback:v,displaySettings:p,cardActionMenuClickCallback:f,isDarkModeForMobile:g,hasLoadedCallback:m}=e;if(!n||!s)throw new Error("Missing required parameters");const{layouts:y}=s;if(!function(e,t){var i;const n=null==t?void 0:t.subType;if("UserInterestCarousel"!==n)return!0;if(!e||Object.values(e).some(e=>!e.includes("1x")))return!0;const o=10,s=((null===(i=t.subCards)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.subCards)||[]).length,l=s>=o;l||(0,a.vV)(r.rZ0,"Insufficient Content for ContentGroupCard",`Content Length ${s}`);return l}(y,n))return null;const C=i&&i,b={id:"contentGroupCard",childTemplateType:"content-group-card",displaySettings:p,isDarkMode:g,parentTelemetryObject:l,contentGroupCardConfigInfo:C,contentGroupCardMetadata:n,refreshFeedCallback:d||c,goToPersonalizeCallback:u,goToPersonalizeSettingsCallback:h,getReplacementCardsCallback:v,cardActionMenuClickCallback:f,hasLoadedCallback:m};return(0,o.bw)({id:"contentGroupCard",experienceType:null==C||null===(t=C.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},b,null,!0)}catch(e){(0,a.c_)(e,r.E7x,"Error in feed-layout Content Group Card Mapper")}return null}const l={getFeedDataForCard:e=>s(e),viewTemplate:n.d}},32756:function(e,t,i){i.d(t,{a:function(){return r}});var n=i(66950),a=i(52265);const r={getFeedDataForCard:e=>(0,a.v)(e),viewTemplate:n.U}},32998:function(e,t,i){i.d(t,{D:function(){return o}});var n=i(96950),a=i(11622);const r=n.qy`
    ${e=>e.spotlightCardConfigInfo&&(0,a.yN)(e.spotlightCardConfigInfo,{properties:{cardMetadata:e.cardMetadata,cardSize:e.cardSize,parentTelemetry:e.parentTelemetryObject,goToPersonalizeSettingsCallback:e.goToPersonalizeSettingsCallback,refreshFeedCallback:e.refreshFeedCallback,useSpotlightMenu:e.isSpotlightZone,supportedSdCardActionMenuItems:e.supportedSdCardActionMenuItems,sdCardActionClickHandler:e.sdCardActionClickHandler},attributes:{style:`grid-area:${e.gridArea};contain:unset;content-visibility:visible`,class:e.cardSize}})}
`,o=n.qy`
    ${r}
`},34348:function(e,t,i){i.d(t,{w:function(){return s}});var n=i(28941),a=i(93468),r=i(65022),o=i(19608);const s={getFeedDataForCard:e=>function(e){try{var t;const{configOptions:i,cardMetadata:n,goToPersonalizeSettingsCallback:a,parentTelemetryObject:r,sdCardActionClickHandler:s,refreshSDCardSection:l}=e,d="win-app-card",c=i&&i,u={id:d,childTemplateType:"win-app-card",goToPersonalizeSettingsCallback:a,parentTelemetryObject:r,sdCardActionClickHandler:s,refreshFeed:l,cardMetadata:n,configInfo:c};return(0,o.bw)({id:d,experienceType:null==c||null===(t=c.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},u)}catch(e){(0,a.c_)(e,r.wDo,"Error in Win App Ad Card Mapper")}}(e),viewTemplate:n.M}},34773:function(e,t,i){var n;i.d(t,{C:function(){return n}}),function(e){e.Block="Block",e.Unblock="Unblock",e.Save="Save",e.Unsave="Unsave",e.Mute="Mute",e.MuteWebVideo="MuteWebVideo",e.Follow="Follow",e.Unfollow="Unfollow",e.InterestFailure="InterestFailure",e.ShowMore="ShowMore",e.ShowFewer="ShowFewer",e.Hide="Hide",e.DisableNotification="DisableNotification",e.EnableNotification="EnableNotification",e.RecommendedInterestsFailure="RecommendedInterestsFailure",e.Refresh="Refresh",e.Pin="Pin",e.Unpin="Unpin",e.HideTopic="HideTopic",e.UnhideTopic="UnhideTopic",e.HideSource="HideSource",e.UnhideSource="UnhideSource",e.WindowsInformation="WindowsInformation",e.Error="Error",e.Default="Default",e.ConnectionError="ConnectionError",e.MuteError="MuteError",e.Fre="Fre",e.TuneYourFeed="TuneYourFeed",e.Report="ReportContent"}(n||(n={}))},34982:function(e,t,i){i.d(t,{ux:function(){return b}});var n=i(7040),a=i(55609),r=i(34768),o=i(64186),s=i(56286),l=i(67931),d=i(42290),c=i(36173),u=i(96950),h=i(91640),v=i(88665);c.k,v.F;const p=u.qy`<style>.hide-story-container { display: flex; flex-direction: column; grid-template-columns: auto; gap: 10px; background: var(--hide-story-background); --animated-spinner-size: 28px; } .svg-row { grid-row: 1; display: flex; justify-content: center; margin-top: 25%; height: 16px; width: 20px; height: 20px; background-image: url("${e=>{var t;return null===(t=e.adFeedbackProps)||void 0===t?void 0:t.icons.hiddenIcon}}"); background-size: contain; background-repeat: no-repeat; margin: 85px auto 0 auto; } .content-region { grid-row: 2; display: flex; flex-direction: column; align-items: center; text-align: center; } .text-top { font-weight: 600; font-size: 19px; line-height: 20px; } .text-bottom { font-size: 15px; font-weight: 300; line-height: 15px; margin-top: 8px; } .spinner-row { display: flex; flex-direction: row; align-items: center; padding: 0 10px 10px; margin: 0 10px 10px; } msn-animated-done-spinner.check-icon { padding-block: 20px 0px; padding-inline: 30px 30px; fill: var(--neutral-foreground-rest); align-items: center; gap: 10px; flex-direction: row; } .spinner-text { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; position: absolute; inset-inline-start: 85px; bottom: 106px; max-width: 190px; } @media (prefers-color-scheme: dark) { .svg-row { background-image: url("${e=>{var t;return null===(t=e.adFeedbackProps)||void 0===t?void 0:t.icons.hiddenIconDark}}"); } }</style><div class="hide-story-container"><div class="svg-row"></div><div class="content-region"><div class="text-top">${e=>e.adFeedbackProps.localizedStrings.feedbackAdHidden}</div><div class="text-bottom">${e=>{var t;return e.showAdFeedback&&null!==(t=e.adFeedbackProps)&&void 0!==t&&t.blockedAdvertiserChecked?e.adFeedbackProps.localizedStrings.feedbackAdBlocked:""}}</div></div><div class="spinner-row">${(0,h.z)(e=>e.enableInstantHide,u.qy`<msn-animated-done-spinner slot="actions" class="check-icon" card-size=${e=>e.cardSize}></msn-animated-done-spinner><span class="spinner-text" title="${e=>e.adFeedbackProps.localizedStrings.feedbackUpdatingFeed}">${e=>e.adFeedbackProps.localizedStrings.feedbackUpdatingFeed}...</span>`)}</div></div>`;var f=i(30553),g=i(47838),m=i(9594),y=i(25879),C=i(30216);(0,n.dR)(()=>l.go)(a.Ay),(0,r.F7)((0,n.dR)(()=>l.go))(a.Ay),(0,r.Xt)((0,n.dR)(()=>l.go))(a.Ay),(0,o.Wl)((0,n.dR)(()=>l.go))(a.Ay),(0,s.c)((0,n.dR)(()=>l.go))(a.Ay),(0,n.pq)(()=>l.kJ)(a.Ay),(0,r.F7)((0,n.pq)(()=>l.kJ))(a.Ay),(0,r.Xt)((0,n.pq)(()=>l.kJ))(a.Ay),(0,o.Wl)((0,n.pq)(()=>l.kJ))(a.Ay),(0,s.c)((0,n.pq)(()=>l.kJ))(a.Ay);const b=u.qy`
    <fluent-card
        style="grid-area:${e=>e.gridArea}"
        class="${e=>e.cardSize}"
        size="${e=>e.cardSize??"1u"}"
    >
        ${e=>(e=>{var t;return e.showAdFeedback?e.cardActionStatus&C.J.adFeedbackSubmitted&&!e.enableReportAdDialog?d.L:e.cardActionStatus&C.J.hidden?null!==(t=e.adFeedbackProps)&&void 0!==t&&null!==(t=t.configOptions)&&void 0!==t&&t.enableAdBlockAdvertiser?p:f.X:g.j:e.cardActionStatus&C.J.hidden?f.X:e.enableHideStoryFeedback?m.F:y.u})(e)}
    </fluent-card>
`},35666:function(e,t,i){i.d(t,{B:function(){return r}});var n=i(11654),a=i(19608);const r={getFeedDataForCard:e=>function(e){var t;const{configOptions:i,parentTelemetryObject:n,cardMetadata:r,goToPersonalizeSettingsCallback:o,refreshSDCardSection:s,displaySettings:l,navigateToURLCallback:d,isDarkModeForMobile:c}=e,u=r;let h;i&&i.childExperienceReferencesWC&&(h=i.childExperienceReferencesWC.rewardsCard),h&&h.instanceId||(h=i&&i);const v={id:"rewardsCard",childTemplateType:"rewards-card",goToPersonalizeSettingsCallback:o,parentTelemetryObject:n,rewardsAnswerConfigInfo:h,dataToPassToComponent:u,refreshSDCardSection:s,displaySettings:l,navigateToURLCallback:d,isDarkModeForMobile:c};return(0,a.bw)({id:"rewardsCard",experienceType:null===(t=h)||void 0===t||null===(t=t.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},v)}(e),viewTemplate:n.F}},36316:function(e,t,i){i.d(t,{k:function(){return r}});var n=i(96950),a=i(11622);const r=n.qy`
    ${e=>(0,a.yN)(e.marketplaceCardConfigInfo,{attributes:{style:`grid-area:${e.gridArea}`,class:`${e.cardSize}`},properties:{jsonMarketplaceData:e.marketplaceData,parentTelemetry:e.parentTelemetryObject,refreshFeed:e.refreshFeed,goToPersonalizeSettingsCallback:e.goToPersonalizeSettingsCallback}})}
`},36532:function(e,t,i){i.d(t,{b:function(){return a}});var n=i(26641);const a={getFeedDataForCard:e=>(0,n.BQ)(e),viewTemplate:n.wT}},36653:function(e,t,i){i.d(t,{W:function(){return o}});var n=i(52515),a=i(19608);const r="dailyBriefCard";const o={getFeedDataForCard:e=>function(e){var t;const{parentTelemetryObject:i,isWidgetRegion:n,cardMetadata:o,configOptions:s}=e,l={id:r,childTemplateType:"daily-brief-card",parentTelemetryObject:i,cardMetadata:o,isWidgetRegion:n};return s&&(l.dailyBriefCardConfigInfo=s),(0,a.bw)({id:r,experienceType:null===(t=l.dailyBriefCardConfigInfo)||void 0===t||null===(t=t.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},l,null,!0)}(e),viewTemplate:n.C}},37895:function(e,t,i){i.d(t,{O:function(){return l}});var n=i(80149),a=i(93468),r=i(65022),o=i(19608),s=i(77512);const l={getFeedDataForCard:e=>function(e){let t;try{const{configOptions:n,parentTelemetryObject:l,cardMetadata:d,refreshSDCardSection:c,sdCardActionClickHandler:u,refreshFeedCallback:h,goToPersonalizeSettingsCallback:v}=e,p=n&&n;try{t={id:"healthTipCard",childTemplateType:"health-tip-card",parentTelemetryObject:l,healthTipConfigInfo:p,healthTipData:d&&d.data&&JSON.parse(d.data),sdCardActionClickHandler:u,refreshFeed:c||h,goToPersonalizeSettingsCallback:v,refreshSDCardSection:c}}catch(t){return(0,a.vV)(r.JlB,`Error in transforming data: ${t}, mapperargs = ${JSON.stringify(e)}`),(0,s.wc)()}try{var i;return(0,o.bw)({id:"healthTipCard",experienceType:null==p||null===(i=p.configRef)||void 0===i?void 0:i.experienceType,mapperArgs:e},t)}catch(i){return(0,a.vV)(r.JlB,`Error in populating layouts and position telemetry: ${i}, mapperargs = ${JSON.stringify(e)}`),(0,s.wc)(t)}}catch(t){(0,a.vV)(r.JlB,`Error in feed layout: ${t}, mapperargs = ${JSON.stringify(e)}`)}return(0,s.wc)()}(e),viewTemplate:n.s}},39484:function(e,t,i){function n(e){const t=new Map;return function(){let i=t.get(arguments.length);i||(i=arguments.length?new Map:e(...arguments),t.set(arguments.length,i));for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];if(i.has(n))i=i.get(n);else{const a=t===arguments.length-1?e(...arguments):new Map;i.set(n,a),i=a}}return i}}i.d(t,{a:function(){return n}})},39978:function(e,t,i){i.d(t,{D:function(){return r}});var n=i(96950),a=i(11622);const r=n.qy`
    ${e=>(0,a.yN)(e.shoppingFashionCarouselWCConfigInfo,{attributes:{style:`grid-area:${e.gridArea}`,class:`${e.cardSize}`},properties:{instanceId:e.shoppingFashionCarouselWCConfigInfo.instanceId,openLinksInNewTab:!0,parentTelemetryObject:e.parentTelemetryObject,sdCardActionClickHandler:e.sdCardActionClickHandler,goToPersonalizeCallback:e.goToPersonalizeCallback,refreshFeedCallback:e.refreshFeedCallback,shoppingCardMetadata:e.shoppingCardMetadata,wpoMetadata:e.wpoMetadata,useInlineSvgIcons:!0,cardSize:e.cardSize}})}
`},40183:function(e,t,i){i.d(t,{A:function(){return r}});var n=i(96950),a=i(11622);const r=n.qy`
    ${e=>(0,a.yN)(e.configInfo,{attributes:{style:`grid-area:${e.gridArea}`,class:`${e.cardSize}`},properties:{cardMetadata:e.cardMetadata,parentTelemetry:e.telemetryObject,cardSize:e.cardSize,goToPersonalizeSettingsCallback:e.goToPersonalizeSettingsCallback,sdCardActionClickHandler:e.sdCardActionClickHandler,dismissActionMenu:e.dismissSDCardMenuCallback,refreshFeed:e.refreshFeed,refreshFeedCallback:e.refreshFeedCallback}})}
`},41543:function(e,t,i){i.d(t,{d:function(){return o}});var n=i(96950),a=i(11622);const r=n.qy`
    <fluent-card
        style="grid-area:${e=>e.gridArea}"
        class="${e=>e.cardSize}"
    >
        ${e=>e.recommendedInterestsConfigInfo&&(0,a.yN)(e.recommendedInterestsConfigInfo,{attributes:{cardSize:e.cardSize},properties:{parentTelemetry:e.parentTelemetryObject,recommendedInterestsArtifact:e.mappedRecommendedInterestsData,cardActionClickHandler:e.cardActionClickHandler,goToPersonalizeCallback:e.goToPersonalizeCallback}})}
    </fluent-card>
`,o=n.qy`
    ${r}
`},41607:function(e,t,i){i.d(t,{C:function(){return r}});var n=i(66805),a=i(95046);const r={getFeedDataForCard:e=>(0,a.n)(e),viewTemplate:n.y}},42679:function(e,t,i){i.d(t,{G:function(){return o}});var n=i(96950),a=i(11622),r=i(18750);const o=n.qy`
<div class="${e=>e.cardSize}" style="grid-area:${e=>e.gridArea};">
    ${e=>(0,a.yN)(e.experienceInfo,{properties:{isDarkMode:(0,r.ud)()},memoize:!1})}
</div>
`},43434:function(e,t,i){i.d(t,{UU:function(){return d},cv:function(){return o},kc:function(){return s},qU:function(){return l}});var n=i(88294),a=i(89980),r=i(98793);async function o(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;try{if(await s()&&t){const e=await r.Q.getPreferenceSetting(t);if(e&&void 0!==e.value)return JSON.parse(e.value.toString())}if(e){const t=(0,a.Lg)().getObject(e,void 0);if(void 0!==t)return JSON.parse(t)}return i}catch(e){return n.v.logError("Failed to parse the key."),!1}}async function s(){return await r.Q.isApiAvailableToUse()}function l(e,t){const i={setting:e,source:"ntp",timestamp:(new Date).getTime(),value:t};r.Q.savePreferenceSetting(e,i)}function d(e,t){let i=1;switch(e.selectedFeedDisplaySetting){case"always":i|=8;break;case"headingsonly":i|=512;break;case"onscroll":i|=64;break;case"peek":i|=2048;break;default:i|=0}return e.imageOfTheDayEnabled&&(i|=32),e.greetingEnabled&&t&&(i|=256),"off"!==e.selectedQuickLinksDisplaySetting&&(i|=2),"custom"===e.currentLayout&&(i|=128),i}},43774:function(e,t,i){i.d(t,{p4:function(){return f},ls:function(){return g},vA:function(){return p},nF:function(){return v}});var n=i(68136),a=i(68009);var r=i(95239);const{create:o}=n.G,s=o("neutral-stroke-strong-hover-delta",40),l=o("neutral-stroke-strong-active-delta",16),d=o("neutral-stroke-strong-focus-delta",25);var c=i(31023);const{create:u}=n.G,h=u({name:"neutral-stroke-strong-recipe"},{evaluate:e=>function(e,t,i,n,r,o){const s=(0,a.F)(t),l=e.colorContrast(t,i),d=e.closestIndexOf(l);return{rest:l,hover:e.get(d+s*n),active:e.get(d+s*r),focus:e.get(d+s*o)}}(e(c.r),e(r.p),3,e(s),e(l),e(d))}),v=u("neutral-stroke-strong-rest",e=>e(h).evaluate(e).rest),p=u("neutral-stroke-strong-hover",e=>e(h).evaluate(e).hover),f=u("neutral-stroke-strong-active",e=>e(h).evaluate(e).active),g=u("neutral-stroke-strong-focus",e=>e(h).evaluate(e).focus)},44119:function(e,t,i){var n,a;i.d(t,{OQ:function(){return a},Qw:function(){return r},Sd:function(){return l},VE:function(){return s},e$:function(){return d},xD:function(){return o}}),function(e){e.OneService="OneService",e.WindowsShell="WindowsShell"}(n||(n={})),function(e){e.Bgtask="bgTask",e.BgRefresh="bgRefresh",e.Api="api",e.App="appLoad",e.AppErrRefresh="appErrRefresh",e.RetryFetch="retryFetch",e.Scroll="scroll",e.ApiErrorRefresh="apiErrorRefresh",e.Init="init",e.BgInit="bgInit",e.CacheExpired="cacheExpired",e.SettingsChanged="settingsChanged",e.SessionExpired="sessionExpired",e.PrefChange="PrefChange",e.StaleRefresh="staleRefresh",e.WeatherCardTrigger="weatherCardTrigger"}(a||(a={}));const r=/lowT:\d/i,o=/lowC:\d/i,s="rihp",l=["en-us","da-dk","de-at","de-ch","de-de","en-au","en-ca","en-gb","en-in","en-nz","es-es","es-mx","es-us","fr-ch","fr-fr","fr-ca","it-it","ja-jp","pt-br","nb-no","sv-se","ko-kr","pl-pl","nl-nl","nl-be","zh-cn","zh-tw","zh-hk","en-ph","pt-pt","id-id","tr-tr","th-th","ar-ae","es-cl","fi-fi","hu-hu","en-sg","vi-vn","en-my","en-ie","es-ar","ar-eg","en-za","en-xl"],d="seenInterestsFRECount"},44205:function(e,t,i){var n,a,r,o;i.d(t,{G4:function(){return n},Ij:function(){return o},P2:function(){return r},vO:function(){return s}}),function(e){e.Ocv="Ocv",e.Ods="Ods"}(n||(n={})),function(e){e.NotConfigured="Not Configured",e.Enabled="Enabled",e.Disabled="Disabled"}(a||(a={})),function(e){e[e.Undefined=0]="Undefined",e[e.MinorWithoutParentalConsent=1]="MinorWithoutParentalConsent",e[e.MinorWithParentalConsent=2]="MinorWithParentalConsent",e[e.Adult=3]="Adult",e[e.NotAdult=4]="NotAdult",e[e.MinorNoParentalConsentRequired=5]="MinorNoParentalConsentRequired"}(r||(r={})),function(e){e[e.feedbackDefault=2224]="feedbackDefault",e[e.windowsFeed=2475]="windowsFeed",e[e.edgeChromium=2231]="edgeChromium"}(o||(o={}));class s{constructor(){this.manifestType="Sas",this.appId=o.feedbackDefault,this.source="Client",this.type="Idea"}}},44364:function(e,t,i){i.d(t,{h:function(){return n}});const n=i(96950).qy`
    <fluent-card 
        style="grid-area:${e=>e.gridArea};contain: none;"
        class="${e=>e.cardSize}"
    >
        <msft-add-watchlist-money-card
            id="${e=>e.id}"
            layout="${e=>e.layout}"
            style="${e=>e.moneyCardStyles}"

            :moneyCardContentData="${e=>e.moneyCardContentData}"
            :searchSuggestions="${e=>e.searchSuggestions}"
            :goBackTelemetryTag="${e=>e.telemetryContext&&e.telemetryContext.goBackView&&e.telemetryContext.goBackView.getMetadataTag()}"
            :addToWatchlistTelemetryTag="${e=>e.telemetryContext&&e.telemetryContext.addToWatchlist&&e.telemetryContext.addToWatchlist.getMetadataTag()}"
            data-t="${e=>{var t;return null===(t=e.telemetryContext)||void 0===t||null===(t=t.moneyAddWatchlistCard)||void 0===t?void 0:t.getMetadataTag()}}"
        />
    </fluent-card>
`},46753:function(e,t,i){i.d(t,{A:function(){return s}});var n=i(65022),a=i(93468),r=i(19608),o=i(29307);function s(e){try{var t,i,s;const{configOptions:l,cardMetadata:d,cardSlot:c,parentTelemetryObject:u,goToPersonalizeSettingsCallback:h,refreshFeedCallback:v,visualReadinessCallback:p,hasLoadedCallback:f,supportedSdCardActionMenuItems:g,sdCardActionClickHandler:m,isSpotlightZone:y,isWidgetRegion:C,turnOffWidgetsRegionCallback:b,manageWidgetsRegionCallback:w,hideCardCallback:T,underlineTitle:S}=e;if(!d||!c)throw new Error("Missing required parameters");if(!d.subCards||!d.subCards.length)throw(0,a.vV)(n.qV8,"Service context returned empty subcards in metadata"),new Error("Missing required parameters");const k=(0,o.A)(l.digestCard),M=(null==d||null===(t=d.feed)||void 0===t?void 0:t.canonicalName)||(null==d||null===(i=d.feed)||void 0===i?void 0:i.sageFeedGroupName)||"",$="digestCard_"+M;k&&(k.instanceId=l.digestCard.instanceId+"_"+M);const F={id:$,childTemplateType:"digest-card",parentTelemetryObject:u,digestCardConfigInfo:k,cardMetadata:d,goToPersonalizeSettingsCallback:h,refreshFeedCallback:v,visualReadinessCallback:p,hasLoadedCallback:f,supportedSdCardActionMenuItems:g,sdCardActionClickHandler:m,isSpotlightZone:y,isWidgetRegion:C,turnOffWidgetsRegionCallback:b,manageWidgetsRegionCallback:w,hideCardCallback:T,underlineTitle:S};return F.isWidgetRegion&&(F.cardSize="0.5U"),(0,r.bw)({id:$,experienceType:null==k||null===(s=k.configRef)||void 0===s?void 0:s.experienceType,mapperArgs:e},F,null,!0)}catch(e){(0,a.c_)(e,n.Wrb,"Error in feed-layout Digest Card Mapper")}return null}},50349:function(e,t,i){i.d(t,{E:function(){return r}});var n=i(12916),a=i(19608);const r={getFeedDataForCard:e=>function(e){var t;const{configOptions:i,parentTelemetryObject:n,cardMetadata:r,refreshSDCardSection:o,goToPersonalizeSettingsCallback:s}=e,l={recipes:[r]};let d;i&&i.childExperienceReferencesWC&&(d=i.childExperienceReferencesWC.recipesCard),d&&d.instanceId||(d=i&&i);const c={id:"recipesCard",childTemplateType:"recipes-card",goToPersonalizeSettingsCallback:s,parentTelemetryObject:n,recipesAnswerConfigInfo:d,dataToPassToComponent:l,refreshSDCardSection:o};return(0,a.bw)({id:"recipesCard",experienceType:null===(t=d)||void 0===t||null===(t=t.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},c)}(e),viewTemplate:n.I}},50976:function(e,t,i){i.d(t,{y:function(){return r}});var n=i(65282),a=i(26641);const r={getFeedDataForCard:e=>(0,a.BQ)(e),viewTemplate:n.I}},52143:function(e,t,i){i.d(t,{W:function(){return a}});var n=i(26641);const a={getFeedDataForCard:e=>(0,n.BQ)(e),viewTemplate:n.wT}},52515:function(e,t,i){i.d(t,{C:function(){return r}});var n=i(96950),a=i(11622);const r=n.qy`
    ${e=>(0,a.yN)(e.dailyBriefCardConfigInfo,{attributes:{style:`grid-area:${e.gridArea};`,class:`${e.cardSize}`},properties:{cardMetadata:e.cardMetadata,parentTelemetry:e.parentTelemetryObject,cardSize:e.cardSize,isWidgetRegion:e.isWidgetRegion},memoize:!1})}
`},55331:function(e,t,i){i.d(t,{_:function(){return r}});var n=i(14817),a=i(20450);const r={getFeedDataForCard:e=>(0,a.z)(e),viewTemplate:n.Q}},57029:function(e,t,i){i.d(t,{n:function(){return r}});var n=i(26641),a=i(155);const r={getFeedDataForCard:n.BQ,viewTemplate:a.V}},57109:function(e,t,i){i.d(t,{B:function(){return s}});var n=i(76405),a=i(93468),r=i(65022),o=i(19608);const s={getFeedDataForCard:e=>function(e){try{var t;const{configOptions:i,parentTelemetryObject:n,cardMetadata:a,goToPersonalizeSettingsCallback:r,refreshSDCardSection:s}=e,l=i&&i,d={id:"autos-carousel",childTemplateType:"autos-carousel-card",parentTelemetryObject:n,autosCarouselCardConfigInfo:l,autosCarouselCardMetaData:a,refreshFeed:s,goToPersonalizeSettingsCallback:r};return(0,o.bw)({id:"autos-carousel",experienceType:null==l||null===(t=l.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},d)}catch(e){(0,a.c_)(e,r.gsf,"Error in Autos Carousel Mapper")}}(e),viewTemplate:n.j}},58094:function(e,t,i){i.d(t,{g:function(){return r}});var n=i(42679),a=i(19608);const r={getFeedDataForCard:e=>function(e){var t,i;const{configOptions:n,parentTelemetryObject:r,visualReadinessCallback:o}=e,s=null==n||null===(t=n.childExperienceReferencesWC)||void 0===t?void 0:t.interestManagementCard,l=null==s?void 0:s.instanceId,d={id:l,childTemplateType:"interest-management-card",telemetryObject:r,experienceInfo:s,visualReadinessCallback:o};return(0,a.bw)({id:l,experienceType:null==s||null===(i=s.configRef)||void 0===i?void 0:i.experienceType,mapperArgs:e},d)}(e),viewTemplate:n.G}},59966:function(e,t,i){i.d(t,{H:function(){return c}});var n=i(96950),a=i(40959),r=i(11622),o=i(17720);const s="_SelectCarousel_Template_CacheKey_",l="_SelectCarousel_MiscData_CacheKey_",d=()=>o.vv.get(s)||{},c=n.qy`
    ${e=>{var t,i;const n=(c=e.carouselType,d()[c]);var c;const u=o.vv.get(l);let h=null==n?void 0:n.template;var v,p,f,g;h&&(null==n?void 0:n.feedWidth)===(null===(t=e.displaySettings)||void 0===t?void 0:t.feedWidth)&&(null==n?void 0:n.title)===(null===(i=e.cardMetadata.subCards[0])||void 0===i?void 0:i.title)&&(null==u?void 0:u.isBingImageAsBackground)===e.isBingImageAsBackground&&(null==u?void 0:u.currentLayout)===e.layout||(h=(0,r.yN)(e.selectCarouselConfigInstance,{includeTelemetryTag:!1,properties:{wpoMetadata:e.wpoMetadata,getContentIndicator:a.Z,cardMetadata:e.cardMetadata,carouselType:e.carouselType,shouldFetchData:e.shouldFetchData,cardActionTooltips:e.cardActionTooltips,toggleCardActionMenu:e.toggleCardActionMenu,handleContentCardClickOverride:e.handleContentCardClickOverride,parentTelemetry:e.parentTelemetryObject,visualReadinessCallback:e.visualReadinessCallback,actionMenuCallback:e.actionMenuCallback,gridArea:e.gridArea,cardSize:e.cardSize,configOptions:e.configOptions,mobileCardClickCallback:e.mobileCardClickCallback,setShouldScrollToComments:e.setShouldScrollToComments,displaySettings:e.displaySettings,newsXfeedNavigationHandlerCallback:e.newsXfeedNavigationHandlerCallback,secIndex:e.secIndex,isBingImageAsBackground:e.isBingImageAsBackground,refreshFeedCallback:e.refreshFeedCallback,isDarkModeForMobile:e.isDarkModeForMobile,isPivotsEnabled:e.isPivotsEnabled,cardActionMenuClickCallback:e.cardActionMenuClickCallback,actionMenuLocalizedStrings:e.actionMenuLocalizedStrings,overrideShoppingProngCardResponseTitle:e.overrideShoppingProngCardResponseTitle,notShowCarouselSeeMoreCard:e.notShowCarouselSeeMoreCard,goToPersonalizeSettingsCallback:e.goToPersonalizeSettingsCallback,hideCardCallback:e.hideCardCallback,shareActionHandler:e.shareActionHandler},attributes:{layout:e.layout,style:`grid-area:${e.gridArea};contain:unset;content-visibility:visible`,class:`${e.cardSize}`,size:`${e.cardSize}`,tabindex:e.customTabIndex??0}}),((e,t,i,n)=>{const a=d();a[e]={template:t,feedWidth:i,title:n},o.vv.set(s,a)})(e.carouselType,h,null===(v=e.displaySettings)||void 0===v?void 0:v.feedWidth,null===(p=e.cardMetadata.subCards[0])||void 0===p?void 0:p.title),f=e.isBingImageAsBackground,g=e.layout,o.vv.set(l,{isBingImageAsBackground:f,currentLayout:g}));return h}}
`},61226:function(e,t,i){i.d(t,{Pi:function(){return H},J6:function(){return B}});var n=i(68154),a=i(28006),r=i(65022),o=i(93468),s=i(17254),l=i(12870),d=i(2429),c=i(36090),u=i(98216),h=i(11372),v=i(74326),p=i(19993),f=i(57759),g=i(50677),m=i(56408),y=i(83117),C=i(34773),b=i(29252),w=i(44205),T=i(13302),S=i(10160),k=i(77246),M=i(29231);const $="data-view-context",F="data-widget",I="widget-visible";class x{static getInstance(e){const t=this._instance||(this._instance=new this);return t.observeWidgetVisibile(),t}static removeInstance(){this._instance&&(this._instance.observer.disconnect(),this._instance.observer=void 0,this._instance.widgetDom=void 0,this._instance.widgetDataDom=void 0,this._instance=void 0)}getViewContext(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.getWidgetDom(),this.getWidgetContextData(),this.viewContext}getWidgetAttributes(){return(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.getWidgetDom(),this.getWidgetData(),this.widgetAttributes}constructor(){this.getWidgetContextData()}getWidgetDom(){const e=this.getWidgetByClassName(S.JV);e&&(this.widgetDom=e);const t=this.getWidgetByClassName(S.AF);return t&&(this.widgetDataDom=t),this.widgetDom}getWidgetByClassName(e){if(!e)return;const t=(0,k.S)()&&document.getElementsByClassName(e);if(t&&t.length>0){return t[0]}}getWidgetContextData(){var e,t;const i=(null===(e=this.widgetDom)||void 0===e?void 0:e.getAttribute($))??(null===(t=this.widgetDataDom)||void 0===t?void 0:t.getAttribute($));if(!i){var n;this.getWidgetData();const e=null===(n=this.widgetAttributes)||void 0===n?void 0:n.pcsAdditionalQsp;if(e){const t=new URLSearchParams(e),i=t.get("id"),n=t.get("scenario");this.viewContext={quoteId:i,scenario:n}}return}try{const e=JSON.parse(i);this.viewContext={...this.viewContext,quoteId:e.QuoteId||e.quoteid,duration:e.Duration||e.duration,scenario:e.Scenario||e.scenario,isEarningsEnabled:e.isEarningsEnabled}}catch(e){return}}getWidgetData(){var e,t;const i=(null===(e=this.widgetDom)||void 0===e?void 0:e.getAttribute(F))??(null===(t=this.widgetDataDom)||void 0===t?void 0:t.getAttribute(F));if(i)try{const e=JSON.parse(i);this.widgetAttributes={...e}}catch(e){return}}observeWidgetVisibile(){this.widgetDom&&(this.observer&&this.observer.disconnect(),this.observer=new MutationObserver((e,t)=>{const i=this.widgetDom.getAttribute(I);i&&/^\s*(true|1)\s*$/i.test(i.toLowerCase())&&u.YT.scheduleContentViewEvent(M.ym.Load)}),this.observer.observe(this.widgetDom,{attributeFilter:[I]}))}}var R=i(17720),P=i(6727),A=i(63456),D=i(2462),O=i(86948),N=i(35849),_=i(48622),L=i(64747),z=i(30216),W=i(2553);const E="https://petrol.office.microsoft.com/v1/feedback";class H{static get publisherFollowStatusListenerId(){return R.vv.get("__CardActionServiceClientPublisherFollowStatusListenerIdKey__",()=>1)}static set publisherFollowStatusListenerId(e){R.vv.set("__CardActionServiceClientPublisherFollowStatusListenerIdKey__",e)}static get showMoreFewerStatusListenerId(){return R.vv.get("__CardActionServiceClientShowMoreFewerStatusListenerIdKey__",()=>1)}static set showMoreFewerStatusListenerId(e){R.vv.set("__CardActionServiceClientShowMoreFewerStatusListenerIdKey__",e)}static get publisherFollowStatus(){return R.vv.get("__CardActionServiceClientPublisherFollowStatusKey__",()=>({}))}static set publisherFollowStatus(e){R.vv.set("__CardActionServiceClientPublisherFollowStatusKey__",e)}static get _publisherFollowStatusListeners(){return R.vv.get("__CardActionServiceClient_publisherFollowStatusListenersKey__",()=>new Map)}static set _publisherFollowStatusListeners(e){R.vv.set("__CardActionServiceClient_publisherFollowStatusListenersKey__",e)}static get _showMoreFewerStatusListeners(){return R.vv.get("__CardActionServiceClient_showMoreFewerStatusListenersKey__",()=>new Map)}static set _showMoreFewerStatusListeners(e){R.vv.set("__CardActionServiceClient_showMoreFewerStatusListenersKey__",e)}static get showMoreFewerStatus(){return R.vv.get("__CardActionServiceClientShowMoreFewerStatusKey__",()=>({}))}static set showMoreFewerStatus(e){R.vv.set("__CardActionServiceClientShowMoreFewerStatusKey__",e)}static get topicFollowStatus(){return R.vv.get("__CardActionServiceClientTopicFollowStatusKey__",()=>({}))}static set topicFollowStatus(e){R.vv.set("__CardActionServiceClientTopicFollowStatusKey__",e)}static get saveStatus(){return R.vv.get("__CardActionServiceClientSaveStatusKey__",()=>({}))}static set saveStatus(e){R.vv.set("__CardActionServiceClientSaveStatusKey__",e)}static get publisherMuteStatus(){return R.vv.get("__CardActionServiceClientPublisherMuteStatusKey__",()=>({}))}static set publisherMuteStatus(e){R.vv.set("__CardActionServiceClientPublihserMuteStatusKey__",e)}static getSharedWidgetScenario(){const e=x.getInstance().getViewContext(!0);return null==e?void 0:e.scenario}static isFinanceScenario(){const e=this.getSharedWidgetScenario();return e&&("watchlist"===e||"market"===e||"stock"===e||"earnings"===e)}static setPublisherFollowStatus(e,t){H.publisherFollowStatus[e]=t,H._publisherFollowStatusListeners.forEach(i=>{i({profileId:e,value:t})})}static setShowMoreFewerStatus(e,t){H.showMoreFewerStatus[e]=t,H._showMoreFewerStatusListeners.forEach(i=>{i({contentId:e,value:t})})}static clearPublisherFollowStatus(){H.publisherFollowStatus={}}static setTopicFollowStatus(e,t){H.topicFollowStatus[e]=t}static setSaveStatus(e,t){H.saveStatus[e]=t}static setPublisherMuteStatus(e,t){H.publisherMuteStatus[e]=t}static registerPublisherFollowStatusListener(e){const t=H.publisherFollowStatusListenerId;return H._publisherFollowStatusListeners.set(t,e),H.publisherFollowStatusListenerId+=1,()=>H._publisherFollowStatusListeners.delete(t)}static registerShowMoreFewerStatusListener(e){const t=H.showMoreFewerStatusListenerId;return H._showMoreFewerStatusListeners.set(t,e),H.showMoreFewerStatusListenerId+=1,()=>H._showMoreFewerStatusListeners.delete(t)}constructor(e,t){var i;this.fetchImpl=e,this.additionalHeaders=t,this.isWindowsDashboard="windowsNewsPlus"===s.T3.AppType||"winWidgets"===s.T3.AppType,this.isWindowsBoardsForRuby="winWidgets"===s.T3.AppType&&"startfeed"===(null===(i=s.T3.CurrentRequestTargetScope)||void 0===i?void 0:i.pageType)&&"ruby"===s.T3.UxMode,this.isWindowsShellV2="windowsShellV2"===s.T3.AppType,this.isTravelVertical="travel"===s.T3.AppType,this.isBingHomepage="bingHomepage"===s.T3.AppType,this.isRuby="msn"===s.T3.AppType,this.isFinanceVertical="finance"===s.T3.AppType,this.isShareWidgets="sharedWidgets"===s.T3.AppType,this.isFinanceSharedWidget=this.isShareWidgets&&H.isFinanceScenario(),this.providersServiceEndpointURL=(0,v.nI)("./Msn/Providers"),this.cardActionsServiceEndpointURL=(0,v.nI)("./Graph/Actions"),this.ocid="feeds",this.onChangePublisherFollowStatus=e=>{var t,i;const n=null==e||null===(t=e.detail)||void 0===t?void 0:t.id,a=null==e||null===(i=e.detail)||void 0===i?void 0:i.follow;n&&void 0!==a&&H.setPublisherFollowStatus(n,a)},this.getUpvoteStatus=async e=>{const t=await this.getCardActionStatus(e,z.X.Upvote);return t&&t.value&&t.value.length>0},this.getDownvoteStatus=async e=>{const t=await this.getCardActionStatus(e,z.X.Downvote);return t&&t.value&&t.value.length>0},this.getCardActionStatus=async(e,t)=>{const i=this.cardActionsServiceEndpointURL,n={method:"GET",headers:{...await p.WR.getOneServiceHeaders(),...this.additionalHeaders},credentials:"include"},a=await this.getOneServiceCommonParam();a.push({key:"$filter",value:`actionType eq '${t}' and targetId eq '${e}'`}),a.forEach(e=>e.value&&i.searchParams.set(e.key,e.value));try{const a=await(0,f.w)(async()=>await this.fetchImpl(i.href,n),`getCardAction${t}`);if(a.status>=400){const i=`OneService returned error response. Status: ${a.status} for actionType: ${t}, targetId: ${e}`;throw new Error(i)}return(0,g.FH)(this.getPreloadReloadReason(t)),(0,b.T4)(),a.json()}catch(e){u.YT.sendAppErrorEvent({...r.Bik,message:"Error while posting action for card action",pb:{...r.Bik.pb,customMessage:`url: ${i.href}, error: ${e}`}})}},this.isWindowsBoardsForRuby?this.ocid="rubyprong2":this.isWindowsDashboard?this.ocid="winp2":this.isWindowsShellV2?this.ocid="feeds":l.Rb.IsBlendedEnterprise?this.ocid="entnewsntp":this.isTravelVertical?this.ocid="travel-verthp-feeds":this.isBingHomepage?this.ocid="Peregrine":this.isRuby?this.ocid="rubyntp":this.isFinanceVertical?this.ocid="pdp-peregrine":this.isFinanceSharedWidget&&(this.ocid="hpwidget"),this.initPublisherServiceClientPromise(),this.initTopicsDataConnector(),this.addEventListeners()}getTopicDataConnector(){return this.topicsDataConnector||this.initTopicsDataConnector(),this.topicsDataConnector}initPublisherServiceClientPromise(){let e;this.publisherServiceClientPromise=new Promise(t=>{e=t});(async()=>{const{PublisherServiceClient:t}=await i.e("msnews/publishers-service-client").then(i.bind(i,69023));e(new t((0,k.S)()?window.fetch.bind(window):fetch))})()}initTopicsDataConnector(){this.topicsDataConnector=(0,N.zP)(a.YL)}static getUndoCallbackParams(e,t,i){let n={status:e,action:null,sendRequest:!0};return e&z.J.hidden?(e&z.J.mute?(n.status=e^z.J.mute,n.action=z.X.Mute):e&z.J.report?(n.status=e^z.J.report,n.action=z.X.Report):e&z.J.showFewer&&e&z.J.hide?(n.status=e^z.J.showFewer,n.action=z.X.ShowFewer):e&z.J.showMore&&e&z.J.hide?(n.status=e^z.J.showMore,n.action=z.X.ShowMore):"like-button"===t&&e&z.J.hide&&e&z.J.followedPublisher?(n.status=e^z.J.followedPublisher,n.action=z.X.FollowPublisher):e&z.J.hideTopic?(n.status=e^z.J.hideTopic,n.action=z.X.HideTopic):e&z.J.dismiss&&(n.status=e^z.J.dismiss,n.sendRequest=!1),n.status^=z.J.hidden,i&&(n.status^=z.J.hide,n.action=z.X.Hide)):n="like-button"===t?{status:e^z.J.hide,action:"Like-TellUsMore",sendRequest:!1}:e&z.J.hide?{status:e^z.J.hide,action:z.X.Hide,sendRequest:!0}:{status:e^z.J.showFewer,action:z.X.ShowFewer,sendRequest:!0},n}setAdditionalHeaders(e){this.additionalHeaders=e}async handleShowMoreLessWithCommunityReactions(e,t,n,a){const{SocialServiceAdapter:r,ItemTypes:o,BinaryReactionType:s}=await Promise.all([i.e("libs_social-data-service_dist_service_SocialService_js"),i.e("top-comments-card")]).then(i.bind(i,21868));r.sendContentReaction({item:o.contents,id:`${e}_${t}`,reactionType:n?s.upvote:s.downvote,reset:a})}async ShowFewer(e,t,i,n){if(H.setShowMoreFewerStatus(e,i),t&&t.useCommunityReactions&&t.locale&&(this.handleShowMoreLessWithCommunityReactions(e,t.locale,!1,!1),!t.useVoteActions))return!0;const a=t&&t.useVoteActions?z.X.Downvote:z.X.Dislike;return this.PostCardActionRequest(e,a,n??null,t)}async UnshowFewer(e,t,i){if(H.setShowMoreFewerStatus(e,i),t&&t.useCommunityReactions&&t.locale&&(this.handleShowMoreLessWithCommunityReactions(e,t.locale,!1,!0),!t.useVoteActions))return!0;const n=t&&t.useVoteActions?z.X.Downvote:z.X.Dislike;return this.DeleteCardActionRequest(e,n)}async ShowMore(e,t,i,n){if(H.setShowMoreFewerStatus(e,i),t&&t.useCommunityReactions&&t.locale&&(this.handleShowMoreLessWithCommunityReactions(e,t.locale,!0,!1),!t.useVoteActions))return!0;const a=t&&t.useVoteActions?z.X.Upvote:z.X.Like;return this.PostCardActionRequest(e,a,n??null,t)}async UnshowMore(e,t,i){if(H.setShowMoreFewerStatus(e,i),t&&t.useCommunityReactions&&t.locale&&(this.handleShowMoreLessWithCommunityReactions(e,t.locale,!0,!0),!t.useVoteActions))return!0;const n=t&&t.useVoteActions?z.X.Upvote:z.X.Like;return this.DeleteCardActionRequest(e,n)}async saveContent(e,t,i){return H.setSaveStatus(e,!0),this.PostCardActionRequest(e,z.X.Save,i??null,t)}async unsaveContent(e){return H.setSaveStatus(e,!1),this.DeleteCardActionRequest(e,z.X.Save)}async Follow(e,t){H.setPublisherFollowStatus(e,!0);const i=await this.publisherServiceClientPromise;try{return await i.updateSourceFollowState(e,!0,t)}catch(t){throw H.setPublisherFollowStatus(e,!1),u.YT.sendAppErrorEvent({...r.OZt,message:"Error while following publisher for card action",pb:{...r.OZt.pb,customMessage:`targetId: ${e}, error: ${t}`}}),t}}async Unfollow(e,t,i){H.setPublisherFollowStatus(i||e,!1);const n=await this.publisherServiceClientPromise;try{return await n.updateSourceFollowState(e,!1,t)}catch(t){throw H.setPublisherFollowStatus(e,!0),u.YT.sendAppErrorEvent({...r.OZt,message:"Error while unfollowing publisher for card action",pb:{...r.OZt.pb,customMessage:`targetId: ${e}, error: ${t}`}}),t}}async FollowTopic(e,t,i){H.setTopicFollowStatus(e,!0);try{var n;return null===(n=this.getTopicDataConnector())||void 0===n?void 0:n.followTopic(e,t,!1,i)}catch(t){throw H.setTopicFollowStatus(e,!1),u.YT.sendAppErrorEvent({...r.lZi,message:"Error while following topic for card action",pb:{...r.lZi.pb,customMessage:`targetId: ${e}, error: ${t}`}}),t}}async UnfollowTopic(e){H.setTopicFollowStatus(e,!1);try{var t;return null===(t=this.getTopicDataConnector())||void 0===t?void 0:t.unfollowTopic(e)}catch(t){throw H.setTopicFollowStatus(e,!0),u.YT.sendAppErrorEvent({...r.lZi,message:"Error while unfollowing topic for card action",pb:{...r.lZi.pb,customMessage:`targetId: ${e}, error: ${t}`}}),t}}async Hide(e,t,i){return t&&t.usePdpService&&t.segmentType?this.HideSegment(t.segmentType):this.PostCardActionRequest(e,z.X.Dislike,i||null,t)}async Unhide(e){return this.DeleteCardActionRequest(e,z.X.Dislike)}async Mute(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SourceProvider",i=arguments.length>2?arguments[2]:void 0;return H.setPublisherMuteStatus(e,!0),this.PostCardActionRequest(e,z.X.Mute,t,i)}async Unmute(e){return H.setPublisherMuteStatus(e,!1),this.DeleteCardActionRequest(e,z.X.Mute)}async Disable(e,t){return this.PostCardActionRequest(e,z.X.Disabled,t)}async undoAdFeedback(e){return this.DeleteCardActionRequest(e,z.X.Dislike)}async Report(e,t,i,a,r,o,d,c,u){let f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"",g=arguments.length>10?arguments[10]:void 0,m=arguments.length>11?arguments[11]:void 0,y=arguments.length>12?arguments[12]:void 0;const C=l.Rb.ClientSettings?l.Rb.ClientSettings.aid:"",b=s.T3&&s.T3.HostPage.topDomain;let w=y==n.vq||r===h.b5.WebContent?"web":"msn";"ugcPost"===y&&(w="ugcPost");const T=(0,n._D)(u),S={serviceType:"oneservice",oneServiceTraceId:"",oneServiceActivityId:C},k={activityId:C,feedbackTags:t,feedbackText:i},M={activityId:(0,P.DA)(),market:s.T3&&s.T3.CurrentMarket||"",contentId:e,source:w,headlineImage:d&&q(d.src),headlineText:a,abstract:o,offensive:T,url:c};if(g&&m){const e=(0,n.Zn)(g.imageQualityOtherVisualQualityTags),t=(0,n.vF)(g.suspectedAIOrBotCreatedTags);e.length&&(M.imageQualityOtherVisualQuality=e),t.length&&(M.aidetection=t)}JSON.stringify({article:{id:e},canvas:{name:s.T3.AppType,version:navigator.userAgent,pageType:f||l.Rb.ClientSettings.pagetype},data:k,appEnvironment:s.T3,clientSettings:l.Rb.ClientSettings,extSchema:S});const $=JSON.stringify(M),F="msn.cn"===b?n.LX:(0,v.pN)().origin+n.cM,I={...{...await p.WR.getOneServiceHeaders(),...this.additionalHeaders},"Content-Type":"application/json"};m&&(0!=T.length||M.aidetection)&&this.reportFeedbackService($,F,I)}async reportGem(e,t,i,a,r){var o;const l=(0,P.DA)(),d=(0,n._D)(i),c={activityId:l,market:s.T3&&s.T3.CurrentMarket||"",contentId:e,source:"gem",signature:t,canvas:this.ocid,url:r||(null===(o=window.location)||void 0===o?void 0:o.href)||"",headlineImage:"",headlineText:"",abstract:""};if(0===d.length&&!a)return;d.length>0&&(c.offensive=d),a&&(c.gemFeedback=[]);const u="msn.cn"===(s.T3&&s.T3.HostPage.topDomain)?n.LX:(0,v.pN)().origin+n.cM,h={...await p.WR.getOneServiceHeaders(),...this.additionalHeaders,"Content-Type":"application/json"};this.reportFeedbackService(JSON.stringify(c),u,h)}async reportFeedbackService(e,t,i){const n={method:"POST",headers:i,body:e,credentials:"include"};let a;try{if(a=await fetch(t,n),a.status>=400)throw new Error(a.statusText)}catch(e){u.YT.sendAppErrorEvent({...r.HN5,message:"Error while posting action for card action",pb:{...r.HN5.pb,customMessage:`url: ${t}, error: ${e}`}})}return a}async reportNonCMS(e,t,i,n,a,r,o){this.ReportOCV(e,t,i,n,a,r,o)}async ReportOCV(e,t,i,n,a,s,l){let d=!1;const c=await this.createOcvFeedbackData(e,t,i,n,a,s,l),u={method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)};try{const e=await this.fetchImpl(E,u);if(e.ok)d=!0;else{const t=`Error code: ${e.status} Error message: ${e.statusText} Request params: ${u} Service url: ${E}`;(0,o.vV)(r.QZG,"Request is not valid, it has no content, or the manifest is not formatted correctly",t)}}catch(e){const t=`Error code: ${e?e.code:"undefined"} Error message: ${e?e.message:"undefined"} Request params: ${u} Service url: ${E}`;(0,o.c_)(e,r.lbM,"Exception reporting feedback to OCV",t)}}async createOcvFeedbackData(e,t,i,n,a,r,o){var d,c,h;const v=new w.vO,p=null===l.Rb||void 0===l.Rb?void 0:l.Rb.ClientSettings,f=null===s.T3||void 0===s.T3?void 0:s.T3.HostPage,g=(null==p?void 0:p.aid)||"",m=[r?"1S":"","true"===((null==p?void 0:p.static_page)||"")?"PCS":""].join(" ").trim()||"None",y=(null===s.T3||void 0===s.T3||null===(d=s.T3.CurrentRequestTargetScope)||void 0===d||null===(d=d.pageExperiments)||void 0===d?void 0:d.join(","))||"",C=null===s.T3||void 0===s.T3||null===(c=s.T3.CurrentRequestTargetScope)||void 0===c?void 0:c.browser;let S="";if(a){const e=a.split("|");S=e&&e.length&&e[0]}else{const e=u.YT.getPageMetadata().JoinIdProps.IDXId;if(e){S=e.split(",").slice(0,10).toString()}a=(0,b.Xq)()}const k={serviceType:"oneservice",oneServiceTraceId:S,oneServiceActivityId:""},M={NotRelevant:t.NotRelevant,ImageQuality:t.BlurryImage,MisleadingTitle:t.Misleading,OutdatedArticle:t.Outdated,DuplicateArticle:t.Duplicate,OffensiveContent:t.Offensive,Vertical:n,SuspectedAIOrBot:t.SuspectedAIOrBot,CopyrightAndTrademarkViolation:t.CopyrightAndTrademarkViolation},$=JSON.stringify(M);return u.YT.sendTraceInfoEvent(k),v.submitTime=(new Date).toISOString(),v.clientFeedbackId=(0,P.DA)(),v.comment=i,v.rating=4,v.application={appData:JSON.stringify({ScreenResolution:window&&window.screen?[screen.width,screen.height].join("x"):"",articleId:e,debugId:a,activityID:g,staticFallback:m,vertical:f&&f.verticalKey||"Prod",errorClassification:$,whyAmISeeReasons:o})},v.telemetry={audience:(null===s.T3||void 0===s.T3?void 0:s.T3.CurrentMarket)||"",audienceGroup:"Production",channel:(null==f?void 0:f.categoryKey)||"",deviceType:(null==p?void 0:p.deviceFormFactor)||"",errorClassification:$,featureArea:(null==p?void 0:p.pagetype)||"",flights:y,isUserSubscriber:(0,O.Fo)(),platform:null===(h=s.T3.CurrentRequestTargetScope)||void 0===h?void 0:h.os,processSessionId:g,sourceContext:s.T3.AppType},v.web={browser:(null==C?void 0:C.browserType)||"",browserVersion:(null==C?void 0:C.version)||"",sourcePageName:(null==f?void 0:f.subcategoryKey)||"",sourcePageURI:""},await(0,T._)(v),v}async ReportAd(e,t){if(l.Rb.CurrentFlightSet.has("prg-ad-fbck-log")&&!(0,d.V1)(e))return void(0,o.vV)(r.C8f,`Cannot send ad feedback: invalid or empty feedback URL. Value: '${e}'`);let i;(0,d.bJ)(e)?(i=(0,d.Re)(e,"${FEEDBACK}",encodeURIComponent(t||""),"f"),i=(0,d.Re)(i,"${CANVAS}",encodeURIComponent(s.T3.AppType),"canvas"),u.YT.addOrUpdateTmplProperty("adFeedbackUrlMonetize","1")):i=e.concat(`&f=${t}`);let n=new Image(1,1);n.src=i,n=null}async GetProviderIcon(e){const t=await this.GetPublisherDetails(e);return(0,A.A)(t,"value[0].logos[0].imageLink.href",void 0)}async PostCardActionEvent(e,t,i){let a,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>null,o=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,d=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=arguments.length>7?arguments[7]:void 0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:5e3,v=arguments.length>9&&void 0!==arguments[9]&&arguments[9],p=arguments.length>10?arguments[10]:void 0,f=arguments.length>11?arguments[11]:void 0,g=arguments.length>12?arguments[12]:void 0,m=arguments.length>13?arguments[13]:void 0,b=arguments.length>14?arguments[14]:void 0;switch(t){case z.X.ShowMore:e&z.J.showMore?(d&&y.g.renderToast({id:C.C.ShowMore+`-${i}`,toastType:C.C.ShowMore,expirationInMs:h,onClick:()=>{o?o(i,e^z.J.showMore,t,!0):this.PostCardActionEvent(e^z.J.showMore,t,i,r)},referrerButton:u}),a=await this.ShowMore(i,f,e,b)):(d&&y.g.expireToast(C.C.ShowMore+`-${i}`),a=await this.UnshowMore(i,f,e)),r(i,e,t);break;case z.X.ShowFewer:e&z.J.showFewer?(d&&y.g.renderToast({id:C.C.ShowFewer+`-${i}`,toastType:C.C.ShowFewer,expirationInMs:h,onClick:()=>{o?o(i,e^z.J.showFewer,t,!0):this.PostCardActionEvent(e^z.J.showFewer,t,i,r)},referrerButton:u}),a=await this.ShowFewer(i,f,e,b)):(d&&y.g.expireToast(C.C.ShowFewer+`-${i}`),a=await this.UnshowFewer(i,f,e)),r(i,e,t);break;case z.X.Save:a=Boolean(H.saveStatus[i])?await this.unsaveContent(i):await this.saveContent(i,f,b),r(i,e,t);break;case z.X.FollowPublisher:{const n=f;a=e&z.J.followedPublisher?await this.Follow(l,n):await this.Unfollow(l,n),r(i,e,t);break}case z.X.FollowTopic:{const n=f;a=e&z.J.followedTopic?await this.FollowTopic(l,m,n):await this.UnfollowTopic(l),r(i,e,t);break}case z.X.Hide:a=e&z.J.hide?await this.Hide(i,f,b):await this.Unhide(i),r(i,e,t);break;case z.X.HideTopic:a=e&z.J.hideTopic?await this.PostCardActionRequest(l,z.X.Mute,"TagBase"):await this.DeleteCardActionRequest(l,z.X.Mute);break;case z.X.Mute:if(e&z.J.mute){(e&z.J.followedPublisher||!0===H.publisherFollowStatus[m])&&this.Unfollow(l,f,m);const o=l===n.vq||(null==f?void 0:f.isWebVideo),v=o?n.vq:l,p=o?"Source":"SourceProvider";if(a=null!=f&&f.isWebVideo?await this.Mute(v,p):await this.Mute(v,p,f),a)r(i,e,z.X.Mute,void 0,void 0,v);else if(g&&g(),s.T3.CurrentMarket===c.DX.ENUS)return void setTimeout(()=>{d&&y.g.renderToast({id:`${C.C.MuteError}-${t}-${i}`,toastType:C.C.MuteError,expirationInMs:h,referrerButton:u,positionElRef:null==u?void 0:u.offsetParent})},300)}else a=await this.Unmute(l);break;case z.X.ReportAd:r(i,e,t);break;default:return}v&&!a&&y.g.renderToast({id:`${C.C.ConnectionError}-${t}-${i}`,toastType:C.C.ConnectionError,inputText:p&&p.personalizationErrorText,expirationInMs:h,referrerButton:u})}async GetPublisherDetails(e){const t=this.providersServiceEndpointURL,i={method:"GET",headers:{...await p.WR.getOneServiceHeaders(),...this.additionalHeaders}};[{key:"ids",value:e},...await this.getOneServiceCommonParam()].forEach(e=>e.value&&t.searchParams.set(e.key,e.value));try{const n=await(0,f.w)(async()=>await this.fetchImpl(t.href,i),"getProviderDetails");if(!n.ok){const t=`OneService returned error response. Status: ${n.status} for providerId: ${e}`;throw new Error(t)}return n.json()}catch(e){u.YT.sendAppErrorEvent({...r.Bik,message:"Error while calling getPublisherDetails action for card action",pb:{...r.kOp.pb,customMessage:`url: ${t.href}, error: ${e}`}})}}async DeleteCardActionRequest(e,t){const i=this.cardActionsServiceEndpointURL,n={method:"DELETE",credentials:"include",headers:{...await p.WR.getOneServiceHeaders(),...this.additionalHeaders}};[{key:"$filter",value:`actionType eq '${t}' and targetId eq '${e}'`},...await this.getOneServiceCommonParam()].forEach(e=>e.value&&i.searchParams.set(e.key,e.value));try{const a=await(0,f.w)(async()=>await this.fetchImpl(i.href,n),`deleteCardAction${t}`);if(a.status>=400){const i=`OneService returned error response. Status: ${a.status} for actionType: ${t} and targetId: ${e}`;throw new Error(i)}return(0,g.FH)(this.getPreloadReloadReason(t)),(0,b.T4)(),a}catch(e){u.YT.sendAppErrorEvent({...r.kOp,message:"Error while calling delete action for card action",pb:{...r.kOp.pb,customMessage:`url: ${i.href}, error: ${e}`}})}}async HideSegment(e){if("CasualGame"===e)return _.d.updateGamingCardsEnableStatus([{cardType:L.g.CasualGamesCard,enabled:!1}]);const t=W.AT.get(e);if(t)return _.d.updateSegmentCardsEnableStatus([{cardType:t,enabled:!1}]);const i=W.jf.get(e);return i&&_.d.disableSpotlightCard(null==i?void 0:i.definitionName,null,null==i?void 0:i.targetType)}async PostCardActionRequest(e,t,i,n){const a=this.cardActionsServiceEndpointURL;let o=JSON.stringify({actionType:t,targetId:e,targetType:i,metadata:n,...n&&{degree:"Customized"}});null!=n&&n.useDefinitionName&&(o=JSON.stringify({actionType:t,definitionName:e,targetType:i,metadata:n,...n&&{degree:"Customized"}}));const s={method:"POST",body:o,headers:{...await p.WR.getOneServiceHeaders(),...this.additionalHeaders},credentials:"include"};(await this.getOneServiceCommonParam()).forEach(e=>e.value&&a.searchParams.set(e.key,e.value));try{const n=await(0,f.w)(async()=>await this.fetchImpl(a.href,s),`getCardAction${t}`);if(n.status>=400){const a=`OneService returned error response. Status: ${n.status} for actionType: ${t}, targetId: ${e} and targetType: ${i}`;throw new Error(a)}return(0,g.FH)(this.getPreloadReloadReason(t)),(0,b.T4)(),n.json()}catch(e){u.YT.sendAppErrorEvent({...r.HN5,message:"Error while posting action for card action",pb:{...r.HN5.pb,customMessage:`url: ${a.href}, error: ${e}`}})}}async getOneServiceCommonParam(){return this.isWindowsDashboard||this.isTravelVertical||this.isRuby?p.WR.getOneServiceParamsWithoutAuth(s.T3.UserId,this.ocid,!1):await this.isUserSignedIn()?p.WR.getOneServiceParamsWithAuth(s.T3.UserId,this.ocid,!this.isFinanceVertical&&!this.isFinanceSharedWidget&&!l.Rb.IsBlendedEnterprise||this.isWindowsShellV2):"edgeChromium"===s.T3.AppType&&(0,D.Ri)("lt")&&(0,D.Ri)("aace")?((0,o.vV)(r.mD0,"CardActionServiceClient: lt cookie present. aace cookie present.",void 0,{...r.mD0.pb}),p.WR.getOneServiceParamsWithAuth(s.T3.UserId,this.ocid,!l.Rb.IsBlendedEnterprise||this.isWindowsShellV2)):p.WR.getOneServiceParamsWithoutAuth(s.T3.UserId,this.ocid,!this.isFinanceVertical&&!this.isFinanceSharedWidget&&!l.Rb.IsBlendedEnterprise||this.isWindowsShellV2)}async isUserSignedIn(){if(l.Rb.UserIsSignedIn)return!0;return 2===await(0,O.XK)()}getPreloadReloadReason(e){switch(e){case z.X.Mute:return m.u.MutePublisher;case z.X.Save:return m.u.Save;case z.X.Like:return m.u.Like;case z.X.Dislike:return m.u.Dislike;case z.X.Disabled:return m.u.Disabled;default:return m.u.SettingsChange}}addEventListeners(){window.addEventListener("trackPublisherFollowStatus",this.onChangePublisherFollowStatus)}removeEventListeners(){window.removeEventListener("trackPublisherFollowStatus",this.onChangePublisherFollowStatus)}}class j extends H{constructor(e,t){let i;i=e||((0,k.S)()?window.fetch.bind(window):fetch),super(i,t)}}let U;const B=(e,t)=>U?(t&&U.setAdditionalHeaders(t),U):(U=new j(e,t),U);function q(e){if(e&&e.startsWith("//")){return`${(0,k.S)()?window.location.protocol:"https:"}${e}`}return e}},62190:function(e,t,i){i.d(t,{_:function(){return r}});var n=i(96950),a=i(11622);const r=n.qy`
<fluent-card
    style="grid-area:${e=>e.gridArea};contain:unset;content-visibility:visible"
    class="${e=>e.cardSize}"
>
    ${e=>e.onThisDayCardConfigInfo&&(0,a.yN)(e.onThisDayCardConfigInfo,{properties:{parentTelemetry:e.parentTelemetryObject,onThisDayCardData:e.onThisDayData,goToPersonalizeSettingsCallback:e.goToPersonalizeSettingsCallback,refreshSDCardSection:e.refreshSDCardSection}})}
    </on-this-day-card>
</fluent-card>
`},63218:function(e,t,i){i.d(t,{l:function(){return d}});var n=i(41543),a=i(30216),r=i(19608),o=i(669),s=i(64884);function l(e){const t=e&&e.subCards||[];return t.forEach(e=>{e.image||(e.image=e.images&&e.images[0],e.images=void 0)}),{subCards:t,images:e.images}}const d={getFeedDataForCard:e=>function(e){var t;const{cardMetadata:i,parentTelemetryObject:n,configOptions:d,isDynamicFeed:c,cardActionClickHandler:u,goToPersonalizeCallback:h}=e;i.id="recommendedInterestsCard";const v=d,p=(0,o.H8)(i,(a.J.dismiss<<1)-1),f=0!==(p&a.J.dismiss)?(0,s.Eb)(e,p,i.id,n):{id:i.id,childTemplateType:"recommended-interests-card",recommendedInterestsConfigInfo:v,parentTelemetryObject:n,isDynamicFeed:c,mappedRecommendedInterestsData:l(i),cardActionClickHandler:u,goToPersonalizeCallback:h};return(0,r.bw)({id:i.id,experienceType:null==v||null===(t=v.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},f)}(e),viewTemplate:n.d}},63267:function(e,t,i){i.d(t,{e:function(){return n}});const n={getFeedDataForCard:null,viewTemplate:i(34982).ux}},64747:function(e,t,i){var n;i.d(t,{g:function(){return n}}),function(e){e.ConnectToXbox="ConnectToXbox",e.CasualGamesCard="CasualGamesCard",e.CompeteCard="CompeteCard",e.InterestGroupCard="InterestGroupCard",e.HighlightsCard="HighlightsCard",e.PersonalizationCard="PersonalizationCard",e.LivestreamCard="LivestreamCard",e.ProMatchesCard="ProMatchesCard",e.ProTournamentsCard="ProTournamentsCard",e.RecentlyPlayedCard="RecentlyPlayedCard",e.RecommendedCard="RecommendedCard",e.RecoVideoCard="RecoVideoCard",e.RedditCard="RedditCard",e.RewardsCard="RewardsCard",e.UpcomingGamesCard="UpcomingGamesCard",e.UpsellGamerModeCard="UpsellGamerModeCard",e.VideoCard="VideoCard"}(n||(n={}))},65282:function(e,t,i){i.d(t,{I:function(){return s}});var n=i(96950),a=i(11622),r=i(17254);const o=n.qy`
    ${e=>{var t,i,n,o,s;return e.configInfo&&(0,a.yN)(e.configInfo,{properties:{wpoMetadata:e.wpoMetadata,mapperArgs:e.mapperArgs,parentTelemetry:e.telemetryObject,feedLayoutCardSize:e.cardSize,hasLoadedCallback:e.hasLoadedCallback,cardType:e.cardType,goToPersonalizeSettingsCallback:null===(t=e.mapperArgs)||void 0===t?void 0:t.goToPersonalizeSettingsCallback,refreshFeedCallback:null===(i=e.mapperArgs)||void 0===i?void 0:i.refreshFeedCallback},attributes:{style:`grid-area:${e.gridArea};${n=e.mapperArgs,null!=n&&null!==(o=n.displaySettings)&&void 0!==o&&o.cardWidth?`width:${null==n||null===(s=n.displaySettings)||void 0===s?void 0:s.cardWidth}px;`:""};contain:unset;content-visibility:visible;`,class:`${e.cardSize}`,tabindex:e.customTabIndex??0},telemetryObject:e.telemetryObject,memoize:"winWidgets"!==r.T3.AppType&&"windowsShellV2"!==r.T3.AppType})}}
`,s=n.qy`
    ${o}
`},65639:function(e,t,i){i.d(t,{s:function(){return d}});var n=i(29525),a=i(93468),r=i(65022),o=i(19608),s=i(55602);const l="profileCarouselCardId";const d={getFeedDataForCard:e=>function(e){try{var t,i;const{configOptions:n,cardMetadata:a,cardSlot:r,parentTelemetryObject:d,refreshSDCardSection:c,refreshFeedCallback:u,goToPersonalizeSettingsCallback:h}=e;if(!a||!r)throw new Error("Missing required parameters");const v=e.cardMetadata&&"PremiumProviderUpsell"==e.cardMetadata.subType,p=n&&n.childExperienceReferencesWC&&(v?n.childExperienceReferencesWC.PremiumProfilePromoCard:n.childExperienceReferencesWC.profilePromoCard);p&&(0,s.uC)(p);const f=null===(t=e.cardMetadata)||void 0===t?void 0:t.subCards,g={cardMetadata:a,childTemplateType:"profile-carousel-card",goToPersonalizeCallback:h,id:l,isPremium:v,parentTelemetryObject:d,profileCarouselConfigInfo:p,profileMetadataList:f,refreshFeed:c||u};return(0,o.bw)({id:l,experienceType:null==p||null===(i=p.configRef)||void 0===i?void 0:i.experienceType,mapperArgs:e},g)}catch(e){(0,a.c_)(e,r.H6Q,"Error in Profile Carousel Mapper")}return null}(e),viewTemplate:n.I}},65907:function(e,t,i){i.d(t,{P:function(){return s}});var n=i(50115),a=i(77246),r=i(12870),o=i(17254);async function s(){return new Promise(async e=>{var t,i;if("edgeChromium"===o.T3.AppType){if(!(0,a.S)()||null!==r.Rb&&void 0!==r.Rb&&r.Rb.IsPrerender){const t=await(0,n.Db)();return void e(t)}"function"==typeof(null===(t=window)||void 0===t||null===(t=t.chrome)||void 0===t||null===(t=t.edgeMarketingPagePrivate)||void 0===t?void 0:t.isEdgeChatEnabled)&&"function"==typeof(null===(i=window)||void 0===i||null===(i=i.chrome)||void 0===i||null===(i=i.edgeMarketingPagePrivate)||void 0===i?void 0:i.sendCopilotQuery)?window.chrome.edgeMarketingPagePrivate.isEdgeChatEnabled(t=>{e(t)}):e(!1)}else e(!1)})}},66603:function(e,t,i){i.d(t,{i:function(){return r}});var n=i(89337),a=i(19608);const r={getFeedDataForCard:e=>(e=>{var t;const{configOptions:i={},isDarkModeForMobile:n,displaySettings:r,cardMetadata:o,requestBrowserToOpenUrl:s,searchRewardsData:l}=e,{useMobile:d,isMsnMobile:c}=i,u="TrendingSearchCard",h={id:u,childTemplateType:"trending-search-card",cardMetadata:o,mapperArgs:e,trendingSearchConfigInfo:i,displaySettings:r,isDarkModeForMobile:n,useMobile:d,isMsnMobile:c,searchRewardsData:l,onLinkClickCallback:s};return(0,a.bw)({id:u,experienceType:null===(t=i&&i)||void 0===t||null===(t=t.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},h)})(e),viewTemplate:n.S}},66805:function(e,t,i){i.d(t,{y:function(){return n}});const n=i(96950).qy`${e=>e.topicFeedTemplate}`},66950:function(e,t,i){i.d(t,{U:function(){return c}});var n=i(930),a=i(8866),r=i(96950),o=i(11622),s=i(17254);const l=r.qy`${e=>e.sportsCardConfigInfo&&(0,o.yN)(e.sportsCardConfigInfo,{properties:{wpoMetadata:e.wpoMetadata,cardType:e.cardType,experienceName:e.experienceName,cardId:e.cardId,shellV2PreviewType:"windowsShellV2"===s.T3.AppType?e.previewType:"",cardSize:e.cardSize===a.Go._1u?n.uE._1x_2y:e.cardSize,goToPersonalizeCallback:e.goToPersonalizeCallback,refreshFeed:e.refreshFeed,visualReadinessCallback:e.visualReadinessCallback,parentTelemetryObject:e.parentTelemetryObject,supportedSdCardActionMenuItems:e.supportedSdCardActionMenuItems,sdCardActionClickHandler:e.sdCardActionClickHandler,dismissActionMenu:e.dismissSDCardMenuCallback,isSpotlight:e.isSpotlightUX,isWidgetRegion:e.isWidgetRegion,turnOffWidgetsRegionCallback:e.turnOffWidgetsRegionCallback,manageWidgetsRegionCallback:e.manageWidgetsRegionCallback,telemetryExt:e.telemetryExt,feedDataParsed:e.sportsMatchupData,hasLoadedCallback:e.hasLoadedCallback,onSDCardClick:e.onSDCardClick,wpoId:e.wpoId},attributes:{style:`grid-area:${e.gridArea};contain:unset;content-visibility:visible`,initialPreviewType:e.previewType},memoize:"windowsShellV2"!==s.T3.AppType})}`,d=r.qy`${e=>e.sportsCardConfigInfo&&(0,o.yN)(e.sportsCardConfigInfo,{properties:{cardLayout:e.cardLayout,wpoMetadata:e.wpoMetadata,sportsData:e.sportsMatchupData,openLinksInNewTab:e.openLinksInNewTab,telemetryExt:e.telemetryExt,noGradient:e.noGradient,refreshFeed:e.refreshFeed,goToPersonalizeCallback:e.goToPersonalizeCallback,supportedSdCardActionMenuItems:e.supportedSdCardActionMenuItems,sdCardActionClickHandler:e.sdCardActionClickHandler,visualReadinessCallback:e.visualReadinessCallback,dismissActionMenu:e.dismissSDCardMenuCallback},attributes:{style:`grid-area:${e.gridArea};contain:unset;content-visibility:visible`},memoize:"windowsShellV2"!==s.T3.AppType})}`,c=r.qy`
    ${e=>{var t;return"SportsInfo"===(null===(t=e.sportsCardConfigInfo.configRef)||void 0===t?void 0:t.experienceType)?l:d}}
`},67067:function(e,t,i){i.d(t,{B:function(){return s}});var n=i(86500),a=i(96950),r=i(91640),o=i(47264);const s=a.qy`
    <style>
        /* default gradient background */
        .money-card-gradient {
            background: linear-gradient(160deg, rgba(228,237,248,0), rgba(228,237,248,1)), #FFFFFF;;
        }
    
        /* medium dark gradient background */
        .money-card-megrad {
            background: linear-gradient(160deg, rgba(183,205,237,0), rgba(183,205,237,1)), #F4F7FC;
        }
    
        /* max dark gradient background */
        .money-card-magrad {
            background: linear-gradient(160deg, rgba(228,237,248,0.8), rgba(228,237,248,1)), #FFF;;
        }
    </style>
    <fluent-card 
        style="grid-area:${e=>e.gridArea};"
        class="${e=>e.cardSize}"
    >
        <msft-show-quotes-money-card
            id="${e=>e.id}"
            class="${e=>{return t=e.gradientConfig.gradientBrightLevel,i=e.gradientConfig.enableGradientStyles,a="money-card",i?(t===n.n$.Default?a=`${a}-gradient`:t===n.n$.Medium?a=`${a}-megrad`:t===n.n$.Max&&(a=`${a}-magrad`),a):"";var t,i,a}}"
            layout="${e=>e.layout}"
            cardStyle="${e=>e.cardStyle}"
            style="${e=>e.moneyCardStyles} cursor: pointer;"
            target=${e=>e.openLinksInNewTab?"_blank":"_self"}
            @click="${(e,t)=>(0,n.D4)(t.event,e.id,e.moneyCardContentData.link,e.openLinksInNewTab,e.telemetryContext)}"

            :moneyCardContentData="${e=>e.moneyCardContentData}"
            :quoteItems="${e=>e.quoteItems}"
            :headerTelemetryTag="${e=>e.telemetryContext&&e.telemetryContext.titleClick&&e.telemetryContext.titleClick.getMetadataTag()}"
            :switchValueTelemetryTag="${e=>e.telemetryContext&&e.telemetryContext.switchValue&&e.telemetryContext.switchValue.getMetadataTag()}"
            :seeMoreTelemetryTag="${e=>e.telemetryContext&&e.telemetryContext.seeMore&&e.telemetryContext.seeMore.getMetadataTag()}"
            data-t="${e=>{var t;return null===(t=e.telemetryContext)||void 0===t||null===(t=t.moneyCard)||void 0===t?void 0:t.getMetadataTag()}}"
        >
        ${(0,r.z)(e=>e.toggleSDCardActionMenu&&!e.disableCardAction,a.qy`
            <fluent-button
                id="option-button"
                appearance="neutral"
                class="more-actions"
                part="more-actions"
                slot="more-actions"
                @click="${(e,t)=>e.toggleSDCardActionMenu(t.event)}"
                data-t="${e=>{var t;return null===(t=e.telemetryContext)||void 0===t||null===(t=t.actionButton)||void 0===t?void 0:t.getMetadataTag()}}"
                ref="optButton"
                title="${e=>e.moreOptionsTooltip}"
                aria-label="${e=>e.moreOptionsTooltip}"
                role="button"
            >
                ${a.qy.partial(o.A)}
            </fluent-button>
        `)}
        </msft-show-quotes-money-card>
    </fluent-card>
`},67142:function(e,t,i){i.d(t,{N:function(){return r}});var n=i(96950),a=i(11622);const r=n.qy`
<fluent-card
    style="grid-area:${e=>e.gridArea};contain:unset"
    class="${e=>e.cardSize}"
>
    ${e=>e.electionsAnswerConfigInfo&&(0,a.yN)(e.electionsAnswerConfigInfo,{properties:{parentTelemetry:e.parentTelemetryObject,telemetryExt:e.telemetryExt,backendData:e.dataToPassToComponent,cardSizeMetadata:e.cardSize,goToPersonalizeSettingsCallback:e.goToPersonalizeSettingsCallback,refreshSDCardSection:e.refreshSDCardSection}})}
</fluent-card>
`},68154:function(e,t,i){i.d(t,{LX:function(){return s},Zn:function(){return a},_D:function(){return n},cM:function(){return o},vF:function(){return r},vq:function(){return l}});const n=e=>{const t=[],i={TextProfanity:"TextProfanity",Profanity:"TextProfanity",SubstanceAbuse:"SubstanceAbuse",Violence:"Violence",Misinformation:"MisinformationCovid",Other:"Other",AdultImage:"AdultImage",RacyImage:"RacyImage",AdultAndRacyImage:"AdultAndRacy",SuicideOrSelfHarm:"SuicideAndSelfHarm",BullyingAndHarassment:"BullyingAndHarassment",HateSpeech:"HateSpeech",Spam:"Spam",ChildAbuse:"ChildAbuse",TerrorismOrViolentExtremism:"TerrorismOrViolentExtremism",Gambling:"Gambling",RegulatedGoods:"RegulatedGoods",UnverifiedMedicalClaims:"UnverifiedMedicalClaims",Hoax:"Hoax"};return e&&Object.keys(e).forEach(n=>{e[n]&&t.push(i[n])}),t},a=e=>{const t=[],i={reportBlurryImage:"reportBlurryImage",reportLongBlockOfUnFormatted:"reportLongBlockOfUnFormatted",reportTooManyLink:"reportTooManyLink",reportInsufficientInformation:"reportInsufficientInformation",reportExpectedMediaNotFound:"reportExpectedMediaNotFound",reportDuplicateContentOrMedia:"reportDuplicateContentOrMedia",Other:"Other"};return e&&Object.keys(e).forEach(n=>{e[n]&&t.push(i[n])}),t},r=e=>{const t=[],i={UndisclosedAIgengerated:"AIGeneratedMedia",AIGeneratedPromotion:"PromotionalAdLinks",IncorectInfo:"IncorrectInformation",Nonsensical:"NonsenseMedia",FakedImgOfPublicFigures:"FakedImagesOfRealPeopleOrEvents",ImpossiblePhysicalAppearance:"ImpossiblePhysicalAppearance",ContentIdentifiesItselfAsAIGenerated:"ContentItselfIdsAsAI",PlagiarismC:"reportPlagiarismChecked",other:"other"};return e&&Object.keys(e).forEach(n=>{e[n]&&"PlagiarismC"!=n&&"other"!=n&&t.push(i[n])}),t},o="/service/moderation/api/reportanissue",s="https://assets.msn.cn/service/moderation/api/reportanissue",l="WebVideo"},70438:function(e,t,i){i.d(t,{m:function(){return a}});var n=i(26641);const a={getFeedDataForCard:e=>(0,n.BQ)(e),viewTemplate:n.wT}},71854:function(e,t,i){i.d(t,{v:function(){return a}});var n=i(26641);const a={getFeedDataForCard:e=>(0,n.BQ)(e),viewTemplate:n.wT}},74227:function(e,t,i){var n;i.d(t,{KS:function(){return n},nn:function(){return a},o_:function(){return r}}),function(e){e.OnStartFeedRequest="onStartFeedRequest",e.OnParametersReset="onParamatersReset",e.OnStartFeedRefresh="onStartFeedRefresh",e.OnFeedRefreshed="onFeedRefreshed",e.OnFeedResponseRetrieved="onFeedResponseRetrieved",e.OnFeedDisconneted="onFeedDisconneted",e.OnFeedRendered="onFeedRendered",e.OnStartCardArgsCreate="onStartCardArgsCreate",e.OnCardArgsCreated="onCardArgsCreated",e.OnCardMappingError="OnCardMappingError",e.OnStartCardActionUpdate="onStartCardActionUpdate",e.OnRefreshButtonClicked="OnRefreshButtonClicked",e.OnResizeDuringHydration="OnResizeDuringHydration",e.BeforeUpdateLayout="beforeUpdateLayout",e.OnFirstSectionFeed="onFirstSectionFeed",e.OnLayoutChange="onLayoutChange",e.OnWaterfallResize="onWaterfallResize",e.OnFeedRequestFailed="onFeedRequestFailed",e.UpdateAdIndexes="updateAdIndexes",e.OnCardMappingProcessing="onCardMappingProcessing"}(n||(n={}));const a={Work:"work",Consumer:"consumer"};var r;!function(e){e[e.Sam=0]="Sam",e[e.Cms=1]="Cms"}(r||(r={}))},76405:function(e,t,i){i.d(t,{j:function(){return r}});var n=i(96950),a=i(11622);const r=n.qy`
    ${e=>(0,a.yN)(e.autosCarouselCardConfigInfo,{attributes:{style:`grid-area:${e.gridArea}`,class:`${e.cardSize}`},properties:{wpoMetadata:e.wpoMetadata,cardMetadata:e.autosCarouselCardMetaData,parentTelemetry:e.parentTelemetryObject,cardSize:e.cardSize,goToPersonalizeSettingsCallback:e.goToPersonalizeSettingsCallback,refreshFeed:e.refreshFeed}})}
`},76865:function(e,t,i){i.d(t,{Z:function(){return r}});var n=i(67142),a=i(19608);const r={getFeedDataForCard:e=>function(e){var t;const{configOptions:i,parentTelemetryObject:n,cardMetadata:r,goToPersonalizeSettingsCallback:o,refreshSDCardSection:s}=e,l={genericElection:[r]};let d;i&&i.childExperienceReferencesWC&&(d=i.childExperienceReferencesWC.electionsCard),d&&d.instanceId||(d=i&&i);const c={id:"electionsCard",childTemplateType:"elections-card",goToPersonalizeSettingsCallback:o,parentTelemetryObject:n,electionsAnswerConfigInfo:d,dataToPassToComponent:l,refreshSDCardSection:s};return(0,a.bw)({id:"electionsCard",experienceType:null===(t=d)||void 0===t||null===(t=t.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},c)}(e),viewTemplate:n.N}},76992:function(e,t,i){i.d(t,{c:function(){return m}});var n=i(19608),a=i(93468),r=i(65022),o=i(83003);const s=[o.pL.MoneyTopicStripe,o.pL.SportsTopicStripe];const l=e=>(null==e?void 0:e.type)&&s.includes(e.type);var d=i(92910),c=i(12870);var u=i(27942),h=i(59966),v=i(29307),p=i(55602);const f={[o.pL.ComicsCarousel]:{childTemplateType:"comics-carousel-card",id:"comics-carousel-id"},[o.pL.SelectCarousel]:{childTemplateType:"select-carousel-card",id:"select-carousel-id"},[o.pL.EditorsPickCarousel]:{childTemplateType:"editors-pick-carousel-card",id:"editors-pick-carousel-id"},[o.pL.DailyFixGamesCarousel]:{childTemplateType:"daily-fix-games-carousel-card",id:"daily-fix-games-carousel-id"},[o.pL.LocalNewsFeed]:{childTemplateType:"local-news-carousel-card",id:"local-news-carousel-id"},[o.pL.BingVideoCarousel]:{childTemplateType:"topic-feed-card",id:"bing-video-carousel-id"},[o.pL.MoneyTopicStripe]:{childTemplateType:"money-topic-stripe-carousel-card",id:"money-topic-stripe-carousel-id"},[o.pL.SportsTopicStripe]:{childTemplateType:"sports-topic-stripe-carousel-card",id:"sports-topic-stripe-carousel-id"},[o.pL.WeatherHero]:{childTemplateType:"weather-hero-experience-carousel-card",id:"weather-hero-experience-carousel-id"},EventCarousel:{childTemplateType:"select-carousel-card",id:"event-carousel-id"},WebNewsCarousel:{childTemplateType:"topic-feed-card",id:"web-news-carousel-id"},MangaCarousel:{childTemplateType:"topic-feed-card",id:"manga-carousel-id"},TopStories:{childTemplateType:"select-carousel-card",id:"top-stories-carousel-id"},RealTimeContentCarousel:{childTemplateType:"topic-feed-card",id:"realtime-content-carousel-id"},trendingInTenMinutes:{childTemplateType:"select-carousel-card",id:"trending-in-ten-minutes-id"},infopane:{childTemplateType:"select-carousel-card",id:"infopane-id"},ShoppingProngCardResponse:{childTemplateType:"select-carousel-card",id:"shopping-prong-card-response"}},g={manga:"MangaCarousel",webnlnews:"WebNewsCarousel","watch-shorts":"BingVideoCarousel","watch-video":"BingVideoCarousel",video:"BingVideoCarousel",trendingInTenMinutes:"TrendingInTenMinutes",infopane:"Infopane",topstories:"TopStories","money-video":"BingVideoCarousel"};function m(e){let t=!1,i=!1,s=!1;try{var m,y,C;const{configOptions:T,parentTelemetryObject:S,cardSlot:k,localizedStrings:M,cardActionClickHandler:$,cardActionMenuClickCallback:F,actionMenuLocalizedStrings:I,initCardAction:x,refreshFeedCallback:R,refreshSDCardSection:P,goToPersonalizeSettingsCallback:A,visualReadinessCallback:D,displaySettings:O=null,mobileCardClickCallback:N,setShouldScrollToComments:_,newsXfeedNavigationHandlerCallback:L,secIndex:z,isBingImageAsBackground:W,isDarkModeForMobile:E,isPivotsEnabled:H,isMobile:j,overrideShoppingProngCardResponseTitle:U,notShowCarouselSeeMoreCard:B,hideCardCallback:q,shareActionHandler:G,sdCardActionClickHandler:V,hasLoadedCallback:K}=e;let J=e.cardMetadata;if(!J||!k)throw new Error("Missing required parameters");const{grid_area:Z,layouts:Q}=k,X=l(J);if(X&&(J=function(e){var t;if(null==e||null===(t=e.subCards)||void 0===t||!t.length)return e;const i=e.subCards[0];return i?{...e,...i}:e}(J)),t=(0,d.Kj)(J),w=J,s=(0,c.Th)().CurrentFlightSet.has("prg-realtime-carv1")&&w.id&&["CanonicalName-wpo-recommended-content","CanonicalName-wpo-followed-content","CanonicalName-wpo-topic-content"].includes(w.id)&&w.type===o.pL.TopicFeed,i=J.isTriggeredByClient,!s&&t&&!(0,d.Lz)(J,g)&&!i&&!j)return null;let Y;Y=s||!t||i?t&&j?g[J.feed.canonicalName]:i?"EventCarousel":"WeatherHero"==J.type?"WeatherHero":"NewsAnswerModule"==J.type?J.subType:s&&!j?"RealTimeContentCarousel":J.type:g[J.feed.canonicalName];const ee=Y?f[Y]:null;if(!ee)throw new Error("Invalid carousel type: "+Y);if(Y===o.pL.LocalNewsFeed&&(null===(m=J.subCards)||void 0===m?void 0:m.length)<7){const e=J.feed&&J.feed.location;return(0,a.c_)(new Error("Not enough content for local news carousel"),r.dDC,`Not enough local content in Select Carousel Mapper for ${JSON.stringify(e)}`),null}const te=t&&!X?T.selectCarousel:(0,v.A)(T);if(te){var b;const e=(null===(b=J)||void 0===b||null===(b=b.feed)||void 0===b?void 0:b.canonicalName)||"";te.instanceId=`sc${Y}_${e}`}let ie;t&&te&&(0,p.uC)(te),j&&(ie=e=>{N(e,o.pL.Article,J,"article card")}),j&&ee.id===f.LocalNewsFeed.id&&(ee.childTemplateType="select-carousel-card"),J.subItems&&!J.subCards&&null!==(y=J.card)&&void 0!==y&&y.subCards&&(J.subCards=J.card.subCards);const ne={childTemplateType:ee.childTemplateType,cardMetadata:J,carouselType:Y,gridArea:Z,id:ee.id,parentTelemetryObject:S,selectCarouselConfigInstance:te,shouldFetchData:!J.data&&!J.subCards,topicFeedTemplate:t&&h.H||null,handleContentCardClickOverride:ie,refreshFeedCallback:P||R,goToPersonalizeSettingsCallback:A,visualReadinessCallback:D,actionMenuCallback:$,cardActionMenuClickCallback:F,actionMenuLocalizedStrings:I,configOptions:T,mobileCardClickCallback:N,setShouldScrollToComments:_,displaySettings:O,newsXfeedNavigationHandlerCallback:L,secIndex:z,isBingImageAsBackground:W,isDarkModeForMobile:E,isPivotsEnabled:H,overrideShoppingProngCardResponseTitle:U,notShowCarouselSeeMoreCard:B,layout:u.j1.c4,hideCardCallback:q,shareActionHandler:G,sdCardActionClickHandler:V,hasLoadedCallback:K};$&&x&&(ne.toggleCardActionMenu=(e,t)=>function(e,t,i,n){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7?arguments[7]:void 0,l=t,d=e;t.detail&&t.detail.event&&t.detail.data&&(l=t.detail.event,d=this.getListCardMetadata(t.detail.data),a=!0);const{id:c,title:u,clickUrl:h,imageInfo:v,provider:p,cardActionStatus:f,telemetry:{seeMore:g},actionsArrayOverride:m,abstract:y}=d,C={enabled:!0,buttonElement:l.currentTarget,article:{id:c,headlineTitle:u,href:h,image:{alt:v&&v.altText,src:v&&v.sourceImageUrl},provider:{name:p.name,image:{alt:p.name,src:p.logo}},abstract:y},parentTelemetryObject:g,onStatusChange:i,cardStatus:f,updateFeedOnHide:a,showToast:r,refreshFeedCallback:o,openPersonalizeWithoutRouter:s,actionsArrayOverride:m};n(C)}(e,t,$,x,null,!T.enableHideStoryFeedback,R,null==T?void 0:T.openPersonalizeWithoutRouter),ne.cardActionTooltips=M&&M.cardActionsTooltips);const ae=(e,t)=>({configOptions:T,mobileCardClickCallback:N,setShouldScrollToComments:_,refreshFeedCallback:R,layout:e,shareActionHandler:G});return(0,n.bw)({id:ee.id,experienceType:null==te||null===(C=te.configRef)||void 0===C?void 0:C.experienceType,mapperArgs:e},ne,ae,!0)}catch(e){if((0,a.c_)(e,r.u5P,"Error in Select Carousel Mapper"),t)throw d.Ar}var w;return null}},78750:function(e,t,i){i.d(t,{H:function(){return s}});var n=i(65022),a=i(93468),r=i(19608),o=i(92910);function s(e,t){try{var i;const{configOptions:s,cardMetadata:l,parentTelemetryObject:d,goToPersonalizeSettingsCallback:c,refreshFeedCallback:u,isWidgetRegion:h,turnOffWidgetsRegionCallback:v,manageWidgetsRegionCallback:p,hideCardCallback:f}=e;if(!t&&!(0,o.Lz)(l,"hotlist")&&!s.hotListCard)return null;if(!l.subCards||!l.subCards.length)throw(0,a.vV)(n.qV8,"Service context returned empty subcards in metadata"),new Error("HotList DataMap Missing required parameters");const g=s&&s.hotListCard||s,m={id:"hotListCard",childTemplateType:"hot-list-card",parentTelemetryObject:d,hotListCardConfigInfo:g,cardMetadata:l,goToPersonalizeSettingsCallback:c,refreshFeedCallback:u,wpoMetadata:l&&l.wpoMetadata,isWidgetRegion:h,turnOffWidgetsRegionCallback:v,manageWidgetsRegionCallback:p,hideCardCallback:f};return m.isWidgetRegion&&(m.cardSize="0.5U"),(0,r.bw)({id:"hotListCard",experienceType:null==g||null===(i=g.configRef)||void 0===i?void 0:i.experienceType,mapperArgs:e},m)}catch(e){(0,a.c_)(e,n.Wrb,"Error in feed-layout HotList Card Mapper")}return null}},79569:function(e,t,i){i.d(t,{j:function(){return s}});var n=i(9071),a=i(93468),r=i(65022),o=i(19608);const s={getFeedDataForCard:e=>function(e){try{var t;const{configOptions:i,cardMetadata:n,goToPersonalizeSettingsCallback:a,parentTelemetryObject:r,sdCardActionClickHandler:s,refreshFeedCallback:l}=e,d="cashback-carousel-card",c={id:d,childTemplateType:"cashback-carousel-card",goToPersonalizeSettingsCallback:a,sdCardActionClickHandler:s,refreshFeedCallback:l,cardMetadata:n,parentTelemetryObject:r,cashbackCarouselCardConfigInfo:i&&i};return(0,o.bw)({id:d,experienceType:null===(t=c.cashbackCarouselCardConfigInfo)||void 0===t||null===(t=t.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},c)}catch(e){(0,a.c_)(e,r.Odo,"Error in Cashback Carousel Prong Mapper")}}(e),viewTemplate:n.Z}},80149:function(e,t,i){i.d(t,{s:function(){return r}});var n=i(96950),a=i(11622);const r=n.qy`
    ${e=>e.healthTipConfigInfo&&(0,a.yN)(e.healthTipConfigInfo,{includeTelemetryTag:!1,properties:{wpoMetadata:e.wpoMetadata,parentTelemetry:e.parentTelemetryObject,healthTipData:e.healthTipData,refreshSDCardSection:e.refreshSDCardSection,sdCardActionClickHandler:e.sdCardActionClickHandler,refreshFeed:e.refreshFeed,cardSize:e.cardSize},events:{goToPersonalizeSettingsCallback:e.goToPersonalizeSettingsCallback}})}
`},80360:function(e,t,i){i.d(t,{n:function(){return o}});var n=i(96950),a=i(11622),r=i(17254);const o=n.qy`
    ${e=>(0,a.yN)(e.shoppingCarouselProngWCConfigInfo,{attributes:{style:`grid-area:${e.gridArea};contain:unset;content-visibility:visible`,class:e.cardSize},properties:{instanceId:e.shoppingCarouselProngWCConfigInfo.instanceId,openLinksInNewTab:!0,parentTelemetryObject:e.parentTelemetryObject,sdCardActionClickHandler:e.sdCardActionClickHandler,goToPersonalizeCallback:e.goToPersonalizeCallback,refreshFeedCallback:e.refreshFeedCallback,shoppingCardMetadata:e.shoppingCardMetadata,wpoMetadata:e.wpoMetadata,supportedSdCardActionMenuItems:e.supportedSdCardActionMenuItems,isDynamicFeed:e.isDynamicFeed,isWidget:e.isWidget,useInlineSvgIcons:!0,cardSize:e.cardSize,cardType:e.cardType},memoize:"windowsShellV2"!==r.T3.AppType})}
</msft-shopping-card>
`},80541:function(e,t){t.A='<svg width="17" height="17" viewBox="0 0 17 17"><path d="M.02 5.88A8.5 8.5 0 0 1 1.8 2.8a.5.5 0 0 1 .54-.13l1.92.68a1 1 0 0 0 1.32-.76l.37-2a.5.5 0 0 1 .39-.4 8.53 8.53 0 0 1 3.55 0 .5.5 0 0 1 .39.4l.37 2a1 1 0 0 0 1.32.76l1.91-.68a.5.5 0 0 1 .54.13 8.5 8.5 0 0 1 1.78 3.08.5.5 0 0 1-.15.54L14.5 7.74a1 1 0 0 0 0 1.52l1.55 1.32a.5.5 0 0 1 .15.54 8.5 8.5 0 0 1-1.78 3.08.5.5 0 0 1-.54.13l-1.91-.68a1 1 0 0 0-1.32.76l-.37 2a.5.5 0 0 1-.39.4 8.53 8.53 0 0 1-3.55 0 .5.5 0 0 1-.4-.4l-.36-2a1 1 0 0 0-1.32-.76l-1.92.68a.5.5 0 0 1-.54-.13 8.49 8.49 0 0 1-1.78-3.08.5.5 0 0 1 .16-.54l1.55-1.32a1 1 0 0 0 0-1.52L.18 6.42a.5.5 0 0 1-.16-.54Zm1.06 0 1.3 1.1a2 2 0 0 1 0 3.04l-1.3 1.1c.3.79.72 1.51 1.25 2.16l1.6-.58a2 2 0 0 1 2.64 1.53l.3 1.67a7.56 7.56 0 0 0 2.49 0l.3-1.67a2 2 0 0 1 2.64-1.53l1.6.57a7.5 7.5 0 0 0 1.24-2.15l-1.29-1.1a2 2 0 0 1 0-3.05l1.3-1.1a7.5 7.5 0 0 0-1.25-2.15l-1.6.57a2 2 0 0 1-2.64-1.52l-.3-1.67a7.55 7.55 0 0 0-2.49 0l-.3 1.67A2 2 0 0 1 3.93 4.3l-1.6-.57a7.5 7.5 0 0 0-1.25 2.15ZM5.62 8.5a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0Zm1 0a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0Z" fill-opacity=".83"/></svg>'},81673:function(e,t,i){i.d(t,{U:function(){return s}});var n=i(65022),a=i(93468),r=i(19608),o=i(29307);function s(e){try{var t,i;const{configOptions:n,cardMetadata:a,parentTelemetryObject:s,isDynamicFeed:l,goToPersonalizeSettingsCallback:d,refreshFeedCallback:c,supportedSdCardActionMenuItems:u,sdCardActionClickHandler:h,isSpotlightZone:v}=e,p=n.spotlightCard||n,f=(0,o.A)(p),g=(null===(t=a.feed)||void 0===t?void 0:t.canonicalName)||`SpotlightCard-${a.type}`;f&&(f.instanceId=g+p.instanceId);const m={id:"spotlightCard",childTemplateType:"spotlight-card",parentTelemetryObject:s,spotlightCardConfigInfo:f,cardMetadata:a,isDynamicFeed:l,goToPersonalizeSettingsCallback:d,refreshFeedCallback:c,supportedSdCardActionMenuItems:u,sdCardActionClickHandler:h,isSpotlightZone:v,wpoMetadata:null==a?void 0:a.wpoMetadata};return(0,r.bw)({id:"spotlightCard",experienceType:null==f||null===(i=f.configRef)||void 0===i?void 0:i.experienceType,mapperArgs:e},m)}catch(e){(0,a.c_)(e,n.Wrb,"Error in feed-layout Spotlight Card Mapper")}return null}},81981:function(e,t,i){i.d(t,{Z:function(){return o}});var n=i(96950),a=i(91640),r=i(52201);const o=n.qy`
    ${(0,a.z)(e=>e.linkedInCardConfigInfo,n.qy`
        <fluent-card
            style="grid-area:${e=>e.gridArea};contain:content;content-visibility:visible"
            class="${e=>e.cardSize}"
        >
            <fluent-design-system-provider neutral-base-color=${e=>{var t;return null===(t=e.overrides)||void 0===t?void 0:t.neutralColor}}>
                <linked-in-card
                    config-instance-src=${e=>e.linkedInCardConfigInfo&&(0,r.v)(e.linkedInCardConfigInfo)}
                    instance-id=${e=>e.linkedInCardConfigInfo&&e.linkedInCardConfigInfo.instanceId}
                    :cardOverrides=${e=>e.overrides}
                    :parentTelemetry=${e=>e.parentTelemetryObject}
                    :cardData=${e=>e.linkedInCardData}
                    :removeProductivityCard=${e=>e.refreshSDCardSection}
                    :navigateToPersonalizeSetting=${e=>e.goToPersonalizeSettingsCallback}
                >
                </linked-in-card>
            </fluent-design-system-provider>
        </fluent-card>
    `)}
`},82437:function(e,t,i){i.d(t,{n:function(){return a}});var n=i(26641);const a={getFeedDataForCard:e=>(0,n.BQ)(e),viewTemplate:n.wT}},82670:function(e,t,i){i.d(t,{a:function(){return r}});var n=i(96950),a=i(11622);const r=n.qy`
<fluent-card
    style="grid-area:${e=>e.gridArea};contain:unset;content-visibility:visible"
    class="${e=>e.cardSize}"
    size="${e=>e.cardSize}"
>
    ${e=>(0,a.yN)(e.quizAnswerConfigInfo,{properties:{oneServiceQuizData:e.dataToPassToComponent,goToPersonalizeSettingsCallback:e.goToPersonalizeSettingsCallback,refreshSDCardSection:e.refreshSDCardSection,telemetryExt:e.telemetryExt,cardSize:e.cardSize},telemetryObject:e.telemetryObject})}
</fluent-card>
`},83117:function(e,t,i){i.d(t,{g:function(){return o}});var n=i(98216),a=i(65022),r=i(93468);class o{static renderToast(e){const t=()=>{this.renderToastCallback?this.renderToastCallback(e):n.YT.sendAppErrorEvent((0,r.$5)(a.HBg,"Undefined toast render callback function"))};if(o.waitForCallbackReadyTimeout>0&&"undefined"!=typeof window&&void 0!==window.setTimeout){const e=window.setTimeout(()=>{t()},o.waitForCallbackReadyTimeout);o.ready&&o.ready.then(()=>{clearTimeout(e),t()})}else t()}static setRenderToastCallback(e){this.renderToastCallback=e,this.readyResolveFn()}static expireToast(e){this.expireToastCallback?this.expireToastCallback(e):n.YT.sendAppErrorEvent((0,r.$5)(a.kZg,"Undefined toast expire callback function"))}static setExpireToastCallback(e){this.expireToastCallback=e}static setCurrentToast(e,t){this.currentToastId!==e&&(this.currentToastId=e,this.renderToastCallback=t,t&&this.readyResolveFn(),this.currentToastIdChangeCallbacks.forEach(t=>t(e)),this.renderToast())}static addCurrentToastIdChangeCallback(e){e&&this.currentToastIdChangeCallbacks.push(e)}static setWaitForCallbackReadyTimeout(e){o.waitForCallbackReadyTimeout=e}}o.ready=new Promise(e=>o.readyResolveFn=e),o.currentToastIdChangeCallbacks=[]},83449:function(e,t,i){i.d(t,{u:function(){return a}});var n=i(26641);const a={getFeedDataForCard:e=>(0,n.BQ)(e),viewTemplate:n.wT}},84793:function(e,t,i){i.d(t,{t:function(){return o}});var n=i(96950),a=i(11622),r=i(26641);const o=n.qy`
    ${e=>{var t,i;return null!==(t=e.telemetryObject)&&void 0!==t&&t.contract&&(e.telemetryObject.contract.name="EntertainmentPremierSdCard"),e.configInfo&&(0,a.yN)({...e.configInfo,instanceId:`${(0,r.zZ)(e.configInfo.instanceId,e.telemetryObject)}`},{properties:{wpoMetadata:e.wpoMetadata,mapperArgs:e.mapperArgs,parentTelemetry:e.telemetryObject,feedLayoutCardSize:e.cardSize,hasLoadedCallback:e.hasLoadedCallback,cardType:e.cardType},attributes:{style:`grid-area:${e.gridArea};width:${null===(i=e.mapperArgs)||void 0===i||null===(i=i.displaySettings)||void 0===i?void 0:i.cardWidth}px;contain:unset;content-visibility:visible;`,class:`${e.cardSize}`,tabindex:e.customTabIndex??0},telemetryObject:e.telemetryObject})}}
`},85486:function(e,t,i){i.d(t,{H:function(){return s}});var n=i(65022),a=i(93468),r=i(19608),o=i(92910);function s(e,t){try{var i;const{configOptions:s,cardMetadata:l,parentTelemetryObject:d,goToPersonalizeSettingsCallback:c,refreshFeedCallback:u,isWidgetRegion:h,turnOffWidgetsRegionCallback:v,manageWidgetsRegionCallback:p,hideCardCallback:f}=e;if(!(t||(0,o.Lz)(l,"topcomments")||s.topCommentsCard||s.enableNTPTopComments))return null;if(!l.subCards||!l.subCards.length)throw(0,a.vV)(n.qV8,"Service context returned empty subcards in metadata"),new Error("TopComments DataMap Missing required parameters");const g=s&&s.topCommentsCard||s,m={id:"TopCommentsCard",childTemplateType:"top-comments-card",parentTelemetryObject:d,TopCommentsCardConfigInfo:g,cardMetadata:l,goToPersonalizeSettingsCallback:c,refreshFeedCallback:u,wpoMetadata:null==l?void 0:l.wpoMetadata,isWidgetRegion:h,turnOffWidgetsRegionCallback:v,manageWidgetsRegionCallback:p,hideCardCallback:f};return m.isWidgetRegion&&(m.cardSize="0.5U"),(0,r.bw)({id:"TopCommentsCard",experienceType:null==g||null===(i=g.configRef)||void 0===i?void 0:i.experienceType,mapperArgs:e},m)}catch(e){(0,a.c_)(e,n.Wrb,"Error in feed-layout TopComments Card Mapper")}return null}},86500:function(e,t,i){i.d(t,{D4:function(){return d},n$:function(){return u},nf:function(){return c},po:function(){return l}});var n=i(98216),a=i(11372);const r="quote-list",o="money-footer",s="quote-content";var l;function d(e,t,i,l,d){const c=e.path[0].id===t||e.path[0].className===r||e.path[0].className===o||e.path[0].className===s;return c&&d.moneyCard&&e.target&&n.YT.sendActionEvent(e.target,a.EG.Click,a.MS.Navigate,i),c&&l?(window.open(i,"_blank"),!1):!(c&&!l)||(window.open(i,"_self"),!1)}!function(e){e.ShowData="showData",e.EmptyWatchlist="emptyWatchlist",e.AddWatchlist="addWatchlist",e.EdgeShowData="edgeShowData"}(l||(l={}));const c=new Map([[l.ShowData,"money-card"],[l.AddWatchlist,"money-add-watchlist-card"],[l.EdgeShowData,"money-edge-card"]]);var u;!function(e){e.Default="default",e.Medium="medium",e.Max="max"}(u||(u={}))},87743:function(e,t,i){i.d(t,{w:function(){return r}});var n=i(5965),a=i(85486);const r={getFeedDataForCard:e=>(0,a.H)(e),viewTemplate:n.a}},87979:function(e,t,i){i.d(t,{o:function(){return s}});var n=i(40183),a=i(93468),r=i(65022),o=i(19608);const s={getFeedDataForCard:e=>function(e){try{var t;const{configOptions:i,cardMetadata:n,goToPersonalizeSettingsCallback:a,parentTelemetryObject:r,sdCardActionClickHandler:s,dismissSDCardMenuCallback:l,refreshFeedCallback:d,refreshSDCardSection:c}=e,u="promoted-ad-card",h=i&&i,v={id:u,childTemplateType:"promoted-ad-card",goToPersonalizeSettingsCallback:a,parentTelemetryObject:r,sdCardActionClickHandler:s,dismissSDCardMenuCallback:l,refreshFeed:c,refreshFeedCallback:d,cardMetadata:n,configInfo:h};return(0,o.bw)({id:u,experienceType:null==h||null===(t=h.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},v)}catch(e){(0,a.c_)(e,r.Ffx,"Error in Promoted Ad Card Mapper")}}(e),viewTemplate:n.A}},88798:function(e,t,i){i.d(t,{O:function(){return s}});var n=i(81981),a=i(19608),r=i(92910),o=i(55602);function s(e){var t;const{configOptions:i,parentTelemetryObject:s,cardMetadata:l,goToPersonalizeSettingsCallback:d,refreshSDCardSection:c}=e;if(!(0,r.Lz)(l,"linkedinnews")&&!(0,r.Lz)(l,"lkdin-influencers")&&!(0,r.Lz)(l,"lkdin-combined"))return null;const u=i&&i.linkedInCard||i;u&&(0,o.uC)(u);const h={id:"linkedInCard",childTemplateType:"linked-in-card",parentTelemetryObject:s,linkedInCardConfigInfo:u,linkedInCardData:l&&l.subCards,goToPersonalizeSettingsCallback:d,refreshSDCardSection:c,overrides:{neutralColor:u?u.neutralColor:void 0},topicFeedTemplate:n.Z};return(0,a.bw)({id:"linkedInCard",experienceType:null==u||null===(t=u.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},h)}},88817:function(e,t,i){i.d(t,{m:function(){return _}});var n=i(56911),a=i(38493),r=i(60815),o=i(55230),s=i(92011),l=i(56863);class d extends s.L{}class c extends((0,l.dx)(d)){constructor(){super(...arguments),this.proxy=document.createElement("input")}}class u extends c{constructor(){super(),this.initialValue="on",this.proxy.setAttribute("type","radio")}readOnlyChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.readOnly=this.readOnly)}defaultCheckedChanged(){this.$fastController.isConnected&&!this.dirtyChecked&&(this.isInsideRadioGroup()||(this.checked=this.defaultChecked??!1,this.dirtyChecked=!1))}connectedCallback(){super.connectedCallback(),this.validate(),"radiogroup"!==this.parentElement?.getAttribute("role")&&null===this.getAttribute("tabindex")&&(this.disabled||this.setAttribute("tabindex","0")),this.checkedAttribute&&(this.dirtyChecked||this.isInsideRadioGroup()||(this.checked=this.defaultChecked??!1,this.dirtyChecked=!1))}isInsideRadioGroup(){return null!==this.closest("[role=radiogroup]")}keypressHandler(e){if(e.key!==o.gG)return!0;this.checked||this.readOnly||(this.checked=!0)}clickHandler(e){this.disabled||this.readOnly||this.checked||(this.checked=!0)}}(0,n.Cg)([(0,a.CF)({attribute:"readonly",mode:"boolean"}),(0,n.Sn)("design:type",Boolean)],u.prototype,"readOnly",void 0),(0,n.Cg)([r.sH,(0,n.Sn)("design:type",String)],u.prototype,"name",void 0),(0,n.Cg)([r.sH,(0,n.Sn)("design:type",Array)],u.prototype,"defaultSlottedNodes",void 0);var h=i(37180),v=i(74849),p=i(64187),f=i(73477),g=i(60993),m=i(22131),y=i(50882),C=i(48196),b=i(74838),w=i(26920),T=i(43774),S=i(46203),k=i(7896),M=i(48751),$=i(41123),F=i(95239),I=i(14996),x=i(79288);const R=v.A`
    ${(0,p.V)("inline-flex")} :host {
        --input-size: calc((${C.D} / 2) + ${b.vR});
        align-items: center;
        outline: none;
        margin: calc(${b.vR} * 1px) 0;
        ${""} user-select: none;
        position: relative;
        flex-direction: row;
        transition: all 0.2s ease-in-out;
    }

    .control {
        position: relative;
        width: calc(var(--input-size) * 1px);
        height: calc(var(--input-size) * 1px);
        box-sizing: border-box;
        border-radius: 50%;
        border: calc(${w.XA} * 1px) solid ${T.nF};
        background: ${S.le};
        outline: none;
        cursor: pointer;
    }

    .label__hidden {
        display: none;
        visibility: hidden;
    }

    .label {
        font-family: ${k.O};
        color: ${M.l};
        ${""} padding-inline-start: calc(${b.vR} * 2px + 2px);
        margin-inline-end: calc(${b.vR} * 2px + 2px);
        cursor: pointer;
        font-size: ${$.K};
        line-height: ${$.Z};
    }

    .control,
    .checked-indicator {
        flex-shrink: 0;
    }

    .checked-indicator {
        position: absolute;
        top: 5px;
        left: 5px;
        right: 5px;
        bottom: 5px;
        border-radius: 50%;
        display: inline-block;
        background: ${M.l};
        fill: ${M.l};
        opacity: 0;
        pointer-events: none;
    }

    :host(:enabled) .control:hover {
        background: ${S.jM};
        border-color: ${T.vA};
    }

    :host(:enabled) .control:active {
        background: ${S.RS};
        border-color: ${T.p4};
    }

    :host(:${f.N}) .control {
        box-shadow: 0 0 0 2px ${F.p}, 0 0 0 4px ${I.WN};
        border-color: ${I.WN};
    }

    :host([disabled]) .label,
    :host([readonly]) .label,
    :host([readonly]) .control,
    :host([disabled]) .control {
        cursor: ${g.Z};
    }

    :host([aria-checked="true"]) .checked-indicator {
        opacity: 1;
    }

    :host([disabled]) {
        opacity: ${x.q};
    }
`.withBehaviors((0,m.mr)(v.A`
            .control {
                forced-color-adjust: none;
                border-color: ${y.A.FieldText};
                background: ${y.A.Field};
            }
            :host(:enabled) .control:hover,
            .control:active {
                border-color: ${y.A.Highlight};
                background: ${y.A.Field};
            }
            :host(:${f.N}) .control {
                border-color: ${y.A.Highlight};
                box-shadow: 0 0 0 2px ${y.A.Field},
                    0 0 0 4px ${y.A.FieldText};
            }
            :host([aria-checked="true"]:${f.N}:enabled) .control {
                border-color: ${y.A.Highlight};
                box-shadow: 0 0 0 2px ${y.A.Field},
                    0 0 0 4px ${y.A.FieldText};
            }
            :host([aria-checked="true"]:enabled) .control:hover,
            .control:active {
                border-color: ${y.A.Highlight};
                background: ${y.A.Highlight};
            }
            :host([aria-checked="true"]) .checked-indicator {
                background: ${y.A.Highlight};
                fill: ${y.A.Highlight};
            }
            :host([aria-checked="true"]) .control:hover .checked-indicator {
                background: ${y.A.HighlightText};
                fill: ${y.A.HighlightText};
            }
            :host([disabled]) {
                forced-color-adjust: none;
                opacity: 1;
            }
            :host([disabled]) .label {
                color: ${y.A.GrayText};
            }
            :host([disabled]) .control,
            :host([aria-checked="true"][disabled]) .control:hover,
            .control:active {
                background: ${y.A.Field};
                border-color: ${y.A.GrayText};
            }
            :host([disabled]) .checked-indicator,
            :host([aria-checked="true"][disabled]) .control:hover .checked-indicator {
                fill: ${y.A.GrayText};
                background: ${y.A.GrayText};
            }
        `));var P=i(96950),A=i(82774),D=i(79109),O=i(18893);const N=function(e={}){return P.qy`
        <template
            role="radio"
            aria-checked="${e=>e.checked}"
            aria-required="${e=>e.required}"
            aria-disabled="${e=>e.disabled}"
            aria-readonly="${e=>e.readOnly}"
            @keypress="${(e,t)=>e.keypressHandler(t.event)}"
            @click="${(e,t)=>e.clickHandler(t.event)}"
        >
            <div part="control" class="control">
                <slot name="checked-indicator">
                    ${(0,O.R)(e.checkedIndicator)}
                </slot>
            </div>
            <label
                part="label"
                class="${e=>["label",!e.defaultSlottedNodes?.length&&"label__hidden"].filter(Boolean).join(" ")}"
            >
                <slot
                    ${(0,A.e)({property:"defaultSlottedNodes",filter:D.g})}
                ></slot>
            </label>
        </template>
    `}({checkedIndicator:P.qy`
        <div part="checked-indicator" class="checked-indicator"></div>
    `}),_=u.compose({name:`${h.c.prefix}-radio`,template:N,styles:R})},88880:function(e,t,i){i.d(t,{s:function(){return r}});var n=i(62190),a=i(19608);const r={getFeedDataForCard:e=>function(e){var t;const{configOptions:i,parentTelemetryObject:n,cardMetadata:r,goToPersonalizeSettingsCallback:o,refreshSDCardSection:s}=e;let l;i&&i.childExperienceReferencesWC&&(l=i.childExperienceReferencesWC.onThisDayCard),l&&l.instanceId||(l=i&&i);const d={id:"onThisDayCard",childTemplateType:"on-this-day-card",goToPersonalizeSettingsCallback:o,parentTelemetryObject:n,onThisDayCardConfigInfo:l,onThisDayData:r&&r.data&&JSON.parse(r.data),refreshSDCardSection:s};return(0,a.bw)({id:"onThisDayCard",experienceType:null===(t=l)||void 0===t||null===(t=t.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},d)}(e),viewTemplate:n._}},89002:function(e,t,i){i.d(t,{gu:function(){return I}});var n=i(56911),a=i(92011),r=i(96950),o=i(60402);const s=r.qy`<div class="${e=>e.overlay&&"overlay"}"></div><div id="${e=>e.id}" class="widget-host" ${(0,o.K)("widgetHost")} data-t="${e=>{var t;return null===(t=e.telemetryObject)||void 0===t?void 0:t.getMetadataTag()}}"></div>`;var l=i(74849),d=i(95239),c=i(48751),u=i(50882),h=i(22131);const v=l.A` .widget-host{--elevation:4;height:100%;background:${d.p};
        color: ${c.l};border-radius:calc(var(--layer-corner-radius) * 1px);box-shadow:0 0 calc((var(--elevation) * 0.225px) + 2px) rgba(0,0,0,calc(0.11 * (2 - var(--background-luminance,1)))),0 calc(var(--elevation) * 0.4px) calc((var(--elevation) * 0.9px)) rgba(0,0,0,calc(0.13 * (2 - var(--background-luminance,1))))}.overlay{height:100%;width:100%;z-index:999;position:absolute}`.withBehaviors((0,h.mr)(l.A` .widget-host{forced-color-adjust:none;background:${u.A.Canvas};
                box-shadow: ${u.A.CanvasText} 0px 0px 0px 1px;
            }
        `));var p=i(38493),f=i(60815),g=i(93468),m=i(65022),y=i(89151),C=i(48114),b=i(90429),w=i(25752),T=i(36903);class S extends a.L{constructor(){super(...arguments),this.overlay=!1,this.widgetModelApi=window.__com_microsoft_dsh_widgetModelApiFactory,this.onDashboardVisibilityChange=async e=>{if(!this.widgetFrame||this.isInitialSubscription)return void(this.isInitialSubscription=!1);const t=e&&this.isInViewport();this.widgetFrame.onVisibleStateChanged(t)},this.sizeChangeHandler=(e,t)=>{"onSizeChangeEnd"===e&&this.widgetResizedCallback&&this.widgetResizedCallback(this.id,t)},this.attachIntersectionObserver=()=>{if(this.intersectionObserver||!this.widgetFrame)return;this.intersectionObserver=new IntersectionObserver(e=>{e&&e.forEach(e=>{this.widgetFrame&&this.widgetFrame.onVisibleStateChanged(C.F_.get(2)&&e.isIntersecting)})},{root:null,rootMargin:"0px",threshold:0}),this.intersectionObserver.observe(this.widgetHost)},this.isInViewport=()=>{if(!this.widgetHost)return!1;const e=this.widgetHost.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=document.documentElement.clientHeight&&e.right<=document.documentElement.clientWidth}}async connectedCallback(){super.connectedCallback(),this.isInitialSubscription=!0,C.F_.subscribe(2,this.onDashboardVisibilityChange),this.attachIntersectionObserver(),this.addEventListeners();const e=b.Ml[this.id]||{};let t=e.widgetId||this.id;if(!this.renderer&&this.widgetModelApi)try{this.renderer=this.widgetModelApi.tryGetApi("renderer",w.XF,w.XF)}catch(e){(0,g.vV)(m.V8S,"Error calling renderer api on widgetModelApi",void 0,{...m.V8S.pb,cardType:this.id,widgetId:t,error:JSON.stringify(e),customMessage:`Error message: ${e&&e.message}`})}if(this.renderer||this.visualReadinessCallback&&this.visualReadinessCallback(),!this.widgetInstance){var i;const n=(0,b.uF)().get(this.id);if(n&&!this.instanceId){const e=await this.createPinPreference(t,n);t=e&&e.widgetId}const a=(0,T.lb)()?null===(i=C.F_.get(20))||void 0===i?void 0:i.current:void 0;this.renderer&&this.renderer.renderWidget(this.widgetHost,t,this.instanceId,this.cardSize,void 0,a).then(t=>{t&&(this.widgetInstance=t.widgetInstance,this.widgetFrame=t);const{instanceId:i,widgetId:n,widgetDefinitionId:a}=this.widgetInstance||{};if(this.updateTelemetryObject(n),!this.widgetSizeApi&&this.widgetInstance&&(this.widgetSizeApi=this.widgetInstance.tryGetApi("sizes",w.XF,w.XF)),this.addEventListeners(),this.attachIntersectionObserver(),this.widgetRenderedCallback){const{experienceName:t}=e;t&&(0,y.yi)(t),this.widgetRenderedCallback(this.id,i,n,a)}this.visualReadinessCallback&&this.visualReadinessCallback()}).catch(e=>{this.logExternalWidgetRenderError(`Error calling renderWidget api for widget: ${t}, instanceId: ${this.instanceId}, cardSize: ${this.cardSize}`,e)})}}disconnectedCallback(){super.disconnectedCallback(),C.F_.unsubscribe(2,this.onDashboardVisibilityChange),this.unsetIntersectionObserver(),this.removeEventListeners()}addEventListeners(){this.widgetSizeApi&&this.widgetSizeApi.addEventListener(this.sizeChangeHandler)}removeEventListeners(){this.widgetSizeApi&&this.widgetSizeApi.removeEventListener(this.sizeChangeHandler)}unsetIntersectionObserver(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0)}async createPinPreference(e,t){try{this.widgetModel||(this.widgetModel=this.widgetModelApi.tryGetApi("model",w.XF,w.XF));const i=await this.widgetModel.createPinPreference(e,void 0);if(!i)throw new Error("Widget instance is undefined after calling createPinPreference");if(this.instanceId=i.instanceId,b.Ml[this.id])return i;const n=i.widgetId;return(0,b.uF)().set(n,{...t,id:n}),n!==this.id&&((0,b.uF)().delete(this.id),this.id=n),i}catch(t){this.logExternalWidgetRenderError(`Error calling createPinPreference API for widget ${e}`,t)}}updateTelemetryObject(e){C.F_.set(4,{...C.F_.get(4),[e]:this.telemetryObject})}logExternalWidgetRenderError(e,t){(0,g.vV)(m.qwf,e,void 0,{...m.qwf.pb,cardType:this.id,instanceId:this.instanceId,error:JSON.stringify(t),customMessage:`Error message: ${t&&t.message}`})}}(0,n.Cg)([(0,p.CF)({mode:"boolean"})],S.prototype,"overlay",void 0),(0,n.Cg)([f.sH],S.prototype,"id",void 0),(0,n.Cg)([f.sH],S.prototype,"cardSize",void 0),(0,n.Cg)([f.sH],S.prototype,"instanceId",void 0),(0,n.Cg)([f.sH],S.prototype,"telemetryObject",void 0);let k=class extends S{};k=(0,n.Cg)([(0,a.E)({name:"msn-widget-host",template:s,styles:v})],k);var M=i(11622);const $=r.qy`
    ${e=>(0,M.yN)(e.config,{properties:e.properties,attributes:{cardSize:e.cardSize,style:`grid-area:${e.gridArea};contain:unset;content-visibility:visible;position:relative`,"data-clarity-mask":"true"},telemetryObject:e.telemetryObject})}
`,F=r.qy`
    <msn-widget-host
        style="grid-area:${e=>e.gridArea};contain:unset;content-visibility:visible;position:relative"
        data-clarity-mask="true"
        :id="${e=>e.id}"
        :cardSize="${e=>e.cardSize}"
        :instanceId="${e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.instanceId}}"
        :widgetRenderedCallback="${e=>e.widgetRenderedCallback}"
        :widgetResizedCallback="${e=>e.widgetResizedCallback}"
        :visualReadinessCallback="${e=>e.visualReadinessCallback}"
        :telemetryObject="${e=>e.telemetryObject}"
    ></msn-widget-host>
`,I=r.qy`
    ${e=>e.config?$:F}
`},89337:function(e,t,i){i.d(t,{S:function(){return r}});var n=i(96950),a=i(11622);const r=n.qy`
    <fluent-card
        style="grid-area:${e=>e.gridArea};contain:unset;content-visibility:visible;"
        class="${e=>e.cardSize}"
    >
    ${e=>e.trendingSearchConfigInfo&&(0,a.yN)(e.trendingSearchConfigInfo,{properties:{trendingSearchCardFeedData:e,cardMetadata:e.cardMetadata,searchRewardsData:e.searchRewardsData,mapperArgs:e.mapperArgs,parentTelemetry:e.telemetryObject,feedLayoutCardSize:e.cardSize,displaySettings:e.displaySettings,useMobile:e.useMobile,isMsnMobile:e.isMsnMobile,isDarkModeForMobile:e.isDarkModeForMobile,onLinkClickCallback:e.onLinkClickCallback},telemetryObject:e.telemetryObject})}
    </fluent-card>
`},91488:function(e,t,i){i.d(t,{q:function(){return o}});var n=i(96950),a=i(91640),r=i(11622);const o=n.qy`
${(0,a.z)(e=>e.enableCard,n.qy`
    <fluent-card
        style="grid-area:${e=>e.gridArea}; background: transparent; --override-card-width: auto; height: auto;"
        class="${e=>e.cardSize}"
    > 
        ${e=>e.followingFreInlineCardConfigInfo&&(0,r.yN)(e.followingFreInlineCardConfigInfo,{properties:{parentTelemetry:e.parentTelemetryObject,refreshCallback:e.refreshFeedCallback,interestsData:e.interestsData,cardSize:e.cardSize,cardActionClickHandler:e.cardActionClickHandler},memoize:!1})}
    </fluent-card>
`)}`},92910:function(e,t,i){i.d(t,{Ar:function(){return a},Kj:function(){return r},Lz:function(){return o}});var n=i(83003);const a=new Error;function r(e){return e&&e.type===n.pL.TopicFeed}function o(e,t){const i=e&&e.feed&&e.feed.canonicalName;return!!i&&("string"==typeof t?i===t:!!t[i])}},92945:function(e,t,i){i.d(t,{W:function(){return a}});var n=i(26641);const a={getFeedDataForCard:e=>(0,n.BQ)(e),viewTemplate:n.wT}},93551:function(e,t,i){i.d(t,{x:function(){return r}});var n=i(96950),a=i(11622);const r=n.qy`
    ${e=>(0,a.yN)(e.boostAdCardConfigInfo,{attributes:{style:`grid-area:${e.gridArea}`,class:`${e.cardSize}`},properties:{wpoMetadata:e.wpoMetadata,boostAdMetadata:e.boostAdCardMetadata,parentTelemetry:e.parentTelemetryObject,cardSize:e.cardSize,goToPersonalizeSettingsCallback:e.goToPersonalizeSettingsCallback,refreshFeed:e.refreshFeed,visualReadinessCallback:e.visualReadinessCallback}})}
`},94031:function(e,t,i){i.d(t,{U:function(){return l}});var n=i(94996),a=i(19608),r=i(93468),o=i(65022),s=i(77512);const l={getFeedDataForCard:e=>function(e){var t,i;const{hideTrafficCard:n,cardMetadata:l,configOptions:d,openLinksInNewTab:c,refreshFeedCallback:u,parentTelemetryObject:h,goToPersonalizeSettingsCallback:v,hideCardCallback:p,refreshSDCardSection:f,supportedSdCardActionMenuItems:g,sdCardActionClickHandler:m,dismissSDCardMenuCallback:y,hasLoadedCallback:C,activeBoard:b,isWidgetRegion:w,turnOffWidgetsRegionCallback:T,manageWidgetsRegionCallback:S,onSDCardClick:k}=e,M=l;let $;try{$=JSON.parse(M.data)}catch(e){return(0,r.c_)(e,o.Bks,"Cannot parse 1s json in TrafficCardDataMapper",JSON.stringify(M.data)),(0,s.wc)()}const F=`${l.type}${b?`_${b}`:""}${null!==(t=l.metadata)&&void 0!==t&&t.isSpotlightUX?"_spotlight":""}`,I={id:"trafficCard",childTemplateType:"traffic-card",hideTrafficCard:n,openLinksInNewTab:c,refreshFeed:u,parentTelemetryObject:h,goToPersonalizeSettingsCallback:v,refreshSDCardSection:f,hideCardCallback:p,supportedSdCardActionMenuItems:g,sdCardActionClickHandler:m,dismissSDCardMenuCallback:y,cardMetadata:$,cardType:F,isSpotlightUX:l.metadata&&l.metadata.isSpotlightUX,previewType:l.metadata&&l.metadata.previewType,hasLoadedCallback:C,isWidgetRegion:w,turnOffWidgetsRegionCallback:T,manageWidgetsRegionCallback:S,onSDCardClick:k};let x;return d&&(x=d,I.trafficCardConfigInfo=x),I.isWidgetRegion&&(I.cardSize="_1x_1y"),(0,a.bw)({id:"trafficCard",experienceType:null===(i=x)||void 0===i||null===(i=i.configRef)||void 0===i?void 0:i.experienceType,mapperArgs:e},I,(e,t)=>({supportedSdCardActionMenuItems:g,sdCardActionClickHandler:m}),!0)}(e),viewTemplate:n.E}},94996:function(e,t,i){i.d(t,{E:function(){return s}});var n=i(96950),a=i(11622),r=i(17254);const o=n.qy`
    ${e=>(0,a.yN)(e.trafficCardConfigInfo,{properties:{trafficCardFeedData:e,cardMetadata:e.cardMetadata,wpoMetadata:e.wpoMetadata,isSpotlightUX:e.isSpotlightUX,previewType:e.previewType,parentTelemetry:e.parentTelemetryObject,supportedSdCardActionMenuItems:e.supportedSdCardActionMenuItems,sdCardActionClickHandler:e.sdCardActionClickHandler,dismissActionMenu:e.dismissSDCardMenuCallback,cardSize:e.cardSize,cardType:e.cardType,hasLoadedCallback:e.hasLoadedCallback,isWidgetRegion:e.isWidgetRegion,onSDCardClick:e.onSDCardClick},attributes:{style:`grid-area:${e.gridArea};contain:unset;content-visibility:visible;${16==e.cardMetadata.TrafficInfoType?"z-index: 101":""}`},memoize:"windowsShellV2"!==r.T3.AppType})}
`,s=n.qy`
    ${o}
`},95046:function(e,t,i){i.d(t,{n:function(){return b},o:function(){return C}});var n=i(65022),a=i(93468),r=i(83003),o=i(46753),s=i(78750),l=i(88798),d=i(76992),c=i(81673),u=i(90901),h=i(92910),v=i(85486),p=i(91532);const f=[l.O,d.c,c.U],g=new Set([r.pL.TopicFeedWeekends,r.pL.GamingNews,r.pL.TopicFeedLearnSomethingNew,r.pL.TopicFeedDiversity]);var m;!function(e){e.Digest="Digest",e.Spotlight="Spotlight"}(m||(m={}));const y=["Y_944837d6-72c1-4955-a975-d9cd07bbed1b","Y_c75ba4d3-be67-4984-b916-1f6e5d251b15","Y_08e2dfa5-fc63-4143-a127-2c4963904232"];function C(e){const t=e&&e.cardMetadata&&e.cardMetadata.feed&&e.cardMetadata.feed.canonicalName,i=e&&e.cardMetadata&&e.cardMetadata.feed&&e.cardMetadata.feed.id;if(t===r.pL.TopicFeedTrendingNow&&e.configOptions&&e.configOptions.useSectionHeaderTopStories)return p.C.topStoriesCard;if(e.enableTopStoriesInHotListCard&&t===r.pL.TopicFeedTopStories&&y.includes(i))return e.enableHotListInDigestCard?p.C.digestCard:p.C.hotListCard;if(t===r.pL.TopicFeedTopStories||t===r.pL.TopicFeedTrendingNow)return e.isMobile?p.C.selectCarouselCard:p.C.digestCard;if(t===r.pL.HotListCard)return e.enableHotListInDigestCard?p.C.digestCard:p.C.hotListCard;if(t===r.pL.TopCommentsCard)return p.C.topCommentsCard;if(e&&e.cardMetadata&&e.cardMetadata.isTriggeredByClient)return p.C.selectCarouselCard;if(e&&e.cardMetadata&&e.cardMetadata.wpoMetadata&&e.cardMetadata.wpoMetadata.eventViewComponent){return e.cardMetadata.wpoMetadata.eventViewComponent===m.Digest?p.C.digestCard:p.C.spotlightCard}return g.has(t)?p.C.digestCard:void 0}function b(e){var t;const i=e&&e.cardMetadata&&e.cardMetadata.feed&&e.cardMetadata.feed.canonicalName,l=(null==e||null===(t=e.cardMetadata)||void 0===t?void 0:t.id)&&["CanonicalName-wpo-recommended-content","CanonicalName-wpo-followed-content","CanonicalName-wpo-topic-content"].includes(e.cardMetadata.id);if(!i&&!l)return(0,a.c_)(new Error("TopicFeed canonicalName missing"),n._f3,"Canonical name is missing in TopicFeed card metadata"),null;switch(C(e)){case p.C.topStoriesCard:return e.cardMetadata.type=i,(0,u.W)(e);case p.C.hotListCard:return(0,s.H)(e,i===r.pL.TopicFeedTopStories);case p.C.digestCard:return(0,o.A)(e);case p.C.selectCarouselCard:return(0,d.c)(e);case p.C.topCommentsCard:return(0,v.H)(e);case p.C.spotlightCard:return(0,c.U)(e)}for(const t of f){let i;try{i=t(e)}catch(e){return e!==h.Ar&&(0,a.c_)(new Error("TopicFeed mapping error"),n.Nm$,`${t.name} has thrown an error with message ${e.message} when mapping`),null}if(i)return i}return(0,a.c_)(new Error("TopicFeed mapper missing"),n.s5R,`Mapper is missing for topic feed with canonical name ${i}`),null}},95710:function(e,t,i){i.d(t,{b:function(){return r}});var n=i(96950),a=i(11622);const r=n.qy`
<fluent-card
    style="grid-area:${e=>e.gridArea};contain:unset;content-visibility:visible"
    class="${e=>e.cardSize}"
>
    ${e=>(0,a.yN)(e.qnaAnswerConfigInfo,{properties:{backendData:e.dataToPassToComponent,goToPersonalizeSettingsCallback:e.goToPersonalizeSettingsCallback,refreshSDCardSection:e.refreshSDCardSection,telemetryExt:e.telemetryExt},telemetryObject:e.telemetryObject})}
</fluent-card>
`},97110:function(e,t,i){i.d(t,{k:function(){return s}});var n=i(89002),a=i(19608),r=i(930),o=i(83003);const s={getFeedDataForCard:e=>function(e){var t;const{cardMetadata:i,widgetRenderedCallback:n,widgetResizedCallback:s,widgetDefinitionId:l,instanceId:d,configOptions:c,sdCardActionClickHandler:u,supportedSdCardActionMenuItems:h,visualReadinessCallback:v,activeBoard:p,isWidgetsRDSEnabled:f}=e;let g;const m=i.type===o.pL.ThirdPartyWidget,y=i.type===o.pL.Tombstone;g=m?i.metadata&&i.metadata.id?i.metadata.id:i.id||i.subType:y?i.subType:i.type;const C=h&&h.includes("unpin"),b=null===(t=i.wpoMetadata)||void 0===t?void 0:t.isRecommended,w=C||b?"pinned":"feed",T={id:g,childTemplateType:"widget-placeholder-card",widgetRenderedCallback:n,widgetResizedCallback:s,visualReadinessCallback:v,config:n?void 0:c&&c.childExperienceReferencesWC[i.type],properties:{instanceId:d,sdCardActionClickHandler:u,supportedSdCardActionMenuItems:h,visualReadinessCallback:v,widgetResizedCallback:s,cardLayout:p}};return(0,a.bw)({id:g,experienceType:T.config&&T.config.configRef&&T.config.configRef.experienceType||l,mapperArgs:e,zone:w},T,(e,t)=>{const i=t.cardSize;let n;i===r.uE._1x_1y?n="small":i===r.uE._1x_2y?n="medium":i===r.uE._1x_3y&&(n="large");const a={cardSize:n};return m&&f&&(a.telemetryObject=void 0,a.telemetryExt=void 0,a.parentTelemetryObject=void 0),a})}(e),viewTemplate:n.gu}},97609:function(e,t,i){i.d(t,{i:function(){return l}});var n=i(10332),a=i(19608),r=i(930),o=i(93468),s=i(65022);const l={getFeedDataForCard:e=>function(e){var t,i;const{configOptions:n,parentTelemetryObject:l,cardMetadata:d,hideCardCallback:c,goToPersonalizeSettingsCallback:u,refreshSDCardSection:h}=e;let v;try{const e=JSON.parse(d.data);v={prismData:[e.items],prismTopicData:e.cards}}catch(e){(0,o.c_)(e,s.F5s,"prism sd data fetch error")}let p=null==n||null===(t=n.childExperienceReferencesWC)||void 0===t?void 0:t.prismCard;!p&&n&&(p=n);const f={id:"prismCard",childTemplateType:"prism-card",parentTelemetryObject:l,prismCardConfigInfo:p,inspirationRootServerData:v,hideCardCallback:c,goToPersonalizeSettingsCallback:u,refreshSDCardSection:h,cardMetadata:d};return(0,a.bw)({id:"prismCard",experienceType:null===(i=p)||void 0===i||null===(i=i.configRef)||void 0===i?void 0:i.experienceType,mapperArgs:e},f,(e,t)=>({cardLayout:t.cardSize===r.uE._1x_1y?"half":"full"}))}(e),viewTemplate:n.C}},97716:function(e,t,i){i.d(t,{H:function(){return r}});var n=i(32998),a=i(81673);const r={getFeedDataForCard:e=>(0,a.U)(e),viewTemplate:n.D}},97799:function(e,t,i){i.d(t,{P:function(){return r}});var n=i(96950),a=i(11622);const r=n.qy`
<fluent-card
    style="grid-area:${e=>e.gridArea};contain:unset;content-visibility:visible"
    class="${e=>e.cardSize}"
>
    ${e=>(0,a.yN)(e.bingHealthFitnessAnswerConfigInfo,{includeTelemetryTag:!1,properties:{parentTelemetry:e.parentTelemetryObject,bingHealthFitnessCardData:e.bingHealthFitnessCardData,healthFitnessCarouselData:e.healthFitnessCarouselData,refreshSDCardSection:e.refreshSDCardSection,sdCardActionClickHandler:e.sdCardActionClickHandler,refreshFeed:e.refreshFeed},events:{goToPersonalizeSettingsCallback:e.goToPersonalizeSettingsCallback}})}
        
</fluent-card>
`},98826:function(e,t,i){i.d(t,{t:function(){return r}});var n=i(95710),a=i(19608);const r={getFeedDataForCard:e=>function(e){var t;const{configOptions:i,parentTelemetryObject:n,cardMetadata:r,goToPersonalizeSettingsCallback:o,refreshSDCardSection:s}=e,l={bingStructureSegments:[r]};let d;i&&i.childExperienceReferencesWC&&(d=i.childExperienceReferencesWC.qnaCard),d&&d.instanceId||(d=i&&i);const c={id:"qnaCard",childTemplateType:"qna-card",goToPersonalizeSettingsCallback:o,refreshSDCardSection:s,parentTelemetryObject:n,qnaAnswerConfigInfo:d,dataToPassToComponent:l};return(0,a.bw)({id:"qnaCard",experienceType:null===(t=d)||void 0===t||null===(t=t.configRef)||void 0===t?void 0:t.experienceType,mapperArgs:e},c)}(e),viewTemplate:n.b}}}]);