"use strict";(self.homePageWebpackChunks=self.homePageWebpackChunks||[]).push([["weather-card-wc-init-account-type"],{16040:function(t,n,e){e.d(n,{initAccountType:function(){return T}});var c=e(25752),i=e(57164),o=e(59545),r=e(86948),a=e(76980),u=e(77479),s=e(35849),l=e(28006),A=e(93468),f=e(65022),h=e(3762),d=e(12034),w=e(98216);e(43820),e(48566);const g=5e3;function v(){try{const t=(0,d.l)();return t&&t.authManager}catch(t){return(0,A.vV)(f.Qao,"Client Auth Fail",`authM ${t&&t.toString()}`),null}}async function y(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,d.lQ)())return;const e=v();if(!e||!e.getActiveAccountAsync)return;let c,i=!1;try{c=await(0,h.xu)(t||g,e.getActiveAccountAsync(),()=>{i=!0,!n&&m("getActiveAccountAsync",t)})}catch(t){(0,A.vV)(f.k7V,"AuthManager error caught on [getActiveAccount]",`Thrown error: ${t.message}`,{stack:t.stack})}return p("Auth API getActiveAccountAsync",JSON.stringify({didTimeout:i,isBackground:(0,d.lQ)(),timeout:t||g,success:!!c})),i?void 0:(c||n||(0,A.vV)(f.KT4,"Client did not return active account"),c)}function m(t,n){const e=n||g,c=w.YT.getRequestId();(0,A.vV)(f.Jyo,"Auth manager API timed out",`${t} timed out after ${e}ms. With Feed_GUID=${c}.`)}function p(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{const e=(0,d.l)();e&&e.logMeasure&&e.logMeasure(t,n)}catch(t){(0,A.c_)(t,f.k7V,"AuthManager error caught on [windowsShellLogMeasureOnClient]",`Thrown error: ${t&&t.message||""}`)}}var $=e(58325),M=e(5878);async function T(t){let n;try{if(t.config.hostPlace===i.mn.PRONG2){if(t.widgetInstance||t.loadWidgetInstance(),!t.widgetInstance)return;n=await(0,c.d7)(),t.userType=n===i.xY.AAD?i.ut.AAD:i.ut.UNKNOWN}else if(t.config.hostPlace===i.mn.WINHP)(0,o.Qc)().then(async()=>{if(2===await(0,r.XK)()){const e=await(0,a.We)();n=e&&(0,a.U8)(e),t.userType="AAD"===n?i.ut.AAD:i.ut.UNKNOWN}else t.userType=i.ut.MUID;D(n),u.p.signedInStatus.registerObserver(async e=>{var c;if((null==e||null===(c=e.params)||void 0===c?void 0:c.length)>0){if(2===(null==e?void 0:e.params[0])){const e=await(0,a.We)();n=e&&(0,a.U8)(e),t.userType="AAD"===n?i.ut.AAD:i.ut.UNKNOWN}}D(n)})},()=>{});else if(t.config.hostPlace===i.mn.NTP){t.userType=i.ut.UNKNOWN;const e=(0,s.zP)(l.h$);if(e){const c=await e.getPrimaryAccountInfoAsync(!1);n=c&&c.accountType,t.userType="AAD"===n?i.ut.AAD:i.ut.UNKNOWN}}else if(t.config.hostPlace===i.mn.PRONG1){const e=await y(i.MJ);n=e&&e.authority,t.userType=n===i.xY.AAD?i.ut.AAD:i.ut.UNKNOWN}D(n)}catch(n){w.YT.sendAppErrorEvent({...f.IRE,message:"error in experience [weather-card-wc],Weather: Exception to initAccountType",pb:{...f.IRE.pb,customMessage:`Failed with exception : ${n}`,isPinned:t.isPinned}})}}function D(t){(0,M.hh)($.OA),(0,M.Mc)($.OA,t||"NonSignIn")}}}]);