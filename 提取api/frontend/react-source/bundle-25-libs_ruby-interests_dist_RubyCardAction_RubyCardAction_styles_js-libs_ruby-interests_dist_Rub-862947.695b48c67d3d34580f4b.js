"use strict";(self.homePageWebpackChunks=self.homePageWebpackChunks||[]).push([["libs_ruby-interests_dist_RubyCardAction_RubyCardAction_styles_js-libs_ruby-interests_dist_Rub-862947"],{2553:function(t,e,i){i.d(e,{AT:function(){return s},hv:function(){return l},jf:function(){return d}});var o=i(16091),r=i(17720),n=i(69089);const a=Symbol("RubyCardMapSegment"),s=(0,o.G)({getInstance:()=>r.vv.get(a,()=>new Map([["Weather",n.s.WeatherCard],["Weather_Nowcast",n.s.NowcastWeatherCard],["Weather_TeaserRain",n.s.RainTodayWeatherCard],["Sports",n.s.SportsCard],["Finance",n.s.FinanceCard],["CasualGame",n.s.CasualGamesCard],["Shopping",n.s.ShoppingCard],["DailyBrief",n.s.DailyBriefCard],["DailyMoment",n.s.cegrowthCard]]))}),c=Symbol("RubyActionBasedCardMapSegment"),d=(0,o.G)({getInstance:()=>r.vv.get(c,()=>new Map([["News_CreatorSpotlight",{definitionName:"News_CreatorSpotlight",targetType:"ContentGroup"}],["News_BreakingNews",{definitionName:"News_BreakingNews",targetType:"Notification"}],["News_ForYouNews",{definitionName:"News_ForYouNews",targetType:"Notification"}],["News_SaveForLater",{definitionName:"News_SaveForLater",targetType:"ContentGroup"}],["Weather_SevereWeather",{definitionName:"Weather_SevereWeather",targetType:"Notification"}],["News_CatchUpStack",{definitionName:"News_CatchUpStack",targetType:"ContentGroup"}],["News_TopStories",{definitionName:"News_TopStories",targetType:"ContentGroup"}],["News_TrendingNow",{definitionName:"News_TrendingNow",targetType:"ContentGroup"}],["News_DailyWonder",{definitionName:"News_DailyWonder",targetType:"ContentGroup"}],["News_WatchGoldShorts",{definitionName:"News_WatchGoldShorts",targetType:"ContentGroup"}]]))}),l=Object.freeze([{telemetryName:"Weather",widgetName:"Weather",id:"weather",isGated:!1,infoCards:[{cardName:"Forecast",telemetryName:"Forecast",isEnabled:!0,id:"forecast",isGated:!1,cardTypes:["Weather"],parentId:"weather"},{cardName:"Severe weather alerts",telemetryName:"SevereWeather",isEnabled:!0,id:"severe_weather",isGated:!1,cardTypes:["Weather_SevereWeather"],parentId:"weather"},{cardName:"Nowcast",telemetryName:"NowcastWeather",isEnabled:!0,id:"nowcast",isGated:!1,cardTypes:["Weather_Nowcast"],parentId:"weather"},{cardName:"Rain today",telemetryName:"RainToday",isEnabled:!0,id:"rain_today",isGated:!1,cardTypes:["Weather_TeaserRain"],parentId:"weather"}]},{telemetryName:"Moments",widgetName:"Moments in time",id:"moments",isGated:!1,infoCards:[{cardName:"Today's moment",telemetryName:"TodaysMoment",isEnabled:!0,id:"todays_moment",isGated:!1,cardTypes:["DailyMoment"],parentId:"moments"}]},{widgetName:"Finance",telemetryName:"Finance",id:"finance",isGated:!1,infoCards:[{cardName:"Market updates",telemetryName:"MarketUpdates",isEnabled:!0,id:"market_updates",isGated:!1,cardTypes:["Finance"],parentId:"finance"},{cardName:"Price alert",telemetryName:"PriceAlert",isEnabled:!0,id:"price_alert",isGated:!0,cardTypes:["Finance_PriceMovement"],parentId:"finance"}]},{widgetName:"Shopping",telemetryName:"Shopping",id:"shopping",isGated:!1,infoCards:[{cardName:"Price drop",telemetryName:"PriceDrop",isEnabled:!0,id:"price_drop",isGated:!1,cardTypes:["Shopping"],parentId:"shopping"}]},{widgetName:"Games",telemetryName:"Games",id:"games",isGated:!1,infoCards:[{cardName:"Games to play",telemetryName:"GamesToPlay",isEnabled:!0,id:"games_to_play",isGated:!1,cardTypes:["CasualGame"],parentId:"games"}]},{widgetName:"Sports",telemetryName:"Sports",id:"sports",isGated:!1,infoCards:[{cardName:"Upcoming events",telemetryName:"UpcomingEvents",isEnabled:!0,id:"upcoming_events",isGated:!1,cardTypes:["Sports"],parentId:"sports"},{cardName:"Score updates",telemetryName:"ScoreUpdates",isEnabled:!0,id:"score_updates",isGated:!0,cardTypes:["Sports_ScoreUpdates"],parentId:"sports"}]},{widgetName:"Picks for you",telemetryName:"Picks",id:"picks",isGated:!1,infoCards:[{cardName:"Daily wonder",telemetryName:"DailyWonder",isEnabled:!0,id:"daily_wonder",isGated:!1,cardTypes:["News_DailyWonder"],parentId:"picks"}]},{widgetName:"News",telemetryName:"News",id:"news",isGated:!1,infoCards:[{cardName:"Copilot daily",telemetryName:"CopilotDaily",isEnabled:!0,id:"copilot_daily",isGated:!0,cardTypes:["News_CopilotDaily"],parentId:"news"},{cardName:"Breaking news",telemetryName:"BreakingNews",isEnabled:!0,id:"breaking_news",isGated:!1,cardTypes:["News_BreakingNews"],parentId:"news"},{cardName:"Save for later",telemetryName:"SaveForLater",isEnabled:!0,id:"save_for_later",isGated:!1,cardTypes:["News_SaveForLater"],parentId:"news"},{cardName:"For you",telemetryName:"ForYou",isEnabled:!0,id:"for_you",isGated:!1,cardTypes:["News_ForYouNews"],parentId:"news"},{cardName:"Catch-up news",telemetryName:"CatchUpNews",isEnabled:!0,id:"catch_up_news",isGated:!1,cardTypes:["News_CatchUpStack"],parentId:"news"},{cardName:"Top stories",telemetryName:"TopStories",isEnabled:!0,id:"top_stories",isGated:!1,cardTypes:["News_TopStories"],parentId:"news"},{cardName:"Trending now",telemetryName:"TrendingNow",isEnabled:!0,id:"trending_now",isGated:!1,cardTypes:["News_TrendingNow"],parentId:"news"}]},{widgetName:"Entertainment",telemetryName:"Entertainment",id:"entertainment",isGated:!1,infoCards:[{cardName:"Creator spotlight",telemetryName:"CreatorSpotlight",isEnabled:!0,id:"creator_spotlight",isGated:!1,cardTypes:["News_CreatorSpotlight"],parentId:"entertainment"},{cardName:"Entertainment Break",telemetryName:"News_WatchGoldShorts",isEnabled:!0,id:"watch_goldshorts",isGated:!1,cardTypes:["News_WatchGoldShorts"],parentId:"entertainment"}]}])},3875:function(t,e,i){i.d(e,{L:function(){return m},W9:function(){return p},n3:function(){return h},yx:function(){return u}});var o=i(32257),r=i(75322),n=i(39677),a=i(42323),s=i(22131),c=i(74849),d=i(59721);const l=c.A`
fluent-tooltip::part(tooltip)::after{width:30px;height:60px;border:none;forced-color-adjust:none;z-index:${d.P.Below.toString()};
}
`,u=c.A` .follow-button{display:flex;justify-content:center;border-radius:${o.lb8};
        background: transparent;
        border: none;
        margin-inline-start: ${o.fFM}}:host(:hover) .attribution .follow-button{animation:slideInFromLeft 0.3s ease-out forwards;transform-origin:left center}:host(:not(:hover)) .attribution .follow-button{opacity:0;z-index:-1;position:absolute;content:"";transform:translateX(-20px)}@keyframes slideInFromLeft{from{opacity:0;transform:translateX(-20px)}to{opacity:1;transform:translateX(0)}}.follow-button::part(control):focus-visible{box-shadow:none;border:${o.KUh} solid ${o.kPv}}.follow-button::part(control){align-items:center;padding:0px 10px;border:${o.KUh} solid ${o.v45};
        background: ${o.RKA}}.follow-button:hover::part(control){border:${n.Y1$} solid ${o.n3P}}.follow-button::part(control):focus-visible{box-shadow:none;outline:${n.Y1$} solid ${o.kPv};
    }
`,h=c.A` .ruby-social-bar{display:flex;inset-inline-end:unset;inset-block-start:unset;inset-inline-start:calc(${o.YUh} + ${o.ACF});
        inset-block-end: calc(${o.ACF} + ${o.ACF});
        justify-content: flex-start;
        position: absolute;
        height: 28px;
        width: auto;
        gap: ${o.fFM}}.like-card-button{opacity:1;background:none;border:none;box-shadow:none;padding-block:4px;padding-inline:6px;width:auto;height:28px;min-width:28px;min-height:28px;border-radius:${r.U9};
        inset-inline-end: unset;
        inset-block-start: unset;
        position: relative;
        gap: ${o.fFM}}.comment-button:has(.comment-count),.like-card-button:has(.like-count){padding-inline:4px}.like-card-button:focus-visible,.like-card-button:hover{background:${o.NYB};outline:none;border:none}.like-card-button:active{background:${o.vXS}}.like-card-button img{filter:${a.O3}}.comment-count,.dislike-count,.like-count{display:flex;font-family:${o.bNH};
        color: ${o.Adh};
        font-size: ${o.e1r};
        font-weight: ${n.N$c};
        line-height: ${o.HoW};
        margin-inline: 2px;
        cursor: pointer;
    }
`,p=c.A`
.tooltip-text{color:${o.C6c}}fluent-tooltip::part(tooltip){display:flex;width:230px;height:auto;flex-direction:column;border-radius:20px;padding:16px;align-items:flex-start;background:${o.Bbn};font-size:14px;font-weight:400;line-height:20px;text-wrap:wrap;overflow-wrap:break-word;box-shadow:2px 8px 20px rgb(0 0 0 / 25%)}fluent-tooltip::part(tooltip)::after{background:${o.Bbn};border-radius:3px}fluent-tooltip::part(tooltip){padding:calc(${o.djH} + ${n.r2g});
    border-radius: ${n.y8E};
    background: ${o.C6c};
    font-size: ${o.Lgj};
    line-height: ${o.kyM};
    width: calc(136px + calc(${o.djH} + ${n.r2g}) * 2);
    -webkit-line-clamp: 3;
    box-shadow: ${a.Vq};zoom:var(--zoom-scale,1)}fluent-tooltip::part(tooltip)::after{background:${o.C6c};width:30px;height:60px;bottom:-12px;transform:rotate(270deg) translateY(-20%);clip-path:shape(from 100% 81.93%,curve to 65.12% 100% with 100% 91.91%/84.38% 100%,vline to 100%,curve to 30.23% 81.93% with 45.85% 100%/30.23% 91.91%,vline to 76.88%,curve to 14.75% 59.37% with 30.23% 70.16%/24.58% 63.76%,line to 3.23% 54.23%,curve to 2.26% 47.43% with -0.66% 52.49%/-1.1% 49.44%,line to 19.79% 36.88%,curve to 30.23% 22.32% with 26.53% 32.83%/30.23% 27.66%,vline to 18.07%,curve to 65.12% 0% with 30.23% 8.09%/45.85% 0%,vline to 0%,curve to 100% 18.07% with 84.38% 0%/100% 8.09%,vline to 81.93%,close )}fluent-tooltip.offset-start-tooltip::part(tooltip){margin-inline-end:80px}fluent-tooltip.offset-start-tooltip.tooltip-bottom::part(tooltip)::after{left:110px}fluent-tooltip.tooltip-bottom::part(tooltip)::after{transform:rotate(90deg) translateX(-80%);left:70px}.tooltip-text{color:${n.Imi};
    z-index: ${d.P.Above.toString()}}fluent-tooltip.with-button::part(tooltip){width:calc(136px + calc(${o.djH} + ${n.r2g}) * 2)}.tooltip-button{margin-block-start:${o.LbM};
    height: ${o.Szr};
    padding: ${n.Gkw} ${n.UYK};
    border-radius: ${o.FR4};
    border: ${o.KUh} solid rgba(255, 255, 255, 0);
    background: ${o.NNo};
    box-shadow: ${a.xp};
    color: ${o.C6c};
    font-size: ${o.vtK};
    line-height: ${o.EXe};
    z-index: ${d.P.Above.toString()};text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.tooltip-button:focus-visible,.tooltip-button:hover{background-color:${o.JMF}}.tooltip-button:active{background-color:${o.jWC};
}
`.withBehaviors((0,s.mr)(l)),m=c.A`
@media (prefers-reduced-motion:no-preference){.card-actions-button,.like-card-button{transition:all 0.3s cubic-bezier(0,0,1,1) 0s}}:host(:hover) .card-actions-button,:host(:hover) .like-card-button{opacity:1}.card-actions-button,.like-card-button{background:#EFF4FA;position:absolute;--card-actions-button-size:32px;align-items:center;box-sizing:border-box;cursor:pointer;display:flex;font-family:inherit;height:var(--card-actions-button-size);justify-content:center;min-width:var(--card-actions-button-size);opacity:0;outline:none;width:var(--card-actions-button-size);border-radius:${o.lb8};border:none}.card-actions-button:hover,.like-card-button:hover{background-color:#E4E9EF}.card-actions-button:focus,.like-card-button:focus{background:#CDD2D8}.card-actions-button:focus-visible,.like-card-button:focus-visible{opacity:1;outline:-webkit-focus-ring-color auto 1px;outline-offset:4px}.card-actions-button.grouped{background:#F6F9FC;position:relative;inset-block-start:0px;margin-left:13px}.card-actions-button.grouped:hover{background:#EAEFF5}.card-actions-button.grouped:focus{background:#DDE2E8}.card-actions-button.grouped:focus-visible{background:#DDE2E8}.card-actions-button[aria-expanded="true"]{opacity:1}@media (forced-colors:active){.card-actions-button:hover,.like-card-button:hover{border:1px solid}}.card-actions-button.grouped,.card-actions-button,.like-card-button{min-width:${o.Szr};
    min-height: ${o.Szr};
    border: ${o.KUh} solid ${o.AW4};
    background: ${o.JMF};
    box-shadow: ${a.xp}}.card-actions-button.grouped img,.card-actions-button img,.like-card-button img{filter:${a.a1}}.card-actions-button.grouped:active img,.card-actions-button:active img,.like-card-button:active img{filter:${a.M}}.card-actions-button.grouped:hover,.card-actions-button:hover,.like-card-button:hover,.card-actions-button.grouped:focus,.card-actions-button:focus,.like-card-button:focus{background:${o.NNo}}.card-actions-button.grouped:active,.card-actions-button:active,.like-card-button:active{background:${o.jWC};
}
${p}
`},13302:function(t,e,i){i.d(e,{_:function(){return h}});var o=i(17720),r=i(17254),n=i(48608),a=i(31653),s=i(8353),c=i(86948),d=i(57759),l=i(19993),u=i(44205);async function h(t){t.telemetry||(t.telemetry={});const e=(0,c.NP)();let i=(0,s.F6)(),h=(0,s.I6)();const p=(0,s.DP)();if(!i){const t=await async function(){var t;const e="OcvFeedbackAuth";if(o.vv.has(e))return o.vv.get(e);const i=null===(t=(0,n._W)())||void 0===t?void 0:t.access_token;return i?await(0,d.w)(async()=>{const t=new URL(`https://api.msn.${r.T3.IsChinaCompliance?"cn":"com"}/auth/token/v1/validation/usertoken`);l.WR.getCommonParams2("Peregrine").forEach(e=>t.searchParams.set(e.key,e.value));const n=await l.WR.getBaseRequestData("POST");n.headers["Content-Type"]="application/json",n.body=JSON.stringify({accessToken:i});const a=await fetch(t.href,n),s=await a.json(),c=null==s?void 0:s.claims;return c&&o.vv.set(e,c),c},"authTokenValidation"):void 0}();i=null==t?void 0:t.puid,h=null==t?void 0:t.tenantId}switch(e){case"MSA":t.complianceChecks={authenticationType:"MSA",ageGroup:u.P2[p]},t.telemetry.loggableUserId="p:"+i,t.telemetry.tenantId=a.nt;break;case"AAD":t.complianceChecks={authenticationType:"AAD",ageGroup:u.P2[p]},t.telemetry.loggableUserId="ap:"+i,t.telemetry.tenantId=h;break;default:t.complianceChecks={authenticationType:"Unauthenticated",ageGroup:u.P2[u.P2.Undefined]},t.telemetry.loggableUserId="",t.telemetry.tenantId="00000000-0000-0000-0000-000000000000"}}},15522:function(t,e,i){i.d(e,{D:function(){return u},G:function(){return h}});var o=i(56911),r=i(60815),n=i(61226),a=i(30216),s=i(17620),c=i(17254),d=i(89980),l=i(43557);const u="likeButtonClicked";class h{get showMoreFewerCardMetadata(){return this.card.previewType&&this.card.locale?{useVoteActions:!0,useCommunityReactions:!0,...this.card.previewType&&{previewType:this.card.previewType},locale:this.card.locale}:this.card.useVoteActions?{useVoteActions:!0,...this.card.previewType&&{previewType:this.card.previewType}}:{useCommunityReactions:!0,locale:this.card.locale}}constructor(t){var e,i;this.showMoreButtonSelected=!1,this.disableShowTooltip=!1,this.card=t;const{id:o="",disableShowTooltip:r}=t;this.disableShowTooltip=!!r;const s=`myReaction_${null===c.T3||void 0===c.T3?void 0:c.T3.UserId}_${o}_${null===c.T3||void 0===c.T3?void 0:c.T3.CurrentMarket}`;this.showMoreButtonSelected="upvote"===(null===d.Lg||void 0===d.Lg||null===(e=(0,d.Lg)())||void 0===e||null===(i=e.getItem)||void 0===i?void 0:i.call(e,s)),this.removeShowMoreFewerStatusListener=n.Pi.registerShowMoreFewerStatusListener(t=>{let{contentId:e,value:i}=t;e===this.card.id&&(this.showMoreButtonSelected=!!(i&&(i&a.J.showMore)>0))})}dispose(){var t;null===(t=this.removeShowMoreFewerStatusListener)||void 0===t||t.call(this)}toggleShowMore(t,e){var i;const o=null===(i=this.card)||void 0===i?void 0:i.id;if(!o)return;const r={targetId:o,metadata:this.showMoreFewerCardMetadata,targetType:this.card.targetType,getTargetElement:()=>{var e;return null===(e=t.shadowRoot)||void 0===e?void 0:e.querySelector(`#${(0,s.Z)(o)}`)},isLiked:!this.showMoreButtonSelected,isMouseClick:e,disableShowTooltip:this.disableShowTooltip};document.dispatchEvent(new CustomEvent(u,{bubbles:!0,detail:r}))}getUpvoteCount(t){var e;return(0,l.t)(this.showMoreButtonSelected,t,null===(e=this.card)||void 0===e?void 0:e.locale)}}(0,o.Cg)([r.sH],h.prototype,"showMoreButtonSelected",void 0)},17620:function(t,e,i){i.d(e,{O:function(){return u},Z:function(){return s}});var o=i(66591),r=i(96950),n=i(91640),a=i(17254);function s(t){return`like-button-${t}`}const c=t=>{var e;return((null==t?void 0:t.showMoreSelected)&&(null==t?void 0:t.showMoreSelected())||(null==t||null===(e=t.rubyLikeController)||void 0===e?void 0:e.showMoreButtonSelected))??!1},d=r.qy`<img alt="" aria-hidden="true" src="${(0,a.rA)().StaticsUrl}/latest/fluent-icons/thumb_like_20_filled.svg"></img>`,l=r.qy`<img alt="" aria-hidden="true" src="${(0,a.rA)().StaticsUrl}/latest/fluent-icons/thumb_like_20_regular.svg"></img>`,u=t=>r.qy`<button class=${null!=t&&t.className?(t=>`${c(t)?"liked":"unliked"}-${null==t?void 0:t.className}`)(t):(t=>(0,o.x)("like-card-button",["render-bottom-tooltip",Boolean(null==t?void 0:t.renderBottomTooltip)]))(t)} data-t="${(c(t)?null==t?void 0:t.telemetryTagUndo:null==t?void 0:t.telemetryTag)||""}" @click=${(null==t?void 0:t.onClick)||(t=>(e,i)=>{var o;const r=i.event,n=0!==r.clientX||0!==r.clientY;null==t||null===(o=t.rubyLikeController)||void 0===o||o.toggleShowMore(e,n)})(t)||(()=>{})} ?ruby=${(null==t?void 0:t.ruby)||!1} title=${(null==t?void 0:t.likeButtonTooltip)||""} id=${s((null==t?void 0:t.id)||"")} aria-pressed=${c(t)} aria-label=${(null==t?void 0:t.ariaLabel)||(null==t?void 0:t.likeButtonTooltip)||""} ?data-nopartialcontentview=${e=>Boolean(null==t?void 0:t.skipRepeatImpression)}>${(0,n.z)(c(t),d,l)} ${(0,n.z)(!(null==t||!t.innerText),(t=>{var e;return r.qy`<span>${(null==t||null===(e=t.getInnerText)||void 0===e?void 0:e.call(t,c(t),null==t?void 0:t.innerText))||""}</span>`})(t))} ${(0,n.z)((t=>Boolean((c(t)||Boolean(null==t?void 0:t.likeCount))&&(null==t?void 0:t.renderCount)))(t),(t=>{var e,i;return r.qy`<span class="like-count">${(null==t||null===(e=t.rubyLikeController)||void 0===e||null===(i=e.getUpvoteCount)||void 0===i?void 0:i.call(e,null==t?void 0:t.likeCount))||""}</span>`})(t))}</button>`},34773:function(t,e,i){var o;i.d(e,{C:function(){return o}}),function(t){t.Block="Block",t.Unblock="Unblock",t.Save="Save",t.Unsave="Unsave",t.Mute="Mute",t.MuteWebVideo="MuteWebVideo",t.Follow="Follow",t.Unfollow="Unfollow",t.InterestFailure="InterestFailure",t.ShowMore="ShowMore",t.ShowFewer="ShowFewer",t.Hide="Hide",t.DisableNotification="DisableNotification",t.EnableNotification="EnableNotification",t.RecommendedInterestsFailure="RecommendedInterestsFailure",t.Refresh="Refresh",t.Pin="Pin",t.Unpin="Unpin",t.HideTopic="HideTopic",t.UnhideTopic="UnhideTopic",t.HideSource="HideSource",t.UnhideSource="UnhideSource",t.WindowsInformation="WindowsInformation",t.Error="Error",t.Default="Default",t.ConnectionError="ConnectionError",t.MuteError="MuteError",t.Fre="Fre",t.TuneYourFeed="TuneYourFeed",t.Report="ReportContent"}(o||(o={}))},43557:function(t,e,i){function o(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en-us";try{if(isNaN(e))return"";const o=t?e+1:e;if(o>=1e3){const t=o/1e3,e=t.toFixed(1).endsWith(".0")?0:1;return`${r(t,i,e)}k`}return`${r(o,i)}`}catch{return""}}function r(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t.toLocaleString(e,{maximumFractionDigits:i})}i.d(e,{t:function(){return o}})},44205:function(t,e,i){var o,r,n,a;i.d(e,{G4:function(){return o},Ij:function(){return a},P2:function(){return n},vO:function(){return s}}),function(t){t.Ocv="Ocv",t.Ods="Ods"}(o||(o={})),function(t){t.NotConfigured="Not Configured",t.Enabled="Enabled",t.Disabled="Disabled"}(r||(r={})),function(t){t[t.Undefined=0]="Undefined",t[t.MinorWithoutParentalConsent=1]="MinorWithoutParentalConsent",t[t.MinorWithParentalConsent=2]="MinorWithParentalConsent",t[t.Adult=3]="Adult",t[t.NotAdult=4]="NotAdult",t[t.MinorNoParentalConsentRequired=5]="MinorNoParentalConsentRequired"}(n||(n={})),function(t){t[t.feedbackDefault=2224]="feedbackDefault",t[t.windowsFeed=2475]="windowsFeed",t[t.edgeChromium=2231]="edgeChromium"}(a||(a={}));class s{constructor(){this.manifestType="Sas",this.appId=a.feedbackDefault,this.source="Client",this.type="Idea"}}},61226:function(t,e,i){i.d(e,{Pi:function(){return W},J6:function(){return z}});var o=i(68154),r=i(28006),n=i(65022),a=i(93468),s=i(17254),c=i(12870),d=i(2429),l=i(36090),u=i(98216),h=i(11372),p=i(74326),m=i(19993),w=i(57759),v=i(50677),f=i(56408),b=i(83117),g=i(34773),y=i(29252),S=i(44205),C=i(13302),_=i(10160),$=i(77246),N=i(29231);const k="data-view-context",T="data-widget",I="widget-visible";class x{static getInstance(t){const e=this._instance||(this._instance=new this);return e.observeWidgetVisibile(),e}static removeInstance(){this._instance&&(this._instance.observer.disconnect(),this._instance.observer=void 0,this._instance.widgetDom=void 0,this._instance.widgetDataDom=void 0,this._instance=void 0)}getViewContext(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.getWidgetDom(),this.getWidgetContextData(),this.viewContext}getWidgetAttributes(){return(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.getWidgetDom(),this.getWidgetData(),this.widgetAttributes}constructor(){this.getWidgetContextData()}getWidgetDom(){const t=this.getWidgetByClassName(_.JV);t&&(this.widgetDom=t);const e=this.getWidgetByClassName(_.AF);return e&&(this.widgetDataDom=e),this.widgetDom}getWidgetByClassName(t){if(!t)return;const e=(0,$.S)()&&document.getElementsByClassName(t);if(e&&e.length>0){return e[0]}}getWidgetContextData(){var t,e;const i=(null===(t=this.widgetDom)||void 0===t?void 0:t.getAttribute(k))??(null===(e=this.widgetDataDom)||void 0===e?void 0:e.getAttribute(k));if(!i){var o;this.getWidgetData();const t=null===(o=this.widgetAttributes)||void 0===o?void 0:o.pcsAdditionalQsp;if(t){const e=new URLSearchParams(t),i=e.get("id"),o=e.get("scenario");this.viewContext={quoteId:i,scenario:o}}return}try{const t=JSON.parse(i);this.viewContext={...this.viewContext,quoteId:t.QuoteId||t.quoteid,duration:t.Duration||t.duration,scenario:t.Scenario||t.scenario,isEarningsEnabled:t.isEarningsEnabled}}catch(t){return}}getWidgetData(){var t,e;const i=(null===(t=this.widgetDom)||void 0===t?void 0:t.getAttribute(T))??(null===(e=this.widgetDataDom)||void 0===e?void 0:e.getAttribute(T));if(i)try{const t=JSON.parse(i);this.widgetAttributes={...t}}catch(t){return}}observeWidgetVisibile(){this.widgetDom&&(this.observer&&this.observer.disconnect(),this.observer=new MutationObserver((t,e)=>{const i=this.widgetDom.getAttribute(I);i&&/^\s*(true|1)\s*$/i.test(i.toLowerCase())&&u.YT.scheduleContentViewEvent(N.ym.Load)}),this.observer.observe(this.widgetDom,{attributeFilter:[I]}))}}var F=i(17720),M=i(6727),A=i(63456),E=i(2462),P=i(86948),G=i(35849),R=i(48622),O=i(64747),D=i(30216),U=i(2553);const L="https://petrol.office.microsoft.com/v1/feedback";class W{static get publisherFollowStatusListenerId(){return F.vv.get("__CardActionServiceClientPublisherFollowStatusListenerIdKey__",()=>1)}static set publisherFollowStatusListenerId(t){F.vv.set("__CardActionServiceClientPublisherFollowStatusListenerIdKey__",t)}static get showMoreFewerStatusListenerId(){return F.vv.get("__CardActionServiceClientShowMoreFewerStatusListenerIdKey__",()=>1)}static set showMoreFewerStatusListenerId(t){F.vv.set("__CardActionServiceClientShowMoreFewerStatusListenerIdKey__",t)}static get publisherFollowStatus(){return F.vv.get("__CardActionServiceClientPublisherFollowStatusKey__",()=>({}))}static set publisherFollowStatus(t){F.vv.set("__CardActionServiceClientPublisherFollowStatusKey__",t)}static get _publisherFollowStatusListeners(){return F.vv.get("__CardActionServiceClient_publisherFollowStatusListenersKey__",()=>new Map)}static set _publisherFollowStatusListeners(t){F.vv.set("__CardActionServiceClient_publisherFollowStatusListenersKey__",t)}static get _showMoreFewerStatusListeners(){return F.vv.get("__CardActionServiceClient_showMoreFewerStatusListenersKey__",()=>new Map)}static set _showMoreFewerStatusListeners(t){F.vv.set("__CardActionServiceClient_showMoreFewerStatusListenersKey__",t)}static get showMoreFewerStatus(){return F.vv.get("__CardActionServiceClientShowMoreFewerStatusKey__",()=>({}))}static set showMoreFewerStatus(t){F.vv.set("__CardActionServiceClientShowMoreFewerStatusKey__",t)}static get topicFollowStatus(){return F.vv.get("__CardActionServiceClientTopicFollowStatusKey__",()=>({}))}static set topicFollowStatus(t){F.vv.set("__CardActionServiceClientTopicFollowStatusKey__",t)}static get saveStatus(){return F.vv.get("__CardActionServiceClientSaveStatusKey__",()=>({}))}static set saveStatus(t){F.vv.set("__CardActionServiceClientSaveStatusKey__",t)}static get publisherMuteStatus(){return F.vv.get("__CardActionServiceClientPublisherMuteStatusKey__",()=>({}))}static set publisherMuteStatus(t){F.vv.set("__CardActionServiceClientPublihserMuteStatusKey__",t)}static getSharedWidgetScenario(){const t=x.getInstance().getViewContext(!0);return null==t?void 0:t.scenario}static isFinanceScenario(){const t=this.getSharedWidgetScenario();return t&&("watchlist"===t||"market"===t||"stock"===t||"earnings"===t)}static setPublisherFollowStatus(t,e){W.publisherFollowStatus[t]=e,W._publisherFollowStatusListeners.forEach(i=>{i({profileId:t,value:e})})}static setShowMoreFewerStatus(t,e){W.showMoreFewerStatus[t]=e,W._showMoreFewerStatusListeners.forEach(i=>{i({contentId:t,value:e})})}static clearPublisherFollowStatus(){W.publisherFollowStatus={}}static setTopicFollowStatus(t,e){W.topicFollowStatus[t]=e}static setSaveStatus(t,e){W.saveStatus[t]=e}static setPublisherMuteStatus(t,e){W.publisherMuteStatus[t]=e}static registerPublisherFollowStatusListener(t){const e=W.publisherFollowStatusListenerId;return W._publisherFollowStatusListeners.set(e,t),W.publisherFollowStatusListenerId+=1,()=>W._publisherFollowStatusListeners.delete(e)}static registerShowMoreFewerStatusListener(t){const e=W.showMoreFewerStatusListenerId;return W._showMoreFewerStatusListeners.set(e,t),W.showMoreFewerStatusListenerId+=1,()=>W._showMoreFewerStatusListeners.delete(e)}constructor(t,e){var i;this.fetchImpl=t,this.additionalHeaders=e,this.isWindowsDashboard="windowsNewsPlus"===s.T3.AppType||"winWidgets"===s.T3.AppType,this.isWindowsBoardsForRuby="winWidgets"===s.T3.AppType&&"startfeed"===(null===(i=s.T3.CurrentRequestTargetScope)||void 0===i?void 0:i.pageType)&&"ruby"===s.T3.UxMode,this.isWindowsShellV2="windowsShellV2"===s.T3.AppType,this.isTravelVertical="travel"===s.T3.AppType,this.isBingHomepage="bingHomepage"===s.T3.AppType,this.isRuby="msn"===s.T3.AppType,this.isFinanceVertical="finance"===s.T3.AppType,this.isShareWidgets="sharedWidgets"===s.T3.AppType,this.isFinanceSharedWidget=this.isShareWidgets&&W.isFinanceScenario(),this.providersServiceEndpointURL=(0,p.nI)("./Msn/Providers"),this.cardActionsServiceEndpointURL=(0,p.nI)("./Graph/Actions"),this.ocid="feeds",this.onChangePublisherFollowStatus=t=>{var e,i;const o=null==t||null===(e=t.detail)||void 0===e?void 0:e.id,r=null==t||null===(i=t.detail)||void 0===i?void 0:i.follow;o&&void 0!==r&&W.setPublisherFollowStatus(o,r)},this.getUpvoteStatus=async t=>{const e=await this.getCardActionStatus(t,D.X.Upvote);return e&&e.value&&e.value.length>0},this.getDownvoteStatus=async t=>{const e=await this.getCardActionStatus(t,D.X.Downvote);return e&&e.value&&e.value.length>0},this.getCardActionStatus=async(t,e)=>{const i=this.cardActionsServiceEndpointURL,o={method:"GET",headers:{...await m.WR.getOneServiceHeaders(),...this.additionalHeaders},credentials:"include"},r=await this.getOneServiceCommonParam();r.push({key:"$filter",value:`actionType eq '${e}' and targetId eq '${t}'`}),r.forEach(t=>t.value&&i.searchParams.set(t.key,t.value));try{const r=await(0,w.w)(async()=>await this.fetchImpl(i.href,o),`getCardAction${e}`);if(r.status>=400){const i=`OneService returned error response. Status: ${r.status} for actionType: ${e}, targetId: ${t}`;throw new Error(i)}return(0,v.FH)(this.getPreloadReloadReason(e)),(0,y.T4)(),r.json()}catch(t){u.YT.sendAppErrorEvent({...n.Bik,message:"Error while posting action for card action",pb:{...n.Bik.pb,customMessage:`url: ${i.href}, error: ${t}`}})}},this.isWindowsBoardsForRuby?this.ocid="rubyprong2":this.isWindowsDashboard?this.ocid="winp2":this.isWindowsShellV2?this.ocid="feeds":c.Rb.IsBlendedEnterprise?this.ocid="entnewsntp":this.isTravelVertical?this.ocid="travel-verthp-feeds":this.isBingHomepage?this.ocid="Peregrine":this.isRuby?this.ocid="rubyntp":this.isFinanceVertical?this.ocid="pdp-peregrine":this.isFinanceSharedWidget&&(this.ocid="hpwidget"),this.initPublisherServiceClientPromise(),this.initTopicsDataConnector(),this.addEventListeners()}getTopicDataConnector(){return this.topicsDataConnector||this.initTopicsDataConnector(),this.topicsDataConnector}initPublisherServiceClientPromise(){let t;this.publisherServiceClientPromise=new Promise(e=>{t=e});(async()=>{const{PublisherServiceClient:e}=await i.e("msnews/publishers-service-client").then(i.bind(i,69023));t(new e((0,$.S)()?window.fetch.bind(window):fetch))})()}initTopicsDataConnector(){this.topicsDataConnector=(0,G.zP)(r.YL)}static getUndoCallbackParams(t,e,i){let o={status:t,action:null,sendRequest:!0};return t&D.J.hidden?(t&D.J.mute?(o.status=t^D.J.mute,o.action=D.X.Mute):t&D.J.report?(o.status=t^D.J.report,o.action=D.X.Report):t&D.J.showFewer&&t&D.J.hide?(o.status=t^D.J.showFewer,o.action=D.X.ShowFewer):t&D.J.showMore&&t&D.J.hide?(o.status=t^D.J.showMore,o.action=D.X.ShowMore):"like-button"===e&&t&D.J.hide&&t&D.J.followedPublisher?(o.status=t^D.J.followedPublisher,o.action=D.X.FollowPublisher):t&D.J.hideTopic?(o.status=t^D.J.hideTopic,o.action=D.X.HideTopic):t&D.J.dismiss&&(o.status=t^D.J.dismiss,o.sendRequest=!1),o.status^=D.J.hidden,i&&(o.status^=D.J.hide,o.action=D.X.Hide)):o="like-button"===e?{status:t^D.J.hide,action:"Like-TellUsMore",sendRequest:!1}:t&D.J.hide?{status:t^D.J.hide,action:D.X.Hide,sendRequest:!0}:{status:t^D.J.showFewer,action:D.X.ShowFewer,sendRequest:!0},o}setAdditionalHeaders(t){this.additionalHeaders=t}async handleShowMoreLessWithCommunityReactions(t,e,o,r){const{SocialServiceAdapter:n,ItemTypes:a,BinaryReactionType:s}=await Promise.all([i.e("libs_social-data-service_dist_service_SocialService_js"),i.e("top-comments-card")]).then(i.bind(i,21868));n.sendContentReaction({item:a.contents,id:`${t}_${e}`,reactionType:o?s.upvote:s.downvote,reset:r})}async ShowFewer(t,e,i,o){if(W.setShowMoreFewerStatus(t,i),e&&e.useCommunityReactions&&e.locale&&(this.handleShowMoreLessWithCommunityReactions(t,e.locale,!1,!1),!e.useVoteActions))return!0;const r=e&&e.useVoteActions?D.X.Downvote:D.X.Dislike;return this.PostCardActionRequest(t,r,o??null,e)}async UnshowFewer(t,e,i){if(W.setShowMoreFewerStatus(t,i),e&&e.useCommunityReactions&&e.locale&&(this.handleShowMoreLessWithCommunityReactions(t,e.locale,!1,!0),!e.useVoteActions))return!0;const o=e&&e.useVoteActions?D.X.Downvote:D.X.Dislike;return this.DeleteCardActionRequest(t,o)}async ShowMore(t,e,i,o){if(W.setShowMoreFewerStatus(t,i),e&&e.useCommunityReactions&&e.locale&&(this.handleShowMoreLessWithCommunityReactions(t,e.locale,!0,!1),!e.useVoteActions))return!0;const r=e&&e.useVoteActions?D.X.Upvote:D.X.Like;return this.PostCardActionRequest(t,r,o??null,e)}async UnshowMore(t,e,i){if(W.setShowMoreFewerStatus(t,i),e&&e.useCommunityReactions&&e.locale&&(this.handleShowMoreLessWithCommunityReactions(t,e.locale,!0,!0),!e.useVoteActions))return!0;const o=e&&e.useVoteActions?D.X.Upvote:D.X.Like;return this.DeleteCardActionRequest(t,o)}async saveContent(t,e,i){return W.setSaveStatus(t,!0),this.PostCardActionRequest(t,D.X.Save,i??null,e)}async unsaveContent(t){return W.setSaveStatus(t,!1),this.DeleteCardActionRequest(t,D.X.Save)}async Follow(t,e){W.setPublisherFollowStatus(t,!0);const i=await this.publisherServiceClientPromise;try{return await i.updateSourceFollowState(t,!0,e)}catch(e){throw W.setPublisherFollowStatus(t,!1),u.YT.sendAppErrorEvent({...n.OZt,message:"Error while following publisher for card action",pb:{...n.OZt.pb,customMessage:`targetId: ${t}, error: ${e}`}}),e}}async Unfollow(t,e,i){W.setPublisherFollowStatus(i||t,!1);const o=await this.publisherServiceClientPromise;try{return await o.updateSourceFollowState(t,!1,e)}catch(e){throw W.setPublisherFollowStatus(t,!0),u.YT.sendAppErrorEvent({...n.OZt,message:"Error while unfollowing publisher for card action",pb:{...n.OZt.pb,customMessage:`targetId: ${t}, error: ${e}`}}),e}}async FollowTopic(t,e,i){W.setTopicFollowStatus(t,!0);try{var o;return null===(o=this.getTopicDataConnector())||void 0===o?void 0:o.followTopic(t,e,!1,i)}catch(e){throw W.setTopicFollowStatus(t,!1),u.YT.sendAppErrorEvent({...n.lZi,message:"Error while following topic for card action",pb:{...n.lZi.pb,customMessage:`targetId: ${t}, error: ${e}`}}),e}}async UnfollowTopic(t){W.setTopicFollowStatus(t,!1);try{var e;return null===(e=this.getTopicDataConnector())||void 0===e?void 0:e.unfollowTopic(t)}catch(e){throw W.setTopicFollowStatus(t,!0),u.YT.sendAppErrorEvent({...n.lZi,message:"Error while unfollowing topic for card action",pb:{...n.lZi.pb,customMessage:`targetId: ${t}, error: ${e}`}}),e}}async Hide(t,e,i){return e&&e.usePdpService&&e.segmentType?this.HideSegment(e.segmentType):this.PostCardActionRequest(t,D.X.Dislike,i||null,e)}async Unhide(t){return this.DeleteCardActionRequest(t,D.X.Dislike)}async Mute(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SourceProvider",i=arguments.length>2?arguments[2]:void 0;return W.setPublisherMuteStatus(t,!0),this.PostCardActionRequest(t,D.X.Mute,e,i)}async Unmute(t){return W.setPublisherMuteStatus(t,!1),this.DeleteCardActionRequest(t,D.X.Mute)}async Disable(t,e){return this.PostCardActionRequest(t,D.X.Disabled,e)}async undoAdFeedback(t){return this.DeleteCardActionRequest(t,D.X.Dislike)}async Report(t,e,i,r,n,a,d,l,u){let w=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"",v=arguments.length>10?arguments[10]:void 0,f=arguments.length>11?arguments[11]:void 0,b=arguments.length>12?arguments[12]:void 0;const g=c.Rb.ClientSettings?c.Rb.ClientSettings.aid:"",y=s.T3&&s.T3.HostPage.topDomain;let S=b==o.vq||n===h.b5.WebContent?"web":"msn";"ugcPost"===b&&(S="ugcPost");const C=(0,o._D)(u),_={serviceType:"oneservice",oneServiceTraceId:"",oneServiceActivityId:g},$={activityId:g,feedbackTags:e,feedbackText:i},N={activityId:(0,M.DA)(),market:s.T3&&s.T3.CurrentMarket||"",contentId:t,source:S,headlineImage:d&&K(d.src),headlineText:r,abstract:a,offensive:C,url:l};if(v&&f){const t=(0,o.Zn)(v.imageQualityOtherVisualQualityTags),e=(0,o.vF)(v.suspectedAIOrBotCreatedTags);t.length&&(N.imageQualityOtherVisualQuality=t),e.length&&(N.aidetection=e)}JSON.stringify({article:{id:t},canvas:{name:s.T3.AppType,version:navigator.userAgent,pageType:w||c.Rb.ClientSettings.pagetype},data:$,appEnvironment:s.T3,clientSettings:c.Rb.ClientSettings,extSchema:_});const k=JSON.stringify(N),T="msn.cn"===y?o.LX:(0,p.pN)().origin+o.cM,I={...{...await m.WR.getOneServiceHeaders(),...this.additionalHeaders},"Content-Type":"application/json"};f&&(0!=C.length||N.aidetection)&&this.reportFeedbackService(k,T,I)}async reportGem(t,e,i,r,n){var a;const c=(0,M.DA)(),d=(0,o._D)(i),l={activityId:c,market:s.T3&&s.T3.CurrentMarket||"",contentId:t,source:"gem",signature:e,canvas:this.ocid,url:n||(null===(a=window.location)||void 0===a?void 0:a.href)||"",headlineImage:"",headlineText:"",abstract:""};if(0===d.length&&!r)return;d.length>0&&(l.offensive=d),r&&(l.gemFeedback=[]);const u="msn.cn"===(s.T3&&s.T3.HostPage.topDomain)?o.LX:(0,p.pN)().origin+o.cM,h={...await m.WR.getOneServiceHeaders(),...this.additionalHeaders,"Content-Type":"application/json"};this.reportFeedbackService(JSON.stringify(l),u,h)}async reportFeedbackService(t,e,i){const o={method:"POST",headers:i,body:t,credentials:"include"};let r;try{if(r=await fetch(e,o),r.status>=400)throw new Error(r.statusText)}catch(t){u.YT.sendAppErrorEvent({...n.HN5,message:"Error while posting action for card action",pb:{...n.HN5.pb,customMessage:`url: ${e}, error: ${t}`}})}return r}async reportNonCMS(t,e,i,o,r,n,a){this.ReportOCV(t,e,i,o,r,n,a)}async ReportOCV(t,e,i,o,r,s,c){let d=!1;const l=await this.createOcvFeedbackData(t,e,i,o,r,s,c),u={method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)};try{const t=await this.fetchImpl(L,u);if(t.ok)d=!0;else{const e=`Error code: ${t.status} Error message: ${t.statusText} Request params: ${u} Service url: ${L}`;(0,a.vV)(n.QZG,"Request is not valid, it has no content, or the manifest is not formatted correctly",e)}}catch(t){const e=`Error code: ${t?t.code:"undefined"} Error message: ${t?t.message:"undefined"} Request params: ${u} Service url: ${L}`;(0,a.c_)(t,n.lbM,"Exception reporting feedback to OCV",e)}}async createOcvFeedbackData(t,e,i,o,r,n,a){var d,l,h;const p=new S.vO,m=null===c.Rb||void 0===c.Rb?void 0:c.Rb.ClientSettings,w=null===s.T3||void 0===s.T3?void 0:s.T3.HostPage,v=(null==m?void 0:m.aid)||"",f=[n?"1S":"","true"===((null==m?void 0:m.static_page)||"")?"PCS":""].join(" ").trim()||"None",b=(null===s.T3||void 0===s.T3||null===(d=s.T3.CurrentRequestTargetScope)||void 0===d||null===(d=d.pageExperiments)||void 0===d?void 0:d.join(","))||"",g=null===s.T3||void 0===s.T3||null===(l=s.T3.CurrentRequestTargetScope)||void 0===l?void 0:l.browser;let _="";if(r){const t=r.split("|");_=t&&t.length&&t[0]}else{const t=u.YT.getPageMetadata().JoinIdProps.IDXId;if(t){_=t.split(",").slice(0,10).toString()}r=(0,y.Xq)()}const $={serviceType:"oneservice",oneServiceTraceId:_,oneServiceActivityId:""},N={NotRelevant:e.NotRelevant,ImageQuality:e.BlurryImage,MisleadingTitle:e.Misleading,OutdatedArticle:e.Outdated,DuplicateArticle:e.Duplicate,OffensiveContent:e.Offensive,Vertical:o,SuspectedAIOrBot:e.SuspectedAIOrBot,CopyrightAndTrademarkViolation:e.CopyrightAndTrademarkViolation},k=JSON.stringify(N);return u.YT.sendTraceInfoEvent($),p.submitTime=(new Date).toISOString(),p.clientFeedbackId=(0,M.DA)(),p.comment=i,p.rating=4,p.application={appData:JSON.stringify({ScreenResolution:window&&window.screen?[screen.width,screen.height].join("x"):"",articleId:t,debugId:r,activityID:v,staticFallback:f,vertical:w&&w.verticalKey||"Prod",errorClassification:k,whyAmISeeReasons:a})},p.telemetry={audience:(null===s.T3||void 0===s.T3?void 0:s.T3.CurrentMarket)||"",audienceGroup:"Production",channel:(null==w?void 0:w.categoryKey)||"",deviceType:(null==m?void 0:m.deviceFormFactor)||"",errorClassification:k,featureArea:(null==m?void 0:m.pagetype)||"",flights:b,isUserSubscriber:(0,P.Fo)(),platform:null===(h=s.T3.CurrentRequestTargetScope)||void 0===h?void 0:h.os,processSessionId:v,sourceContext:s.T3.AppType},p.web={browser:(null==g?void 0:g.browserType)||"",browserVersion:(null==g?void 0:g.version)||"",sourcePageName:(null==w?void 0:w.subcategoryKey)||"",sourcePageURI:""},await(0,C._)(p),p}async ReportAd(t,e){if(c.Rb.CurrentFlightSet.has("prg-ad-fbck-log")&&!(0,d.V1)(t))return void(0,a.vV)(n.C8f,`Cannot send ad feedback: invalid or empty feedback URL. Value: '${t}'`);let i;(0,d.bJ)(t)?(i=(0,d.Re)(t,"${FEEDBACK}",encodeURIComponent(e||""),"f"),i=(0,d.Re)(i,"${CANVAS}",encodeURIComponent(s.T3.AppType),"canvas"),u.YT.addOrUpdateTmplProperty("adFeedbackUrlMonetize","1")):i=t.concat(`&f=${e}`);let o=new Image(1,1);o.src=i,o=null}async GetProviderIcon(t){const e=await this.GetPublisherDetails(t);return(0,A.A)(e,"value[0].logos[0].imageLink.href",void 0)}async PostCardActionEvent(t,e,i){let r,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>null,a=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0,d=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=arguments.length>7?arguments[7]:void 0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:5e3,p=arguments.length>9&&void 0!==arguments[9]&&arguments[9],m=arguments.length>10?arguments[10]:void 0,w=arguments.length>11?arguments[11]:void 0,v=arguments.length>12?arguments[12]:void 0,f=arguments.length>13?arguments[13]:void 0,y=arguments.length>14?arguments[14]:void 0;switch(e){case D.X.ShowMore:t&D.J.showMore?(d&&b.g.renderToast({id:g.C.ShowMore+`-${i}`,toastType:g.C.ShowMore,expirationInMs:h,onClick:()=>{a?a(i,t^D.J.showMore,e,!0):this.PostCardActionEvent(t^D.J.showMore,e,i,n)},referrerButton:u}),r=await this.ShowMore(i,w,t,y)):(d&&b.g.expireToast(g.C.ShowMore+`-${i}`),r=await this.UnshowMore(i,w,t)),n(i,t,e);break;case D.X.ShowFewer:t&D.J.showFewer?(d&&b.g.renderToast({id:g.C.ShowFewer+`-${i}`,toastType:g.C.ShowFewer,expirationInMs:h,onClick:()=>{a?a(i,t^D.J.showFewer,e,!0):this.PostCardActionEvent(t^D.J.showFewer,e,i,n)},referrerButton:u}),r=await this.ShowFewer(i,w,t,y)):(d&&b.g.expireToast(g.C.ShowFewer+`-${i}`),r=await this.UnshowFewer(i,w,t)),n(i,t,e);break;case D.X.Save:r=Boolean(W.saveStatus[i])?await this.unsaveContent(i):await this.saveContent(i,w,y),n(i,t,e);break;case D.X.FollowPublisher:{const o=w;r=t&D.J.followedPublisher?await this.Follow(c,o):await this.Unfollow(c,o),n(i,t,e);break}case D.X.FollowTopic:{const o=w;r=t&D.J.followedTopic?await this.FollowTopic(c,f,o):await this.UnfollowTopic(c),n(i,t,e);break}case D.X.Hide:r=t&D.J.hide?await this.Hide(i,w,y):await this.Unhide(i),n(i,t,e);break;case D.X.HideTopic:r=t&D.J.hideTopic?await this.PostCardActionRequest(c,D.X.Mute,"TagBase"):await this.DeleteCardActionRequest(c,D.X.Mute);break;case D.X.Mute:if(t&D.J.mute){(t&D.J.followedPublisher||!0===W.publisherFollowStatus[f])&&this.Unfollow(c,w,f);const a=c===o.vq||(null==w?void 0:w.isWebVideo),p=a?o.vq:c,m=a?"Source":"SourceProvider";if(r=null!=w&&w.isWebVideo?await this.Mute(p,m):await this.Mute(p,m,w),r)n(i,t,D.X.Mute,void 0,void 0,p);else if(v&&v(),s.T3.CurrentMarket===l.DX.ENUS)return void setTimeout(()=>{d&&b.g.renderToast({id:`${g.C.MuteError}-${e}-${i}`,toastType:g.C.MuteError,expirationInMs:h,referrerButton:u,positionElRef:null==u?void 0:u.offsetParent})},300)}else r=await this.Unmute(c);break;case D.X.ReportAd:n(i,t,e);break;default:return}p&&!r&&b.g.renderToast({id:`${g.C.ConnectionError}-${e}-${i}`,toastType:g.C.ConnectionError,inputText:m&&m.personalizationErrorText,expirationInMs:h,referrerButton:u})}async GetPublisherDetails(t){const e=this.providersServiceEndpointURL,i={method:"GET",headers:{...await m.WR.getOneServiceHeaders(),...this.additionalHeaders}};[{key:"ids",value:t},...await this.getOneServiceCommonParam()].forEach(t=>t.value&&e.searchParams.set(t.key,t.value));try{const o=await(0,w.w)(async()=>await this.fetchImpl(e.href,i),"getProviderDetails");if(!o.ok){const e=`OneService returned error response. Status: ${o.status} for providerId: ${t}`;throw new Error(e)}return o.json()}catch(t){u.YT.sendAppErrorEvent({...n.Bik,message:"Error while calling getPublisherDetails action for card action",pb:{...n.kOp.pb,customMessage:`url: ${e.href}, error: ${t}`}})}}async DeleteCardActionRequest(t,e){const i=this.cardActionsServiceEndpointURL,o={method:"DELETE",credentials:"include",headers:{...await m.WR.getOneServiceHeaders(),...this.additionalHeaders}};[{key:"$filter",value:`actionType eq '${e}' and targetId eq '${t}'`},...await this.getOneServiceCommonParam()].forEach(t=>t.value&&i.searchParams.set(t.key,t.value));try{const r=await(0,w.w)(async()=>await this.fetchImpl(i.href,o),`deleteCardAction${e}`);if(r.status>=400){const i=`OneService returned error response. Status: ${r.status} for actionType: ${e} and targetId: ${t}`;throw new Error(i)}return(0,v.FH)(this.getPreloadReloadReason(e)),(0,y.T4)(),r}catch(t){u.YT.sendAppErrorEvent({...n.kOp,message:"Error while calling delete action for card action",pb:{...n.kOp.pb,customMessage:`url: ${i.href}, error: ${t}`}})}}async HideSegment(t){if("CasualGame"===t)return R.d.updateGamingCardsEnableStatus([{cardType:O.g.CasualGamesCard,enabled:!1}]);const e=U.AT.get(t);if(e)return R.d.updateSegmentCardsEnableStatus([{cardType:e,enabled:!1}]);const i=U.jf.get(t);return i&&R.d.disableSpotlightCard(null==i?void 0:i.definitionName,null,null==i?void 0:i.targetType)}async PostCardActionRequest(t,e,i,o){const r=this.cardActionsServiceEndpointURL;let a=JSON.stringify({actionType:e,targetId:t,targetType:i,metadata:o,...o&&{degree:"Customized"}});null!=o&&o.useDefinitionName&&(a=JSON.stringify({actionType:e,definitionName:t,targetType:i,metadata:o,...o&&{degree:"Customized"}}));const s={method:"POST",body:a,headers:{...await m.WR.getOneServiceHeaders(),...this.additionalHeaders},credentials:"include"};(await this.getOneServiceCommonParam()).forEach(t=>t.value&&r.searchParams.set(t.key,t.value));try{const o=await(0,w.w)(async()=>await this.fetchImpl(r.href,s),`getCardAction${e}`);if(o.status>=400){const r=`OneService returned error response. Status: ${o.status} for actionType: ${e}, targetId: ${t} and targetType: ${i}`;throw new Error(r)}return(0,v.FH)(this.getPreloadReloadReason(e)),(0,y.T4)(),o.json()}catch(t){u.YT.sendAppErrorEvent({...n.HN5,message:"Error while posting action for card action",pb:{...n.HN5.pb,customMessage:`url: ${r.href}, error: ${t}`}})}}async getOneServiceCommonParam(){return this.isWindowsDashboard||this.isTravelVertical||this.isRuby?m.WR.getOneServiceParamsWithoutAuth(s.T3.UserId,this.ocid,!1):await this.isUserSignedIn()?m.WR.getOneServiceParamsWithAuth(s.T3.UserId,this.ocid,!this.isFinanceVertical&&!this.isFinanceSharedWidget&&!c.Rb.IsBlendedEnterprise||this.isWindowsShellV2):"edgeChromium"===s.T3.AppType&&(0,E.Ri)("lt")&&(0,E.Ri)("aace")?((0,a.vV)(n.mD0,"CardActionServiceClient: lt cookie present. aace cookie present.",void 0,{...n.mD0.pb}),m.WR.getOneServiceParamsWithAuth(s.T3.UserId,this.ocid,!c.Rb.IsBlendedEnterprise||this.isWindowsShellV2)):m.WR.getOneServiceParamsWithoutAuth(s.T3.UserId,this.ocid,!this.isFinanceVertical&&!this.isFinanceSharedWidget&&!c.Rb.IsBlendedEnterprise||this.isWindowsShellV2)}async isUserSignedIn(){if(c.Rb.UserIsSignedIn)return!0;return 2===await(0,P.XK)()}getPreloadReloadReason(t){switch(t){case D.X.Mute:return f.u.MutePublisher;case D.X.Save:return f.u.Save;case D.X.Like:return f.u.Like;case D.X.Dislike:return f.u.Dislike;case D.X.Disabled:return f.u.Disabled;default:return f.u.SettingsChange}}addEventListeners(){window.addEventListener("trackPublisherFollowStatus",this.onChangePublisherFollowStatus)}removeEventListeners(){window.removeEventListener("trackPublisherFollowStatus",this.onChangePublisherFollowStatus)}}class B extends W{constructor(t,e){let i;i=t||((0,$.S)()?window.fetch.bind(window):fetch),super(i,e)}}let V;const z=(t,e)=>V?(e&&V.setAdditionalHeaders(e),V):(V=new B(t,e),V);function K(t){if(t&&t.startsWith("//")){return`${(0,$.S)()?window.location.protocol:"https:"}${t}`}return t}},64747:function(t,e,i){var o;i.d(e,{g:function(){return o}}),function(t){t.ConnectToXbox="ConnectToXbox",t.CasualGamesCard="CasualGamesCard",t.CompeteCard="CompeteCard",t.InterestGroupCard="InterestGroupCard",t.HighlightsCard="HighlightsCard",t.PersonalizationCard="PersonalizationCard",t.LivestreamCard="LivestreamCard",t.ProMatchesCard="ProMatchesCard",t.ProTournamentsCard="ProTournamentsCard",t.RecentlyPlayedCard="RecentlyPlayedCard",t.RecommendedCard="RecommendedCard",t.RecoVideoCard="RecoVideoCard",t.RedditCard="RedditCard",t.RewardsCard="RewardsCard",t.UpcomingGamesCard="UpcomingGamesCard",t.UpsellGamerModeCard="UpsellGamerModeCard",t.VideoCard="VideoCard"}(o||(o={}))},68154:function(t,e,i){i.d(e,{LX:function(){return s},Zn:function(){return r},_D:function(){return o},cM:function(){return a},vF:function(){return n},vq:function(){return c}});const o=t=>{const e=[],i={TextProfanity:"TextProfanity",Profanity:"TextProfanity",SubstanceAbuse:"SubstanceAbuse",Violence:"Violence",Misinformation:"MisinformationCovid",Other:"Other",AdultImage:"AdultImage",RacyImage:"RacyImage",AdultAndRacyImage:"AdultAndRacy",SuicideOrSelfHarm:"SuicideAndSelfHarm",BullyingAndHarassment:"BullyingAndHarassment",HateSpeech:"HateSpeech",Spam:"Spam",ChildAbuse:"ChildAbuse",TerrorismOrViolentExtremism:"TerrorismOrViolentExtremism",Gambling:"Gambling",RegulatedGoods:"RegulatedGoods",UnverifiedMedicalClaims:"UnverifiedMedicalClaims",Hoax:"Hoax"};return t&&Object.keys(t).forEach(o=>{t[o]&&e.push(i[o])}),e},r=t=>{const e=[],i={reportBlurryImage:"reportBlurryImage",reportLongBlockOfUnFormatted:"reportLongBlockOfUnFormatted",reportTooManyLink:"reportTooManyLink",reportInsufficientInformation:"reportInsufficientInformation",reportExpectedMediaNotFound:"reportExpectedMediaNotFound",reportDuplicateContentOrMedia:"reportDuplicateContentOrMedia",Other:"Other"};return t&&Object.keys(t).forEach(o=>{t[o]&&e.push(i[o])}),e},n=t=>{const e=[],i={UndisclosedAIgengerated:"AIGeneratedMedia",AIGeneratedPromotion:"PromotionalAdLinks",IncorectInfo:"IncorrectInformation",Nonsensical:"NonsenseMedia",FakedImgOfPublicFigures:"FakedImagesOfRealPeopleOrEvents",ImpossiblePhysicalAppearance:"ImpossiblePhysicalAppearance",ContentIdentifiesItselfAsAIGenerated:"ContentItselfIdsAsAI",PlagiarismC:"reportPlagiarismChecked",other:"other"};return t&&Object.keys(t).forEach(o=>{t[o]&&"PlagiarismC"!=o&&"other"!=o&&e.push(i[o])}),e},a="/service/moderation/api/reportanissue",s="https://assets.msn.cn/service/moderation/api/reportanissue",c="WebVideo"},83117:function(t,e,i){i.d(e,{g:function(){return a}});var o=i(98216),r=i(65022),n=i(93468);class a{static renderToast(t){const e=()=>{this.renderToastCallback?this.renderToastCallback(t):o.YT.sendAppErrorEvent((0,n.$5)(r.HBg,"Undefined toast render callback function"))};if(a.waitForCallbackReadyTimeout>0&&"undefined"!=typeof window&&void 0!==window.setTimeout){const t=window.setTimeout(()=>{e()},a.waitForCallbackReadyTimeout);a.ready&&a.ready.then(()=>{clearTimeout(t),e()})}else e()}static setRenderToastCallback(t){this.renderToastCallback=t,this.readyResolveFn()}static expireToast(t){this.expireToastCallback?this.expireToastCallback(t):o.YT.sendAppErrorEvent((0,n.$5)(r.kZg,"Undefined toast expire callback function"))}static setExpireToastCallback(t){this.expireToastCallback=t}static setCurrentToast(t,e){this.currentToastId!==t&&(this.currentToastId=t,this.renderToastCallback=e,e&&this.readyResolveFn(),this.currentToastIdChangeCallbacks.forEach(e=>e(t)),this.renderToast())}static addCurrentToastIdChangeCallback(t){t&&this.currentToastIdChangeCallbacks.push(t)}static setWaitForCallbackReadyTimeout(t){a.waitForCallbackReadyTimeout=t}}a.ready=new Promise(t=>a.readyResolveFn=t),a.currentToastIdChangeCallbacks=[]}}]);