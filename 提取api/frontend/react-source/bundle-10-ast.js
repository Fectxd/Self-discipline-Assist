/*!
 * SDK version: 1.10.56
 * Commit: fbdc25bd4
 */
(()=>{"use strict";const e={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let t;const n=new Uint8Array(16);function a(){if(!t){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");t=crypto.getRandomValues.bind(crypto)}return t(n)}const r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).slice(1));const i=function(t,n,i){if(e.randomUUID&&!n&&!t)return e.randomUUID();const s=(t=t||{}).random||(t.rng||a)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,n){i=i||0;for(let e=0;e<16;++e)n[i+e]=s[e];return n}return function(e,t=0){return(r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]).toLowerCase()}(s)};function s(e,t=300){if(!e)return;const n=Number.isInteger(t)&&t>0?t:300;return e.split("?")[0].substring(0,n)}function o(e,{async:t=!1,attrs:n={},parent:a="head"}={}){return new Promise((r,i)=>{const s=document.createElement("script");s.type="text/javascript",s.src=e,s.crossOrigin="anonymous",t&&(s.async=!0);for(const[e,t]of Object.entries(n))s.setAttribute(e,t);s.addEventListener("load",()=>r()),s.addEventListener("error",i),"body"===a?document.body.appendChild(s):document.head.appendChild(s)})}var d;Error,function(e){e[e.NONE=0]="NONE",e[e.SLOW_TWO_G=1]="SLOW_TWO_G",e[e.TWO_G=2]="TWO_G",e[e.THREE_G=3]="THREE_G",e[e.FOUR_G=4]="FOUR_G"}(d||(d={})),new Map([["none",d.NONE],["slow-2g",d.SLOW_TWO_G],["2g",d.TWO_G],["3g",d.THREE_G],["4g",d.FOUR_G]]);class c{static get defaultSettings(){const e=Boolean(!1),t=Boolean(!1),n="undefined"!=typeof window&&[...new URLSearchParams(window.location.search).keys()].some(e=>e.includes("debug"));return{enabled:e||t||n,timeStamp:!0}}static getTimeStampString(){return c.settings.timeStamp?`[${(new Date).toUTCString()}]`:""}static resetSettings(){c.settings=c.defaultSettings}static log(...e){if(!c.settings.enabled)return;const t=c.getTimeStampString();console.log("%cDebugLog:: ","color: blue",t,...e)}static error(...e){if(!c.settings.enabled)return;const t=c.settings.timeStamp?`[${(new Date).toLocaleString()}]`:"";console.error("%cDebugLog:: ","color: red",t,...e)}static warn(...e){if(!c.settings.enabled)return;const t=c.settings.timeStamp?`[${(new Date).toLocaleString()}]`:"";console.warn("%cDebugLog:: ","color: orange",t,...e)}}c.settings=c.defaultSettings;const l=/^\{[a-zA-Z0-9]+:[a-zA-Z0-9]+(?:,[a-zA-Z0-9]+:[a-zA-Z0-9]+)*\}$/,u=new class{constructor(){this.ID_PROVIDER_MAP={criteo:{source:"criteo.com"},ttd:{source:"adserver.org",rti_partner:"TDID"},netid:{source:"netid.de"},liveramp:{source:"liveramp.com"},uid2:{source:"uidapi.com",rti_partner:"UID2"}}}flatUserIds(e,t={includeFallback:!0}){const n=[];if(!e||0===e.length)return n;for(const a of e){if(!a||"string"!=typeof a?.type||!("id"in a&&"string"==typeof a.id&&Boolean(a.id)||"eids"in a&&Array.isArray(a.eids)&&a.eids.length>0))continue;const e=a.type.toLowerCase(),r=this.ID_PROVIDER_MAP[e];if(r&&"id"in a)"string"==typeof a.id&&n.push({id:a.id,...r});else if("extendedids"===a.type.toLowerCase()&&"eids"in a)for(const e of a.eids)e.source&&e.id&&"string"==typeof e.source&&"string"==typeof e.id&&n.push({id:e.id,source:e.source});else t.includeFallback&&n.push(a)}return n}getSourcesByUserIds(e){const t=new Set;return this.flatUserIds(e,{includeFallback:!1}).forEach(e=>{t.add(e.source)}),Array.from(t)}stringifyExternalIdArray(e){return e&&Array.isArray(e)?this.flatUserIds(e,{includeFallback:!1}).map(e=>[e.source,e.id,e.rti_partner].filter(Boolean).join(",")).join("|"):""}parseUrlEids(e){if(!e||"string"!=typeof e)return[];if(!this.isValidURL(e))return[];const t=new URL(e).searchParams.get("eids");return t?t.split("|").reduce((e,t)=>{const[n,a]=t.split(",").map(e=>e.trim());return n&&a&&e.push(n),e},[]):[]}isValidURL(e){try{return new URL(e),!0}catch(e){return!1}}};function g(e){const{url:t,initiatorType:n}=e;return!!t&&(!!location.href.includes("pleaseTrackMeAdTelemetry")||(["acdn.adnxs.com","acdn.adnxs-simple.com","cdn.adnxs.com"].some(e=>t.includes(e))?t.endsWith(".js")&&"script"===n:["adsdk.microsoft.com","adsdkprod.azureedge.net","adsdkpreprod.azureedge.net","adsdk.bing.net"].some(e=>t.includes(e))&&t.includes("/ast/")))}function p(...e){return e.filter(Boolean).join(".")}function m(e){return JSON.stringify(e,(e,t)=>t instanceof Error?{name:t.name,message:t.message,stack:t.stack}:t)}const f=()=>{try{return window.top?.location.href}catch(e){return window.location.ancestorOrigins?.length>0?window.location.ancestorOrigins[window.location.ancestorOrigins.length-1]:window.location.href}};function h(e){return e.includes("ast/ast.js")||e.includes("ast/versions/")&&e.endsWith("/ast.js")}const y=new class{constructor(){this.sessionData={},this.placementData={},this.sampleRate=1,this.skipLogging=!1,this.inited=!1,this.populateSessionData()}populateSessionData(){const e=function(){const e=window?.devicePixelRatio||1,t=window?.screen.width,n=window?.screen.height;return{devicePixelRatio:e,width:t,height:n}}(),t=function(){const e=navigator?.connection||navigator?.mozConnection||navigator?.webkitConnection||null;return e?.effectiveType??"none"}();this.sessionData={sessionUuid:i(),ua:window.navigator.userAgent,url:s(f()),sdkType:"ast",sdkVersion:"1.10.56",screenWidth:Math.floor(e.width??0),screenHeight:Math.floor(e.height??0),dpr:e.devicePixelRatio,networkType:t,lang:navigator.language}}setSampleRate(e){this.sampleRate=f()?.includes("allowAdTelemetry=1")?1:e,this.skipLogging=this.skipLoggingBySampleRate()}skipLoggingBySampleRate(){return Math.random()>this.sampleRate}addSessionData(e){this.sessionData={...this.sessionData,...e}}addPlacementData(e,t){this.placementData[e]||(this.placementData[e]={}),this.placementData[e]={...this.placementData[e],...t}}getSessionData(){return this.sessionData}getPlacementData(e){return e?this.placementData[e]??{}:{}}};let b={endpoint:"https://bat.bing.net/adsdk/logs"};class v{skipLogging(e){if(e?.forceLogging)return!1;if(y.getSessionData().url?.includes("//localhost"))return!0;if(y.skipLogging){if(e?.sampling){const t=Math.max(0,Math.min(1,e.sampling));return Math.random()>t}return!0}return!1}isServiceAlreadyInited(e){{const t=Symbol.for(`isServiceAlreadyInited:ast:${e}`),n=!!window[t];return n||(window[t]=!0),n}}runOnlyIfLoggingEnabled(e){this.skipLogging()||e()}log(e,t,n){const a={...y.getSessionData(),...y.getPlacementData(t),...e,timestamp:(new Date).getTime()};if(!y.inited)throw Error(`Telemetry is not inited, call initTelemetry first. Event with type=${a.type} is ignored.`);this.skipLogging(n)||fetch(b.endpoint,{method:"POST",body:m(a),headers:{"Content-Type":"application/json"},credentials:"omit"})?.catch(e=>{})}}const w=new class extends v{trackEvent(e,t){this.log("string"==typeof e?{type:e}:e,t)}trackCustomEvent({type:e,...t},n,a){this.log({type:p("custom",e),data:t},n,a)}};var I;!function(e){e[e.Critical=1]="Critical",e[e.HighImpact=2]="HighImpact",e[e.Alert=3]="Alert"}(I||(I={}));const k=new class extends v{logError(e,t,n,a){const r=n;this.log({severity:e,type:p("error",t),message:n?.message,data:n?{filename:r?.filename,lineno:r?.lineno,colno:r?.colno,stack:r?.stack||n?.error?.stack,type:n?.type,debugData:n?.debugData}:void 0},a)}trackCriticalError(e,t,n){this.logError(I.Critical,e,t,n)}trackHighImpactError(e,t,n){this.logError(I.HighImpact,e,t,n)}trackAlertError(e,t,n){this.logError(I.Alert,e,t,n)}},E="impression",T="adClick",S=e=>p("mediation",e);var _,C;S("optIn"),S("optOut"),S("adServerRequest"),S("adServerRequestFill"),S("adServerRequestNoFill"),S("impression"),S("mrcView"),S("adClick"),S("timeout"),function(e){e.resource="resource",e.paint="paint",e.measure="measure"}(_||(_={})),function(e){e.firstContentfulPaint="first-contentful-paint",e.firstPaint="first-paint"}(C||(C={}));const A=new class extends v{constructor(){super(...arguments),this.resourcesToTrackFilters={sdksFiles:{filterFn:(e,t)=>g({url:e,initiatorType:t}),options:{serverTimings:!1}}},this.defaultOptions={logPaint:!1,logResources:!0,paintEventsToLog:[C.firstContentfulPaint]},this.options=this.defaultOptions,this.logPerformanceEntry=e=>{const{duration:t,name:n,startTime:a,entryType:r}=e;if(n.includes(b.endpoint))return;const i=(e,n={})=>{this.log({type:e,data:{startTime:Math.ceil(a),duration:Math.ceil(t),perfNow:performance.now(),...n}})};switch(!0){case this.options.logPaint&&r===_.paint:this.options.paintEventsToLog.includes(n)&&i(p("perf",_.paint,n));break;case this.options.logResources&&r===_.resource:for(const[t,{filterFn:a,options:r}]of Object.entries(this.resourcesToTrackFilters)){const s=e;if(a(n,s.initiatorType)){const e=r?.serverTimings?this.extractServerTimings(s):null,a={name:n,...e?{ttfb:e.ttfb,dnsLookup:e.dnsLookup,contentDownloadTime:e.contentDownloadTime,tcpHandshake:e.tcpHandshake,tlsTime:e.tlsTime,redirectTime:e.redirectTime,queueTime:e.queueTime,...e.serverTimings}:{}};if("sdksFiles"===t){const e=h(n);i(p("perf",_.resource,t),{...a,isMainSDKFile:e,...e?{websiteLoadStartTime:performance.timeOrigin}:{}})}else i(p("perf",_.resource,t),a);break}}}}}disconnectPerfObserver(){this.observer&&this.observer.disconnect()}createStartMark(e){performance.mark(`${e}_start`)}trackMark(e,t,n){performance.mark(`${e}_end`),this.logMarks({measureName:e,startMarkName:`${e}_start`,endMarkName:`${e}_end`},t,n)}logMarks({measureName:e,startMarkName:t,endMarkName:n},a,r){const i=performance.measure(e,t,n);if(!i)return;const{duration:s}=i;this.log({type:p("perf",_.measure,e),data:{...a,duration:Math.ceil(s)}},r)}init(e){this.initOptions(e),this.connectPerfObserver(),this.options.logResources&&this.sendResourcesTiming(),this.options.logPaint&&this.sendPaintTiming()}initOptions(e){this.options={...this.defaultOptions,...e}}sendTimingPerfType(e){performance.getEntriesByType&&window.performance.getEntriesByType(e).forEach(this.logPerformanceEntry)}sendResourcesTiming(){this.sendTimingPerfType(_.resource)}sendPaintTiming(){this.sendTimingPerfType(_.paint)}connectPerfObserver(){if(window.PerformanceObserver&&!this.isServiceAlreadyInited("performance")){this.observer=new PerformanceObserver(e=>{e.getEntries().forEach(e=>this.logPerformanceEntry(e))});const e=[];this.options.logPaint&&e.push(_.paint),this.options.logResources&&e.push(_.resource),e.forEach(e=>{this.observer?.observe({type:e,buffered:!0})})}}addResourceToTrack(e,t,n){this.resourcesToTrackFilters[e]={filterFn:t,options:n}}extractServerTimings(e){const t=e.redirectEnd>0?e.redirectEnd-e.redirectStart:0,n=e.responseStart>0&&e.requestStart>0?e.responseStart-e.requestStart:0,a=e.domainLookupEnd>0?e.domainLookupEnd-e.domainLookupStart:0,r=e.responseEnd>0&&e.responseStart>0?e.responseEnd-e.responseStart:0,i=e.connectEnd>0?e.connectEnd-e.connectStart:0,s=e.secureConnectionStart>0?e.connectEnd-e.secureConnectionStart:0,o=e.domainLookupStart>0&&e.fetchStart>0?Math.max(0,e.domainLookupStart-e.fetchStart-t):0,d={},c=e.serverTiming;return c&&c.length>0&&c.forEach(e=>{d[`serverTiming_${e.name}`]=Math.ceil(e.duration||0)}),{ttfb:Math.ceil(n),dnsLookup:Math.ceil(a),contentDownloadTime:Math.ceil(r),tcpHandshake:Math.ceil(i),tlsTime:Math.ceil(s),redirectTime:Math.ceil(t),queueTime:Math.ceil(o),serverTimings:d}}};function D(e){return e}function x(e){return null!=e&&"function"!=typeof e&&function(e){return Number.isSafeInteger(e)&&e>=0}(e.length)}function M(e,t=D){if(!e)return e;const n=x(e)||Array.isArray(e)?function(e,t,n=1){if(null==t&&(t=e,e=0),!Number.isInteger(n)||0===n)throw new Error("The step value must be a non-zero integer.");const a=Math.max(Math.ceil((t-e)/n),0),r=new Array(a);for(let t=0;t<a;t++)r[t]=e+t*n;return r}(0,e.length):Object.keys(e);for(let a=0;a<n.length;a++){const r=n[a];if(!1===t(e[r],r,e))break}return e}function $(e){return Object.values(e)}function q(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function R(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function O(e){if(null==e)return!0;if(x(e))return!!("function"==typeof e.splice||"string"==typeof e||"undefined"!=typeof Buffer&&Buffer.isBuffer(e)||(t=e,R(t))||function(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===q(e)}(e))&&0===e.length;var t;if("object"==typeof e){if(e instanceof Map||e instanceof Set)return 0===e.size;const t=Object.keys(e);return function(e){const t=e?.constructor;return e===("function"==typeof t?t.prototype:Object.prototype)}(e)?0===t.filter(e=>"constructor"!==e).length:0===t.length}return!0}function P(e){return"number"==typeof e||e instanceof Number}function L(e){return"function"==typeof e}function F(e){return"string"==typeof e}const N=JSON.parse('{"H3":{"p":"utif_","C":"div_utif_"},"$9":{"Z":"WARN"},"Oi":{"M":"ast_debug","d2":"ast_dongle","c8":"ast_debug_member","AI":"ast_debug_bidder","Ux":"ast_test","Me":"ast_toolkit","eC":{"BASE":"ast_override_","DIV":"div","INDEX":"index","TAG_ID":"tag_id","INV_CODE":"inv_code","PUBLISHER_ID":"publisher_id"}},"ZJ":{"ZH":"undefined","qv":"object","uk":"number"},"Ss":{"IE":"msie","E":"opera"},"Sz":{"S":"loaded"},"sR":{"Yh":"/ut/v3","hK":"ib.adnxs.com","sp":"ib.adnxs-simple.com","VW":"/ut/v3/prebid","HM":"msft-ssp.adnxs.com"},"Me":{"Ve":"ad_type","D4":"banner","KB":"content"},"Ap":{"s6":"native"},"AD":{"Wy":"creative_id","Wo":"notify_url","JN":"no_ad_url","w$":"impression_urls","Q9":"trackers"},"AI":{"FF":"rtb","wm":"csm","A_":"ssm"},"Ve":{"D4":"banner","s6":"native","G_":"video"},"i$":{"Ji":"https://adsdkprod.azureedge.net/assets/video-mediation/v2.2.2/AstMediationManager.js","hn":"https://adsdkprod.azureedge.net/assets/mediation/v2.16.0/mediation.js","xF":"https://adsdkprod.azureedge.net/assets/sf/v1.0.0-1/safeframe-v2.html","I2":"https://adsdkprod.azureedge.net/assets/sf/v1.0.0-4/safeframe-v2.html","no":"https://acdn.adnxs.com/dmp/async_usersync.html","up":"https://adsdkprod.azureedge.net","_F":"https://adsdkprod.azureedge.net/assets/scripts/om/omid-verification-client-v1.js"},"qY":{"REQUEST":"adRequested","AVAILABLE":"adAvailable","LOADED":"adLoaded","LOADED_MEDIATED":"adLoadedMediated","LOADED_MEDIATED_VIDEO":"adLoadedMediatedVideo","AD_SLOT_RENDER_START":"adSlotRenderStart","NO_BID_MEDIATED":"adNoBidMediated","REQUEST_FAIL":"adRequestFailure","NO_BID":"adNoBid","DEFAULT":"adDefault","ERROR":"adError","COLLAPSE":"adCollapse","BAD_REQUEST":"adBadRequest","MRC_VIEW":"mrcView"},"eZ":{"FIRST_CONTENTFUL_PAINT":"first-contentful-paint","IFRAME_RENDER_START":"iframe-render-start"},"ZE":{"An":"String","pF":"Number","HX":"Boolean"},"l2":{"D":3000,"X":{"gH":"expanded","g":"collapsed","AR":"focus-change","VD":"geom-update","dl":"cmp"}},"uK":{"CREATIVE":"creative"},"nP":{"G":{"W":"adresponse","D":"impression"}},"Gy":{"L":{"lS":"kvParseError","QB":"tpScriptError","R5":"adResponseError","Ny":"endpointError","SI":"omidLoadError","NV":"loggingError","im":"perfObserverError","PL":"paintEventError"}}}'),j=N.ZE.pF;let U=!1;const B=N.Oi.M,W=N.ZJ.ZH,z=N.AI.FF,V=N.AI.wm,G=N.AI.A_,H=N.uK;let J=null;try{J="object"==typeof console.info&&null!==console.info?console.info:console.info.bind(window.console)}catch(e){}const Z=function(e,t,n,a){e.addEventListener?e.addEventListener(t,n,a):e.attachEvent&&e.attachEvent(`on${t}`,n)},X=function(e,t,n,a){e.removeEventListener?e.removeEventListener(t,n,a):e.detachEvent&&e.detachEvent(`on${t}`,n)},Y=function(){return window.console&&window.console.log},K=function(){const e=new Date;return`[${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}:${e.getMilliseconds()}] `},Q=function(e,...t){if(oe()&&Y()){const n=K(),a=be()?"SAFEFRAME MESSAGE: ":"MESSAGE: ";console.log(n+a+e,...t)}},ee=function(e,...t){if(oe()&&Y()){const n=K(),a=be()?"SAFEFRAME WARN: ":"WARN: ";console.warn?console.warn(n+a+e,...t):console.log(n+a+e,...t)}},te=function(e,t,...n){if(oe()&&Y()){const a=t||"GENERAL_ERROR",r=K(),i=be()?"SAFEFRAME ":"";console.error?console.error(`${r+i+a}: ${e}`,...n):console.log(`${r+i+a}: ${e}`,...n)}},ne=function(e){oe()&&Y()&&console.timeStamp&&console.timeStamp(e)},ae=function(e,t){if(oe()&&Y()){const n=K();if(J){t&&0!==t.length||(t="");const a=be()?"SAFEFRAME INFO: ":"INFO: ";J(n+a+e+(""===t?"":" : params : "),t)}}},re=function(e,t,n){{const a=e.document,r=a.createElement("script");r.type="text/javascript",r.async=!0,n&&"function"==typeof n&&(r.readyState?r.onreadystatechange=function(){"loaded"!==r.readyState&&"complete"!==r.readyState||(r.onreadystatechange=null,n())}:r.onload=function(){n()}),r.src=t;let i=a.getElementsByTagName("head");return i=i.length?i:a.getElementsByTagName("body"),i.length&&(i=i[0],i.insertBefore(r,i.firstChild)),r}},ie=function(){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})},se=function(e,t,n){let a;if(n=`anx_${n}${(new Date).getTime()}`,e&&t){a=new Image,a.id=n,a.src=t,a.height=0,a.width=0,a.style.display="none";try{e.insertBefore(a,e.firstChild);const t=setTimeout(()=>{if(a.parentNode)try{a.parentNode.removeChild(a)}catch(e){}clearTimeout(t)},5e3)}catch(e){te(`Error logging impression for tag: ${n} :${e.message}`)}return a}},oe=function(){return!(!be()&&(he().apntag=he().apntag||{},apntag&&!1===apntag.debug&&!1===U&&(apntag.debug="TRUE"===le(B).toUpperCase(),U=!0),!apntag||!apntag.debug))},de=function(e){const t=apntag.requests.tags[e],n=t&&t.initCollapsed,a=n&&n.expandBy&&$(H).indexOf(n.expandBy)>=0;return n&&a},ce=function(){try{return window.top.location.search}catch(e){try{return window.location.search}catch(e){return""}}},le=function(e,t){const n=new RegExp(`[\\?&]${e}=([^&#]*)`).exec(t||ce());return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},ue=function(e,t){return e.hasOwnProperty?e.hasOwnProperty(t):typeof e[t]!==W&&e.constructor.prototype[t]!==e[t]},ge=function(e){let t=[];return Array.isArray(e)?t=e:F(e)&&t.push(e),t},pe=function(e,t){if(O(e))return[];if(L(e.map))return e.map(t);const n=[];return M(e,(a,r)=>{n.push(t(a,r,e))}),n},me=function(e,t,n){return null==t?n:F(t)?t:P(t)?t.toString():void ee(`Unsuported type for param: ${e} required type: String`)},fe=function(e,t,n,a){return null==t?a:Object.prototype.toString.call(t)===`[object ${n}]`?t:(ee(`Unsuported type for param: ${e} required type: ${n}`),n===j&&(t=Number(t)),isNaN(t)?a:t)},he=function(){return window},ye=function(e){if(e&&e.length>0){if(e[0][z])return e[0][z];if(e[0][V])return e[0][V];if(e[0][G])return e[0][G]}};function be(){return!(typeof $sf===W||!$sf.ext||!$sf.ext.debug)}const ve=function(e){return N.H3.C+e?.targetId},we=function(){return N.i$.up},Ie=function(e,t){let n;if(L(e))return function(){return e&&(n=e.apply(t||this,arguments),e=null),n}},ke=function(e,t){const n={};return["debug","displayed","initialHeight","initialWidth","invCode","member","showTagCalled","sizes","targetId","utCalled","utDivId","utiframeId","uuid","keywords"].forEach(t=>{n[t]=e[t]}),t&&(n.on=t.on,n.off=t.off,n.modifyTag=t.modifyTag,n.setKeywords=t.setKeywords),n},Ee=function(e){apntag.requests.tags=apntag.requests.tags||{};let t=!0;return typeof apntag.requests.tags[e]===W&&(t=!1),t},Te=function(){apntag.requests.hasLeft=!1,M(apntag.requests.tags,(e,t)=>{e.displayed||e.prebid||e.isMediated||(ee(`${t} is not displayed.`,N.$9.Z),apntag.requests.hasLeft=!0)}),apntag.requests.hasLeft||Q("all Tags are displayed.")},Se=function(){let e=0;return function(){return e++,e}}(),_e=function(e){const t=[];let n={};if(Array.isArray(e)&&2===e.length&&!Array.isArray(e[0]))n.width=parseInt(e[0],10),n.height=parseInt(e[1],10),t.push(n);else if("object"==typeof e&&null!==e)for(let a=0;a<e.length;a++){const r=e[a];n={},n.width=parseInt(r[0],10),n.height=parseInt(r[1],10),t.push(n)}return t};function Ce(e){let t=["auto","auto"];if(e){const n=function(e){let t,n;if(Array.isArray(e)&&e.length>0)if(Array.isArray(e[0])&&e[0].length>0){const a=e[0];2===a.length&&"number"==typeof a[0]&&"number"==typeof a[1]&&(n=a[0],t=a[1])}else 2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&(n=e[0],t=e[1]);return[n,t]}(e);0!==n[0]&&1!==n[0]&&0!==n[1]&&1!==n[1]&&2!==n[1]&&(t=n)}return t}const Ae=(e,t)=>{const n=t||document.getElementById(e);let a={},r={};if(n){a={width:n.offsetWidth,height:n.offsetHeight};const e=n.getBoundingClientRect();r={left:e.left+window.scrollX,top:e.top+window.scrollY}}return{size:a,position:r}},De=function(e){return!(e&&apntag.requests.tags[e]&&!apntag.requests.tags[e].startRemove)},xe=(e,t,n,a,r)=>{let i;return i=e||(n?n.message:"Unable to identify error AST encountered, please try to check browser console for any errors on the page."),{code:a,errMessage:i,exception:n,targetId:t,tagData:r}};function Me(e,t){const n=apntag.requests.tags[e],{pageType:a,langMarket:r}=$e(),i={targetId:e,targetElement:n.wcElement||document.getElementById(e),flights:n.flights||[],invCode:n.invCode||"",pageType:a,langMarket:r,...t};return n&&n.perfTimings?Object.assign(i,n.perfTimings):i.status="No specific timings recorded yet.",i}function $e(){const e=apntag?.requests?.keywords,t=function(e,t){let n={};return e&&Object.keys(e).length&&Object.entries(e).filter(([e])=>t.includes(e)).forEach(([e,t])=>{Array.isArray(t)&&t.length>0?n[e]=t.join(","):"string"!=typeof t&&"number"!=typeof t||(n[e]=t)}),n}(e,["lang","market","page_type"]);return{pageType:t.page_type||"",langMarket:t.lang&&t.market?`${t.lang}-${t.market}`:""}}const qe=Array.prototype.slice,Re=pe(N.qY,e=>e),Oe=function(){const e={},t={on:function(t,n,a){if(function(e){return Re.includes(e)}(t)){const r={};r[n]=a,e[t]=e[t]||[],e[t].push(r)}else te(`Wrong event name : ${t} Valid event names :${Re}`)},emit:function(t){!function(t,n){const a=n[0],r=qe.call(n,1);Q(`Emitting event for: ${t} for ad tag: ${a}`),M(e[t],e=>{let t="";if(t=ue(e,"*")?e["*"]:e[a],null!=t&&"function"==typeof t)try{t.apply(null,r)}catch(e){te(`events._dispatch: Error executing event handler function: ${e.message}`)}})}(t,qe.call(arguments,1))},off:function(t,n,a){O(e[t])||M(e[t],e=>{"*"===n&&null!==e[Object.keys(e)[0]]&&void 0!==e[Object.keys(e)[0]]?void 0!==a&&Object.values(e)!==a||(e[Object.keys(e)[0]]=null):null!==e[n]&&void 0!==e[n]&&(void 0!==a&&e[n]!==a||(e[n]=null))})},get:function(){return e}};return t}(),Pe=[];let Le=!1;const Fe=N.i$.Ji,Ne=N.i$.hn,je=N.Me.Ve,Ue=N.Ve.D4,Be=N.Ve.G_,We=N.qY.LOADED_MEDIATED,ze=function(e,t,n,a){e===Be&&(null!==t&&Pe.push(t),Le&&window.APNVideo_AstMediationManager?M(Pe,e=>{if(!e.called)try{window.APNVideo_AstMediationManager.selectAd(e.uuid,e,n,a),e.called=!0}catch(e){te("Error invoking video mediation","mediationmanager.js",null,e)}}):(A.addResourceToTrack("AstMediationManager",e=>e.includes(Fe)),re(window,Fe,()=>{ze(Be,null,n,a)}),Le=!0))},Ve=function(e){return e.isMediated||e.isRtbVideoFallback?e.adResponse.ad:e.adResponse.ads[0]},Ge=function(e){const t=e.content_source,n=e.ad_type;if(t)return e[t][n]},He=new class{constructor(){this.config=null,this.activeFlights={},this.activeFlightsForTelemetry={}}init(e){const t=window.location.href,n=new URLSearchParams(new URL(t).search).get("ad-sdk-flights");n?"none"===n?(this.activeFlightsForTelemetry={},this.activeFlights={}):(this.setActiveFlightsFromQueryString(n),this.activeFlightsForTelemetry={}):(this.config=e,this.generateActiveFlights(),this.activeFlightsForTelemetry={...this.activeFlights})}generateActiveFlights(){if(!this.config)throw new Error("Config not initialized");for(const[e,t]of Object.entries(this.config.distributionGroups)){let n=0;for(const e of Object.values(t))n+=e.traffic;if(n>100)throw new Error(`Combined traffic for distribution group "${e}" exceeds 100`);const a=Math.floor(100*Math.random())+1;let r=0,i=null,s={traffic:0,samples:[]};for(const[e,n]of Object.entries(t))if(r+=n.traffic,a<=r){i=e,s=n;break}if(s.samples.length>0&&i){const e=Math.floor(Math.random()*s.samples.length),t=s.samples[e];this.activeFlights[i]=t}}}setActiveFlightsFromQueryString(e){const t=e.split(",");for(const e of t){const[t,n]=e.split(":");this.activeFlights[t]={name:n}}}getActiveFlightsForTelemetry(){return Object.entries(this.activeFlightsForTelemetry).map(([e,t])=>({name:e,sampleName:t.name}))}getActiveFlightsByName(e){return this.activeFlights[e]||null}reset(){this.config=null,this.activeFlights={}}};He.init({distributionGroups:{safeFrame:{safeFrame_flight:{traffic:20,samples:[{name:"sfControl"},{name:"sfTreatment"}]}}}});const Je=He.getActiveFlightsForTelemetry();y.addSessionData({flights:Je});const Ze=He.getActiveFlightsByName("safeFrame_flight")?.name,Xe=N.AI.FF,Ye=N.Me.D4,Ke=N.Me.KB,Qe=(window.document.location.protocol,{}),et={},tt=function(e){const t=e.strategy,n=e.data,a=e.domElement,r=he().document.createElement("iframe");return r.width=0,r.height=0,r.border="0",r.hspace="0",r.vspace="0",r.marginWidth="0",r.marginHeight="0",r.style.border="0",r.style.display="none",r.scrolling="no",r.frameBorder="0","WithContent"===t&&function(e,t,n){nt(e,n),e.contentWindow.document.open(),e.contentWindow.document.write(t),e.contentWindow.document.close()}(r,n,a),"WithAttributes"===t&&function(e,t,n){e.src=t.src,e.id=t.id,e.name=t.name,t.allow&&(e.allow=t.allow),t.sandbox&&(e.sandbox=t.sandbox),nt(e,n)}(r,n,a),"WithContentAndAttributes"===t&&function(e,t,n){{const a=t.content,r=t.attributes;nt(e,n),a&&(e.contentWindow.document.open(),e.contentWindow.document.write(a),e.contentWindow.document.close());for(const t in r)r.hasOwnProperty(t)&&e.setAttribute(t,r[t])}}(r,n,a),r};function nt(e,t){const n=he();if(t){const a=t instanceof Element?t:n.document.getElementById(t);a&&a.appendChild(e)}else{const t=n.document.getElementsByTagName("body");t.length&&t[0].appendChild(e)}}function at(e){const t=e.targetId;let n="";return e.isMediated?(n=e.ad.mediatedContent,Q(`Invoking mediation for displaying banner ad: ${t}`)):e.adResponse&&1===e.adResponse.ads.length&&(n=ye(e.adResponse.ads)[Ye][Ke]),function(e,t,n){const a=function(e,t){return t?"":`window.onerror = function(e) {\n        if(window.parent && window.parent.apntag) {\n          window.parent.apntag.recordErrorEvent(e,"${e}");\n          return true;\n        }\n      };`}(e,n),r=apntag.requests.tags[e],i={targetId:e,batchId:r?.batchId,adomain:r?.adResponse?.ads[0]?.adomain||"",buyerMemberId:r?.adResponse?.ads[0]?.buyer_member_id,msxCreativeId:r?.adResponse?.ads[0]?.msft?.msx_creative_id||"",crids:r?.adResponse?.ads[0]?.msft?.crids||"",auctionId:r?.adResponse?.auction_id||"",bidderId:r?.adResponse?.ads[0]?.bidder_id||""},s=function(e,t,n,a,r,i,s,o){return`(${function(e,t,n,a,r,i,s,o){let d=!1;try{new PerformanceObserver(function(c){const l=!(!window.$sf||!window.$sf.ext);c.getEntries().forEach(c=>{if("first-contentful-paint"===c.name&&!d){d=!0;const u={targetId:e,eventName:"first-contentful-paint",duration:c.duration,startTime:c.startTime,loadTime:c.loadTime,safeframe:l,adomain:n,buyerMemberId:a,msxCreativeId:r,crids:i,auctionId:s,bidderId:o,batchId:t};window.top&&(l?window.top.postMessage(u,"*"):window.top.postMessage(u))}})}).observe({entryTypes:["paint"]})}catch(t){window.top&&window.top.postMessage({targetId:e,eventName:"perfObserverError",error:t.message},"*")}}.toString()})("${e}", ${t}, "${n}", ${a}, "${r}", "${i}", "${s}", "${o}");`}(i.targetId,i.batchId,i.adomain,i.buyerMemberId,i.msxCreativeId,i.crids,i.auctionId,i.bidderId);return`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head>\n    <script>inDapIF=true;\n    apntag_targetId = "${e}";\n    ${a}\n    ${s}\n    <\/script>\n    </head>\n    <body>\n    <script>\n    document.body.id = "${e}";\n    <\/script>\n    ${t}\n    </body></html>`}(t,n,e.alwaysUseXDomainIframe||e.enableSafeFrame)}const rt=(e,t)=>e.some(e=>e.brand.toLowerCase()===t),it=window.navigator?.userAgentData??void 0,st=window.navigator?.userAgent??"",ot=()=>{if(it&&"platform"in it){const e=it.platform.toLowerCase();return/iphone/i.test(e)}return/iphone/i.test(st.toLowerCase())},dt=function(){let e,t={};return{getInstance:function(){return e||(e={add:function(e,n){t[e]=n},getIframe:function(e){return ue(t,e)?t[e]:null},getIframes:function(){return t},resetInstance:function(){t={}},removeIframe:function(e){return ue(t,e)?(delete t[e],t):null}}),e}}}();function ct(e){return null!==e&&("object"==typeof e||"function"==typeof e)}const lt=function(){{let e={},t=[],n="";return{invokeNotify:r,loadRenderer:o,setRendererStatus:d,registerRenderer:c,clearState:a};function a(){e={},t=[]}function r(n,a,r){t.push(g(n,a,r)),M(e,e=>{e.addNotifyMessage(g(n,a,r)),e.status!==pt&&u(e)})}function i(e){return L(e)?{renderAd:e,notify:function(){}}:ct(e)&&L(e.renderAd)?{renderAd:e.renderAd,notify:e.notify}:void 0}function s(e,t,n){De(t.targetId)?ee(`Ad slot for this ad's renderer is not available.  It may have been removed by a removeTag call.  Bid: ${t}`):L(e)?e.call(apntag,t,n):ct(e)&&(L(e.renderFn)?e.renderFn.call(apntag,t,n):te("Error invoking rendererObj.renderAd(). renderAd must be a function"))}function o(t,n){!0===apntag.requests.loadOutstreamUpgradeUrl&&n.renderer_url?.includes("ANOutstreamVideo.js")&&(n.renderer_url="https://acdn.adnxs-simple.com/ast/test/video/ANOutstreamVideo_test.js");let a=n.renderer_id;if(t.enableSafeFrame&&(!window.$sf||!window.$sf.ext))return a=f(t,n),void(e[a]=m(n.renderer_url,a,t));const r=e[a];if(r){const n=e[a];r.status===mt?(b(t),s(n,t,l),t.displayed=!0):r.addTag(t)}else re(window,n.renderer_url),e[a]=m(n.renderer_url,a,t)}function d(t,n){const a=e[t];a&&(a.status=n,u(a))}function c(t,a,r){if(n=r,a=i(a),t&&e[t]&&ct(a)){const n=e[t];n.renderFn=a.renderAd,n.notifyFn=a.notify,n.status=mt,window.currentTag&&window.currentTag.enableSafeFrame&&y(window.currentTag,t,mt),u(n),M(n.getTags(),e=>{e.displayed||(b(e),s(n.renderFn,e,(e,t)=>{l(e,t,n)}),e.displayed=!0)})}else te("ast.js",null,"registerRenderer must be called with (id, cbFn)")}function l(e,t,n){n&&n.isSafeFrame?w(e,t,n):apntag.emitEvent(e,t)}function u(e){L(e.notifyFn)&&M(e.getNotifyMessages(),t=>{t.sent||(t.sent=!0,e.notifyFn(t.messageType,t.messagePayload,t.targetId))})}function g(e,t,n){return{messageType:e,messagePayload:t,targetId:n,sent:!1}}function p(e,t,n){const a=[],r=[];this.getTags=function(){return a},this.addTag=function(e){a.push(e)},this.addNotifyMessage=function(e){r.push(e)},this.getNotifyMessages=function(){return r},this.url=e,this.id=t,this.status=pt,this.renderFn=function(){},this.notifyFn=h,this.isSafeFrame=n.enableSafeFrame||!1,this.safeFrameSizes=n.sizes,this.addTag(n)}function m(e,t,n){const a=new p(e,t,n);return v(a),a}function f(e,t){return`${t.renderer_id}_${e.targetId}`}function h(e,t,n){n=n||this.getTags()[0].targetId,ta(e,t,n)}function y(e,t,a){const r={name:"updateRenderStatus",targetId:e.targetId,rId:t,status:a};ft(window.parent,r,n)}function b(e){if(e&&e.isMediated)return;const t=Ve(e);se(window.document.body,t[ut],t[gt])}function v(e){M(t,t=>{e.addNotifyMessage(t)})}function w(e,t,a){const r={name:"emitEvent",cmd:[e,t]};if(ft(window.parent,r,n),apntag.mockSfListner&&apntag.mockSfListner.handler){apntag.mockSfListner.handler(apntag.mockSfListner.adObj);const t={name:"resizeAd",targetId:e,cmd:Ce(a.safeFrameSizes)};ft(window.parent,t,n)}}}}(),ut=N.AD.Wo,gt=N.AD.Wy,pt="loading",mt="loaded",ft=function(e,t,n){"string"!=typeof t&&(t=JSON.stringify(t)),e?e.postMessage(t,n):Q("Safeframe not yet rendered")};var ht=window.document,yt="compatMode",bt="documentElement",vt="nodeType",wt="hidden",It="auto",kt="contains",Et="scroll",Tt="clip",St=window.Number,_t=St&&St.MAX_VALUE,Ct=-1*_t,At="compareDocumentPosition",Dt="number",xt="toLowerCase",Mt="toFixed",$t="elementFromPoint",qt="length",Rt="overflow",Ot="document",Pt="onscroll",Lt=window.String,Ft=window.Math,Nt=Math.max,jt=Math.min,Ut=Math.round,Bt=window,Wt=window.navigator,zt=Wt.userAgent||"",Vt=!(!window.ActiveXObject&&"ActiveXObject"in window)&&Bt&&"ActiveXObject"in Bt,Gt=null,Ht=!0,Jt=!1,Zt=function(){var e,t={};t.ie=t.opera=t.gecko=t.webkit=t.safari=t.chrome=t.air=t.ipod=t.ipad=t.iphone=t.android=t.webos=t.silk=t.nodejs=t.phantomjs=0,t.mobile=t.ios=t.caja=Wt&&Wt.cajaVersion;var n=zt;return n&&(kn(/KHTML/,n)&&(t.webkit=1),kn(/IEMobile|XBLWP7/,n)&&(t.mobile="windows"),kn(/Fennec/,n)&&(t.mobile="gecko"),(e=In(n,/AppleWebKit\/([^\s]*)/,1))&&(t.webkit=wn(e),t.safari=t.webkit,kn(/PhantomJS/,n)&&(e=In(n,/PhantomJS\/([^\s]*)/,1))&&(t.phantomjs=wn(e)),kn(/ Mobile\//,n)||kn(/iPad|iPod|iPhone/,n)?(t.mobile="Apple",e=(e=In(n,/OS ([^\s]*)/,1))&&wn(e.replace("_",".")),t.ios=e,t.ipad=t.ipod=t.iphone=0,(e=In(n,/iPad|iPod|iPhone/,0))&&(t[e[xt]()]=t.ios)):((e=In(n,/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/,0))&&(t.mobile=e),kn(/webOS/,n)&&(t.mobile="WebOS",(e=In(n,/webOS\/([^\s]*);/,1))&&(t.webos=wn(e))),kn(/ Android/,n)&&(t.mobile="Android",(e=In(n,/Android ([^\s]*);/,1))&&(t.android=wn(e))),kn(/Silk/,n)&&(e=In(n,/Silk\/([^\s]*)\)/,1))&&(t.silk=wn(e))),(e=n.match(/(Chrome|CrMo)\/([^\s]*)/))&&e[1]&&e[2]?(t.chrome=wn(e[2]),t.safari=0,"CrMo"===e[1]&&(t.mobile="chrome")):(e=In(n,/AdobeAIR\/([^\s]*)/))&&(t.air=e[0])),t.webkit||((e=In(n,/Opera[\s\/]([^\s]*)/,1))?(t.opera=wn(e),(e=In(n,/Opera Mini[^;]*/,0))&&(t.mobile=e)):(e=In(n,/MSIE\s([^;]*)/,1))?t.ie=wn(e):(e=In(n,/Gecko\/([^\s]*)/))&&(t.gecko=1,(e=In(n,/rv:([^\s\)]*)/,1))&&(t.gecko=wn(e))))),t}(),Xt=Zt.ie||0,Yt=Zt.webkit||0,Kt=Zt.gecko||0,Qt=Zt.opera||0,en=0,tn={},nn=Et+"Width",an=Et+"Height",rn=Et+"Top",sn=Et+"Left",on="offset",dn=on+"Parent",cn=on+"Top",ln=on+"Left",un=on+"Width",gn=on+"Height",pn="clientWidth",mn="clientHeight";function fn(e){var t,n,a,r,i,s,o,d,c,l={t:0,l:0,r:0,b:0,w:0,h:0,z:0},u="getBoundingClientRect",g=0,p=0,m=0,f=0,h=Jt,y=Cn(e)||Bt[Ot],b=y[yt],v=y.documentMode||0;if(hn(e))try{if(i=Tn(e),t=An(e),n=On(e),l.l=e[ln]||0,l.t=e[cn]||0,a=e,r=Gt,h=Kt||Yt>519,e!==t&&u&&e[u])Vt&&(!v||v>0&&v<8||"BackCompat"===b)&&(o=t.clientLeft,d=t.clientTop),c=e[u](),l.t=c.top,l.l=c.left,(o||d)&&(l.l-=o,l.t-=d),(n.y||n.x)&&(!Zt.ios||Zt.ios>=4.2)&&(l.l+=n.x,l.t+=n.y);else{for(;(a=a[dn])&&hn(a)&&r!==a;)o=a[ln],d=a[cn],l.t+=d,l.l+=o,h&&(l=Sn(a,l)),r=a;if("fixed"!=i.position){for(a=e,r=Gt;(a=a.parentNode)&&hn(a)&&r!==a&&a!=t;)g=a[rn],p=a[sn],Kt&&"visible"!=(s=Tn(a))[Rt]&&(l=Sn(a,l,s)),(g||p)&&(l.l-=p,l.t-=g),r=a;l.l+=n.x,l.t+=n.y}else l.l+=n.x,l.t+=n.y}e==t?(f=e[mn],m=e[pn]):(f=e[gn],m=e[un]),l.b=l.t+f,l.r=l.l+m,l.w=Nt(m,0),l.h=Nt(f,0),l.z=i.zIndex}catch(e){l={t:0,l:0,r:0,b:0,w:0,h:0,z:0}}return l}function hn(e){return 1===yn(e)}function yn(e){return xn(e&&e.nodeType,-1)}function bn(e){return(e=vn(e))&&-1==e.search(/\D+/g)||e&&-1!=e.search(/px/gi)?Ht:void 0}function vn(e){var t=typeof e;return"string"==t?e:t!=Dt||e?"object"==t&&e&&e.join?e.join(""):!1===e?"false":!0===e?"true":e?Lt(e):"":"0"}function wn(e){var t=0;return parseFloat(e.replace(/\./g,function(){return 1==t++?"":"."}))}function In(e,t,n){var a=e&&e.match(t);return n==Gt?a:a&&a[n]||Gt}function kn(e,t){return e.test(t)}function En(e){var t,n=Gt,a="parentWindow",r="defaultView";try{e&&((n=e[a]||e[r]||Gt)||(n=(t=Cn(e))&&(t[a]||t[r])||Gt))}catch(e){n=Gt}return n}function Tn(e){var t;if(En(e).getComputedStyle)try{t=En(e).getComputedStyle(e,Gt)}catch(e){t=Gt}else try{t=e.currentStyle}catch(e){t=Gt}return t}function Sn(e,t,n){var a=0,r=0;return(n=n||Tn(e))&&(a=n.borderTopWidth,r=n.borderLeftWidth,a=bn(a)?xn(a,0):0,r=bn(r)?xn(r,0):0,Kt&&/^t(?:able|d|h|r|head|foot)$/i.test($n(e))&&(a=r=0)),(t=t||{t:0,l:0}).t+=a,t.l+=r,t}function _n(e){return e&&(e.parentNode||e.parentElement)}function Cn(e){var t=Gt;try{e&&(t=9==yn(e)?e:e[Ot]||e.ownerDocument||Gt)}catch(e){t=Gt}return t}function An(e){var t=e&&Cn(e)||ht,n=t[yt],a=t[bt];return n&&!Qt&&"CSS1Compat"!=n&&(a=t.body),a}function Dn(e){var t,n,a,r,i=[-1,-1,-1,-1],s=[Tt+"Top",Tt+"Right",Tt+"Bottom",Tt+"Left"],o=0;if(!e)return i;if(Xt)for(;n=s[o];)bn(t=e[n])&&(t=xn(t,-1))>=0&&(i[o]=t),o++;else if((t=e[Tt])&&-1!=t.search(/\d+/g))for(r=(i=(i=(t=t.replace(/\w+\(([^\)]*?)\)/g,"$1")).split(" "))[qt]<=1?i.split(","):i)[qt],o=0;r--;)bn(a=i[o])?i[o]=xn(a,-1):i[o]=-1,o++;return i}function xn(e,t,n,a){if(typeof e!=Dt)try{e=e?parseFloat(e):St.NaN}catch(t){e=St.NaN}return a==Gt&&(a=_t),n==Gt&&(n=Ct),(isNaN(e)||e<n||e>a)&&t!=Gt?t:e}function Mn(e,t){var n=Jt,a=e&&e[vt]||-1,r=t&&t[vt]||-1;if(1==a&&-1!=r)if(e[kt])if(Qt||1==r)n=e[kt](t);else for(;t;){if(e===t){n=Ht;break}t=t.parentNode}else e[At]&&(n=e===t||!!(16&e[At](t)));return n}function $n(e){return e&&1==e[vt]&&e.tagName[xt]()||""}function qn(e,t,n){try{arguments[qt]>2?n===Gt?e.removeAttribute(t):(n=vn(n),"class"==t[xt]()?e.className=n:e.setAttribute(t,n)):n=vn(e.getAttribute(t))}catch(e){n=""}return n}function Rn(e){return vn([e||"","_",(new Date).getTime(),"_",Ft.round(100*Ft.random()),"_",en++])}function On(e){var t,n,a,r,i={x:0,y:0,w:0,h:0},s={scrollLeft:0,scrollTop:0,scrollWidth:0,scrollHeight:0},o=0,d=0;return n=(t=Cn(e)||ht)[bt]||s,r=t.body||s,(a=t.defaultView)&&(o=xn(a.pageXOffset,0),d=xn(a.pageYOffset,0)),i.x=Nt(n.scrollLeft,r.scrollLeft,o),i.y=Nt(n.scrollTop,r.scrollTop,d),i.w=Nt(n.scrollWidth,r.scrollWidth,0),i.h=Nt(n.scrollHeight,r.scrollHeight,0),i}function Pn(e,t,n){var a,r,i,s,o,d,c,l,u,g,p,m,f={},h={};if(function(e,t,n){var a,r,i,s,o,d,c,l,u,g,p,m,f,h,y,b,v,w,I,k,E,T,S,_,C,A,D,x,M,$,q,R,O,P,L,F=e&&_n(e),N=An(e),j=fn(e),U=fn(N),B=On(N),W=function(e){var t=An(e),n=0,a=0;return t&&(n=t.scrollWidth||0,a=t.scrollHeight||0),{t:0,l:0,b:a,r:n,w:n,h:a}}(e),z={t:0,l:0,r:0,b:0,w:0,h:0},V={t:0,l:0,r:0,b:0,xs:0,ys:0,xiv:0,yiv:0,iv:0,w:0,h:0},G=[],H=Jt,J={left:Gt,right:Gt,top:Gt,bottom:Gt};if(t=t&&"object"==typeof t?t:{},F)for(a=U.t,r=U.l,i=U.r,s=U.b;(c=Tn(F))&&("block"!=c.display&&"absolute"!=c.position&&"none"==c.float&&"none"==c.clear||(H=F==N,g=(P=fn(F)).t,p=P.l,m=P.r,f=P.b,k=c[Rt+"X"],E=c[Rt+"Y"],T=c[Rt],S=H?[-1,-1,-1,-1]:Dn(c),L=Jt,H?(h=B.w,v=B.h):(h=F[nn],v=F[an]),y=F[un],w=F[gn],b=F[pn],I=F[mn],!d&&y>b&&(d=y-b),!o&&w>I&&(o=w-I),H?(h>b&&((p=0)>r&&(r=p),(m=(Bt.innerWidth||y)+B.x)<i&&(i=m)),v>I&&((g=0)>a&&(a=g),(f=(Bt.innerHeight||w)+B.y)<s&&(s=f))):(d&&m-p==y&&(m-=d),o&&f-g==w&&(f-=o),k!=wt&&k!=Et&&k!=It&&T!=wt&&T!=Et&&T!=It||(p>r&&(r=p,J.left=F),m<i&&(i=m,J.right=F),(k==Et||T==Et||(k==It||T==It)&&h>b)&&(G.push(F),L=Ht)),S[3]>0&&(x=p+S[3])>r&&(r=x,J.left=F),S[1]>0&&(M=m+S[1])<i&&(i=M,J.right=F),E!=wt&&E!=Et&&E!=It&&T!=wt&&T!=Et&&T!=It||(g>a&&(a=g,J.top=F),f<s&&(s=f,J.bottom=F),L||(E==Et||T==Et||(E==It||T==It)&&v>I)&&(G.push(F),L=Ht)),S[0]>0&&(A=g+S[0])>a&&(a=A,J.top=F),S[2]>0&&(D=P.t+S[2])<s&&(s=D,J.bottom=F))),F!=N)&&(F=_n(F))&&$n(F););(z={t:Nt(a,0),l:Nt(r,0),r:Nt(i,0),b:Nt(s,0)}).w=Nt(z.r-z.l,0),z.h=Nt(z.b-z.t,0),p=j.l,m=j.r,g=j.t,l=m-p,u=(f=j.b)-g,x=z.l,M=z.r,A=z.t,D=z.b,C=(C=(C=jt(f,D)-Nt(g,A))<0?0:C)>u?u:C,_=(_=(_=jt(m,M)-Nt(p,x))<0?0:_)>l?l:_,V.t=A<g?D<=g?0:Nt(g-A,0):0,V.b=D>f?f<=A?0:Nt(D-f,0):0,V.l=x<p?M<=p||D<=g||f<=A?0:Nt(p-x,0):0,V.r=M>m?m<=x||D<=g?0:Nt(M-m,0):0,V.w=Nt(V.r-V.l,0),V.h=Nt(V.b-V.t,0),V.xiv=l>0?xn((_/l)[Mt](2)):0,V.yiv=u>0?xn((C/u)[Mt](2)):0,V.iv=l>0||u>0?xn((_*C/(l*u))[Mt](2)):0,V.civ=0,n&&V.iv>.49&&(O=function(e){var t,n,a,r,i,s,o,d,c,l,u,g,p,m,f,h,y=fn(e),b=Cn(e),v=An(b),w=y.t,I=y.l,k=[],E=0;if(k.on=0,t=y.w,n=y.h,i=a=Ut(t/10),s=r=Ut(n/10),t<=1||n<=1||a<1||r<1)return k;if(f=(h=On()).y,m=h.x,g=I+t,p=w+n,b&&v&&b[$t]){for(;i<t;){for(s=r;s<n;)d=w+s,(o=I+i)<=g&&d<=p&&k.push({x:o,y:d,on:0}),s+=r;i+=a}for(;c=k[E++];)o=Nt(c.x-m,0),o=jt(o,c.x),d=Nt(c.y-f,0),d=jt(d,c.y),0!=o?0!=d?(u=b[$t](o,d))&&u!==v&&u!==e&&!Mn(u,e)&&((l=qn(u,"id"))||qn(u,"id",l=Rn("geom_inter")),c.on=l,k.on++):(c.on="!y-offscreen",k.on++):(c.on="!x-offscreen",k.on++)}return k}(e),$=O[qt],(q=xn(O.on,0))&&(R=1-xn((q/$)[Mt](2),0),V.civ=V.iv=R)),t.rect=j,t.clipRect=z,t.docRect=W,G[qt]?(t.isRoot=Jt,t.canScroll=Ht,V.xs=!!o,V.ys=!!d):U.b>=z.b||U.r>=z.r?(t.isRoot=Ht,V.xs=!!(W.w>U.w&&o),V.ys=!!(W.h>U.h&&d),t.canScroll=W.w>U.w||W.h>U.h):V.ys=V.xs=t.isRoot=t.canScroll=Jt,t.scrollNodes=G,t.clipNodes=J,t.expRect=V}(t,h,Ht),!n&&!h.isRoot&&h.canScroll&&((r=h.expRect).xs||r.ys)){Fn(e),a=[],tn[e]=a;for(var y=0;y<h.scrollNodes.length;y++){var b=h.scrollNodes[y],v={};v.node=b,v[Pt]=function(t){Ln(0,e,b)},Z(b,Et,v[Pt]),a.push(v)}}return f.win=(d=(o=Bt).innerHeight||0,c=o.innerWidth||0,u=d+(l=o.screenY||o.screenTop||0),p=c+(g=o.screenX||o.screenLeft||0),m=An(s),d||c||!m||(d=m.clientHeight||0,p=g+(c=m.clientWidth||0),u=l+d),{t:l,l:g,b:u,r:p,w:c,h:d}),f.par=h.clipRect,r=h.expRect,(i=h.rect).iv=r.iv,i.xiv=r.xiv,i.yiv=r.yiv,delete r.iv,delete r.xiv,delete r.yiv,f.exp=r,f.self=i,f}function Ln(e,t,n){var a=tn[t];if(a)for(var r=0;r<a.length;r++){var i=a[r];if(i.node===n){i.tID&&(clearTimeout(i.tID),delete i.tID),i.tID=setTimeout(function(){var e=dt.getInstance().getIframe(t);e&&Qn(e.iframe,t,Pn(t,e.iframe,Ht))},Hn);break}}}function Fn(e){var t,n=tn[e];if(n)for(;t=n.pop();)t.tID&&clearTimeout(t.tID),X(t.node,Et,t[Pt]),t.node=t[Pt]=Gt,tn[e]=Gt;delete tn[e]}let Nn,jn,Un=!0;const Bn=function(e,t){jn=e;const n=t;let a,r;function i(e){const t=Un?"tcString":"consentData";Un&&e&&e.gdprApplies&&(e.purpose&&e.purpose.consents&&!e.purpose.consents[1]?Ua(!0):e.purpose&&e.purpose.consents&&!0===e.purpose.consents[1]&&Ua(!1));const n={consent_string:e?e[t]:void 0,consent_required:e?e.gdprApplies:void 0};if(e&&e.addtlConsent&&"string"==typeof e.addtlConsent&&-1!==e.addtlConsent.indexOf("~")){const t=e.addtlConsent.substring(e.addtlConsent.indexOf("~")+1);n.addtl_consent=pe(t.split("."),e=>parseInt(e,10))}jn.gdpr_consent=n}function s(e){clearTimeout(a),i(Nn),Ie(o(e))}function o(e){e&&ee(`${e} Resuming request without consent information.`),n()}if(jn.consentManagement&&(jn.consentManagement.disabled||jn.consentManagement.tcf&&jn.consentManagement.tcf.disabled))return ae("TCF Consent module was disabled."),Ie(o());let d=1e4;if(jn.consentManagement&&P(jn.consentManagement.timeout)&&(d=jn.consentManagement.timeout),Nn)return i(Nn),Ie(o());a=setTimeout(function(){s(Nn?"":"CMP workflow exceeded timeout threshold.")},d),function(e,t){const n={};try{r=window.__tcfapi||window.top.__tcfapi,r||(r=window.__cmp||window.top.__cmp,r&&(Un=!1))}catch(e){}if(L(r))r(Un?"addEventListener":"getConsentData",null,e);else if(window.$sf&&window.$sf.ext&&"function"==typeof window.$sf.ext.cmp)Un=!1,function(){const t=Object.keys(jn.tags),n=_e(jn.tags[t[0]].sizes);window.$sf.ext.register(n[0].width,n[0].height,function(t,n){"cmpReturn"===t&&e(n.vendorConsentData)}),window.$sf.ext.cmp("getConsentData")}();else{let a,r=window;for(;!a;){try{(r.frames.__tcfapiLocator||r.frames.__cmpLocator)&&(a=r),r.frames.__cmpLocator&&(Un=!1)}catch(e){}if(r===window.top)break;r=r.parent}if(!a)return t("TCF CMP not found.");!function(t){const a=Un?"__tcfapi":"__cmp";function r(e){const t=Un?"__tcfapiReturn":"__cmpReturn",a="string"==typeof e.data&&e.data.includes(t)?JSON.parse(e.data):e.data;if(a[t]){const e=a[t];n[e.callId](e.returnValue,e.success),Un||delete n[e.callId]}}function i(t,n){Un||X(window,"message",r,!1),e(t,n)}window[a]=function(e,r,i){const s=`${Math.random()}`,o={[`${a}Call`]:{command:e,parameter:r,callId:s}};n[s]=i,t.postMessage(o,"*")},Z(window,"message",r,!1),Un?window.__tcfapi("addEventListener",null,i):window.__cmp("getConsentData",null,i)}(a)}}(function(e,t){Un?!t||"object"!=typeof e||null===e||!0===e.gdprApplies&&"string"!=typeof e.tcString?s(`TCF CMP returned unexpected consentObject during lookup process; returned value was (${e})`):"useractioncomplete"===e.eventStatus||"tcloaded"===e.eventStatus?(clearTimeout(a),Nn=e,i(Nn),Ie(o())):"cmpuishown"===e.eventStatus&&(Nn=e,e.tcString&&e.purposeOneTreatment&&(clearTimeout(a),i(Nn),Ie(o()))):"object"!=typeof e||null===e||"string"!=typeof e.consentData||""===e.consentData?s(`CMP returned unexpected consentObject during lookup process; returned value was (${e})`):(clearTimeout(a),Nn=e,i(Nn),Ie(o()))},s)},Wn=N.ZE.pF;let zn=0,Vn=0,Gn=0;const Hn=500,Jn=function(e,t){{const n=Pn(e,t);return n.anx=function(){try{if(void 0!==window.top.location.href){let e=window,t=0,n=0;do{t+=e.pageYOffset||e.document.documentElement.scrollTop||e.document.body.scrollTop,n+=e.pageXOffset||e.document.documentElement.scrollLeft||e.document.body.scrollLeft,e=e.parent}while(e.parent!==window.top);return{scrollTop:t,scrollLeft:n}}}catch(e){}return{scrollTop:0,scrollLeft:0}}(),n}},Zn=function(){Yn(!0)},Xn=function(){Yn(!1)};function Yn(e){Kn(),Vn=window.setTimeout(()=>{var t;t=e,M(dt.getInstance().getIframes(),(e,n)=>{const a=apntag.requests.tags[n];if(a.alwaysUseXDomainIframe||a.enableSafeFrame){const a=e.iframe.contentWindow,r={};r.targetId=n,r.value=t,r.status=N.l2.X.AR,ft(a,JSON.stringify(r),we())}}),Kn()},2)}function Kn(){Vn&&(clearTimeout(Vn),Vn=0)}const Qn=function(e,t,n){{const a=e.contentWindow,r={};r.targetId=t,r.geom=n,r.status=N.l2.X.VD,ft(a,JSON.stringify(r),we())}},ea=function(){zn||(zn=window.setTimeout(na,Hn))},ta=function(e,t,n){{const a=dt.getInstance().getIframe(n).iframe.contentWindow;ft(a,{messageType:e,messagePayload:t,status:"notify",targetId:n},we())}};function na(){M(dt.getInstance().getIframes(),(e,t)=>{const n=apntag.requests.tags[t];(n.alwaysUseXDomainIframe||n.enableSafeFrame)&&function(e,t){Qn(e,t,Jn(t,e))}(e.iframe,t)}),zn&&(clearTimeout(zn),zn=0)}const aa=he();function ra(e){tt({strategy:"WithAttributes",data:{id:"itunes-launch-store",src:e.detail.url}})}const ia=["ctx","cmp","sid","plc","crt","advid","adsrv","dup","autt","dvtagver","ppid","auevent","auadv","aucmp","aucrtv","auplc","auxch","audvc","pltfrm","aufilter2","auip","DVPX_PP_AUCTION_UA","aubndl","turl","c1","c2","c3","c4","c5","gdpr","gdpr_consent"],sa={Initialized:"Initialization",Impression:"MRCImpression",Viewable:"IABViewableImpression",Error:"RuntimeError"};const oa={tagtype:"display",mon:"1",blk:"0",gdpr:"${GDPR}",gdpr_consent:"${GDPR_CONSENT_126}"};function da(e,t,n){const a={...oa,...t,...n?{btreg:n}:{}};return{url:`${e}#${new URLSearchParams(a).toString()}`,attrs:{}}}var ca,la;!function(e){e.IAS="IAS",e.DV="DV"}(ca||(ca={})),function(e){e.CREATE="create",e.INIT="init",e.LOADED="loaded",e.UNKNOWN="unknown",e.VIEWABLE="viewable"}(la||(la={})),ca.IAS,ca.DV;const ua=e=>"ias"===e.data?.origin,ga=e=>ua(e)&&"pingTime"===e.data.name,pa=e=>ua(e)&&"jsdiag"===e.data.name;function ma(e){return"dv"===e.data?.origin}const fa={[ca.IAS]:class{constructor(e,t,n=window){this.iasData=e,this.elementId=t,this.windowRef=n,this.jsScriptPromise=null,this.errorCallback=null,this.listenOnInitialized=e=>{this.jsScriptPromise&&this.jsScriptPromise.then(()=>{e(this.sharedTelemetryData)}).catch(()=>{this.notifyError("IAS script failed to load",{...this.iasData})})}}get sharedTelemetryData(){const{data:e}=this.iasData,{adventityid:t,pubentityid:n}=e;return{adventityid:t,pubentityid:n}}load(e,t){const{data:n,url:a}=this.iasData;this.jsScriptPromise=((e,t,n,a)=>{let r=`https://adsdkprod.azureedge.net/assets/ias/${n}/fw.js`;a&&(r=a);const{url:i,attrs:s}=function(e,t,n){return{url:e,attrs:{"data-ias-container":n,"data-ias-parameters":JSON.stringify({config:`/rjss/st/${t.adventityid}/${t.pubentityid}/skeleton.js?iasProxyPartnerId=2`}),"data-ias-force-append":"true"}}}(r,e,t);return o(i,{attrs:s,parent:"body"})})(n,this.elementId,e,a),t(this.sharedTelemetryData)}listenOnViewable(e){const t=n=>{ga(n)&&n.data.value>0&&(e({...this.sharedTelemetryData,value:n.data.value}),this.windowRef.removeEventListener("message",t,!1))};this.windowRef.addEventListener("message",t,!1)}listenOnError(e){this.errorCallback=e,this.windowRef.addEventListener("message",e=>{pa(e)&&this.notifyError("IAS script error",e.data)})}listenOnCustomEvents(e){this.windowRef.addEventListener("message",t=>{ga(t)&&e({type:"pingTime",...this.sharedTelemetryData,value:t.data})})}listenOnUnknownEvents(e){this.windowRef.addEventListener("message",t=>{ga(t)||pa(t)||ua(t)&&e({...this.sharedTelemetryData,data:t.data})})}notifyError(e,t){if(this.errorCallback){const n=new Error(e);n.debugData={...this.sharedTelemetryData,event:t},this.errorCallback(n)}}},[ca.DV]:class{constructor(e,t=window){this.dvData=e,this.windowRef=t,this.jsFileUrl=null,this.errorCallback=null,this.jsFileUrl=this.dvData.url||null}get sharedTelemetryData(){return this.dvData.data}load(e,t){this.jsFileUrl||(this.jsFileUrl=`https://adsdkprod.azureedge.net/assets/dv/v${e}/msftdvbm.js`);const{url:n}=da(this.jsFileUrl,this.dvData.data);o(n).then(()=>{t({...this.sharedTelemetryData,url:n})}).catch(()=>{this.notifyError("DV script failed to load",{url:n})})}listenOnInitialized(e){this.windowRef.addEventListener("message",t=>{ma(t)&&t.data.type===sa.Initialized&&e({...this.sharedTelemetryData,url:this.jsFileUrl,value:t.data})})}listenOnCustomEvents(e){this.windowRef.addEventListener("message",t=>{ma(t)&&t.data.type===sa.Impression&&e({type:t.data.type,...this.sharedTelemetryData,url:this.jsFileUrl,value:t.data})})}listenOnUnknownEvents(e){this.windowRef.addEventListener("message",t=>{ma(t)&&!function(e){return-1!==Object.values(sa).indexOf(e.data?.type)}(t)&&e({...this.sharedTelemetryData,url:this.jsFileUrl||"",data:t.data})})}listenOnViewable(e){this.windowRef.addEventListener("message",t=>{ma(t)&&t.data.type===sa.Viewable&&e({...this.sharedTelemetryData,url:this.jsFileUrl,value:t.data})})}notifyError(e,t){if(this.errorCallback){const n=new Error(e);n.debugData={...this.sharedTelemetryData,url:this.jsFileUrl,event:t},this.errorCallback(n)}}listenOnError(e){this.errorCallback=e,this.windowRef.addEventListener("message",e=>{ma(e)&&e.data.type===sa.Error&&this.notifyError("DV script error",e.data)})}}};ca.IAS,ca.DV;const ha=[],ya={},ba={},va=[],wa={},Ia=Ie(function(){Z(aa,"focus",Zn),Z(aa,"blur",Xn),Z(aa,"resize",ea),Z(aa,"scroll",ea),Z(aa,"pagehide",()=>{try{X(aa,"focus",Zn),X(aa,"blur",Xn),X(aa,"resize",ea),X(aa,"scroll",ea),M(dt.getInstance().getIframes(),(e,t)=>{const n=apntag.requests.tags[t];(n.alwaysUseXDomainIframe||n.enableSafeFrame)&&(clearInterval(Gn),Gn=0,Fn(t))})}catch(e){}})}),ka=he(),Ea=/^http(s)?:\/\/outlook(-sdf)?\.(live|office(365)?|cloud)\.(com|microsoft)$/,Ta=/^http(s)?:\/\/.*\.msn\.com$/;let Sa,_a=!1,Ca=!1,Aa=!1,Da={},xa=null,Ma={},$a=!0,qa={};const Ra=()=>Da,Oa=e=>{Da=e},Pa=()=>qa,La=e=>{qa=e},Fa=(e,t)=>{let n=null;const a=he();if("string"==typeof e&&"string"==typeof t)try{if(void 0===fa[t])n=`Provided Verificator key is not supported; attempted value was: ${t}`,ee(n);else{const r=new URL(a.location.href);"https:"===r.protocol&&(r.origin.match(Ea)||r.origin.match(Ta))?-1!==e.indexOf("{version}")?(Ma[t]=e,Q(`Setting URL to: ${e} for key: ${t}`)):(n=`Template doesn't contain {version} placeholder; attempted value was: ${e}`,ee(n)):(n=`Attempted to override the URL on an unsupported domain. Referer was ${a.location.href}`,ee(n))}}catch(e){n=`Encountered an issue when reading the referer of the page: ${e.message}`,ee(n,e)}else n=`Provided URL template or Verificator key is not a string; attempted values were: ${e}, ${t}`,ee(n);null!==n&&k.trackCriticalError(N.Gy.L.QB,{message:n,debugData:{referer:a.location.href,tpScriptUrl:e,key:t}})},Na=()=>xa,ja=(e,t=!1)=>{e?(Ca=t,Sa=e.includes("http")||e.includes("https")?e:`https://${e}`,Q(`Setting endpoint to: ${Sa}`)):te("Cannot set an empty endpoint")},Ua=e=>{_a=e},Ba=()=>_a,Wa={[ca.DV]:{vendorKey:"doubleverify.com-omid",key:ca.DV,mapper:e=>{return function(e){return"object"==typeof e&&null!==e&&(t=e,!(0===Object.keys(t).length));var t}(t=((e,t=";",n=":")=>{const a={};return e&&"string"==typeof e?(e.split(t).filter(e=>!!e).forEach(e=>{const t=e.indexOf(n);if(-1===t)return;const r=e.slice(0,t),i=e.slice(t+1);a[r]=i}),a):a})(e,"&","="))&&"ctx"in t&&"cmp"in t&&"sid"in t&&"plc"in t&&"advid"in t&&"adsrv"in t&&"dup"in t?"string"!=typeof t.ctx||"string"!=typeof t.cmp||"string"!=typeof t.sid||"string"!=typeof t.plc||"string"!=typeof t.advid||"string"!=typeof t.adsrv||"string"!=typeof t.dup?null:ia.reduce((e,n)=>{const a=t[n];return"string"==typeof a&&(e[n]=a),e},{}):null;var t},regex:/https:\/\/[\w\.]+\/assets\/dv\/(v\d+)\/msftdvbm\.js/i,scriptParamsGetter:da,constructorParamsGetter:(e,t)=>[{url:e,data:t}]},[ca.IAS]:{vendorKey:"IAS-omid",key:ca.IAS,mapper:e=>({config:e}),regex:/https:\/\/[\w\.]+\/assets\/ias\/(v\d+)\/fw\.js/i,scriptParamsGetter:function(e,t,n){return{url:e,attrs:{"data-ias-container":n,"data-ias-parameters":t.config,"data-ias-force-append":"true"}}},constructorParamsGetter:(e,t,n)=>[{url:e,data:t},n]}};function za(e,t){const n=document.createElement("script");return n.type="text/javascript",n.async=!0,n.src=e,t&&"object"==typeof t&&Object.entries(t).forEach(([e,t])=>{n.setAttribute(e,t)}),n.outerHTML.replaceAll("<","<")}function Va(e,t,n){!function(e){const t=e.tagId,n=function(e){return e?.native?.sdkKV||e?.native?.ortb?.ext?.msft?.sdk_kv}(e);if(n){let e=null;try{e=function(e){if("string"!=typeof e||!l.test(e))return null;const t={};return e.slice(1,-1).split(",").forEach(e=>{const[n,a]=e.split(":");t[n.trim()]=a.trim()}),t}(JSON.parse(n).uxParams)}catch(e){e.debugData={sdkKV:n},k.trackCriticalError(N.Gy.L.lS,e)}const a=y.getSessionData()?.flights||[],r=y.getPlacementData(t)?.flights||[];y.addPlacementData(t,{flights:[...a,...r,{raw:n,active:e}]})}}(e);const a=e.tagId,r=function(e){return e?.native?.omidTrackers||e?.native?.ortb?.eventtrackers}(e);var i;(i=r,i&&Array.isArray(i)?i.map(e=>{if(!e||!e.url)return null;let t=e.vendor_key,n=e.verification_parameters;e?.ext?.vendorKey&&(t=e.ext.vendorKey,n=e.ext.verification_parameters);let a=null;switch(t){case Wa[ca.IAS].vendorKey:a=ca.IAS;break;case Wa[ca.DV].vendorKey:a=ca.DV;break;default:return null}const{mapper:r}=Wa[a],i=r(n);return null===i?null:{url:e.url,params:i,key:a}}).filter(Boolean):[]).forEach(e=>{!function(e,t,n,a){const{key:r}=e,{scriptParamsGetter:i,constructorParamsGetter:s,regex:o}=Wa[r],d=(e=>Ma[e])(r);if(d){const t=function(e,t){const n=t.exec(e);return n&&n.length>1?n[1]:null}(e.url,o);if(!t)return void k.trackCriticalError(N.Gy.L.QB,{message:`${r} script doesn't have a valid version`,debugData:{...e.params,scriptUrl:e.url}});e.url=d.replace("{version}",t)}!function(e,t,n,a,r){const{url:i,params:s,key:o}=e,{url:d,attrs:c}=t;w.trackCustomEvent({url:i,...s,type:`${o}.${la.CREATE}`},r);const l=tt({strategy:"WithContent",data:za(d,c),domElement:a}),u=new(0,fa[o])(...n,l.contentWindow);u.listenOnInitialized((e={})=>{w.trackCustomEvent({...e,type:`${o}.${la.INIT}`},r)}),u.listenOnCustomEvents((e={})=>{const t=e.type||"customEvent";w.trackCustomEvent({...e,type:`${o}.${t}`},r)}),u.listenOnUnknownEvents((e={})=>{w.trackCustomEvent({...e,type:`${o}.${la.UNKNOWN}`},r)}),u.listenOnViewable((e={})=>{w.trackCustomEvent({...e,type:`${o}.${la.VIEWABLE}`},r)}),u.listenOnError(e=>{k.trackHighImpactError(o,e)})}(e,i(e.url,e.params,n),s(e.url,e.params,n),t,a)}(e,t,n,a)})}let Ga={};function Ha(e,t){const n=function(e){let t={};return M(apntag.requests.tags,n=>{e===n.uuid&&(t=n)}),t.uuid||(t.notFound=!0),t}(e.uuid);if(n.notFound&&(this.tagNotFound=!0),this.targetId=n.targetId,this.uuid=e.uuid,e.nobid)return this.nobid=!0,this.tagId=e.tag_id,this.auctionId=e.auction_id,this;e.ads&&e.ads.length,this.tagId=e.tag_id,this.auctionId=e.auction_id;const a=t||e.ads[0],r=this;let i,s;var o;M({adType:(o=a).ad_type,buyerMemberId:o.buyer_member_id,source:o.content_source,cpm:o.cpm,cpm_publisher_currency:o.cpm_publisher_currency,publisher_currency_code:o.publisher_currency_code,creativeId:o.creative_id,mediaSubtypeId:o.media_subtype_id,mediaTypeId:o.media_type_id,brandCategoryId:o.brand_category_id,dealId:o.deal_id,isExclusive:o.is_sov,isRoadblock:o.is_roadblock},(e,t)=>{r[t]=e});const d=function(e){let t=[];return O(e.sizes)||(t=_e(e.sizes)),t}(n);Array.isArray(d)&&d[0]&&(i=d[0].height,s=d[0].width),a.msft&&(this.msft=a.msft),a.dsa&&(this.dsa=a.dsa),a.feedback_url&&(this.feedbackUrl=a.feedback_url);const c=a.content_source?a.content_source:"rtb";if(a[c]&&a[c].banner)this.banner={width:a[c].banner.width,height:a[c].banner.height,content:a[c].banner.content,trackers:a[c].trackers},i=a[c].banner.height,s=a[c].banner.width;else if(a.rtb&&a.rtb.video){const e=a.rtb.video;this.video={duration:e.duration_ms,playbackMethods:e.playback_methods,frameworks:e.frameworks,content:e.content,trackers:a.rtb.trackers}}else if(a.rtb&&(a.rtb[N.Ap.s6]||a.rtb.openrtb_native)){const e=a.rtb.openrtb_native||a.rtb[N.Ap.s6];if(this[N.Ap.s6]=function(e){if("string"==typeof e)try{return{ortb:JSON.parse(e)}}catch(t){te("Saw issue trying to parse the native ortb response data.  Native object provided by impbus",e)}return{type:e.type,title:e.title,body:e.desc,desc2:e.desc2,fullText:e.full_text,icon:e.icon,image:e.main_img,cta:e.ctatext,sponsoredBy:e.sponsored,impressionTrackers:e.impression_trackers,omidTrackers:e.omid_trackers,clickTrackers:e.link&&e.link.click_trackers,clickUrl:e.link&&e.link.url,clickFallbackUrl:e.link&&e.link.fallback_url,javascriptTrackers:e.javascript_trackers,video:e.video,privacyLink:e.privacy_link,rating:e.rating,displayUrl:e.displayurl,likes:e.likes,downloads:e.downloads,price:e.price,salePrice:e.saleprice,phone:e.phone,address:e.address,custom:e.custom,sdkKV:e.msft?.sdk_kv,customTitle1:e.title1,customTitle2:e.title2,customTitle3:e.title3,customTitle4:e.title4,customTitle5:e.title5,customBody1:e.body1,customBody2:e.body2,customBody3:e.body3,customBody4:e.body4,customBody5:e.body5,customCta1:e.ctatext1,customCta2:e.ctatext2,customCta3:e.ctatext3,customCta4:e.ctatext4,customCta5:e.ctatext5,customDisplayUrl1:e.displayurl1,customDisplayUrl2:e.displayurl2,customDisplayUrl3:e.displayurl3,customDisplayUrl4:e.displayurl4,customDisplayUrl5:e.displayurl5,customSocialUrl1:e.socialurl1,customSocialUrl2:e.socialurl2,customSocialUrl3:e.socialurl3,customSocialUrl4:e.socialurl4,customSocialUrl5:e.socialurl5,customImage1:e.image1,customImage2:e.image2,customImage3:e.image3,customImage4:e.image4,customImage5:e.image5,customIcon1:e.icon1,customIcon2:e.icon2,customIcon3:e.icon3,customIcon4:e.icon4,customIcon5:e.icon5,customSocialIcon1:e.socialicon1,customSocialIcon2:e.socialicon2,customSocialIcon3:e.socialicon3,customSocialIcon4:e.socialicon4,customSocialIcon5:e.socialicon5}}(e),!n.trackingManagement||!n.trackingManagement.native||n.trackingManagement.native.loadViewScriptAt!==N.nP.G.D){const e=n.wcElement||document.getElementById(n.targetId);ae("Loading native viewability script during adResponse phase"),Za(a,this,this.targetId,e)}}this.height=i,this.width=s,this.bidderId=a.bidder_id,this.adomain=a.adomain,a.renderer_id&&(this.renderer_id=a.renderer_id),a.renderer_url&&(this.renderer_url=a.renderer_url)}const Ja=function(e,t){if(!e||!e.uuid)return{};if(Ga[e.uuid]&&!t)return Ga[e.uuid];try{const n=function(e,t){return new Ha(e,t)}(e,t);return t||(Ga[e.uuid]=n),n}catch(e){te(`adManager.getAdObj: Error trying to instantiate new adObj: ${e.message}`)}};const Za=function(e,t,n,a){const r=`ast_${n}_${e?.creative_id}_trkjs`;if(e.viewability&&e.viewability.config){let t=e.viewability.config;"string"==typeof n&&(t=t.replace("%native_dom_id%",n),oe()&&null===document.getElementById(n)&&ee(`No element found in the page for the native creative ${n}, see https://docs.xandr.com/bundle/seller-tag/page/seller-tag/define-tag.html 'targetId'`),a&&a.getRootNode()instanceof ShadowRoot&&(window[r]=a,t=t.replace(`dom_id=${n}`,`dom_elt_var=${r}`)));const i=/https?:\/\/[\w\.\/-]+\.js/;Na()&&(t=t.replace(i,Na())),tt({strategy:"WithContentAndAttributes",data:{content:t,attributes:{"data-anxtracker":n||""}},domElement:a})}$a&&Va(t,a,n)},Xa=function(e){apntag.requests.trackingManagement=apntag.requests.trackingManagement||{},apntag.requests.trackingManagement.native||(apntag.requests.trackingManagement.native={loadViewScriptAt:N.nP.G.W}),apntag.requests.trackingManagement.mobileOmidImpTracking="boolean"==typeof e.trackingManagement?.mobileOmidImpTracking&&e.trackingManagement.mobileOmidImpTracking,apntag.requests.trackingManagement.mobileOmidImpTracking&&Ya()},Ya=function(){if(window.om||window.OmidVerificationClient){const e="omid verification client already loaded";Q(e),w.trackCustomEvent({type:"omidAlreadyLoaded",msg:e})}else apntag.requests.trackingManagement.scriptLoadPromise=function(e,t){return new Promise((n,a)=>{try{re(e,t,()=>n())}catch(e){a(e)}})}(window,N.i$._F)};function Ka(e,t,n,a=new Map,r=void 0){const i=r?.(e,t,n,a);if(null!=i)return i;if(null==(s=e)||"object"!=typeof s&&"function"!=typeof s)return e;var s;if(a.has(e))return a.get(e);if(Array.isArray(e)){const t=new Array(e.length);a.set(e,t);for(let i=0;i<e.length;i++)t[i]=Ka(e[i],i,n,a,r);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;a.set(e,t);for(const[i,s]of e)t.set(i,Ka(s,i,n,a,r));return t}if(e instanceof Set){const t=new Set;a.set(e,t);for(const i of e)t.add(Ka(i,void 0,n,a,r));return t}if("undefined"!=typeof Buffer&&Buffer.isBuffer(e))return e.subarray();if(R(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);a.set(e,t);for(let i=0;i<e.length;i++)t[i]=Ka(e[i],i,n,a,r);return t}if(e instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return a.set(e,t),Qa(t,e,n,a,r),t}if("undefined"!=typeof File&&e instanceof File){const t=new File([e],e.name,{type:e.type});return a.set(e,t),Qa(t,e,n,a,r),t}if(e instanceof Blob){const t=new Blob([e],{type:e.type});return a.set(e,t),Qa(t,e,n,a,r),t}if(e instanceof Error){const t=new e.constructor;return a.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,Qa(t,e,n,a,r),t}if("object"==typeof e&&function(e){switch(q(e)){case"[object Arguments]":case"[object Array]":case"[object ArrayBuffer]":case"[object DataView]":case"[object Boolean]":case"[object Date]":case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Map]":case"[object Number]":case"[object Object]":case"[object RegExp]":case"[object Set]":case"[object String]":case"[object Symbol]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return a.set(e,t),Qa(t,e,n,a,r),t}return e}function Qa(e,t,n=e,a,r){const i=[...Object.keys(t),...(s=t,Object.getOwnPropertySymbols(s).filter(e=>Object.prototype.propertyIsEnumerable.call(s,e)))];var s;for(let s=0;s<i.length;s++){const o=i[s],d=Object.getOwnPropertyDescriptor(e,o);(null==d||d.writable)&&(e[o]=Ka(t[o],o,n,a,r))}}function er(e){return Ka(e,void 0,e,new Map,void 0)}const tr=N.ZJ.ZH,nr=N.nP.G.W;function ar(e,t){let n=!1,a=e;if(2===arguments.length?(a=ka.apntag.requests.tags[t],(e.sizes&&a.sizeMapping||e.sizeMapping&&!a.sizeMapping)&&(n=!0)):(t=e.targetId,e.sizes&&e.sizeMapping&&(n=!0)),n)return te(`sizes and sizeMapping both cannot be defined for targetId: ${t}`),!1;if(e.sizeMapping){const t=function(e){if(t=e.sizeMapping,!(Array.isArray(t)&&t.length>0||(ae("No size mapping defined"),0)))return e.sizes;var t;const n=function(){const e=he(),t=e.document;return e.innerWidth?e.innerWidth:t.body.clientWidth?t.body.clientWidth:t.documentElement.clientWidth?t.documentElement.clientWidth:0}();let a;if(!n){a=e.sizeMapping[0];for(let t=0;t<e.sizeMapping.length;t++)parseInt(e.sizeMapping[t].minWidth,10)>parseInt(a.minWidth,10)&&(a=e.sizeMapping[t]);return a.sizes?a.sizes:e.sizes}let r="";const i=e.sizeMapping.slice().sort((e,t)=>e.minWidth-t.minWidth);for(let e=0;e<i.length;e++)n>=i[e].minWidth&&(a=i[e]);return a&&a.sizes?(r=a.sizes,Q(`tag : ${e.targetId} resized based on device width to : ${r}`)):Q(`tag : ${e.targetId} not mapped to any sizes for device width. This request will be suppressed.`),r}(e);if(""===t)return"";e.sizes=t}return!0}function rr(){{const e=document.createElement("iframe");return e.id="appnexus-debug-console-loader",e.height="100%",e.width="100%",e.border="0px",e.hspace="0",e.vspace="0",e.marginWidth="0",e.marginHeight="0",e.style.border="0",e.frameBorder="0",e}}function ir(e){try{return Object.keys(apntag.requests.tags).filter(t=>apntag.requests.tags[t].uuid===e.uuid)[0]}catch(e){return""}}const sr='<span style="color: #ccc">nobid</span>';function or(e,t){if(e.nobid)return sr;const n=e.ads&&e.ads[0][t];return n||0===n?n:""}function dr(e,t,n){ae("Buyer was found in list and could detect OM SDK. Setting up imp by view logic."),e.verificationClient=new(window.OmidVerificationClient[Object.keys(window.OmidVerificationClient)[0]]),e.verificationClient&&e.verificationClient.registerSessionObserver(a=>{const{tagId:r,targetId:i}=e;if("sessionError"===a.type){const e=`OMSDK session error for ad target: ${i}, loading impressions the normal way.`;ee(e),Ar(t,n,r),w.trackCustomEvent({type:"omidSessionEvent",sessionMsg:e,targetId:i},r)}else"sessionStart"===a.type&&(e.verificationClient.addEventListener("geometryChange",function(e,t,n){return function(a){if((a&&a.data&&a.data.adView&&a.data.adView.percentageInView)>0&&!e.impressionUrlLoaded){const{tagId:a,targetId:r}=e;Ar(t,n,a),Q(`OMSDK impression event detected for ad tag: ${r}`),w.trackCustomEvent({type:"omidImpression",targetId:r},a),e.impressionUrlLoaded=!0}}}(e,t,n)),w.trackCustomEvent({type:"omidSessionStart",targetId:i},r))},"appnexus.com-omid")}class cr{constructor(e){this.options=e,this.lastClickTime=0,this.pendingClick=!1,this.clickStartTime=0,this.CLICK_THRESHOLD_MS=2e3,this.handleVisibilityChange=()=>{if(!document.hidden&&this.lastClickTime>0){const e=Date.now()-this.lastClickTime;this.options.onReturn(e),this.lastClickTime=0}document.hidden&&this.pendingClick&&Date.now()-this.clickStartTime<this.CLICK_THRESHOLD_MS&&(this.lastClickTime=Date.now(),this.pendingClick=!1)},document.addEventListener("visibilitychange",this.handleVisibilityChange)}recordAdClick(){this.pendingClick=!0,this.clickStartTime=Date.now()}dispose(){document.removeEventListener("visibilitychange",this.handleVisibilityChange)}}const lr=new WeakMap;function ur(e){return e?lr.get(e):void 0}function gr({targetId:e,wcElement:t}){if(y.skipLogging)return;const n=t||document.getElementById(e);if(!n)return Q(`Ad Element not found for quick back signal: ${e}`),void w.trackCustomEvent({type:"qbsElementNotFound",targetId:e});let a=lr.get(n);if(a)return;const r=t?t.id:e;w.trackCustomEvent({type:"qbsInitialize",targetId:r}),a=new cr({adElement:n,onReturn:e=>{const t=apntag.requests?.tags[r],n=t?Ja(t.adResponse):null,a=n?.tagId;Q(`Quick back signal for ${r} with dwellTime: ${e}`),w.trackCustomEvent({type:"dwellTime",targetId:r,dwellTime:e},a)}}),lr.set(n,a)}const pr=N.Ve.D4,mr=N.Ve.s6,fr=N.Me.Ve,hr=N.Ve.G_,yr=N.Me.D4,br=N.Me.KB,vr=N.AD.Wy,wr=N.uK,Ir=N.AD.w$,kr=N.AD.JN,Er=N.ZJ.qv,Tr=N.AI.FF,Sr=N.AD.Q9,_r=N.ZJ.ZH;function Cr(e,t,n,a,r){let i,s,o;if(e.adResponse&&(function(e){if(e.adResponse&&e.adResponse.ads){const t=ye(e.adResponse.ads);if(t.banner){const n=e.initCollapsed,a=n&&n.expandBy&&$(wr).indexOf(n.expandBy)>=0;n&&!a&&ee(`TagID ${e.tagId} initCollapsed is set but expandBy is not recognized, initial size will not be collapsed`),e.initialHeight=a?0:t.banner.height,e.initialWidth=a?0:t.banner.width}}}(e),o=Ve(e),typeof o===_r||null===o||typeof o.error!==_r))return d=e.adResponse,void se(window.document.body,d[kr],d.uuid);var d;if(e.adResponse&&e.showTagCalled){o[fr]===pr&&e.enableSafeFrameForDisplayAds&&!e.usesRenderer&&(e.enableSafeFrame=!0),w.trackCustomEvent({type:"adRenderingData",targetId:e.targetId,sizes:e.sizes,isWebComponent:!!e.wcElement,isSafeFrame:!(!e.enableSafeFrame&&!e.alwaysUseXDomainIframe),batchId:r},e.tagId);{const r=function(e,t){if(t.renderer_url&&t.renderer_id){if(e.usesRenderer=!0,2===t.renderer_id&&e.enableSafeFrame&&(e.safeframe.expansionByPush=!0,e.customIframeProps={style:"overflow:hidden",allow:"autoplay"}),"native"===t.ad_type&&e.trackingManagement&&e.trackingManagement.native&&e.trackingManagement.native.loadViewScriptAt===N.nP.G.D){const n=Ja(t);ae("Loading native viewability script during native render sequence"),Za(t,n,e.targetId)}if(!e.enableSafeFrame)return function(e,t){{const n=Ge(t);if(typeof n===_r)return te("No Content Source Found"),void(e.displayed=!1);t[t.ad_type]=n,function(e){e.isMediated||e.isRtbVideoFallback||(e.adResponse.ad=e.adResponse.ads[0])}(e),lt.loadRenderer(e,t)}}(e,t),!0;lt.loadRenderer(e,t)}}(e,o);if(r)return e.targetId;try{if(o[fr]===mr&&!e.usesRenderer)return function(e){Q(`Render for the following ad should be handled outside of ast.js :${e.targetId}`),e.displayed=!0;const t=Ja(e.adResponse);Oe.emit(N.qY.LOADED,e.targetId,t),ne(`The ${e.targetId} ad is loaded.`)}(e),e.targetId;if(o[fr]===hr&&!e.usesRenderer)return ee("Response has no renderer for video"),e.displayed=!1,e.targetId;if(o[fr]===pr||e.usesRenderer){if(o.content_source===Tr&&!e.usesRenderer){const t=o[Tr][yr];if(O(t)||typeof t!==Er)return te("Response has no banner object"),e.displayed=!1,e.targetId;if(!ue(t,br))return te("Response has no banner content"),e.displayed=!1,e.targetId;if(!ue(t,"width"))return te("Response has no banner width"),e.displayed=!1,e.targetId;if(!ue(t,"height"))return te("Response has no banner height"),e.displayed=!1,e.targetId}let r,d;if(ue(n,e.targetId)&&(r=n[e.targetId]),e.alwaysUseXDomainIframe||e.enableSafeFrame){a(),d=e.wcElement?e.wcElement:window.document.getElementById(e.targetId);const t=d.style.height,n=d.style.width;d.style.height=e.initialHeight,d.style.width=e.initialWidth,d.style.height=t,d.style.width=n}const c=er(t);ue(e.safeframe,"expansionByPush")&&(c.expansionByPush=e.safeframe.expansionByPush),ue(e.safeframe,"expansionByOverlay")&&(c.expansionByOverlay=e.safeframe.expansionByOverlay),ue(e.safeframe,"sandbox")&&(c.sandbox=e.safeframe.sandbox),ue(e.safeframe,"meta")&&(c.meta=e.safeframe.meta),e.safeframe=c,s=function(e){{let t;const n=ve(e),a=e.curWindow||window,r=e.wcElement;try{t=r&&r.querySelector(`#${n}`)?r.querySelector(`#${n}`):a.document.getElementById(n)?a.document.getElementById(n):a.document.createElement("div")}catch(t){return te("Error creating Ad Div: ",null,t),void(e.displayed=!1)}return t.style.display="none",t.id=n,t}}(e),(e.alwaysUseXDomainIframe||e.enableSafeFrame)&&(s.style.height=`${e.initialHeight}px`,s.style.width=`${e.initialWidth}px`,s.style.display="block",d.appendChild(s),e.geom=function(e,t){{Q("Geom starting");const n=Jn(e,t);return 0===Gn&&(Gn=setInterval(ea,1e3)),n}}(e.targetId,s)),i=function(e,t){{const n=function(e,t="3rd party advertisement container"){{const n=e.tagId||e.adResponse.tag_id,a=e.targetId,r=e.adTrackingId,i=performance.now();let s;Qe[`${a}_${r}`]=i,w.trackCustomEvent({type:N.eZ.IFRAME_RENDER_START,targetId:a,batchId:e.batchId,performance:i,adTrackingId:r},n);const o=function(e){return`${N.H3.p+e.targetId}_${ie()}`}(e),d=he();return s=null!==d.document.getElementById(o)?d.document.getElementById(o):d.document.createElement("iframe"),s.id=o,s.name=o,s.title=t,s.setAttribute("height",e.initialHeight),s.setAttribute("width",e.initialWidth),s.width=`${e.initialWidth}px`,s.height=`${e.initialHeight}px`,s.border="0",s.hspace="0",s.vspace="0",s.marginWidth="0",s.marginHeight="0",s.style.border="0",s.scrolling="no",s.frameBorder="0",s}}(e);if(e.alwaysUseXDomainIframe||e.enableSafeFrame){let a;Q(`targetId: ${e.targetId} is using safeFrame. Loading this ad into sandboxed iframe`),t.renderer_url?a="\x3c!-- renderer loading in SF--\x3e":e.isBannerMediation?a=apntag.getAdMarkup(e.targetId,e.uuid):e.isVideoMediation?a=e.adResponse.ad[Xe][Ye][Ke]:(a=at(e),a=a.replace("/&/g","&amp;").replace("/</g","&lt;").replace("/>/g","&gt;").replace('/"/g',"&quot;").replace("/'/g","&#39;"),a=`${a}`);const r=e.curWindow;delete e.curWindow;const i={targetId:e.targetId,ad:a,host:`${r.location.protocol}//${r.location.host}`,geom:e.geom,debug:oe(),hasFocus:document.hasFocus(),hostSfSupport:e.safeframe,isMediated:e.isMediated,rendererUrl:t.renderer_url,enableMediationEvents:apntag.requests.enableMediationEvents,expandByCreative:de(e.targetId),currentTag:e};e.safeframe.meta&&(i.meta=e.safeframe.meta),n.name=JSON.stringify(i),e.curWindow=r,e.safeframe.sandbox&&(n.sandbox="allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-presentation allow-same-origin allow-scripts")}if(e.renderingManagement&&e.renderingManagement.sandboxAdIframe&&!n.hasAttribute("sandbox")){const t=e.renderingManagement.sandboxAttributes||[];t.length>0&&(ae(`renderingManagement.sandboxAdIframe was enabled, enabling sandbox attributes: ${t.join(" ")}`),n.setAttribute("sandbox",t.join(" ")))}return e.customIframeProps&&M(e.customIframeProps,(e,t)=>{n[t]=e}),n}}(e,o);const l=dt.getInstance(),u={};let g=i;if(e.renderingManagement&&e.renderingManagement.insertWrapperDiv){const e=document.createElement("div");e.append(i),g=e,ae("renderingManagement.insertWrapperDiv was enabled, creating extra div element around iframe container")}if(u.iframe=i,u.originalWidth=e.initialWidth,u.originalHeight=e.initialHeight,l.add(e.targetId,u),n[e.targetId]=i,typeof r!==_r&&window.document.getElementById(r.id)?s.replaceChild(g,r):s.appendChild(g),e.displayed=!0,window.document.body)try{!function(e,t,n){{const a=st.includes("Safari")?"safari":st.toLowerCase().includes("webkit")?"webkit":st.toLowerCase().includes("opera")||st.includes("OPR")?"opera":(it?rt(it.brands,"google chrome"):st.includes("Chrome")||st.includes("CriOS"))?"chrome":(it?it.brands&&rt(it.brands,"microsoft edge"):st.includes("Edg"))?"edge":st.toLowerCase().includes("firefox")||st.includes("FxiOS")?"mozilla":st.includes("MSIE")||st.includes("Trident")||st.includes("Trident/7.0")?"msie":"",r=e.curWindow||window,i=e.wcElement?e.wcElement:r.document.getElementById(e.targetId);if(i){e.alwaysUseXDomainIframe||e.enableSafeFrame||(i.appendChild(t),t.style.display="inline"),e.utDivId=t.id,e.utiframeId=n.id,performance.now();let r="";e.adResponse&&1===e.adResponse.ads.length&&(r=e.adResponse.ads[0]?.creative_id),De(e.targetId)||(a===N.Ss.IE||a===N.Ss.E?function(e,t){if(t.alwaysUseXDomainIframe||t.enableSafeFrame)e.src="sfTreatment"===Ze?N.i$.I2:N.i$.xF;else{let n="";n=at(t);try{e.contentWindow.contents=n}catch(t){e.src=`javascript:document.write('<script>document.domain="${document.domain}"<\/script>')`,e.contentWindow.contents=n}const a=document.getElementsByTagName("base");let r;a.length&&(r=a.target,a[0].target="_self"),e.src='javascript:window["contents"];',a.length&&(a[0].target=r)}}(n,e):function(e,t){if(t.alwaysUseXDomainIframe||t.enableSafeFrame)e.src="sfTreatment"===Ze?N.i$.I2:N.i$.xF;else{let n="";const a=function(e){{let t;try{t=e.contentWindow?e.contentWindow.document:e.contentDocument.document?e.contentDocument.document:e.contentDocument}catch(e){te(`Error getting iframe document: ${e}`)}return t}}(e);n=at(t),a.open("text/html","replace"),a.write(n),a.close()}}(n,e));const s=e.adResponse.ads?e.adResponse.ads[0]:e.adResponse.ad,o=9642;s?.buyer_member_id===o&&w.runOnlyIfLoggingEnabled(()=>{try{if(window.apntag.ixPostMessageListenerAdded)return;const e=e=>{if("ix-impression"===e.data.type){const t=document.createElement("div");t.className="adsbygoogle adsbygoogle2 ad-zone ad-space ad-unit textads banner-ads",t.style.position="absolute",t.style.left="-9999px",t.style.height="300px",t.style.width="300px",document.body.appendChild(t);const n=0===t.offsetHeight;document.body.removeChild(t);const a=JSON.stringify(window?.__bt_intrnl?.aaDetectionResults),r=String(apntag.adBlockerFlagFromEvent),i=apntag?.requests?.keywords?.isAdBlockerEnabled||null,s="success"===e.data.status,o={url:e.data.url,timestamp:e.data.timestamp,isAdBlockerEnabledMSN:i,isAdBlockEnabled:n,blockInfo:a,adBlockerFlagFromEvent:r};s?w.trackCustomEvent({...o,type:"ixImpressionSuccess"}):(w.trackCustomEvent({...o,type:"ixImpressionFailure"}),fetch(e.data.url).then(e=>{w.trackCustomEvent({...o,responseStatus:e.status,responseStatusText:e.statusText,type:e.ok?"ixHealthEndpoint_Reachable":"ixHealthEndpoint_ServerError"})}).catch(e=>{w.trackCustomEvent({...o,type:"ixHealthEndpoint_NotReachable",errorMessage:e.message})}))}};window.addEventListener("message",e,!1),window.apntag.ixPostMessageListenerAdded=!0}catch(e){w.trackCustomEvent({type:"ixTryCatchFailure",errorMessage:e.message})}});const d=e.tagId||e.adResponse.tag_id;if(void 0===s)return ee("No ad found in response, nothing to display."),void(e.displayed=!1);if(e.alwaysUseXDomainIframe||e.enableSafeFrame||n.addEventListener("load",()=>{n.contentWindow.addEventListener("click",()=>{const t=ur(e.wcElement||ka.document.getElementById(e.targetId));t?.recordAdClick(),w.trackEvent({type:T},d)},!0)},{once:!0}),!e.isMediated&&!e.usesRenderer||e.adResponse.ad&&"rtb"===e.adResponse.ad.content_source)if(((e,t)=>t.bidder_id&&101===t.bidder_id&&(it?!0===it.mobile:navigator.userAgent.includes("Mobile")||navigator.userAgent.includes("Android"))&&e.trackingManagement&&e.trackingManagement.mobileOmidImpTracking)(e,s)){const{tagId:t,targetId:a}=e;w.trackCustomEvent({type:"omidTrackingEligible",targetId:a},t),((e,t,n)=>{const{tagId:a,targetId:r}=e;var i;window.om||window.OmidVerificationClient?dr(e,t,n):(i=apntag.requests.trackingManagement.scriptLoadPromise,new Promise((e,t)=>{const n=new Promise((e,t)=>{setTimeout(()=>{t(new Error("Timeout exceeded while waiting for script load"))},1e3)});Promise.race([i,n]).then(e).catch(t)})).then(()=>((e,t,n)=>{Q("Successfully loaded the OMID Verification Client script."),dr(e,t,n)})(e,t,n)).catch(()=>((e,t,n,a)=>{const r="Script loading failed or timeout exceeded";Q(r),k.trackCriticalError(N.Gy.L.SI,new Error(r)),Ar(n,a,e)})(a,0,t,n))})(e,s,n)}else Ar(s,n,e);const c=Ge(s),l=Number(i.style.width.replace(/[^\d\.\-]/g,""));!isNaN(l)&&l>c.width&&("center"===e.promoAlignment?i.setAttribute("align","center"):i.setAttribute("align","left")),Q(`The ${e.targetId} ad is loaded.`),ne(`The ${e.targetId} ad is loaded.`);const u=Ja(e.adResponse);e.usesRenderer||apntag.requests.enableMediationEvents&&e.isMediated||Oe.emit(N.qY.LOADED,e.targetId,u)}else ee(`No div element found for display ad. This ad will not show. Div id: ${e.targetId}`),e.displayed=!1}}(e,s,i)}catch(t){te("Error rendering ad: ",null,t),e.displayed=!1}else te("Error rendering ad: window.document.body is undefined"),e.displayed=!1}else te("Error rendering ad: unknown type"),e.displayed=!1;return e.targetId}catch(t){te(`AST encountered an error while attempting to render tag ${e}.  \nError: ${t}`)}}}}const Ar=(e,t,n)=>{{const a=e[Tr][Sr][0][Ir],{adResponse:r,targetId:i,tagId:s,enableSafeFrame:o,alwaysUseXDomainIframe:d}=n,c=s||r&&r.tag_id;w.trackEvent({type:E,data:{enableSafeFrame:!(!o&&!d),batchId:n.batchId,performance:performance.now(),adTrackingId:n.adTrackingId}},c);for(let n=0;n<a.length;n++)se(t.parentElement,a[n],e[vr]);Q(`Impression triggered for ad tag: ${i}`)}},Dr=N.Ve.s6,xr=N.Ve.D4,Mr=N.Ve.G_,$r=N.ZJ.ZH,qr=N.i$.no;function Rr(e,t,n){Q("renderAd is called"),M(apntag.requests.tags,e=>{if(e.uuid===t){e.adResponse=n;try{if(n.ad&&n.ad.ad_type===xr){const t=n.ad.content_source;e.ad={mediatedContent:n.ad[t].banner.content},e.initialHeight=n.ad[t].banner.height,e.initialWidth=n.ad[t].banner.width}}catch(e){te(`Error while setting mediated content for banner in renderAd${e}`)}const t=Cr(e,wa,Ra(),Ia);ha.push(t)}})}function Or(e,t){const n=[];return["data","images"].forEach(a=>{Array.isArray(e[a])&&e[a].length>0&&e[a].forEach(e=>{("request"===t&&!0===e.required&&e.id||"response"===t&&e.id)&&n.push(e.id)})}),n}function Pr(e){const t=`Unable to find the matching tag request object in AST for the bid response using uuid: ${e.uuid}.  \nThis may mean the apntag.removeTag call was used to delete a tag before the auction finished.  \nUnable to process or render this bid.`;te(t,null,e),k.trackCriticalError(N.Gy.L.R5,new Error(t))}function Lr(e,t,n,a){if(De(n))return void Pr(t);if(e.uuid!==t.uuid)return void te("Something went wrong in AST, the UUID for the bid request and the bid response do not match.  Cannot proceed with processing this bid.  RequestTag and ResponseTag provided:",null,e,t);const r=Ja(t);r.tagNotFound?Pr(t):(y.addPlacementData(r.tagId,{placementId:r.tagId}),!0!==t.nobid?function(e,t,n,a,r){e.adResponse=t,e.utCalled=!0;const i=Fr(n);y.addPlacementData(n.tagId,{adHeight:n.height,adWidth:n.width,creativeId:n.creativeId,bidderId:n.bidderId});let s=null;if(apntag.requests.tags[n.targetId]?.perfTimings&&(s=performance.now()-apntag.requests.tags[n.targetId].perfTimings.request,apntag.requests.tags[n.targetId].perfTimings.responseTime=s),w.trackEvent({type:"adServerRequestFill",data:{batchId:a,targetId:n.targetId,performance:performance.now(),adTrackingId:e?.adTrackingId,flights:e?.flights,pageType:e?.pageType,langMarket:e?.langMarket,responseTime:s}},n.tagId),gr({targetId:n.targetId}),De(n.targetId))return void Pr(t);try{A.createStartMark("rendering")}catch(e){}const o=apntag.requests.tags[n.targetId]&&apntag.requests.tags[n.targetId].wcElement;if(Nr(n,a,e.invCode,o,i),Oe.emit(N.qY.AVAILABLE,r,n),!e.prebid&&!e.displayed){const t=Cr(e,wa,Ra(),Ia,a);ha.push(t)}}(e,t,r,a,n):function(e,t,n,a){Q(`No bid for targetId:${e.targetId}`),w.trackEvent({type:"adServerRequestNoFill",data:{batchId:n,targetId:t.targetId,performance:performance.now(),adTrackingId:e?.adTrackingId}},t.tagId),Oe.emit(N.qY.NO_BID,a,t)}(e,r,a,n))}function Fr(e){let t=e.adType;return"video"===e.adType&&(t=e.renderer_id?function(e){let t;switch(e.renderer_id){case 2:t="video_outstream";break;case 3:t="video_bannerstream";break;default:return"video_unknown_renderer"}return t}(e):"video_no_renderer"),e.renderer_id&&"native"===e.adType&&(t="native_assembly"),t}const Nr=(e,t,n,a,r)=>{const i=e.targetId,s=a||document.getElementById(i);if(!s)return void Q(`Unable to locate ad slot with targetId ${i} for Telemetry logging.`);const o=s._observer;o&&o.disconnect();const d=new MutationObserver((o,d)=>{try{if(s.innerHTML.trim().length>0){const{size:o,position:c}=Ae(i,a);Q(`Ad content loaded in ${i} with size ${JSON.stringify(o)} at position ${JSON.stringify(c)}`),w.trackCustomEvent({type:"postRenderAdData",batchId:t,invCode:n,size:o,position:c,targetId:i,isWebComponent:!!a},e.tagId),A.trackMark("rendering",{adType:r}),Oe.emit(N.qY.AD_SLOT_RENDER_START,i,e),jr(i,t,n,e,s),d.disconnect()}}catch(e){const t=`Error in handleBidResponse.observeAdSlot: ${e.message}`;te(t),k.trackCriticalError(N.Gy.L.NV,new Error(t))}});d.observe(s,{childList:!0,subtree:!0}),s._observer=d},jr=(e,t,n,a,r)=>{if(!r)return void Q(`Unable to locate ad slot with targetId ${e} for Telemetry logging.`);let i=null;new IntersectionObserver((r,s)=>{try{r.forEach(r=>{r.intersectionRatio>=.5?i||(i=setTimeout(()=>{Q(`Ad slot ${e} is visible`),w.trackEvent({type:"mrcView",data:{batchId:t,invCode:n,targetId:e}},a.tagId),Oe.emit(N.qY.MRC_VIEW,e,a),s.disconnect()},1e3)):i&&(clearTimeout(i),i=null)})}catch(e){const t=`Error in utils.observeAdVisibility: ${e.message}`;te(t),k.trackCriticalError(N.Gy.L.NV,new Error(t))}},{root:null,rootMargin:"0px",threshold:.5}).observe(r)};function Ur(e,t,n){let a=null;apntag.requests.cbCalled=!0;try{if(typeof e===$r||null===e||e.error){const n="Malformed response from ad server",r=e&&e.error?N.Gy.L.R5:N.Gy.L.Ny,i=e&&e.error?e.error:n,s=new Error(i);k.trackCriticalError(r,s),te(`Error response from impbus: ${i}`);let o={};try{o=JSON.parse(t)}catch(e){}return void M(apntag.requests.tags,(e,t)=>{const n={};let r;e&&(a=Ja(e.adResponse),r=e.targetId,Object.assign(n,{tagId:t,memberId:e.member,sizes:e.sizes}));const s=xe(i,r,void 0,200,n);M(o.tags,n=>{n.uuid===e.uuid&&Oe.emit(N.qY.BAD_REQUEST,t,s,a)})})}e.debug&&e.debug.debug_info&&function(e){{e='<div style="margin-top:10px;margin-bottom:10px;"><span style="font-weight:bold">AST Dongle Value:</span> <input\n            id="ast-dongle-input"\n            type="text"\n            length="400"\n            style="border-radius:5px;"\n            placeholder="Enter ast_dongle value"\n            value=null\n         /></div>'+(e=e.replace(/(\n)/g,"<br>"));const t=document.body,n=document.createElement("div");n.id="appnexus_debug_window";const a=document.createElement("div");a.style.width="100%",a.style.height="400px",a.style.clear="both",t.insertBefore(a,null);const r=n.style;r.position="fixed",r.bottom="0px",r.left="0px",r.width="100%",r.height="450px",r.overflow="hidden",r["border-top"]="1px solid",r["z-index"]=999999,r.background="white",t.insertBefore(n,null);const i=document.createElement("div");i.style.width="100%",i.style.height="30px";const s=rr();n.appendChild(s);const o=s.contentWindow.document;s.onload=function(){const e=o.getElementsByTagName("br"),t=e.length;let n,a,r=0;for(;r<t-1;r++)n=e[r].nextSibling,a=n&&n.nodeName.toLowerCase(),"br"===a&&(n.style.display="none")};const d="<\/script>";o.open(),o.write(e),o.write(d),o.close()}}(e.debug.debug_info),e.toolkit&&e.toolkit.enabled&&function(e){{const t='<div style="margin-top:10px;margin-bottom:10px;"><span style="font-weight:bold">AST Dongle Value:</span> <input\n            id="ast-dongle-input"\n            type="text"\n            length="400"\n            style="border-radius:5px;"\n            placeholder="Enter ast_dongle value"\n            value=null\n         /></div>'+e.map(e=>`\n      <table style="border: 1px solid black; border-radius: 5px; font-family: sans-serif; margin: 1em; padding: .5em">\n        <tr>\n          <td style="padding-right: 5em;"><b>Target&nbsp;ID</b></td>\n          <td style="width: 100%;">${ir(e)}</td>\n        </tr>\n        <tr>\n          <td><b>Creative ID</b></td>\n          <td>${or(e,"creative_id")}</td>\n        </tr>\n        <tr>\n          <td><b>Buyer Member ID</b></td>\n          <td>${or(e,"buyer_member_id")}</td></tr>\n        <tr>\n          <td><b>Creative Size</b></td>\n          <td>${function(e){if(e.nobid)return sr;let t=null,n=null;const a=e.ads&&e.ads.length?e.ads[0]:{};return a.rtb&&a.rtb.banner&&(t=a.rtb.banner.height,n=a.rtb.banner.width),t&&n?`${n} x ${t}`:""}(e)}</td>\n        </tr>\n        <tr>\n          <td><b>Available Sizes</b></td>\n          <td>${function(e){try{const t=ir(e),n=apntag.requests.tags[t].sizes;return JSON.stringify(n)}catch(e){return""}}(e)}</td></tr>\n        <tr>\n          <td><b>Winning Bid</b></td>\n          <td>${or(e,"cpm")}</td></tr>\n        <tr>\n          <td><b>Demand Source</b></td>\n          <td>${function(e){if(e.nobid)return sr;let t="";const n=function(e){const t=apntag.requests.tags;if(e.ads.length&&e.ads[0].seller_member_id)return e.ads[0].seller_member_id;for(const n in t)if(t.hasOwnProperty(n)&&t[n].uuid===e.uuid)return t[n].member;return null}(e);return t=e.ads[0].csm?"CSM":e.ads[0].buyer_member_id===n||e.ads[0].deal_id?e.ads[0].buyer_member_id!==n&&e.ads[0].deal_id?"Deal":e.ads[0].buyer_member_id===n?"Direct":"":"RTB",t}(e)}</td></tr>\n        <tr>\n          <td><b>Ad Type</b></td>\n          <td>${or(e,"ad_type")}</td></tr>\n        <tr>\n          <td><b>Media Type</b></td>\n          <td>${or(e,"media_type_id")}</td></tr>\n        <tr>\n          <td style="color: #555; font-size: smaller; padding-top: .5em;" colspan="2">\n            Console Ad Profile:\n            <a href="${function(e){return`//console.appnexus.com/ad-quality?id=${e.placement?.publisher.id}`}(e)}" target="_blank">${e.ad_profile_id}</a>\n            ${function(e){return e.ads?`| <a href="//ib.adnxs.com/cr?id=${e.ads[0].creative_id}" target="_blank">Creative Preview<a/>`:""}(e)}\n          </td>\n        </tr>\n      </table>\n    `).join(" "),n=document.body,a=document.createElement("div");a.id="appnexus_debug_window";const r=document.createElement("div");r.style.width="100%",r.style.height="400px",r.style.clear="both",n.insertBefore(r,null);const i=a.style;i.position="fixed",i.bottom="0px",i.left="0px",i.width="100%",i.height="450px",i.overflow="hidden",i["border-top"]="1px solid",i["z-index"]=999999,i.background="white",n.insertBefore(a,null);const s=document.createElement("div");s.style.width="100%",s.style.height="30px";const o=rr();a.appendChild(o);const d=o.contentWindow.document;d.open(),d.write(t),d.close()}}(e.tags),M(e.tags,e=>{let t=null,a=null;if(M(apntag.requests.tags,(n,r)=>{n.uuid===e.uuid&&(t=n,a=r)}),t){if(e.error&&t){const n=`There was an exception from targetId:${t.targetId} this usually means there is a setup error on the tag (invalid ID etc)`;te(n,null,e.error),k.trackCriticalError(N.Gy.L.R5,new Error(n));const a=xe(n,t.targetId,void 0,200);return void Oe.emit(N.qY.BAD_REQUEST,t.targetId,a)}if(e.ads&&e.ads.length&&e.ads[0].ad_type===Dr){const t=function(e){let t,n={};M(va,n=>{n.uuid===e.uuid&&(t=n)}),t&&(n=t.native);const a=[];M(n,(e,t)=>{"custom"!==t&&!0===e.required&&a.push(t)});const r=Ja(e),i=[];M(r.native,(e,t)=>{"custom"!==t&&(O(e)||i.push(t))});let s=i.length>0;if(M(a,e=>{s=s&&i.indexOf(e)>-1}),s&&n&&n.custom){const e=Or(n.custom,"request");if(e.length>0){const t=Or(r.native&&r.native.custom,"response");s=t.length>0&&e.every(e=>t.includes(e))}}return s}(e);if(!t){const e="required native assets missing from response";return k.trackCriticalError(N.Gy.L.R5,new Error(e)),void te(e)}}!function(e,t,n,a){const r=e.ads,i=function(e){let t=!1;return e&&M(e,e=>{"csm"===e.content_source&&(t=!0)}),t}(r),s=e.rtb_video_fallback,o=Ja(e),d=Fr(o);if(y.addPlacementData(o.tagId,{adType:d}),i||s){t.utCalled=!0,i?t.isMediated=!0:t.isRtbVideoFallback=!0;const s=function(e){let t=Ue;return Array.isArray(e)&&e.length>0&&e[0][je]===Be&&(t=Be),t}(r),d=function(e,t){let n={};return M(e,e=>{e.uuid===t.uuid&&e.mediationOptions&&(n=e.mediationOptions)}),n}(apntag.requests.tags,e);if(s===Mr)t.isVideoMediation=!0,Oe.emit(N.qY.AVAILABLE,n,o),ze(s,e,d,Rr),w.trackCustomEvent({type:N.qY.LOADED_MEDIATED_VIDEO,batchId:a},o.tagId);else{t.isBannerMediation=!0;const r=function(e,t){{let n="<script>";return n+="var APN_macros = {};",n+=`APN_macros.uuid = "${e}";`,n+=`APN_macros.enableMediationEvents = ${apntag.requests.enableMediationEvents};`,n+=`APN_macros.expandByCreative = ${de(e)};`,n+="APN_macros.ads = ",n+=`window.parent.apntag.getAdMarkup("${e}", "${t.uuid}");`,n+=";",n+=`document.write('<scr' + 'ipt src="${Ne}"></scr' + 'ipt>');`,A.addResourceToTrack(We,e=>e.includes(Ne)),n+="<\/script>",n}}(t.targetId,e);e.ad={ad_type:xr},t.ad={mediatedContent:r},Lr(t,e,n,a),w.trackCustomEvent({type:N.qY.LOADED_MEDIATED,batchId:a},o.tagId)}}else Lr(t,e,n,a)}(e,t,a,n)}else Pr(e)}),apntag.requests.checkDisplay&&Te();const i=apntag.requests.trackingManagement&&apntag.requests.trackingManagement.userSync;if(i&&!1===i.syncEnabled)ae("AST userSync feature was disabled as per setPageOpts.");else if(!0===Ba())ae("AST userSync feature was disabled due to TCF consent choices.");else{let e=3e3;if(i&&i.syncDelay&&(e=i.syncDelay),e)return setTimeout(r,e);r()}}catch(e){const t=`Error during handleBidResponse logic: ${e.message}`;te(t)}function r(){{ae("AST is loading the userSync URL.");const e=apntag.requests.trackingManagement&&apntag.requests.trackingManagement.userSync;let t=`${qr}?`;e&&(t+="number"==typeof e.sellerId?`seller_id=${e.sellerId}&`:"",t+="number"==typeof e.publisherId?`pub_id=${e.publisherId}&`:""),t=t.substring(0,t.length-1),tt({strategy:"WithContentAndAttributes",data:{attributes:{id:Se()+Math.random().toString(16).substr(2),src:t,sandbox:"allow-scripts allow-same-origin","data-anxtracker-usersync":""}}})}}}let Br,Wr,zr;const Vr={};let Gr,Hr=[];const Jr=N.Oi.eC,Zr=Jr.BASE,Xr=Zr+Jr.DIV,Yr=Zr+Jr.INDEX,Kr=Zr+Jr.TAG_ID,Qr=Zr+Jr.INV_CODE,ei=",",ti=":";let ni;function ai(e){return le(e,ni)}function ri(e,t,n){const a=Number(t);if(isNaN(a))te("Force Creative must be a number");else{e.force_creative_id=a;const t=function(e,t){let n=null;return M(t,t=>{t.uuid===e.uuid&&(n=t.targetId)}),n}(e,n);Q(`Force Creative in use for targetId: ${t}`)}}function ii(e){if(!e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}function si(e){return Number.isInteger(e)}const oi="Invalid schain object found: ",di=" should be a string",ci=" should be an Integer",li=" should be an object",ui=" is not a valid schain property",gi={STRICT:"strict",RELAXED:"relaxed",OFF:"off"},pi=[];M(gi,e=>pi.push(e));const mi=N.ZE.An,fi=N.ZE.pF,hi=N.ZE.HX,yi=N.Oi.d2,bi=N.Oi.Me,vi=N.Oi.Ux,wi=N.Oi.c8,Ii=N.Oi.AI;function ki(e){const t=[];return M(e,(e,n)=>{if(Array.isArray(e)){const t=[];M(e,e=>{(e=me(`keywords.${n}`,e))&&t.push(e)}),e=t}else{if(!F(e=me(`keywords.${n}`,e)))return;e=[e]}const a={key:n,value:e};t.push(a)}),t}const Ei=function(e,t,n,a){const r={};if(e.disablePsa&&M(e.tags,e=>{e.disablePsa=!0}),e.msft&&(r.msft=e.msft),e.dsa){const t={};["dsarequired","pubrender","datatopub"].forEach(n=>{P(e.dsa[n])&&(t[n]=e.dsa[n])});const n=e.dsa.transparency;if(Array.isArray(n)&&n.every(e=>ii(e))){const e=[];n.forEach(t=>{F(t.domain)&&Array.isArray(t.dsaparams)&&t.dsaparams.every(e=>P(e))&&e.push(t)}),e.length>0&&(t.transparency=e)}O(t)||(r.dsa=t)}e.gdpr_consent&&(r.gdpr_consent=e.gdpr_consent),e.gpp_consent&&(r.privacy=e.gpp_consent),e.us_privacy&&(r.us_privacy=e.us_privacy),e.geoOverride&&(r.geo_override={country_code:e.geoOverride.countryCode,postal_code:e.geoOverride.zip});const i=[];let s=0;M(e.tags,e=>{if(!e.utCalled&&e.member===t&&function(e){if(!a)return!0;let t=!1;return M(a,n=>{e.targetId===n&&(t=!0)}),t}(e)){const t=function(e){const t={};if(e.uuid=ie(),!O(e.sizes)){const n=_e(e.sizes);O(n)||(t.sizes=n,t.primary_size=n[0])}if(!O(e.privateSizes)){const n=_e(e.privateSizes);O(n)||(t.private_sizes=n)}if(e.supplyType&&F(e.supplyType)&&(t.supply_type=e.supplyType),e.pubClick&&F(e.pubClick)&&(t.pubclick={url:e.pubClick}),e.pubClickEnc&&F(e.pubClickEnc)&&(t.pubclickenc={url:e.pubClickEnc}),e.reserve&&(P(e.reserve)||Array.isArray(e.reserve))&&(t.reserve=e.reserve),e.extInvCode&&F(e.extInvCode)&&(t.ext_inv_code=e.extInvCode),t.uuid=e.uuid,e.tagId&&(t.id=e.tagId),e.formats&&(t.formats=e.formats),e.position&&("above"===e.position?t.position=1:"below"===e.position?t.position=2:t.position=0),e.invCode&&(t.code=e.invCode),e.prebid&&(t.prebid=e.prebid),e.externalImpId&&(t.external_imp_id=e.externalImpId),!0===e.allowSmallerSizes?t.allow_smaller_sizes=!0:t.allow_smaller_sizes=!1,!0===e.disablePsa&&(t.disable_psa=!0),e.allowedFormats&&(t.ad_types=e.allowedFormats),!0!==e.usePmtRule&&!1!==e.usePmtRule||(t.use_pmt_rule=e.usePmtRule),e.msft_tag&&F(e.msft_tag.msan_kv)&&(t.msft_tag={msan_kv:e.msft_tag.msan_kv}),"boolean"==typeof e.rewardedAd&&(t.rwdd=e.rewardedAd),F(e.globalPlacementId)&&(t.gpid=e.globalPlacementId),!O(e.video)){const n=e.video,a={};n.id&&(a.id=n.id),O(n.mimes)||(a.mimes=n.mimes),n.maxDuration&&(a.maxduration=n.maxDuration),n.minDuration&&(a.minduration=n.minDuration),n.startDelay&&(a.startdelay=n.startDelay),n.skippable&&(a.skippable=n.skippable),n.skipOffset&&(a.skipoffset=n.skipOffset),O(n.playbackMethod)||(a.playback_method=n.playbackMethod),O(n.frameworks)||(a.frameworks=n.frameworks),t.video=a}if(!O(e.native)){if(!O(e.native.ortb)){const n=function(e){try{e.eventtrackers=[{event:1,methods:[1,2]},{event:555,methods:[2]}];const t=JSON.stringify(e);return{ver:e.ver,request:t}}catch(e){te("invalid ortb native structure, please review setup",tagNativeObj.ortb)}}(e.native.ortb);n&&(t.openrtb_native=n)}const n=e.native,a={};n.renderer_id&&(a.renderer_id=n.renderer_id),n.placement_type&&(a.placement_type=n.placement_type);const r={};if(n.id&&(r.id=n.id),n.title&&(r.title=n.title),n.body&&(r.description=n.body),n.sponsoredBy&&(r.sponsored_by=n.sponsoredBy),n.image&&(r.main_image=n.image,O(r.main_image.sizes)&&(r.main_image.sizes=[{}])),n.icon&&(r.icon=n.icon,O(r.icon.sizes)&&(r.icon.sizes=[{}])),n.cta&&(r.ctatext=n.cta),n.desc2&&(r.desc2=n.desc2),n.rating&&(r.rating=n.rating),n.displayUrl&&(r.displayurl=n.displayUrl),n.likes&&(r.likes=n.likes),n.downloads&&(r.downloads=n.downloads),n.price&&(r.price=n.price),n.salePrice&&(r.saleprice=n.salePrice),n.phone&&(r.phone=n.phone),n.address&&(r.address=n.address),n.video&&(r.video={required:n.video.required||!1,min_duration:n.video.minDuration||0,max_duration:n.video.maxDuration}),n.privacySupported&&(r.privacy_supported=!0),n.customTitle1&&(r.customtitle1=n.customTitle1),n.customTitle2&&(r.customtitle2=n.customTitle2),n.customTitle3&&(r.customtitle3=n.customTitle3),n.customTitle4&&(r.customtitle4=n.customTitle4),n.customTitle5&&(r.customtitle5=n.customTitle5),n.customBody1&&(r.custombody1=n.customBody1),n.customBody2&&(r.custombody2=n.customBody2),n.customBody3&&(r.custombody3=n.customBody3),n.customBody4&&(r.custombody4=n.customBody4),n.customBody5&&(r.custombody5=n.customBody5),n.customCta1&&(r.customctatext1=n.customCta1),n.customCta2&&(r.customctatext2=n.customCta2),n.customCta3&&(r.customctatext3=n.customCta3),n.customCta4&&(r.customctatext4=n.customCta4),n.customCta5&&(r.customctatext5=n.customCta5),n.customDisplayUrl1&&(r.customdisplayurl1=n.customDisplayUrl1),n.customDisplayUrl2&&(r.customdisplayurl2=n.customDisplayUrl2),n.customDisplayUrl3&&(r.customdisplayurl3=n.customDisplayUrl3),n.customDisplayUrl4&&(r.customdisplayurl4=n.customDisplayUrl4),n.customDisplayUrl5&&(r.customdisplayurl5=n.customDisplayUrl5),n.customSocialUrl1&&(r.customsocialurl1=n.customSocialUrl1),n.customSocialUrl2&&(r.customsocialurl2=n.customSocialUrl2),n.customSocialUrl3&&(r.customsocialurl3=n.customSocialUrl3),n.customSocialUrl4&&(r.customsocialurl4=n.customSocialUrl4),n.customSocialUrl5&&(r.customsocialurl5=n.customSocialUrl5),n.customImage1&&(r.customimage1=n.customImage1),n.customImage2&&(r.customimage2=n.customImage2),n.customImage3&&(r.customimage3=n.customImage3),n.customImage4&&(r.customimage4=n.customImage4),n.customImage5&&(r.customimage5=n.customImage5),n.customIcon1&&(r.customicon1=n.customIcon1),n.customIcon2&&(r.customicon2=n.customIcon2),n.customIcon3&&(r.customicon3=n.customIcon3),n.customIcon4&&(r.customicon4=n.customIcon4),n.customIcon5&&(r.customicon5=n.customIcon5),n.customSocialIcon1&&(r.customsocialicon1=n.customSocialIcon1),n.customSocialIcon2&&(r.customsocialicon2=n.customSocialIcon2),n.customSocialIcon3&&(r.customsocialicon3=n.customSocialIcon3),n.customSocialIcon4&&(r.customsocialicon4=n.customSocialIcon4),n.customSocialIcon5&&(r.customsocialicon5=n.customSocialIcon5),!O(n.custom)){let e=100,t=[];Array.isArray(n.custom.data)&&n.custom.data.length>0&&(t=t.concat(n.custom.data)),Array.isArray(n.custom.images)&&n.custom.images.length>0&&(t=t.concat(n.custom.images)),t.forEach(t=>{t.id=e++}),r.custom=n.custom}Object.keys(r).length>0&&(a.layouts=[r]),t.ad_types=t.ad_types||[],-1===t.ad_types.indexOf("native")&&t.ad_types.push("native"),t.native=a}if(!O(e.keywords)){const n=ki(e.keywords);t.keywords=n}if(e.forceCreativeId){const n=Number(e.forceCreativeId);isNaN(n)?te("Force Creative must be a number"):(t.force_creative_id=n,Q(`Force Creative in use for targetId: ${e.targetId}`))}return e.nobidIfUnsold&&(t.nobid_if_unsold=!0),e.trafficSourceCode&&(t.traffic_source_code=e.trafficSourceCode.toString()),e.customPubLog&&(F(e.customPubLog)?t.custom_pub_log=e.customPubLog:te("customPubLog must be a string")),t}(e);e.utCalled=!0,e.tagNumber=s,s++,i.push(t)}}),function(e,t,n){if(!ce().includes(Zr))return;let a,r,i,s,o,d;if(!O(ai(Yr)))for(Hr=ai(Yr).split(ei),a=0;a<Hr.length;a++){o=Hr[a].split(ti);const r=Number(o[0]);if(isNaN(r)||void 0===t[r])te(`Invalid ast_override value for index : ${r}`);else{d=null;let a=null;for(s=0;s<n.length;s++)s===r&&(a=n[s].uuid);for(i=0;i<t.length;i++)t[i].uuid===a&&ri(t[i],o[1],e)}}if(!O(ai(Xr)))for(Hr=ai(Xr).split(ei),a=0;a<Hr.length;a++){o=Hr[a].split(ti);let n=null;const s=Object.keys(e);for(i=0;i<s.length;i++)o[0]===s[i]&&(n=e[s[i]].uuid);if(n)for(r=0;r<t.length;r++)t[r].uuid===n&&ri(t[r],o[1],e);else te(`Invalid ast_override value for target div id : ${o[0]}`)}if(!O(ai(Kr)))for(Hr=ai(Kr).split(ei),a=0;a<Hr.length;a++){o=Hr[a].split(ti);let n=!1;for(r=0;r<t.length;r++)d=t[r],d.id===Number(o[0])&&(ri(d,o[1],e),n=!0);n||te(`Invalid ast_override value for tag id : ${o[0]}`)}if(!O(ai(Qr)))for(Hr=ai(Qr).split(ei),a=0;a<Hr.length;a++){o=Hr[a].split(ti);let n=!1;for(r=0;r<t.length;r++)d=t[r],d.code===o[0]&&(ri(d,o[1],e),n=!0);n||te(`Invalid ast_override value for invCode : ${o[0]}`)}}(e.tags,i,n),r.referrer_detection=function(e){const t={},n=e.refererInfo;if(n&&(t.rd_ref=n.referer,t.rd_top=n.reachedTop,t.rd_ifs=n.numIframes,t.rd_stk=Array.isArray(n.stack)?n.stack.join(","):null),e.pageUrlOverride){const n=!!(navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(ipad|iphone|ipod)/g)),a=!(!window.webkit||!window.webkit.messageHandlers);(n||a)&&(t.rd_can=e.pageUrlOverride)}return t}(e),r.tags=i,r.uuid=ie(),r.member_id=t,r.sdk={source:"ast",version:"1.10.56"};let o=null;if(O(e.keywords)?O(e.targetingParams)||(o=ki(e.targetingParams),r.keywords=o):(o=ki(e.keywords),r.keywords=o),O(e.user)||(r.user=function(e){const t={};if(!O(e)){if(e.externalUid&&F(e.externalUid)&&(t.external_uid=e.externalUid),Array.isArray(e.segments)){const n=[];M(e.segments,e=>{P(e)?n.push({id:e}):ii(e)&&e.id&&P(e.id)&&e.value&&P(e.value)&&n.push(e)}),t.segments=n}const n=fe("user.age",e.age,fi);t.age=n;const a=fe("user.gender",e.gender,fi);t.gender=a;const r=fe("user.language",e.language,mi);t.language=r;const i=fe("user.dnt",e.dnt,hi);t.dnt=i;const s=fe("user.coppa",e.coppa,hi);t.coppa=s}return t}(e.user),O(e.user.userIds)||(r.eids=u.flatUserIds(e.user.userIds))),!O(e.content)){const t={},n=fe("content.language",e.content.language,mi);t.language=n,r.request_content=t}if(!O(e.schainConfig)){const t=function(e){let t=gi.STRICT;return void 0!==(n=e)&&(ii(n)||(te(`${oi} the schain config will not be used as it is not an object.`),0))?(F(e.validation)&&-1!==pi.indexOf(e.validation)&&(t=e.validation),t===gi.OFF||function(e,t){const n=["complete","ver","ext","nodes"],a="Detected something wrong within the schain config:";let r="";function i(e){r+=`\n${e}`}function s(){t===gi.STRICT?te(a+r):ee(a+r)}if(!ii(e)&&(i(`schain.config ${li}`),s(),t===gi.STRICT))return!1;if(Object.keys(e).forEach(e=>{-1===n.indexOf(e)&&i(`schain.config.${e} ${ui}`)}),P(e.complete)&&si(e.complete)||i(`schain.config.complete ${ci}`),F(e.ver)||i(`schain.config.ver ${di}`),ue(e,"ext")&&(ii(e.ext)||i(`schain.object.ext ${li}`)),Array.isArray(e.nodes)){const t=["asi","sid","hp","rid","name","domain","ext"];e.nodes.forEach((e,n)=>{ii(e)?(Object.keys(e).forEach(e=>{-1===t.indexOf(e)&&i(`schain.config.nodes[${n}].${e} ${ui}`)}),F(e.asi)||i(`schain.config.nodes[${n}].asi ${di}`),F(e.sid)||i(`schain.config.nodes[${n}].sid ${di}`),P(e.hp)&&si(e.hp)||i(`schain.config.nodes[${n}].hp ${ci}`),ue(e,"rid")&&(F(e.rid)||i(`schain.config.nodes[${n}].rid ${di}`)),ue(e,"name")&&(F(e.name)||i(`schain.config.nodes[${n}].name ${di}`)),ue(e,"domain")&&(F(e.domain)||i(`schain.config.nodes[${n}].domain ${di}`)),ue(e,"ext")&&(ii(e.ext)||i(`schain.config.nodes[${n}].ext ${li}`))):i(`schain.config.nodes[${n}] ${li}`)})}else if(i("schain.config.nodes  should be an Array"),s(),t===gi.STRICT)return!1;return!(r.length>0&&(s(),t===gi.STRICT))}(e.config,t)?e.config:(te(`${oi} due to 'strict' validation setting, the schain object will not be passed.  See the above error for details.`),null)):null;var n}(e.schainConfig);t&&(r.schain=t)}O(e.device)||(r.device=function(e){const t={},n=e.device;if(!O(n)){O(n.useragent)||(t.useragent=n.useragent),O(n.geo)||(t.geo=n.geo),O(n.ip)||(t.ip=n.ip),O(n.deviceType)||(t.devicetype=n.deviceType),O(n.make)||(t.make=n.make),O(n.model)||(t.model=n.model),O(n.os)||(t.os=n.os),O(n.osVersion)||(t.os_version=n.osVersion),O(n.carrier)||(t.carrier=n.carrier);const e=fe("device.connectionType",n.connectionType,fi);t.connectiontype=e,O(n.mcc)||(t.mcc=n.mcc),O(n.mnc)||(t.mnc=n.mnc),O(n.lmt)||(t.lmt=n.lmt),O(n.deviceId)||(t.device_id=n.deviceId);const a=fe("device.devTime",n.devTime,fi);t.devtime=a;const r=fe("device.devHeight",n.devHeight,fi);t.h=r;const i=fe("device.devWidth",n.devWidth,fi);t.w=i;const s=fe("device.ppi",n.ppi,fi);t.ppi=s;const o=fe("device.pxratio",n.pxratio,fi);t.pxratio=o}return t}(e)),O(e.app)||(r.app=function(e){const t={},n=e.app;return O(n)||O(n.appid)||(t.appid=n.appid),t}(e)),O(e.site)||(r.site=function(e){const t={},n=e.site;return O(n)||O(n.id)||(t.id=n.id),t}(e)),e.publisherId&&(r.publisher_id=e.publisherId),e.auctionTimeout&&(r.auction_timeout_ms=e.auctionTimeout),e.auctionDeadline&&(r.auction_deadline_ms=e.auctionDeadline),r.tags=i;const d=le(yi)||apntag.dongle;d&&!apntag.dongle&&(apntag.dongle=d),((le(bi)||apntag.toolkit)&&d||!O(e.toolkit))&&(r.toolkit={enabled:!0,dongle:d||e.toolkit.dongle});const c=le(wi);c&&""!==c&&(apntag.debug_member=c);const l=le(Ii);l&&""!==l&&(apntag.debug_bidder=l);const g="TRUE"===le(vi).toUpperCase();if(g&&""!==g&&(apntag.requests.test=g),apntag.debug&&!O(apntag.dongle)){let e="";apntag.debug_member&&(e=apntag.debug_member);const t=function(e,t,n){const a={};return apntag.debug&&!O(t)&&(a.enabled=!0,e&&(a.member_id=Number(e)),t&&(a.dongle=String(t)),n&&(a.bidder_id=Number(n)),a.debug_timeout=1e3),a}(e,apntag.dongle,apntag.debug_bidder);r.debug=t}return r},Ti=function(e){return function(){try{const t=function(){const t=function(){const t=[];let n;do{try{n=n?n.parent:e;try{t.push({referrer:n.document.referrer||null,location:n.location.href||null,isTop:n===e.top})}catch(a){t.push({referrer:null,location:null,isTop:n===e.top}),ee("Trying to access cross domain iframe. Continuing without referrer and location")}}catch(e){return t.push({referrer:null,location:null,isTop:!1}),t}}while(n!==e.top);return t}(),n=function(){try{if(!e.location.ancestorOrigins)return;return e.location.ancestorOrigins}catch(e){}}();if(n)for(let e=0,a=n.length;e<a;e++)t[e].ancestor=n[e];return t}(),n=t.length-1,a=null!==t[n].location||n>0&&null!==t[n-1].referrer,r=function(e){const t=[];let n,a=null,r=null,i=null,s=null,o=null,d=null;for(n=e.length-1;n>=0;n--){try{r=e[n].location}catch(e){}if(r)a=encodeURIComponent(r),t.push(a),d||(d=a);else if(0!==n){i=e[n-1];try{s=i.referrer,o=i.ancestor}catch(e){}s?(a=encodeURIComponent(s),t.push(a),d||(d=a)):o?(a=encodeURIComponent(o),t.push(a),d||(d=a)):t.push(null)}else t.push(null)}return{stack:t,detectedRefererUrl:d}}(t);return{referer:r.detectedRefererUrl,reachedTop:a,numIframes:n,stack:r.stack}}catch(e){}}}(window);function Si(e,t,n,a,r,i){Array.isArray(n)&&n.length>0?n.forEach(t=>{_i(e,t,a,r,i)}):M(ya[t],t=>{_i(e,t,a,r,i)})}function _i(e,t,n,a,r){0===n&&(e="Failure to contact endpoint. This can be caused by invalid CORS headers or failure of server to respond.");const i=apntag.requests.tags[t];let s,o;i&&(s=Ja(i.adResponse),o=i.tagId);const d=xe(e,t,r,n);Oe.emit(a,t,d,s);const c=new Error(e);r&&r.telemetryData&&(c.telemetryData=r.telemetryData),k.trackCriticalError(N.Gy.L.Ny,c,o)}const Ci=function(e,t,n){{const a=ka,r=function(e){return`${e.url+(e.url.indexOf("?")+1?"&":"?")}cb=apntag.handleCb&q=${encodeURI(e.data)}`}(e),i=re(a,r);apntag.requests.utCalled=!0,i.onload=function(){Q("JSONP fallback used instead of POST.")},i.onerror=function(a){if(!apntag.requests.errorReported){const r=`Unknown script error contacting endpoint over JSONP. Endpoint: ${e.url}`;Si(r,t,n,"-1",N.qY.REQUEST_FAIL,a),te(r)}},i.onreadystatechange=function(a){if(!("loaded"!==i.readyState&&"complete"!==i.readyState||apntag.requests.cbCalled||apntag.requests.errorReported)){apntag.requests.errorReported=!0;const r=`Unknown network error contacting endpoint over JSONP. Endpoint: ${e.url}`;Si(r,t,n,"-1",N.qY.REQUEST_FAIL,a),te(r)}}}},Ai=(e,t,n)=>{try{((e,t)=>{const n=[],a=u.flatUserIds(apntag?.requests?.user?.userIds).map(e=>e?.source);e.forEach(e=>{const{targetId:r,tagId:i,invCode:s,flights:o,isoRTBUsed:d,pageType:c,langMarket:l}=e,u=apntag.requests.tags[r]?.adTrackingId,g=performance.now();apntag.requests.tags[r]&&(apntag.requests.tags[r].flights=o||[],apntag.requests.tags[r].pageType=c||"",apntag.requests.tags[r].langMarket=l||""),apntag.requests.tags[r]?.perfTimings&&(apntag.requests.tags[r].perfTimings.request=g,apntag.firstRequestTracked||(apntag.requests.tags[r].perfTimings.firstRequest=g,apntag.firstRequestTracked=!0,w.trackCustomEvent({type:"firstRequest",targetId:r,batchId:t,invCode:s,performance:g,adTrackingId:u,flights:o,pageType:c,langMarket:l},i))),y.addPlacementData(i,{placementId:i});const p={batchId:t,invCode:s,isoRTBUsed:d,targetId:r,performance:performance.now(),adTrackingId:u,flights:o,pageType:c,langMarket:l};a&&a.length>0&&(p.eids=a),w.trackEvent({type:"adServerRequest",data:p},i),n.includes(r)?w.trackCustomEvent({type:"duplicateTargetId",targetId:r,batchId:t},i):n.push(r);let m,f=document.getElementById(r);if(!f&&apntag.requests.tags[r]&&(m=apntag.requests.tags[r].wcElement),!f&&!m){const e=`Unable to locate ad slot with targetId ${r} for Telemetry logging.`;return w.trackCustomEvent({type:"adSlotNotFound",targetId:r,batchId:t,isWebComponent:!!m},i),void Q(e)}f=f||m;const h=(e=>{if(!e)return void te(`Ad slot with targetId ${e.id} not found.`);const t=e.getBoundingClientRect(),n=t.top,a=t.bottom,r=t.height,i=n<window.innerHeight&&a>=0;if(0===r&&i)return!0;const s=i?Math.min(window.innerHeight,a)-Math.max(0,n):0;return i&&s/r>=.5})(f);let b,v;if(!apntag.requests.disableExpander&&!y.skipLogging){const e=(()=>{const e=document.createElement("div");return e.style.all="unset",e.style.display="block",e.style.width="10000px",e.style.height="10000px",e})();f.appendChild(e),({size:b,position:v}=Ae(r)),f.removeChild(e)}const{size:I,position:k}=Ae(r);w.trackCustomEvent({type:"preRenderAdData",targetId:r,batchId:t,invCode:s,isVisible:h,sizeWithExpander:b,positionWithExpander:v,sizeWithoutExpander:I,positionWithoutExpander:k,isWebComponent:!!m},i)})})(JSON.parse(t.data).tags.map((e,t)=>{const a=(e.keywords||[]).filter(e=>"flight"===e.key).flatMap(e=>e.value),{pageType:r,langMarket:i}=$e(),s=!!e.openrtb_native;return{targetId:n[t],tagId:e.id,invCode:e.code,flights:a,isoRTBUsed:s,pageType:r,langMarket:i}}),e)}catch(e){const t=`Error logging pre-render telemetry: ${e.message}`;te(t),k.trackCriticalError(N.Gy.L.NV,new Error(t))}},Di=function(e,t,n){!function(e,t){M(apntag.requests.tags,e=>{e.utCalled||-1===t.indexOf(e.targetId)||Oe.emit(N.qY.REQUEST,e.targetId)}),ne(`Ad is requested for member ${e}`)}(e,t);const a=apntag.requests;let r=Ei(a,e,va,t);r=function(e){if(he().context&&"AMP-AD"===he().context.tagName){e.is_amp=!0,e.referrer_detection&&(e.referrer_detection.rd_can=he().context.canonicalUrl);const t=he().context.consentSharedData;if(t){const n={consent_string:t.consentString,consent_required:t.consentRequired};e.gdpr_consent=n}}return e}(r);const i=function(e){const t={},n=(()=>{Ca||(Sa===`https://${N.sR.hK}`&&Ba()&&(Sa=`https://${N.sR.sp}`),Sa!==`https://${N.sR.sp}`||Ba()||(Sa=`https://${N.sR.hK}`));let e=Sa;Aa&&(e=`https://${N.sR.HM}`);let t=!1;return M(apntag.requests.tags,e=>{e.prebid&&(t=!0)}),t?e+N.sR.VW:e+N.sR.Yh})();return t.url=n,t.data=JSON.stringify(e),t}(r);O(r.tags)?ee("ast.loadTagsByMemberId: no defined tags at this point so no /UT request will be made"):"withCredentials"in new XMLHttpRequest?function(e,t,n,a){const r=e.data,i=new XMLHttpRequest;Ai(a,e,n),i.onload=function(){let e=null;if(200===this.status)try{e=JSON.parse(this.responseText),apntag.handleCb(e,r,a,n)}catch(e){te(`failed to parse ad response from impbus: ${e.message}`),Si(e.message,t,n,this.status,N.qY.REQUEST_FAIL,e)}else te(`AST encountered an unexpected HTTP response: ${this.status} : ${this.statusText}`),Si(`AST encountered an unexpected HTTP response: ${this.status} : ${this.statusText}`,t,n,this.status,N.qY.REQUEST_FAIL)};const s=performance.now(),o=function(a,r="error"){const i=a.target||this,o=performance.now()-s,d=function(e,t,n){return"timeout"===e.type||t.timeout>0&&n>=t.timeout?"timeout":"abort"===e.type?"abort":!1===navigator.onLine||0===t.status&&!t.responseURL?"network":"unknown"}(a,i,o),c={readyState:i.readyState,status:i.status,statusText:i.statusText?i.statusText.substring(0,100):"",responseType:i.responseType,timeout:i.timeout,withCredentials:i.withCredentials,networkErrorType:d,elapsedMs:Math.round(o),eventType:a.type||r,responseURL:i.responseURL,onlineStatus:navigator.onLine},l=i.status||0;Si(`Error contacting impbus endpoint: ${e.url} [${d}] status:${l} readyState:${i.readyState}`,t,n,l,N.qY.REQUEST_FAIL,{originalEvent:a,telemetryData:c})};i.onerror=o,i.ontimeout=function(e){o(e,"timeout")},i.onabort=function(e){o(e,"abort")},A.addResourceToTrack("adRequestUrl",t=>t.includes(e.url),{serverTimings:!0}),i.open("POST",e.url,!0),i.setRequestHeader("Content-Type","text/plain"),apntag.requests.test&&i.setRequestHeader("X-Is-Test",1),i.withCredentials=!0;try{i.send(r),apntag.requests.utCalled=!0}catch(n){te(`Error making POST request: ${n}`),Ci(e,t)}}(i,e,t,n):Ci(i,e,t)},xi=function(e){M(ya,(t,n)=>{const a=Number(n);if("none"!==n&&isNaN(a))te("Invalid value for member");else{const t="none"===n?n:Number(n),a=280===t&&apntag.requests.use1pEndpoint;Aa=a,apntag.requests.refererInfo=Ti();const r=1e8,i=Math.floor(Math.random()*r);M(e,e=>{const t=apntag.requests.tags[e];if(!t.adTrackingId){const n=Math.floor(Math.random()*r);t.adTrackingId=n,t.batchId=i,w.trackCustomEvent({type:"loadTags",batchId:i,adTrackingId:n,performance:performance.now(),targetId:e}),t.perfTimings={}}}),Di(t,e,i)}})},Mi=function(e){try{e=e||pe(apntag.requests.tags,e=>e.targetId),Array.isArray(e)||(e=[e]);let t=!1,n=!1,a=!1;Bn(apntag.requests,()=>{t=!0,n&&a&&xi(e)}),function(r){Wr=r;const i=()=>{n=!0,t&&a&&xi(e)};let s;function o(e){const t={us_privacy:e?e.uspString:void 0};Wr.us_privacy=t.us_privacy}function d(e){clearTimeout(s),o(),Ie(c(e))}function c(e){e&&ee(`${e} Resuming request without CCPA USP consent information.`),i()}if(Wr.consentManagement&&(Wr.consentManagement.disabled||Wr.consentManagement.usp&&Wr.consentManagement.usp.disabled))return ae("USP Consent module was disabled."),Ie(c());let l=1e4;if(Wr.consentManagement&&P(Wr.consentManagement.timeout)&&(l=Wr.consentManagement.timeout),Br)return o(Br),Ie(c());s=setTimeout(function(){d("CCPA USP CMP workflow exceeded timeout threshold.")},l),function(e,t){const n={};let a;try{a=window.__uspapi||window.top.__uspapi}catch(e){}if(L(a))a("getUSPData",1,e);else{let a,r=window;for(;!a;){try{r.frames.__uspapiLocator&&(a=r)}catch(e){}if(r===window.top)break;r=r.parent}if(!a)return t("CCPA USP CMP not found.");!function(t){function a(e){const t="string"==typeof e.data&&e.data.includes("uspapiReturn")?JSON.parse(e.data):e.data;if(t.__uspapiReturn){const e=t.__uspapiReturn;n[e.callId](e.returnValue,e.success),delete n[e.callId]}}window.__uspapi=function(e,a,r){const i=`${Math.random()}`,s={__uspapiCall:{command:e,version:a,callId:i}};n[i]=r,t.postMessage(s,"*")},Z(window,"message",a,!1),window.__uspapi("getUSPData",1,function(t){X(window,"message",a,!1),e(t)})}(a)}}(function(e){"object"!=typeof e||null===e||"string"!=typeof e.uspString||""===e.uspString?d(`CCPA USP CMP returned unexpected consentObject during lookup process; returned value was (${e})`):(clearTimeout(s),Br=e,o(Br),Ie(c()))},d)}(apntag.requests),function(r){Gr=r;const i=()=>{a=!0,t&&n&&xi(e)},s="__gpp";let o;function d(e){const t={gpp:e&&""!==e.gppString?e.gppString:void 0};e&&e.applicableSections?t.gpp_sid=e.applicableSections:e&&e.applicableSection?t.gpp_sid=e.applicableSection:t.gpp_sid=Vr.applicableSections,t.gpp_sid&&-1===t.gpp_sid[0]&&(t.gpp_sid=void 0),Gr.gpp_consent=t}function c(e,t){clearTimeout(o),d(t),Ie(l(e))}function l(e){e&&ee(`${e} Resuming request without GPP consent information.`),i()}const u=Gr.consentManagement;if(u&&(u.disabled||u.gpp&&u.gpp.disabled))return ae("GPP Consnent module was disabled."),Ie(l());let g=1e4;u&&P(u.timeout)&&(g=Gr.consentManagement.timeout),o=setTimeout(function(){c("GPP CMP workflow exceeded timeout threshold.",Vr)},g),function(e,t){function n(e){return e&&Array.isArray(e.applicableSections)&&e.applicableSections.length>0&&0!==e.applicableSections[0]}function a(e){return e&&Array.isArray(e.applicableSection)&&e.applicableSection.length>0&&0!==e.applicableSection[0]}const r={};let i=!1;const{cmpFrame:o,cmpDirectAccess:d}=function(){let e,t=window,n=!1;for(;;){try{if("function"==typeof t[s]){e=t,n=!0;break}}catch(e){}try{if(t.frames.__gppLocator){e=t;break}}catch(e){}if(t===window.top)break;t=t.parent}return{cmpFrame:e,cmpDirectAccess:n}}();if(!o)return t("GPP CMP not found.");if(d&&L(o[s])){ae("Detected GPP CMP API is directly accessible, calling it now...");const e=o[s]("ping",(e,n)=>{!0===n&&e&&"1.1"===e.gppVersion?(ae("Detected GPP CMP is running version 1.1.  Proceeding with next steps..."),zr="1.1",o[s]("addEventListener",c)):n||t('GPP CMP returned a failed "success" when calling the ping command. Check the state of CMP.')});e&&"1.0"===e.gppVersion&&(ae("Detected GPP CMP is running version 1.0.  Proceeding with next steps..."),zr="1.0",o[s]("addEventListener",c))}else ae("Detected GPP CMP is outside the current iframe where AST is located, calling it now..."),l("ping",o,e=>{!e||"1.0"!==e.gppVersion&&"1.1"!==e.gppVersion||(ae(`Detected GPP CMP is running version${e.gppVersion}.  Proceeding with next steps...`),zr=e.gppVersion,l("addEventListener",o,u))});function c(r){if(r)if(ae("Received a response from GPP CMP for eventlistener",r),r.pingData&&"error"===r.pingData.cmpStatus)t("CMP returned with a cmpStatus:error response.  Please check CMP setup.");else if("1.0"===zr){if("sectionChange"===r.eventName||"loaded"===r.pingData.cmpStatus&&"visible"!==r.pingData.cmpDisplayStatus){const t=o[s]("getGPPData");ae("Received a response from GPP CMP for getGPPData",t),e(t)}else if(!Vr.applicableSections){const e=o[s]("getGPPData");ae("Called GPP CMP early to determine the value of applicableSections, value returned from CMP: ",e),n(e)?Vr.applicableSections=e.applicableSections:a(e)&&(Vr.applicableSections=e.applicableSection)}}else"1.1"===zr&&("sectionChange"===r.eventName||"signalStatus"===r.eventName&&"ready"===r.data||r.pingData&&"loaded"===r.pingData.cmpStatus&&"visible"!==r.pingData.cmpDisplayStatus?(ae("Received a desired event response from GPP CMP, pingData was: ",r.pingData),e(r.pingData)):Vr.applicableSections||(ae("Called GPP CMP early to determine the value of applicableSections, value returned from CMP: ",r.pingData),n(r.pingData)&&(Vr.applicableSections=r.pingData.applicableSections)))}function l(e,t,n,a){const o=`${s}Call`;i||(window.addEventListener("message",function(e){const t=`${s}Return`,n="string"==typeof e.data&&e.data.includes(t)?JSON.parse(e.data):e.data;if(n[t]&&n[t].callId){const e=n[t];r.hasOwnProperty(e.callId)&&r[e.callId](e.returnValue)}},!1),i=!0),ae("Making a postMessage call to the CMP for command: ",e);const d=Math.random().toString(),c={[o]:{command:e,parameter:a,version:"1.0"===zr?1:zr,callId:d}};r[d]=n,t.postMessage(c,"*")}function u(a){a&&(ae("Received a response from GPP CMP for eventlistener",a),"error"===a.pingData.cmpStatus?t("CMP returned with a cmpStatus:error response.  Please check CMP setup."):"1.0"===zr?"sectionChange"===a.eventName||"loaded"===a.pingData.cmpStatus&&"visible"!==a.pingData.cmpDisplayStatus?l("getGPPData",o,p):Vr.applicableSections||l("getGPPData",o,g):"1.1"===zr&&("sectionChange"===a.eventName||"signalStatus"===a.eventName&&"ready"===a.data||a.pingData&&"loaded"===a.pingData.cmpStatus&&"visible"!==a.pingData.cmpDisplayStatus?(ae("Received a desired event response from GPP CMP, pingData was: ",a.pingData),e(a.pingData)):Vr.applicableSections||(ae("Called GPP CMP early to determine the value of applicableSections, value returned from CMP: ",a.pingData),n(a.pingData)&&(Vr.applicableSections=a.pingData.applicableSections))))}function g(e){ae("Called GPP CMP early to determine the value of applicableSections, value returned from CMP: ",e),n(e)?Vr.applicableSections=e.applicableSections:a(e)&&(Vr.applicableSections=e.applicableSection)}function p(t){ae("Received a response from GPP CMP for getGPPData",t),e(t)}}(function(e){e&&"object"==typeof e&&null!==e&&"string"==typeof e.gppString&&(Array.isArray(e.applicableSections)||Array.isArray(e.applicableSection))?(clearTimeout(o),d(e),Ie(l())):c(`GPP CMP returned unexpected consentObject during lookup process; returned value was (${e})`)},c)}(apntag.requests)}catch(e){const t=`Error during loadTags() call: ${e.message}`;te(t)}};function $i(e){if(Q(`getTag called for tag ${e}`),Ee(e))return e&&ba[e]?ba[e]:void 0;te(`the ${e} tag is not defined.`,N.$9.Z)}const qi=function(e){const t={};return 0===e.length?apntag.requests.tags:(M(apntag.requests.tags,(n,a)=>{for(let r=0;r<e.length;r++)e[r]===a&&(t[a]=n)}),t)};function Ri(e,t){ka.document.querySelectorAll(`[${e}${null!==t?`="${t}"`:""}]`).forEach(e=>e.remove())}const Oi=function(e){const t=qi(e);M(t,(e,n)=>{M(ha,e=>{if(n===e){const a=ka.document,r=t[n].wcElement||a.getElementById(e);if(!r)return;for(;r.hasChildNodes();)r.removeChild(r.firstChild)}})}),ka.document.querySelectorAll("[data-anxtracker-usersync]").forEach(e=>e.remove()),e.length>0?M(e,e=>{Ri("data-anxtracker",e)}):Ri("data-anxtracker",null)};y.addSessionData({}),(e=>{if(y.inited)throw Error("Telemetry is already inited.");var t;y.setSampleRate(e),y.inited=!0,(t=k).isServiceAlreadyInited("error")||(window.addEventListener("error",e=>{g({url:e.filename})&&t.trackCriticalError("unhandled",e)}),window.addEventListener("unhandledrejection",e=>{const n=function(e=""){return e.match(/http(s?):\/\/\S+/)?.[0]}(e.reason instanceof Error?e.reason.stack:void 0);n&&g({url:n})&&t.trackCriticalError("unhandled.rejection",e.reason)})),f()?.includes("give_me_error_please")&&setTimeout(()=>{throw new Error("I'm error from the prod")},1e3),A.init(undefined),w.trackEvent({type:"sdkInit",data:void 0})})(.001),w.trackCustomEvent({type:"ast.init",performance:performance.now()});const Pi=N.Ve.s6,Li=N.Ve.G_,Fi=N.ZJ.ZH,Ni=N.ZJ.uk,ji=N.AD.JN;Z(ka,"message",function(e){if(e.origin!==we()||"string"!=typeof e.data)return;let t;ae("Data sent from creative",e.data);try{t=JSON.parse(e.data)}catch(t){return void("nobid"===e.data?Q("No bid response returned"):te(`Invalid data from creative: ${e.data}`))}if(ue(t,"eventType"))"adError"===t.eventType&&window.apntag.recordErrorEvent(t.exception,t.targetId);else switch(t.name){case"expand":!function(e){{Q("Expand iframe started by host");let t,n,a,r,i=!1,s=!1,o=0,d=0,c=0,l=0,u=he().document.getElementById(N.H3.C+e.targetId);const g=dt.getInstance().getIframe(e.targetId),p=g.iframe.style;u||(u=g.iframe.parentNode);const m=u.style;m.display="";let f=parseInt(m.width,10),h=parseInt(m.height,10);if(isNaN(f)&&(f=0),isNaN(h)&&(h=0),e.bounds.multiDir?(n=fe("data.bounds.left",e.bounds.left,Wn),r=fe("data.bounds.right",e.bounds.right,Wn),t=fe("data.bounds.top",e.bounds.top,Wn),a=fe("data.bounds.bottom",e.bounds.bottom,Wn),c=f+n+r,l=h+t+a,t?(d=-1*t,s=!0):d=0,n?(o=-1*n,i=!0):o=0):(o=e.bounds.x,d=e.bounds.y,i=o<0,s=d<0,c=i?f+-1*o:f+o,l=s?h+-1*d:h+d),c<=f&&l<=h)return;p.width=`${c}px`,p.height=`${l}px`,i&&(p.left=`${o}px`),s&&(p.top=`${d}px`),p.zIndex=N.l2.D,p.position="relative",m.position="relative",e.bounds.push?(m.width=`${c}px`,m.height=`${l}px`):(m.width=`${f}px`,m.height=`${h}px`);const y=function(){!function(e,t,n){{const a=n.iframe.contentWindow,r={};r.targetId=t.targetId,r.status=e,r.geom=Jn(t.targetId,n.iframe),ft(a,JSON.stringify(r),we())}}(N.l2.X.gH,e,g)};e.ext&&"number"==typeof e.ext.tweenTime?function(e,t,n,a){{const r=t.style;r.transition=`height ${e.ext.tweenTime}ms ease`,r.height=n,r["overflow-y"]="hidden",Z(t,"transitionend",()=>{"function"==typeof a&&a()})}}(e,g.iframe,l,y):y()}}(t);break;case"collapse":!function(e){{Q("Collapse iframe started by host");const t=he(),n=dt.getInstance().getIframe(e.targetId),a=n.iframe.style;let r=t.document.getElementById(N.H3.C+e.targetId);r||(r=n.iframe.parentNode);const i=r.style;let s=n.originalWidth,o=n.originalHeight;e.ext&&(0===e.ext.width&&(s=0),0===e.ext.height&&(o=0)),a.left="",a.top="0px",i.width=`${s}px`,a.width=`${s}px`,i.height=`${o}px`,a.height=`${o}px`,a.zIndex="";const d=n.iframe.contentWindow,c={};c.targetId=e.targetId,c.geom=Jn(e.targetId,n.iframe),c.status=N.l2.X.g,ft(d,JSON.stringify(c),we())}}(t);break;case"cmp":!function(e){{function t(){const t=apntag.requests.gdpr_consent,n=dt.getInstance().getIframe(e.targetId).iframe.contentWindow,a={targetId:e.targetId,gdpr_consent:t,status:N.l2.X.dl};ft(n,a,we())}if(apntag.requests.gdpr_consent)return void t();Bn(apntag.requests,t)}}(t);break;case"resizeAd":apntag.resizeAd(t.targetId,t.cmd);break;case"mediatedNative":apntag.handleMediationBid(t.targetId);break;case"emitEvent":apntag.emitEvent.apply(null,t.cmd);break;case"message":default:break;case"updateRenderStatus":lt.setRendererStatus(`${t.rId}_${t.targetId}`,t.status);break;case"setParentDivStyleDefaultProp":{const e=apntag.requests.tags[`${t.targetId}`].wcElement,n=e?e.querySelector(`#${N.H3.C}${t.targetId}`):document.getElementById(N.H3.C+t.targetId);M(t.cmd,(e,t)=>{""===n.style[t]&&(n.style[t]=e)});break}}}),wa.expansionByPush=!1,wa.expansionByOverlay=!0,wa.readCookie=!1,wa.writeCookie=!1,wa.sandbox=!1,function(){if(ot)try{Z(aa.document,"apntag_iTunesLaunch",ra)}catch(e){}}(),Z(window,"message",e=>{try{const t=e.data;if("perfObserverError"===t.eventName)return te(`Performance observer error in iframe for ${t.targetId}: ${t.error}`),void k.trackCriticalError(N.Gy.L.im,new Error(`Error in iframe performance observer for ${t.targetId}: ${t.error}`));if(t?.targetId&&t.eventName&&"first-contentful-paint"===t.eventName){const e=t.targetId,n=apntag.requests.tags[e];if(!n)return;const a=n.adTrackingId,r=`${e}_${a}`,i=Qe[r];if(et[r])return;if(ae(`Received first-contentful-paint event for targetId: ${e}`),i){const s=performance.now()-i;n.perfTimings&&(n.perfTimings.creativeData={creativeId:n.adResponse.ads[0].creative_id,auctionId:t.auctionId,adomain:t.adomain,buyerMemberId:t.buyerMemberId,msxCreativeId:t.msxCreativeId,bidderId:t.bidderId},n.perfTimings.creativeRenderTime=s),ae(`Render time for ${e}: ${s}ms (first-contentful-paint)`),et[r]=!0;const o=n.tagId||n.adResponse.tag_id;w.trackCustomEvent({type:"creativeRenderTime",targetId:e,adTrackingId:a,batchId:t.batchId,renderTime:s,paintEvent:"first-contentful-paint",performance:performance.now(),adomain:t.adomain,buyerMemberId:t.buyerMemberId,msxCreativeId:t.msxCreativeId,crids:t.crids,auctionId:t.auctionId,bidderId:t.bidderId},o,{sampling:.01});const d=apntag.getPerfTimings(e);if(d){const{sdkInit:n,firstRequest:r,responseTime:i,creativeRenderTime:s,flights:c,invCode:l,pageType:u,langMarket:g,creativeData:{bidderId:p,creativeId:m,buyerMemberId:f,adomain:h}={}}=d;w.trackCustomEvent({type:"perfTimings",targetId:e,adTrackingId:a,batchId:t.batchId,performance:performance.now(),sdkInit:n,firstRequest:r,responseTime:i,creativeRenderTime:s,flights:c,invCode:l,bidderId:p,creativeId:m,buyerMemberId:f,adomain:h,pageType:u,langMarket:g},o,{sampling:.01})}delete Qe[r],setTimeout(()=>{delete et[r]},6e4)}}}catch(e){te("Error processing paint event message:",e),k.trackCriticalError(N.Gy.L.PL,new Error(`Error processing paint event message: ${e}`))}});try{console.info?console.info("AST library loaded: 1.10.56"):console.log("AST library loaded: 1.10.56")}catch(e){}ka.apntag=typeof ka.apntag!==Fi?ka.apntag:{};const Ui=ka.apntag;function Bi(e){e.length>0?(M(e,e=>{e&&!Ee(e)&&ee(`${e} is not defined.`,N.$9.Z)}),M(Ui.requests.tags,t=>{const n=t.targetId;if(e.includes(Ui.requests.tags[n].targetId)){const e=Pa(),t=Ra();0!==Object.keys(e).length&&(delete e[n],La(e)),0!==Object.keys(t).length&&(delete t[n],Oa(t)),delete Ui.requests.tags[n],dt.getInstance().removeIframe(n),ae(`Removed tag with targetId '${n}' from AST internals.`)}}),0===Object.keys(Ui.requests.tags).length&&(Ui.requests={},Ui.requests.tags={})):(Ui.requests={},Ui.requests.tags={},La({}),Oa({}),dt.getInstance().resetInstance(),ae("Removed all tags from AST internals."))}function Wi(e){let t={};return M(Ui.requests.tags,n=>{e!==n.uuid&&e!==n.targetId||(t=n)}),t}function zi(e,t,n="all"){const a=t instanceof Element,r=a?t.id:t,i=a?t:document.getElementById(t),s=Wi(e.uuid);ae(`Firing ${n} trackers for ${e.tagId}`),r&&ae(`Loading ${n} trackers in DOM element ${r}`),"all"!==n&&"imp"!==n||w.trackEvent({type:E,data:{enableSafeFrame:!(!s.enableSafeFrame&&!s.alwaysUseXDomainIframe),batchId:e.batchId,performance:performance.now(),adTrackingId:s?.adTrackingId}},e.tagId);try{const t=e?.native?.ortb;t&&("all"!==n&&"imp"!==n||Vi(t.imptrackers,i),"all"!==n&&"js"!==n||!Gi(t.jstracker)||Hi(t.jstracker,e,i),Array.isArray(t.eventtrackers)&&t.eventtrackers&&t.eventtrackers.forEach(t=>{"all"!==n&&"imp"!==n||1!==t.event||1!==t.method?"all"!==n&&"js"!==n||1!==t.event||2!==t.method||!Gi(t.url)||Hi(t.url,e,i):Vi(t.url,i)})),"all"!==n&&"imp"!==n||Vi(e?.native?.impressionTrackers,i),"all"!==n&&"js"!==n||!Gi(e?.native?.javascriptTrackers)||Hi(e.native.javascriptTrackers,e,i)}catch(t){te("Encountered error loading imp or js tracker for adObj:",e,t)}("all"===n||"view"===n)&&s&&s.trackingManagement&&s.trackingManagement.native&&s.trackingManagement.native.loadViewScriptAt===N.nP.G.D&&(ae(`Loading native viewability script ${"all"===n?"during fireImpressionTrackers":"during fireViewabilityTrackers"} for ${s.targetId}`),Za(s.adResponse.ads[0],e,s.targetId,i))}function Vi(e,t){const n=t||ka.document.body;Array.isArray(e)&&e.length?e.forEach(e=>{se(n,e)}):"string"==typeof e&&e&&se(n,e)}function Gi(e){return!("string"!=typeof e||!e)}function Hi(e,t,n){"string"==typeof e&&e&&tt({strategy:"WithContentAndAttributes",data:{content:e,attributes:{"data-anxtracker":t.targetId||""}},domElement:n})}function Ji(e,t){const n=(e?.native?.clickTrackers||[]).concat(e?.native?.ortb?.link?.clicktrackers||[]);w.trackEvent({type:T},e.tagId);const a=ur(t);a?.recordAdClick(),n&&n.length&&(ae("Firing click trackers for",e.tagId),n.forEach(e=>{se(ka.document.body,e)}))}Ui.anq=Ui.anq||[],Ui.debug=Ui.debug||!1,Ui.dongle=Ui.dongle||void 0,Ui.loaded=!0,Ui.requests=Ui.requests||{},Ui.requests.keywords=Ui.requests.keywords||{},ja(N.sR.hK),Ui.requests.tagsOnPageCount=Ui.requests.tagsOnPageCount||0,Ui.requests.waitOnTagsCount=Ui.requests.waitOnTagsCount||0,Ui.requests.showTagDefinedMap=Ui.requests.showTagDefinedMap||Pa(),Ui.perfTimings=Ui.perfTimings||{sdkInit:performance.now()},Ui.getPerfTimings=function(e){const t=[],n=Ui.perfTimings;if(!Ui.requests.tags||0===Object.keys(Ui.requests.tags).length)return ee("[AST Perf] No tags found to retrieve performance data."),n.sdkInit?[{sdkInit:n.sdkInit,status:"No tags defined."}]:[];if(e)return Ui.requests.tags[e]?Me(e,n):(ee(`[AST Perf] No tag found with targetId: ${e}`),{sdkInit:n.sdkInit,status:`No tag defined for targetId: ${e}`});for(const e in Ui.requests.tags)if(Object.hasOwnProperty.call(Ui.requests.tags,e)){const a=Me(e,n);t.push(a)}return 0===t.length?(ee("[AST Perf] No performance data found for any tags."),n.sdkInit?[{sdkInit:n.sdkInit,status:"No tag timings found."}]:[]):t},Ui.highlightAd=function(e){if(ae("Invoking apntag.highlightAd",arguments),w.trackCustomEvent({type:"apntag.highlightAd"}),e){const t=Ra()[e];t&&(t.style.border="3px solid #e67300")}},Z(window,"message",e=>{e.data&&e.data.eventName&&Object.values(N.eZ).includes(e.data.eventName)&&Ui.recordTagPerformanceEvent(e.data,e.data.targetId)}),Ui.anq.push=function(e){e.call()},Ui.setEndpoint=function(e,t){ae("Invoking apntag.setEndpoint",arguments),w.trackCustomEvent({type:"apntag.setEndpoint"}),ja(e,t)},Ui.setPageOpts=function(e){ae("Invoking apntag.setPageOpts",arguments),w.trackCustomEvent({type:"apntag.setPageOpts",performance:performance.now()}),(e=>{if(e){if(e.member&&(apntag.requests.member=Number(e.member)),e.use1pEndpoint&&(apntag.requests.use1pEndpoint=!0),e.targetingParams&&(apntag.requests.targetingParams=e.targetingParams,ee("targetingParams will be deprecated soon. Please use keywords instead")),e.keywords&&(apntag.requests.keywords=e.keywords),e.user&&(apntag.requests.user=e.user),e.app&&(apntag.requests.app=e.app),e.device&&(apntag.requests.device=e.device),e.geoOverride){const t=function(e){const t=e.countryCode;if("string"!=typeof t||2!==t.length)return void ee("Ignoring geoOveride options, Invalid country code, it should be of type String and of 2 characters.");const n=e.zip;if(!("string"!=typeof n||n.length<1))return{countryCode:t.toUpperCase(),zip:n};ee("Ignoring geoOveride options, Invalid zip code, it should be of type String and of atleast 1 character.")}(e.geoOverride);t&&(apntag.requests.geoOverride=t)}if(e.site&&(apntag.requests.site=e.site),e.content&&(apntag.requests.content=e.content),e.disablePsa&&(apntag.requests.disablePsa=!0),apntag.requests.enableSafeFrame=!1,e.enableSafeFrame&&(Ia(),apntag.requests.enableSafeFrame=!0),apntag.requests.enableSafeFrameForDisplayAds=!1,e.enableSafeFrameForDisplayAds&&(Ia(),apntag.requests.enableSafeFrameForDisplayAds=!0),(e.publisherId||null===e.publisherId)&&(apntag.requests.publisherId=e.publisherId),e.consentManagement&&(apntag.requests.consentManagement=e.consentManagement),(e.auctionTimeout||null===e.auctionTimeout)&&(apntag.requests.auctionTimeout=e.auctionTimeout),(e.auctionDeadline||null===e.auctionDeadline)&&(apntag.requests.auctionDeadline=e.auctionDeadline),e.enableMediationEvents&&(apntag.requests.enableMediationEvents=!0),e.us_privacy&&(F(e.us_privacy)?apntag.requests.us_privacy=e.us_privacy:ee("Ignoring us_privacy, it should be a string")),e.pageUrl&&(apntag.requests.pageUrlOverride=e.pageUrl),e.test&&(apntag.requests.test=!0),e.schain&&(apntag.requests.schainConfig=e.schain),e.dsa&&(apntag.requests.dsa=e.dsa),e.msft&&(apntag.requests.msft=e.msft),e.loadOutstreamUpgradeUrl&&(apntag.requests.loadOutstreamUpgradeUrl=e.loadOutstreamUpgradeUrl),e.trackingManagement){const t=e.trackingManagement;if(t.native&&t.native.loadViewabilityScriptAt){const e=F(t.native.loadViewabilityScriptAt)?t.native.loadViewabilityScriptAt.toLowerCase():null;!e||e!==N.nP.G.W&&e!==N.nP.G.D?ee('Ignoring trackingManagement.native.loadViewabilityScriptAt, it should be either "impression" or "adResponse"'):(apntag.requests.trackingManagement=apntag.requests.trackingManagement||{},apntag.requests.trackingManagement.native={loadViewScriptAt:e})}if(t.userSync){const e={};P(t.userSync.syncDelay)&&(e.syncDelay=t.userSync.syncDelay),"boolean"==typeof t.userSync.syncEnabled&&(e.syncEnabled=t.userSync.syncEnabled),P(t.userSync.publisherId)&&(e.publisherId=t.userSync.publisherId),P(t.userSync.sellerId)&&(e.sellerId=t.userSync.sellerId),apntag.requests.trackingManagement=apntag.requests.trackingManagement||{},apntag.requests.trackingManagement.userSync=e}}if(Xa(e),e.renderingManagement){const t=e.renderingManagement;apntag.requests.renderingManagement=apntag.requests.renderingManagement||{},"boolean"==typeof t.insertWrapperDiv&&(apntag.requests.renderingManagement.insertWrapperDiv=t.insertWrapperDiv),"boolean"==typeof t.sandboxAdIframe&&(apntag.requests.renderingManagement.sandboxAdIframe=t.sandboxAdIframe),Array.isArray(t.sandboxAttributes)&&(apntag.requests.renderingManagement.sandboxAttributes=t.sandboxAttributes)}"disableExpander"in e&&(apntag.requests.disableExpander=e.disableExpander),"boolean"==typeof e.use3pMeasurementScripts&&(t=e.use3pMeasurementScripts,$a=!!t)}var t})(e)},Ui.defineTag=function(e){ae("Invoking apntag.defineTag",arguments),y.addPlacementData(e.tagId,{placementId:e.tagId}),w.trackCustomEvent({type:"apntag.defineTag",performance:performance.now()},e.tagId);const t=function(e){const t=function(e){if(e.rid&&(apntag.requests.keywords.rid=e.rid),e.provider_id&&(apntag.requests.keywords.provider_id=e.provider_id),e.debug&&(apntag.debug=e.debug),e.astToolkit&&e.astDongle&&(apntag.requests.toolkit={enabled:!0,dongle:e.astDongle}),e.size)te("Size is deprecated, please use sizes instead.");else if(e.member?e.member=Number(e.member):e.member=apntag.requests.member,e.member||(e.member="none"),e.tagId||e.invCode&&e.member){if(e.sizeMapping&&!ar(e))return void te(`tag not mapped to any sizes for device width: ${e.targetId}`);try{const t=e.targetId,n=function(e,t){const n=e.member;return apntag.requests=apntag.requests||{},apntag.requests.tags=apntag.requests.tags||{},apntag.requests.utCalled=apntag.requests.utCalled||!1,apntag.requests.hasLeft=apntag.requests.hasLeft||!1,apntag.requests.cbCalled=apntag.requests.cbCalled||!1,apntag.requests.enableSafeFrame&&(e.enableSafeFrame=!0),void 0===e.enableSafeFrameForDisplayAds&&(e.enableSafeFrameForDisplayAds=apntag.requests.enableSafeFrameForDisplayAds),e.safeframe=er(wa)||{},ue(e,"safeframeConfig")&&(ue(e.safeframeConfig,"allowExpansionByPush")&&(e.safeframe.expansionByPush=e.safeframeConfig.allowExpansionByPush),ue(e.safeframeConfig,"allowExpansionByOverlay")&&(e.safeframe.expansionByOverlay=e.safeframeConfig.allowExpansionByOverlay),ue(e.safeframeConfig,"sandbox")&&(e.safeframe.sandbox=e.safeframeConfig.sandbox),ue(e.safeframeConfig,"meta")&&(e.safeframe.meta=e.safeframeConfig.meta)),apntag.requests.tags[t]=e,apntag.requests.tags[t].utCalled=apntag.requests.tags[t].utCalled||!1,apntag.requests.tags[t].showTagCalled=apntag.requests.tags[t].showTagCalled||!1,apntag.requests.tags[t].displayed=apntag.requests.tags[t].displayed||!1,apntag.requests.tags[t].initialHeight=1,apntag.requests.tags[t].initialWidth=1,apntag.requests.tags[t].on=apntag.onEvent||void 0,apntag.requests.tags[t].off=apntag.offEvent||void 0,apntag.requests.tags[t].setSizes=apntag.setSizes||void 0,apntag.requests.tags[t].modifyTag=apntag.modifyTag||void 0,apntag.requests.trackingManagement?apntag.requests.tags[t].trackingManagement=apntag.requests.trackingManagement:(apntag.requests.tags[t].trackingManagement={native:{loadViewScriptAt:nr},mobileOmidImpTracking:!1},Ie(Ya)),apntag.requests.tags[t].renderingManagement||(apntag.requests.tags[t].renderingManagement={}),["insertWrapperDiv","sandboxAdIframe","sandboxAttributes"].forEach(n=>{e.renderingManagement&&ue(e.renderingManagement,n)?apntag.requests.tags[t].renderingManagement[n]=e.renderingManagement[n]:apntag.requests.renderingManagement&&ue(apntag.requests.renderingManagement,n)&&(apntag.requests.tags[t].renderingManagement[n]=apntag.requests.renderingManagement[n])}),apntag.requests.tags[t].refresh=function(){return apntag.refresh(this.targetId)},apntag.requests.tags[t].setKeywords=function(e,t){return apntag.setKeywords(this.targetId,e,t)},ya[n]=typeof ya[n]===tr?[]:ya[n],ya[n].push(e.targetId),Pa()[e.targetId]&&(apntag.requests.tags[t].showTagCalled=!0),apntag.requests.tags[t]}(e,t);return Q(`defineTag called for: ${t}`),apntag.requests&&!0===apntag.requests.utCalled&&!apntag.requests.tags[t].utCalled&&Q("A placement was loaded after ut call was started. These ad calls will not be coordinated"),n}catch(e){te(`buildAdTagContainer: ${e.message}`)}}else te(`tagId or (invCode & memberId) should be defined for targetId: ${e.targetId}`)}(e);if(!t)return void te(`No ad will be requested for targetId: ${e.targetId}`);if(va.push(t),ba[t.targetId])return ba[t.targetId];const n={targetId:t.targetId,on:t.on,off:t.off,modifyTag:t.modifyTag,setKeywords:t.setKeywords};return ba[t.targetId]=n,n}(e);return t},Ui.getTag=function(e){if(e&&!Ee(e))return void te(`${e} is not defined.`,N.$9.Z);let t,n;return e?(n=$i(e),t=ke(Ui.requests.tags[e],n)):(t={},Ui.requests.tags?Object.keys(Ui.requests.tags).forEach(e=>{n=$i(e),t[e]=ke(Ui.requests.tags[e],n)}):ee("getTag is called before defineTag function, so the tag object will be empty.")),t},Ui.getAdWrap=function(e){if(ae("Invoking apntag.getAdWrap",arguments),w.trackCustomEvent({type:"apntag.getAdWrap",tagId:e}),Ee(e))return e&&Ui.requests.tags&&Ui.requests.tags[e]&&Ui.requests.tags[e].adWrap?Ui.requests.tags[e].adWrap:void 0;te(`the ${e} tag is not defined.`,N.$9.Z)},Ui.setSizes=function(e,t){ae("Invoking apntag.setSizes",arguments),w.trackCustomEvent({type:"apntag.setSizes"},e),arguments.length<2&&(t=e,e=this.targetId),Ee(e)?Ui.requests.tags[e].sizes=t:te(`the ${e} tag is not defined.`,N.$9.Z)},Ui.modifyTag=function(e,t){ae("Invoking apntag.modifyTag",arguments),w.trackCustomEvent({type:"apntag.modifyTag"});const n={};arguments.length<2&&(t=e,e=this.targetId),Ee(e)?((t.sizes||t.sizeMapping)&&ar(t,e),M(Ui.requests.tags[e],(e,t)=>{n[t]=e}),M(t,(e,t)=>{n[t]=e}),Ui.requests.tags[e]=n):te(`the ${e} tag is not defined.`,N.$9.Z)},Ui.setKeywords=function(e,t,n){ae("Invoking apntag.setKeywords",arguments),w.trackCustomEvent({type:"apntag.setKeywords",targetId:e});const a={};"object"==typeof t&&null!==t?Ee(e)?(M(Ui.requests.tags[e],(e,t)=>{a[t]=e}),a.keywords=a.keywords||{},"object"==typeof n&&null!==n&&!0===n.overrideKeyValue?M(t,(e,t)=>{a.keywords[t]=e}):M(t,(e,t)=>{ue(a.keywords,t)?Array.isArray(a.keywords[t])?a.keywords[t]=a.keywords[t].concat(e):a.keywords[t]=[a.keywords[t]].concat(e):a.keywords[t]=e}),Ui.requests.tags[e]=a):te(`the ${e} tag is not defined.`,N.$9.Z):ee("unable to set keywords it should be an object")},Ui.onEvent=function(e,t,n){if(ae("Invoking apntag.onEvent",arguments),2===arguments.length&&"function"==typeof t&&typeof this.targetId===Fi)n=t,t="*";else if(arguments.length<3&&(n=t,t=this.targetId,!Ee(t)))return void te(`the ${t} tag is not defined.`,N.$9.Z);Oe.on(e,t,n)},Ui.offEvent=function(e,t,n){if(ae("Invoking apntag.offEvent",arguments),1===arguments.length&&typeof this.targetId===Fi)t="*";else if(arguments.length<2&&(t=this.targetId,!Ee(t)))return void te(`the ${t} tag is not defined.`,N.$9.Z);if(Array.isArray(e))for(let a=0;a<e.length;a++)Oe.off(e[a],t,n);else Oe.off(e,t,n)},Ui.loadTags=function(e){ae("Invoking apntag.loadTags",arguments),w.trackCustomEvent({type:"apntag.loadTags",tagIds:e,performance:performance.now()}),Mi(e)},Ui.getAstSessionId=function(){ae("Invoking apntag.getSessionId");const e=y.getSessionData().sessionUuid;return w.trackCustomEvent({type:"apntag.getSessionId"}),e},Ui.refresh=function(e){ae("Invoking apntag.refresh",arguments),w.trackCustomEvent({type:"apntag.refresh",targetId:e,performance:performance.now()}),function(e){apntag.requests.utCalled=!1,apntag.requests.hasLeft=!1,apntag.requests.cbCalled=!1,apntag.requests.errorReported=!1,Oi(e),M(qi(e),e=>{e.utCalled=!1,e.displayed=!1,e.isMediated=!1,e.isBannerMediation=!1,e.isVideoMediation=!1,e.ad={},e.adTrackingId="",e.batchId=""});try{Mi()}catch(e){te(`refreshTags ${e.message}`)}}(ge(e))},Ui.clearRequest=function(e){ae("Invoking apntag.clearRequest",e||arguments),w.trackCustomEvent({type:"apntag.clearRequest",targetId:e}),Bi(ge(e))},Ui.removeTag=function(e){const t=ge(e);t.forEach(e=>{Ui.requests.tags[e]&&(Ui.requests.tags[e].startRemove=!0)}),ae("Invoking apntag.removeTag",e||arguments),w.trackCustomEvent({type:"apntag.removeTag",targetId:e}),Oi(t),Bi(t)},Ui.resizeAd=function(e,t,n={}){ae("Invoking apntag.resizeAd",arguments),w.trackCustomEvent({type:"apntag.resizeAd",targetId:e}),function(e,t,n={}){let a=0,r=0;Array.isArray(t)&&2===t.length?(r=t[0],a=t[1]):te("resizeAd must be invoked with a (targetId,[width, height])");const i=Ra()[e];if(!i)return void te(`Failed to find target for resizeAd : ${e}`);const{resizeAdParentDiv:s}=n,o=apntag.requests.tags[e].wcElement,d=$i(e),c=ve(d),l=o?o.querySelector(`#${c}`):ka.document.getElementById(c),u=apntag.requests.tags[e];if(!l)return void te(`Failed to find target for resizeAd: ${e}`);let g=!1;if("boolean"==typeof s?g=s:u&&"boolean"==typeof u.resizeAdParentDiv&&(g=u.resizeAdParentDiv),g&&(l.style.height=`${a}px`,l.style.width=`${r}px`,l.style.height=a,l.style.width=r),l.style.height=a,l.style.width=r,i.height=`${a}px`,i.width=`${r}px`,i.height=a,i.width=r,u&&!u.enableSafeFrame&&("none"!==l.style.display&&0===a&&0===r?(u.styleDisplay=l.style.display,l.style.display="none"):"none"===l.style.display&&0!==a&&0!==r&&(l.style.display=u.styleDisplay||"inline")),Q(`ResizeAd successful for targetId: ${e}`),u&&u.isMediated&&i.contentWindow){const e=he(),t=`${e.location.protocol}//${e.location.host}`,n={name:"resizeAd",size:[r,a]};i.contentWindow.postMessage(JSON.stringify(n),t)}}(e,t,n)},Ui.collapseAd=function(e,t,n){ae("Invoking apntag.collapseAd",arguments),ee("apntag.collapseAd has been depreciated, Please use apntag.resizeAd"),w.trackCustomEvent({type:"apntag.collapseAd",targetId:e});let a=0,r=0;const i=$i(e);if(!i)return void te(`CollapseAd failed to find targetId : ${e}`);const s=ve(i);typeof t===Ni&&(a=t),typeof n===Ni&&(r=n);const o=ka.document.getElementById(s);if(null===o)return void te(`CollapseAd failed to find ad div : ${e}`);Ui.resizeAd(e,[r,a]),o.style.height=a,o.style.width=r,o.style.display="none";const d=Ui.requests.tags[e],c=Ja(d.adResponse);Oe.emit(N.qY.COLLAPSE,e,c)},Ui.showTag=function(e,t){let n;if(ae("Invoking apntag.showTag",arguments),"object"==typeof t&&(t.hasOwnProperty("iframeWindow")||t.hasOwnProperty("wcElement"))){if(n=t.wcElement instanceof Element&&t.wcElement,t.wcElement&&!n)return void te(`wcElement is not a DOM element : ${e}`);t=t.iframeWindow||ka}else t=t||ka;const a=Ui.requests.tags&&Ui.requests.tags[e];w.trackCustomEvent({type:"apntag.showTag",divId:e,isWebComponent:!!n,performance:performance.now(),batchId:a?.batchId,adTrackingId:a?.adTrackingId}),function(e,t,n){if(Q(`showTag called for ${e}`),gr({targetId:e,wcElement:n}),Pa()[e]=!0,Ee(e)){const a=apntag.requests.tags[e];if(a.showTagCalled=!0,a.curWindow=t,a.wcElement=n,a.displayed)return void ee(`Attempting to display ad that is already displayed, will not render this ad again: ${e}`);if(apntag.requests.utCalled)if(a.adResponse){const e=Cr(a,wa,Ra(),Ia);ha.push(e),apntag.requests.hasLeft&&Te()}else apntag.requests.checkDisplay=!0;else ee(`${e} : showTag() called before ad request was made. This placement might not display if a subsequent loadTags() call is not made`)}else Q(`the ${e} tag was loaded before the ad placement was available.`,N.$9.Z)}(e,t,n)},Ui.setPageTargeting=function(e,t){ae("Invoking apntag.setPageTargeting",arguments),w.trackCustomEvent({type:"apntag.setPageTargeting"}),Ui.requests.targetingParams&&e&&t&&(Ui.requests.targetingParams[e]=t)},Ui.getPageTargeting=function(e){if(ae("Invoking apntag.getPageTargeting",arguments),w.trackCustomEvent({type:"apntag.getPageTargeting"}),Ui.requests.targetingParams&&e)return Ui.requests.targetingParams[e]},Ui.clearPageTargeting=function(e){ae("Invoking apntag.clearPageTargeting",arguments),w.trackCustomEvent({type:"apntag.clearPageTargeting"}),Ui.requests.targetingParams&&e&&delete Ui.requests.targetingParams[e]},Ui.enableDebug=function(){Ui.debug=!0,ae("Invoking apntag.enableDebug",arguments),w.trackCustomEvent({type:"apntag.enableDebug"})},Ui.disableDebug=function(){ae("Invoking apntag.disableDebug",arguments),w.trackCustomEvent({type:"apntag.disableDebug"}),Ui.debug=!1},Ui.notify=function(e,t,n){e?(w.trackCustomEvent({type:"apntag.notify",targetId:n}),lt.invokeNotify(e,t,n)):te("apntag.notify must be called with `messageType`")},Ui.registerRenderer=function(e,t){ae("Invoking apntag.registerRenderer",arguments),w.trackCustomEvent({type:"apntag.registerRenderer"}),lt.registerRenderer(e,t)},Ui.getAstVersion=function(){return ae("Invoking apntag.getAstVersion"),"1.10.56"},Ui.recordErrorEvent=function(e,t){ae("Invoking apntag.recordErrorEvent",arguments),"string"==typeof e&&(e=new Error(e)),k.trackCriticalError("recordErrorEvent",e);const n=Ui.requests.tags[t],a=Ja(n.adResponse),r=xe(e.message,t,e,200);Oe.emit(N.qY.ERROR,t,r,a)},Ui.recordTagPerformanceEvent=function(e,t){if(ae("Invoking apntag.recordTagPerformanceEvent",arguments),Object.values(N.eZ).includes(e.eventName)){const n=Ui.requests.tags[t],a=Ja(n.adResponse);w.trackCustomEvent({type:e.eventName,...e,performance:performance.now(),adTrackingId:n?.adTrackingId},a.tagId)}else ae("Unhandled performance event",arguments)},Ui.handleCb=function(e,t,n,a){ae("Invoking apntag.handleCb",arguments);try{Ur(e,t,n)}catch(e){const t=e.message?e.message:e;te("Internal AST error : ",e),Si(t,void 0,a,200,N.qY.BAD_REQUEST,e)}},Ui.emitEvent=function(e,t,n){if(n&&n.content_source&&!Ui.requests.enableMediationEvents)return;ae("Invoking apntag.emitEvent",arguments);const a=Wi(e);if("impression"===t&&w.trackEvent({type:E,data:{enableSafeFrame:!(!a.enableSafeFrame&&!a.alwaysUseXDomainIframe),batchId:a.batchId,performance:performance.now(),adTrackingId:a.adTrackingId}},a.tagId),"click"===t){const e=ur(a.wcElement||ka.document.getElementById(a.targetId));e?.recordAdClick(),w.trackEvent({type:T},a.tagId)}!function(e,t,n){const a=Wi(e),r=function(e,t,n){const a=e.adResponse&&e.adResponse.ads&&e.adResponse.ads.length,r=a&&e.adResponse.ads[a-1].ad_type===N.Ve.s6;let i;return i=e.isMediated&&r&&!n?Ja(e.adResponse,e.adResponse.ads[a-1]):Ja(e.adResponse,n),i}(a,0,n);var i;Q(`handling event for DOM ID:  ${r.targetId} eventType : ${t}`),(t=t===N.Sz.S?"adLoaded":t)===N.qY.LOADED||t===N.qY.LOADED_MEDIATED||t===N.qY.NO_BID_MEDIATED?(Oe.emit(t,r.targetId,r),t===N.qY.LOADED_MEDIATED&&w.trackCustomEvent({type:N.qY.LOADED_MEDIATED},r.tagId),t===N.qY.NO_BID_MEDIATED&&w.trackCustomEvent({type:N.qY.NO_BID_MEDIATED},r.tagId)):Oe.emit(t,r.targetId),t===N.qY.NO_BID&&a.isMediated&&(i=a.adResponse,se(window.document.body,i[ji],i.uuid))}(e,t,n)},Ui.getAdMarkup=function(e,t){if(w.trackCustomEvent({type:"apntag.getAdMarkup",targetId:e}),Ui.requests.tags&&Ui.requests.tags[e]){const n=Ui.requests.tags[e];if(n.uuid===t)return n.adResponse.ads}},Ui.setSafeFrameConfig=function(e){w.trackCustomEvent({type:"apntag.setSafeFrameConfig"}),ue(e,"allowExpansionByPush")&&(wa.expansionByPush=e.allowExpansionByPush),ue(e,"allowExpansionByOverlay")&&(wa.expansionByOverlay=e.allowExpansionByOverlay),ue(e,"sandbox")&&(wa.sandbox=e.sandbox),ue(e,"meta")&&(wa.meta=e.meta)},Ui.setTrkjsEndpoint=function(e){ae("Invoking apntag.setTrkjsEndpoint",arguments),w.trackCustomEvent({type:"apntag.setTrkjsEndpoint",trkjsUrl:e}),(e=>{const t=he();if("string"==typeof e&&e.includes("https://"))try{const n=new URL(t.location.href);n.origin.match(Ea)||n.origin.match(Ta)?(xa=e,Q(`Setting trk.js URL to: ${xa}`)):ee(`Attempted to override the trk.js URL on an unsupported domain.  Referer was ${t.location.href}`)}catch(e){ee("Encountered an issue when reading the referer of the page",e)}else ee(`Need to set a full secure URL for trk.js; attempted value was: ${e}`)})(e)},Ui.setDvJsOverride=function(e){ae("Invoking apntag.setDvJsOverride",arguments),w.trackCustomEvent({type:"apntag.setDvJsOverride",dvJsUrl:e}),Fa(e,"DV")},Ui.set3pJsOverride=function(e){ae("Invoking apntag.set3pJsOverride",arguments),w.trackCustomEvent({type:"apntag.set3pJsOverride",jsUrlMap:e}),Object.entries(e).forEach(([e,t])=>{Fa(t,e)})},Ui.fireImpressionTrackers=function(e,t){e?e.impressionTrackersFired?ae("Impression trackers already fired for",e.tagId):e.jsTrackersFired?ae("JS trackers already fired for",e.tagId):(ae("Invoking apntag.fireImpressionTrackers",arguments),e.impressionTrackersFired=!0,e.jsTrackersFired=!0,zi(e,t)):te("adObj is required for apntag.fireImpressionTrackers")},Ui.loadImpressionTrackerUrls=function(e,t){return e?e.impressionTrackersFired?void ae("Impression trackers already fired for",e.tagId):(ae("Invoking apntag.loadImpressionTrackerUrls",arguments),e.impressionTrackersFired=!0,zi(e,t,"imp"),!0):(te("adObj is required for apntag.loadImpressionTrackerUrls"),!1)},Ui.loadJSTrackers=function(e,t){return e?e.jsTrackersFired?void ae("JS trackers already fired for",e.tagId):(ae("Invoking apntag.loadJSTrackers",arguments),e.jsTrackersFired=!0,zi(e,t,"js"),!0):(te("adObj is required for apntag.loadJSTrackers"),!1)},Ui.loadViewabilityScripts=function(e,t){return e?e.viewabilityScriptsLoaded?void ae("Viewability scripts already loaded for",e.tagId):(e.viewabilityScriptsLoaded=!0,ae("Invoking apntag.loadViewabilityScripts",arguments),zi(e,t,"view"),!0):(te("adObj is required for apntag.loadViewabilityScripts"),!1)},Ui.attachClickTrackers=function(e,t){const n=t instanceof Element,a=n?t.id:t,r=n?t:document.getElementById(t);r?(ae("Attaching click track handler to",a),Z(r,"click",()=>{Ji(e,r)})):te(`HTML element with id ${a} not found, click trackers not attached`)},Ui.loadClickTrackerUrls=function(e,t){const n=t instanceof Element?t:document.getElementById(t);return ae("Invoking apntag.loadClickTrackerUrls",arguments),Ji(e,n),!0},Ui.checkAdAvailable=function(e){return w.trackCustomEvent({type:"apntag.checkAdAvailable",targetId:e}),function(e){const t=apntag.requests.tags[e],n=t&&t.adResponse,a=t&&t.utCalled&&!t.showTagCalled&&n&&Ja(n);return function(e){a&&(n.nobid||e.resolve(a),n.nobid&&e.reject())}}(e)},Ui.handleMediationBid=function(e){w.trackCustomEvent({type:"apntag.handleMediationBid",targetId:e});const t=Wi(e);let n=[];try{const e=t.adResponse.ads;n=e[e.length-1]}catch(e){ae("Trying to get mediated adresponse for renderer",e)}function a(){Ui.resizeAd(e,[0,0])}if(n.renderer_url)t.displayed=!1,n.targetId=e,n.ad_type===Li&&(function(e){try{Ui.requests.tags[e].adResponse.ads=[n]}catch(e){ae("Trying to set adresponse for video renderer",e)}}(t.targetId),t.enableSafeFrame&&function(e){const t=dt.getInstance().getIframe(e);t&&t.iframe&&(t.iframe.allow="autoplay",t.iframe.style="overflow:hidden")}(t.targetId)),t.enableSafeFrame?function(e){{const t=dt.getInstance().getIframe(e.targetId).iframe.contentWindow;delete e.curWindow;const n={status:"nativeAssembly",targetId:e.targetId};ft(t,JSON.stringify(n),we())}}(t):lt.loadRenderer(t,n),a();else{const r=Ja(t.adResponse,n);r.adType===Pi&&a(),Oe.emit(N.qY.LOADED,e,r)}};try{const e=window.PerformanceObserver;e&&new e(function(e){e.getEntries().forEach(e=>{const t={};Object.assign(t,{entryType:e.entryType,name:s(e.name),startTime:e.startTime,perfTimeOrigin:performance.timeOrigin,duration:e.duration,domComplete:e.domComplete,domContentLoadedEventEnd:e.domContentLoadedEventEnd,domContentLoadedEventStart:e.domContentLoadedEventStart,domInteractive:e.domInteractive,loadEventEnd:e.loadEventEnd,loadEventStart:e.loadEventStart,redirectCount:e.redirectCount,type:e.type,unloadEventEnd:e.unloadEventEnd,unloadEventStart:e.unloadEventStart}),w.trackCustomEvent({type:"perfNavigation",data:t})})}).observe({type:"navigation",buffered:!0})}catch(e){te(`Unable to load Navigation Observer ${e}`,N.$9.Z)}ne("AST library loaded"),function(){for(let e=0;e<Ui.anq.length;e++)typeof Ui.anq[e].called===Fi&&(Ui.anq[e].call(),Ui.anq[e].called=!0)}(),Ui.requests.checkDisplay||function(e){let t=!1;function n(){t||(t=!0,e())}if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1);else if(document.attachEvent){let e;try{e=null!==window.frameElement}catch(e){}if(document.documentElement.doScroll&&!e){const e=function(){if(!t)try{document.documentElement.doScroll("left"),n()}catch(t){setTimeout(e,10)}};e()}document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()})}if(window.addEventListener)window.addEventListener("load",n,!1);else if(window.attachEvent)window.attachEvent("onload",n);else{const e=window.onload;window.onload=function(){e&&e(),n()}}}(Te),"function"==typeof window.define&&window.define.amd&&window.define("appnexusAst",[],()=>window.apntag);try{window.addEventListener("AcceptableAdsInit",function(e){Ui.adBlockerFlagFromEvent=e.detail})}catch(e){k.trackAlertError("AcceptableAdsInitListenerError",e)}})();