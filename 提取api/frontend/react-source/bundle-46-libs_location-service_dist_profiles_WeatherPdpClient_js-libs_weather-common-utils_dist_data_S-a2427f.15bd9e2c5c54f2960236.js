"use strict";(self.homePageWebpackChunks=self.homePageWebpackChunks||[]).push([["libs_location-service_dist_profiles_WeatherPdpClient_js-libs_weather-common-utils_dist_data_S-a2427f"],{1033:function(t,n,e){e.d(n,{e3:function(){return o},fR:function(){return i}});var r=e(27261);function i(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.$t)();return/^python-requests|^CriteoBot|^ias-|GrapeshotCrawler/.test(t)}function o(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.$t)();if(!t)return!1;const n=(0,r.iA)(),e=n&&n.includes("reqsrc=vp");return-1!==t.indexOf("Yahoo")||-1!==t.indexOf("Yandex")||-1!==t.indexOf("Baiduspider")||-1!==t.indexOf("Bingbot")||-1!==t.indexOf("Googlebot")||-1!==t.indexOf("Google-InspectionTool")||-1!==t.indexOf("msnbot")||!e&&-1!==t.indexOf("HeadlessChrome")}},2651:function(t,n,e){var r,i;e.d(n,{B:function(){return r}}),function(t){t[t.Fahrenheit=1]="Fahrenheit",t[t.Celsius=2]="Celsius"}(r||(r={})),function(t){t.MPH="mph",t.KMH="km/h",t.MS="m/s",t.BFT="bft",t.MILE="mi",t.METER="m",t.MM="mm",t.CM="cm",t.MB="mb",t.HPA="hPa",t.IN="in",t.KM="km"}(i||(i={}))},3608:function(t,n,e){e.d(n,{U:function(){return D}});var r=e(17254),i=e(89980),o=e(98216),a=e(47903);var s=e(46261),u=e(12426),l=e(52684),c=e(11917),d=e(69089),h=e(48622),f=e(93468),m=e(65022),v=e(61803),p=e(12870),y=e(97643),w=e(98909),g=e(2651),k=e(86948);function S(t){return!!t&&"null"!==t&&"undefined"!==t&&"false"!==t}function b(t,n){return new Date(n.updatedDateTime).valueOf()-new Date(t.updatedDateTime).valueOf()}class D{constructor(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.PdpDefaultLocation="DefaultLocation",this.PdpFavoriteLocation="FavoriteLocation",this.locationPdpClient=new w.h,this.writeToAAD=!1,this.instance=h.d,this.writeToAAD=t}async read(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!navigator.cookieEnabled)return{};!function(){const t=(0,r.rA)().UserId;let n=[];try{n=JSON.parse((0,i.Lg)().getItem(a.ZR)||"[]")}catch{n=[]}n.length&&t!==n[n.length-1]?(n.push(t),(0,i.Lg)().setItem(a.ZR,JSON.stringify(n)),null===o.YT||void 0===o.YT||o.YT.sendClientLogEvent({message:`Met unfamiliar MUID. Current MUID array is ${n}`,type:"information"})):0===n.length?(n.push(t),(0,i.Lg)().setItem(a.ZR,JSON.stringify(n))):null===o.YT||void 0===o.YT||o.YT.sendClientLogEvent({message:`MUID not churn. Current MUID array is ${n}`,type:"information"})}();let e=null;try{const r=await this.instance.readPdpWithTargetType(c.y.Location,!1,void 0,t,n),{value:i=[]}=r||{value:[]};e=this.convertPdpDataToPdpResponse(i)}catch(t){(0,f.c_)(t,m.E9G,"error in library [location-service],Weather Profile graph action location Read Failed")}if(!e||!e.unit)try{const n=await this.instance.getUserPrefData(t);o.YT.addOrUpdateTmplString("getweatherpdp");const{value:r=[]}=n||{value:[]},i=this.parseUserProfileFromPdpData(r);e=e?{...e,unit:i&&i.unit}:i}catch(t){(0,f.c_)(t,m.Z9U,"error in library [location-service],Weather Profile User Read Failed")}return e||{}}isWeatherAndLinked(){if(!this.writeToAAD)return!1;return"weather"===((0,r.rA)()||{}).AppType&&"AAD"==(0,k.NP)()&&(0,v.pu)()}async setDisplayUnit(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=!1;try{e=await this.instance.updateWeatherSettings(t.toString(),null,n),this.isWeatherAndLinked()&&this.instance.updateWeatherSettings(t.toString(),null,n,void 0,!0)}catch(t){(0,f.c_)(t,m.Lc2,"error in library [location-service],Display unit Update failed."),e=!1}return e}async setEplantStatus(t){return this.instance.updateUserSettings({eplantGameJoined:t.toString()})}async setWeatherMapSetting(t){return this.instance.updateUserSettings({weatherMapSetting:JSON.stringify(t,(t,n)=>n??void 0)})}async setWeatherTheme(t){return this.instance.updateUserSettings({weatherTheme:t.toString()})}async setWeatherRunningPreference(t){return this.instance.updateUserSettings({weatherRunningPreference:JSON.stringify(t,(t,n)=>n??void 0)})}async getBLISLocation(t){return this.locationPdpClient.getUserDefaultLocation(t)}async updateUserSettings(t,n){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return this.locationPdpClient.updateUserSettings(t,n,e,r)}async disableWeatherCardNotification(t,n,e){let r=!1;try{const n={UserAction:{0:{UpdateTime:new Date,location:e}}};r=await this.instance.updateWeatherInterests(t||"",n)}catch(t){(0,f.c_)(t,m.HyQ,"error in library [location-service],"+(n?"Hide":"Show")+" weather hide notification card failed"),r=!1}return r}async updateUserExplicitInterest(t,n){let e=!1;try{e=await this.instance.updateWeatherInterests(t,n)}catch(r){(0,f.c_)(r,m.HyQ,`error in library [location-service]," + "Fail to update user explicit interest. TargetId:${t}, metadata:${n}`),e=!1}return e}async getWeatherInterest(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=null;try{n=await this.instance.getWeatherInterest({},t)}catch(t){(0,f.c_)(t,m.Z9U,`error in getWeatherInterest," + "Fail to update user explicit interest. type:${c.y.Weather}`),n=null}return n}async enableDisableWeatherCard(t){let n=!1;try{n=await this.instance.updateSegmentCardsEnableStatus([{cardType:d.s.WeatherCard,enabled:t}])}catch(e){(0,f.c_)(e,m.HyQ,"error in library [location-service],"+(t?"Enable":"Disable")+" weather segment card failed"),n=!1}return n}async updateWeatherCardPreviewForPollbar(t,n){const e={targetType:"Notification",definitionName:n};return h.d.setUserAction(t,e,!0)}async setHomeLocation(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2?arguments[2]:void 0;return this.isWeatherAndLinked()&&this.locationPdpClient.setHomeLocation(t,n,e,!0),this.locationPdpClient.setHomeLocation(t,n,e)}async addFavoriteLocation(t){return this.locationPdpClient.addFavoriteLocation(t)}async removeFavoriteLocation(t){return this.locationPdpClient.removeFavoriteLocation(t)}async removeHomeLocation(t){return this.isWeatherAndLinked()&&this.locationPdpClient.removeLocation(t,!0),await this.locationPdpClient.removeLocation(t)}async removeLocation(t){return this.isWeatherAndLinked()&&this.locationPdpClient.removeLocation(t,!0),await this.locationPdpClient.removeLocation(t)}convertPdpDataToPdpResponse(t){if(t&&t[0]){const n=t.filter(t=>t.degree===this.PdpDefaultLocation).sort(b)[0],e=D.parseLocationFromPdpValue(n);return e&&(e.from=2,e.displayName=(0,s.Mn)(e)),{...D.parseUnitAndMode(n,t[0]),home:e,favorites:t.filter(t=>t.degree===this.PdpFavoriteLocation).map(D.parseLocationFromPdpValue).filter(t=>!!t),followedLocations:t.map(D.parseLocationFromPdpValue).filter(t=>!!t),recents:void 0}}return null}parseUserProfileFromPdpData(t){if(t&&t[0]){const n=t.find(t=>t.weatherDisplayUnit);if(!(n&&(n.weatherDisplayUnit||n.userSettings&&n.userSettings.weatherLocationSettingMode)))return null;let e,r;return"2"!==n.weatherDisplayUnit&&"1"!==n.weatherDisplayUnit||(e="2"===n.weatherDisplayUnit?g.B.Celsius:g.B.Fahrenheit),n.userSettings&&n.userSettings.weatherLocationSettingMode&&(r="2"===n.userSettings.weatherLocationSettingMode?2:1),{home:void 0,unit:e,locationMode:r,favorites:void 0,recents:void 0}}return null}static buildMetaData(t){return w.h.buildMetaData(t)}static parseUnitAndMode(t,n){const e=D.parseUnitAndModeInternal(t);return null==e.unit&&(e.unit=D.parseUnit(n)),e}static parseUnitAndModeInternal(t){const n=D.parseUnit(t);let e=2;return t&&t.metadata&&("1"!==t.metadata.locationSettingMode&&"2"!==t.metadata.locationSettingMode||(e="1"===t.metadata.locationSettingMode?1:2)),{unit:n,locationMode:e}}static parseUnit(t){let n=null;return t&&t.metadata&&("2"!==t.metadata.displayunit&&"1"!==t.metadata.displayunit||(n="2"===t.metadata.displayunit?g.B.Celsius:g.B.Fahrenheit)),n}static parseLocationFromPdpValue(t){let n=null;if(t&&t.definitionName&&t.metadata){n={latitude:t.definitionName.split(",")[0],longitude:t.definitionName.split(",")[1],addressLine:S(t.metadata.addressLine)?t.metadata.addressLine:void 0,locality:S(t.metadata.city)?t.metadata.city:void 0,subRegion:S(t.metadata.subRegion)?t.metadata.subRegion:void 0,region:S(t.metadata.state)?t.metadata.state:void 0,country:S(t.metadata.countryRegion)?t.metadata.countryRegion:void 0,displayName:"",isoCode:S(t.metadata.isoCode)?t.metadata.isoCode:void 0,locationTypeId:t.metadata.locationTypeId,postalCode:t.metadata.postalCode,language:(t.metadata.language||(0,u.u0)(t.metadata.locationTypeId)||p.Rb.Locale).toLocaleLowerCase(),definitionName:t.definitionName,readLink:S(t.metadata.readLink)?t.metadata.readLink:void 0},n.region=(0,l.abbreviateUSState)(n.region,n.language,n.isoCode),n.locationType=1,"number"!=typeof t.metadata.locationType&&void 0!==t.metadata.locationType||(n.locationType=t.metadata.locationType||1),"string"==typeof t.metadata.locationType&&S(t.metadata.locationType)&&(n.locationType=(0,y.AY)(""+t.metadata.locationType,1));const e=t.metadata.geoCoordinates;!e||0===e.latitude&&0===e.longitude||(n.latitude=""+e.latitude,n.longitude=""+e.longitude),n.addressLine||n.locality||n.region||(n=null),n&&!(0,s.fn)(n)&&(n=null),n&&"0"===n.latitude&&"0"===n.longitude&&(t.metadata.name||t.metadata.countryRegion||t.metadata.city||t.metadata.state||(n=null))}return n}}},19958:function(t,n,e){e.d(n,{h8:function(){return c},hL:function(){return u},hM:function(){return l},us:function(){return d}});var r=e(84688),i=e(44662),o=e(56590);const a=r.l;function s(t){const n={...t||{}};return n.locStrResolver=n.locStrResolver||a,n}function u(t,n,e){return(0,i.fS)(t,n,a,e)}function l(t){let{location:n,unit:e,hour:r,day:a}=t;const u=(0,i.MS)(n,e,t=>(0,o.Wk)(7,t),s()),l=u.searchParams;return(0,i.FA)(l,{hour:r,day:a}),u.toString()}function c(t,n,e,r){return(0,i.rv)(t,n,a,e,r)}function d(t,n,e){return(0,i.MQ)(t,a,n,e)}},23158:function(t,n,e){e.d(n,{ml:function(){return o},N5:function(){return i},vj:function(){return a}});const r=["1","2","3","4","6","7","8","9","10","13","17","19","20","24","28","29","30","31","32","34","35","37","40","41","42","44","47","51","80","15","25","26","59","22","23","79","11","69","71","14","27","67","81","75","77","83","85","38","70","72","54","68","52","53","60","46","49","50","82","76","78","84","86","33","61","62","87","88","93","94","95","96","12","18","21","36","39","45","48","63","64","89","90"],i={17:"8",31:"31",49:"14",41:"14",35:"8",4:"4",19:"19",22:"14",23:"23",34:"7",47:"20",60:"7",81:"26",11:"10",37:"10",38:"10",69:"10",70:"10",71:"10",72:"10",92:"91",32:"5",2:"2",101:"1",42:"15",33:"6",61:"6",62:"6",87:"6",88:"6",93:"6",94:"6",95:"6",96:"6",67:"27",68:"27",18:"9",21:"9",36:"9",45:"9",48:"9",63:"9",64:"9",29:"29",102:"28",44:"44",46:"19",80:"50",76:"24",75:"24",83:"77",84:"78",85:"24",86:"24",39:"39"};class o{static getWeatherNormalizedSkyCode(t){return r.includes(t)?t:Object.prototype.hasOwnProperty.call(i,t)?i[t]:t}}const a={d000:"SunnyDayV3",d100:"MostlySunnyDay",d200:"D200PartlySunnyV2",d210:"D210LightRainShowersV2",d211:"D211LightRainSowShowersV2",d212:"D212LightSnowShowersV2",d220:"LightRainShowerDay",d221:"D221RainSnowShowersV2",d222:"SnowShowersDayV2",d240:"D240TstormsV2",d300:"MostlyCloudyDayV2",d310:"D310LightRainShowersV2",d311:"D311LightRainSnowShowersV2",d312:"LightSnowShowersDay",d320:"RainShowersDayV2",d321:"D321RainSnowShowersV2",d322:"SnowShowersDayV2",d340:"D340TstormsV2",d400:"CloudyV3",d410:"LightRainV3",d411:"RainSnowV2",d412:"LightSnowV2",d420:"HeavyDrizzle",d421:"RainSnowV2",d422:"Snow",d430:"ModerateRainV2",d431:"RainSnowV2",d432:"HeavySnowV2",d440:"Thunderstorm",d500:"MostlyCloudyDayV2",d600:"FogV2",d603:"FreezingRainV2",d605:"IcePelletsV2",d705:"BlowingHailV2",d905:"BlowingHailV2",d907:"Haze",d900:"Haze",n000:"ClearNightV3",n100:"MostlyClearNight",n200:"PartlyCloudyNightV2",n210:"N210LightRainShowersV2",n211:"N211LightRainSnowShowersV2",n212:"N212LightSnowShowersV2",n220:"LightRainShowerNight",n221:"N221RainSnowShowersV2",n222:"N222SnowShowersV2",n240:"N240TstormsV2",n300:"MostlyCloudyNightV2",n310:"N310LightRainShowersV2",n311:"N311LightRainSnowShowersV2",n312:"LightSnowShowersNight",n320:"RainShowersNightV2",n321:"N321RainSnowShowersV2",n322:"N322SnowShowersV2",n340:"N340TstormsV2",n400:"CloudyV3",n410:"LightRainV3",n411:"RainSnowV2",n412:"LightSnowV2",n420:"HeavyDrizzle",n421:"RainSnowShowersNightV2",n422:"N422SnowV2",n430:"ModerateRainV2",n431:"RainSnowV2",n432:"HeavySnowV2",n440:"Thunderstorm",n500:"PartlyCloudyNightV2",n600:"FogV2",n603:"FreezingRainV2",n605:"BlowingHailV2",n705:"BlowingHailV2",n905:"BlowingHailV2",n907:"Hazy-Night",n900:"Hazy-Night",xxxx1:"WindyV2"}},24909:function(t,n,e){e.d(n,{Uw:function(){return s},b7:function(){return u},kC:function(){return a},lM:function(){return l}});var r=e(2651),i=e(23158),o=e(93704);function a(t){return"°ฟาเรนไฮด์"===t||"‎°ف"===t||t===r.B.Fahrenheit?{degree:"°F",unit:r.B.Fahrenheit}:"°เซลเซียส"===t||"‎°م"===t||t===r.B.Celsius?{degree:"°C",unit:r.B.Celsius}:(""+t).replace(/\u200e/g,"").includes("F")?{degree:"°F",unit:r.B.Fahrenheit}:{degree:"°C",unit:r.B.Celsius}}function s(t,n){var e,r;if(null==t||null===(e=t.responses)||void 0===e||null===(e=e[0])||void 0===e||null===(e=e.weather)||void 0===e||null===(e=e[0])||void 0===e||!e.current)return null;const o=t.responses[0].weather[0],s="n"===o.current.daytime,{degree:u}=a(t.units.temperature),l=o.current;return{isAlert:o.alerts&&o.alerts.length>0,currentTemperature:l.temp&&l.temp.toString(),ufTemp:l.ufTemp&&l.ufTemp.toString(),pvdrIcon:l.pvdrIcon,symbol:l.symbol,normalizedSkyCode:i.ml.getWeatherNormalizedSkyCode(l.pvdrIcon),shortCap:l.capAbbr,skycode:{children:l.cap},precipitation:{children:o.forecast&&o.forecast.days&&o.forecast.days[0]&&o.forecast.days[0].daily&&null!=o.forecast.days[0].daily.precip?`${o.forecast.days[0].daily.precip}%`:void 0},deepLink:"",degreeSetting:u,uv:Math.floor(l.uv),uvDesc:l.uvDesc,feels:l.feels,humidity:`${Math.floor(l.rh)}%`,windDesc:`${l.pvdrWindDir} ${l.pvdrWindSpd}`,windSpeed:`${l.windSpd} ${t.units.speed}`,windDir:l.windDir,dewPoint:null!=l.dewPt?`${l.dewPt}°`:"N/A",baro:`${o.current.baro} ${t.units.pressure}`,visiblity:`${o.current.vis} ${t.units.distance}`,richCaps:o.current.richCaps,aqi:`${o.current.aqi}`,aqiSeverity:o.current.aqiSeverity,primaryPollutant:o.current.primaryPollutant,isNight:s,currentRaw:l,unitsRaw:t.units,locationRaw:n,alertCount:l.alertCount,alertSignificance:l.alertSignificance,comingWeather:null==o||null===(r=o.current)||void 0===r?void 0:r.comingWeather,life:o.life,source:t.responses[0].source}}function u(t,n){return{...(0,o.Dj)(t),pressureUnit:n.pressure,windGust:null!=t.windGust?`${t.windGust} ${n.speed}`:"N/A",vis:null!=t.vis?`${t.vis} ${n.distance}`:"N/A",time:new Date(t.valid),aqi:t.aqi||0,windSpeedUnit:n.speed,precipitationHeightUnit:n.height}}function l(t){return null==t?"":`${t}°`}},25447:function(t,n,e){var r;e.d(n,{i:function(){return c}}),function(t){t.Hour="Hour",t.HourMin="HourMin",t.HourTimezone="HourTimezone",t.HourMinTimezone="HourMinTimezone",t.HourTimezoneLong="HourTimezoneLong",t.HourMinTimezoneLong="HourMinTimezoneLong",t.DayWeek="DayWeek",t.MonthDayYear="MonthDayYear",t.LongMonthDayYear="LongMonthDayYear",t.MonthDay="MonthDay",t.MonthDayNumeric="MonthDayNumeric",t.Year="Year",t.Month="Month",t.MonthShort="MonthShort",t.Day="Day",t.Week="Week",t.WeekLong="WeekLong",t.WeekLongNoLocaleFormat="WeekLongNoLocaleFormat",t.MonthDayWeek="MonthDayWeek",t.MonthDayWeekShort="MonthDayWeekShort",t.MonthDayWeekLong="MonthDayWeekLong",t.YearMonthDayWeekLong="YearMonthDayWeekLong",t.YearMonthLong="YearMonthLong",t.YearMonth="YearMonth",t.MonthLong="MonthLong"}(r||(r={}));const i=new Map([[r.DayWeek,{weekday:"short",day:"numeric"}],[r.LongMonthDayYear,{month:"long",day:"numeric",year:"numeric"}],[r.MonthDayYear,{month:"short",day:"numeric",year:"numeric"}],[r.MonthDay,{month:"short",day:"numeric"}],[r.MonthDayNumeric,{month:"numeric",day:"numeric"}],[r.Year,{year:"numeric"}],[r.Month,{month:"numeric"}],[r.MonthShort,{month:"short"}],[r.Day,{day:"numeric"}],[r.Hour,{hour:"numeric"}],[r.HourMin,{hour:"numeric",minute:"numeric"}],[r.HourTimezone,{hour:"numeric",timeZoneName:"short"}],[r.HourMinTimezone,{hour:"numeric",minute:"numeric",timeZoneName:"short"}],[r.HourTimezoneLong,{hour:"numeric",timeZoneName:"long"}],[r.HourMinTimezoneLong,{hour:"numeric",minute:"numeric",timeZoneName:"long"}],[r.Week,{weekday:"short"}],[r.WeekLong,{weekday:"long"}],[r.WeekLongNoLocaleFormat,{weekday:"long"}],[r.MonthDayWeek,{weekday:"short",month:"short",day:"numeric"}],[r.MonthDayWeekShort,{weekday:"short",month:"numeric",day:"numeric"}],[r.MonthDayWeekLong,{weekday:"long",month:"long",day:"numeric"}],[r.YearMonthDayWeekLong,{weekday:"long",month:"long",day:"numeric",year:"numeric"}],[r.YearMonthLong,{month:"long",year:"numeric"}],[r.YearMonth,{month:"short",year:"numeric"}],[r.MonthLong,{month:"long"}]]);function o(t,n){try{return new Intl.DateTimeFormat(t,n)}catch(n){return{format:n=>new Date(n).toLocaleDateString(t)}}}const a=["en-us","en-gb","el-gr"],s=[r.DayWeek,r.HourTimezoneLong,r.HourMinTimezoneLong,r.MonthDay,r.MonthDayWeekLong,r.MonthShort,r.MonthLong,r.Week,r.WeekLong,r.MonthDayWeek,r.MonthDayWeekShort,r.YearMonthDayWeekLong,r.YearMonthLong,r.LongMonthDayYear,r.MonthDayNumeric],u=new Map([["default",{longPm:"pm",shortPm:"p",longAm:"am",shortAm:"a"}],["el-gr",{longPm:"μ.μ.",shortPm:"μ",longAm:"π.μ.",shortAm:"π"}]]),l=new Map([["default",{hour:"numeric"}],["zh-cn",{hour:"numeric",hour12:!1}],["zh-tw",{hour:"numeric",hour12:!1}],["zh-hk",{hour:"numeric",hour12:!1}]]);class c{constructor(t,n){this.locale=t||"en-us",this.timeZone=n||void 0;try{this.hour12=Intl.DateTimeFormat(this.locale,l.get(this.locale)||l.get("default")).resolvedOptions().hour12}catch(t){}this.localeOption=u.get(this.locale)||u.get("default"),this.timeFormats=new Map,this.timeFormatsEnGb=new Map,this.timeFormatsEnUs=new Map}formatHour(t,n){return this.formatDateTimeFormatText(t,r.Hour,n)}formatYear(t,n){return this.formatDateTimeFormatText(t,r.Year,n)}formatMonth(t,n){return this.formatDateTimeFormatText(t,r.Month,n)}formatMonthShort(t,n){return this.formatDateTimeFormatText(t,r.MonthShort,n)}formatDay(t,n){return this.formatDateTimeFormatText(t,r.Day,n)}formatHourLabel(t){return this.formatHour(t,{excludeSpace:!1})}formatHourMinute(t,n){return this.formatDateTimeFormatText(t,r.HourMin,n)}formatHourTimezone(t,n){let e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=r.HourTimezone;return e&&(i=r.HourTimezoneLong),this.formatDateTimeFormatText(t,i,n)}formatHourMinuteTimezone(t,n){let e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=r.HourMinTimezone;return e&&(i=r.HourMinTimezoneLong),this.formatDateTimeFormatText(t,i,n)}formatDayWithWeek(t,n){let e=this.formatDateTimeFormatText(t,r.DayWeek,n);if(n&&e.indexOf(",")<0&&e.indexOf(" ")>0){const t=e.split(" ");2!=t.length||isNaN(parseInt(t[0]))||(n.removeWeek?e=t[0]:n.forceWeekdayAhead&&(e=`${t[1]} ${t[0]}`))}return e}formatWeek(t,n){return this.formatDateTimeFormatText(t,r.Week,n)}formatWeekLong(t,n){return this.formatDateTimeFormatText(t,r.WeekLong,n)}formatWeekLongForEn(t,n){return this.formatDateTimeFormatText(t,r.WeekLongNoLocaleFormat,n)}formatYearMonthLong(t,n){return this.formatDateTimeFormatText(t,r.YearMonthLong,n)}formatLongMonthDayYear(t,n){let e=this.formatDateTimeFormatText(t,r.LongMonthDayYear,n);if(n&&n.useComma){const i=this.formatDateTimeFormatText(t,r.LongMonthDayYear,n);e=e.replace(`${i} `,`${i}, `)}return e}formatMonthDayYear(t,n){let e=this.formatDateTimeFormatText(t,r.MonthDayYear,n);if(n&&n.useComma){const i=this.formatDateTimeFormatText(t,r.MonthDay,n);e=e.replace(`${i} `,`${i}, `)}return e}formatMonthDay(t,n){return this.formatDateTimeFormatText(t,r.MonthDay,n)}formatMonthDayNumeric(t,n){return this.formatDateTimeFormatText(t,r.MonthDayNumeric,n)}formatWeekShort(t,n){let e=this.formatDateTimeFormatText(t,r.Week,n);if(e.indexOf(",")<0&&e.indexOf(" ")>0){const t=e.split(" ");2!=t.length||isNaN(parseInt(t[0]))||(e=t[1])}return e}formatMonthDayWithWeek(t,n){let e=this.formatDateTimeFormatText(t,r.MonthDayWeek,n);if(n&&n.forceWeekdayAhead&&e.indexOf(",")<0&&e.indexOf(" ")>0){const t=e.split(" ");2!=t.length||isNaN(parseInt(t[0]))||(e=`${t[1]} ${t[0]}`)}return e}formatMonthDayWithWeekShort(t,n){let e=this.formatDateTimeFormatText(t,r.MonthDayWeekShort,n);if(n&&!n.forceWeekdayAhead&&e.indexOf(",")<e.indexOf(" ")){const t=e.split(",");2==t.length&&(e=`${t[0]} ${t[1]}`)}return e}formatMonthDayWithWeekLong(t,n){let e=this.formatDateTimeFormatText(t,r.MonthDayWeekLong,n);if(n&&!n.forceWeekdayAhead&&e.indexOf(",")<e.indexOf(" ")){const t=e.split(",");2==t.length&&(e=`${t[1]}, ${t[0]}`)}return e}formatDateTime(t,n,e){return this.formatDateTimeFormatText(t,n,e)}getFormatObj(t){let n=t;this.hour12||(t===r.Hour&&(n=r.HourMin),t===r.HourTimezone&&(n=r.HourMinTimezone),t===r.HourTimezoneLong&&(n=r.HourMinTimezoneLong));const e={timeZone:this.timeZone,...i.get(n)};return a.indexOf(this.locale)<0&&s.indexOf(n)<0?this.hour12?(this.timeFormatsEnUs.has(n)||this.timeFormatsEnUs.set(n,o("en-us",e)),this.timeFormatsEnUs.get(n)):(this.timeFormatsEnGb.has(n)||this.timeFormatsEnGb.set(n,o("en-gb",e)),this.timeFormatsEnGb.get(n)):(this.timeFormats.has(n)||this.timeFormats.set(n,o(this.locale,e)),this.timeFormats.get(n))}formatDateTimeFormatText(t,n,e){const r=this.getFormatObj(n).format(t);let i=this.postProcess(r,e)||"";return i=decodeURIComponent(encodeURIComponent(i).replace(/%E2%80%AF/gi,"%20")),i}postProcess(t,n){let e=t;return n&&n.excludeComma&&(e=e.replace(/,/g,"")),n&&n.excludeSpace&&(e=e.replace(/\s/g,"")),e}}},31317:function(t,n,e){e.d(n,{DH:function(){return S},Fv:function(){return f},Hf:function(){return b},I6:function(){return g},J7:function(){return p},WP:function(){return l},YR:function(){return w},dE:function(){return y},h0:function(){return k},hc:function(){return m},mX:function(){return h},u1:function(){return c}});var r=e(47903),i=e(32849),o=e(48983),a=e(17254),s=e(89980),u=e(46261);const l=10,c=a.T3.isMobile?20:10;function d(t){return!!t&&"null"!==t&&"undefined"!==t&&"false"!==t}function h(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;if(t.home&&((0,o.q$)(t.favorites,t.home),(0,o.q$)(t.recents,t.home)),t.favorites){t.favorites=f(t.favorites),t.favorites=t.favorites.slice(0,n);for(let n=0,e=t.favorites.length;n<e;++n)(0,o.q$)(t.recents,t.favorites[n])}else void 0===t.favorites&&(t.favorites=[]);return t.recents?(t.recents=f(t.recents),t.recents=t.recents.filter(t=>"JP"!==t.isoCode||d(t.locality)||d(t.region)),t.recents=t.recents.slice(0,c)):void 0===t.recents&&(t.recents=[]),t.followedLocations?t.followedLocations=f(t.followedLocations):t.followedLocations=[],t}function f(t){return v(t,!0)}function m(t){return v(t,!1)}function v(t,n){if(!t)return[];const e=[],r=new Set,o=new Set;for(const a of t){if(!a)continue;const t=(0,i.getDisplayName)(a),s=(0,u.B4)(a);n&&r.has(t)||o.has(s)||(r.add(t),o.add(s),e.push(a))}return e}function p(t,n){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,r=(0,o.FF)(t.favorites,n),i=(0,o.q$)(t.recents,n);return r&&r.length>e&&(r=r.slice(0,e)),i&&i.length>c&&(i=i.slice(0,c)),t.favorites=r,t.recents=i,t}function y(t,n){let e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=(0,o.q$)(t.favorites,n),i=t.recents;return e&&(i=(0,o.FF)(t.recents,n)),r&&r.length>l&&(r=r.slice(0,l)),i&&i.length>c&&(i=i.slice(0,c)),t.favorites=r,t.recents=i,t}function w(t,n){return t.recents=(0,o.FF)(t.recents,n),h(t)}function g(t,n,e){const r=[];return t&&(r.push(t.home),Array.prototype.push.apply(r,t.favorites||[]),Array.prototype.push.apply(r,t.recents||[])),r.filter(t=>!!t&&t.latitude===n&&t.longitude===e)[0]}function k(t,n){if(!a.T3.isMobile)return[];let e=(0,o.FF)(t.recentsForMobile,n);const r=c;return e?(e=e.filter(t=>"JP"!==t.isoCode||d(t.locality)||d(t.region)),e=e.slice(0,r)):void 0===e&&(e=[]),b(e),e}function S(){const t=(0,s.Lg)().getItem(r.M6);if(t)return JSON.parse(t)}function b(t){(0,s.Lg)().supported&&(0,s.Lg)().setItem(r.M6,JSON.stringify(t))}},31951:function(t,n,e){e.d(n,{FY:function(){return a},GH:function(){return f},S1:function(){return d},Xr:function(){return o},_F:function(){return u},a5:function(){return m},b$:function(){return c},cW:function(){return s},mr:function(){return l},q2:function(){return h},rK:function(){return i}});var r=e(17254);const i="weathermapdata/1/static/weather/Icons/taskbar_v10/",o="hurricane_warnning.svg",a="Alert/",s="AQI/WildFire.svg",u="AQI/wildfireMapInfopane.svg",l="AQI/aq{level}.svg",c="Teaser/",d="Condition_Card/",h=i+"NoColor_Card/",f=()=>{var t;return`${null===(t=(0,r.rA)())||void 0===t?void 0:t.AssetsUrl}/weathermapdata/1/static`},m=()=>`${f()}/weather/Icons/taskbar/Fallback/Alert_Y.svg`},36111:function(t,n,e){e.d(n,{q:function(){return d}});var r=e(17254),i=e(57759),o=e(19993),a=e(65022),s=e(93468),u=e(46261);const l="localizelocation-peregrine",c="0QfOX3Vn51YCzitbLaRkTTBadtWpgTN8NZLW0C1SEM";class d{constructor(t,n){this.fetchImpl=t,this.config=n,this.localizeLocationApi="weather/locations/search",this.virtualEarthEndpoint="https://dev.virtualearth.net"}async getLocalisedLocationDetailsFromVirtualEarth(t){if(!(0,u.fn)(t))return;const n=await o.WR.getBaseRequestData("GET"),e=[..."windowsNewsPlus"===r.T3.AppType||"winWidgets"===r.T3.AppType?o.WR.getOneServiceParamsWithoutAuth((0,r.rA)().UserId,"winp2"):o.WR.getOneServiceParamsWithoutAuth((0,r.rA)().UserId,l),{key:"key",value:this.config.bingMapToken},{key:"c",value:r.T3.CurrentMarket},{key:"incl",value:"ciso2"},{key:"includeEntityTypes",value:"PopulatedPlace,Neighborhood"},{key:"apikey",value:c}],h=new URL(`/REST/v1/Locations/${t.latitude},${t.longitude}`,this.virtualEarthEndpoint);let f;e.forEach(t=>{t.value&&h.searchParams.set(t.key,t.value)}),h.searchParams.delete("fdhead"),this.config&&this.config.noDynamicQueryParams&&(h.searchParams.delete("user"),h.searchParams.delete("activityId"));try{const e=await(0,i.w)(async()=>{const t=await this.fetchImpl(h.href,n);if(!t.ok){if(f=`code=${t.status}, ${t.statusText}`,t.status>=400&&t.status<500&&408!=t.status)return{isError:!0};throw Error(t.statusText)}return t.json()},"getLocalizedLocation");if(null!=e&&e.isError)throw Error(f);return d.convertResponseFromVirtualEarth(e,t,h.href)}catch(t){f||(f=t&&t.toString()),(0,s.c_)(t,a.IO,"error in library [weather-shared],"+f+","+this.localizeLocationApi,h.href)}}async getLocalisedLocationDetails(t,n){if(!(0,u.fn)(t))return;if(n)return this.getLocalisedLocationDetailsFromVirtualEarth(t);const e=await o.WR.getBaseRequestData("GET"),h=[..."windowsNewsPlus"===r.T3.AppType||"winWidgets"===r.T3.AppType?o.WR.getOneServiceParamsWithoutAuth((0,r.rA)().UserId,"winp2"):o.WR.getOneServiceParamsWithoutAuth((0,r.rA)().UserId,l),{key:"lat",value:t.latitude},{key:"lon",value:t.longitude},{key:"locale",value:r.T3.CurrentMarket},{key:"apikey",value:c}],f=new URL(`${this.localizeLocationApi}${r.T3.ServiceUrlBase.search}`,r.T3.ServiceUrlBase);let m;h.forEach(t=>{t.value&&f.searchParams.set(t.key,t.value)}),f.searchParams.delete("fdhead"),this.config&&this.config.noDynamicQueryParams&&(f.searchParams.delete("user"),f.searchParams.delete("activityId"));try{const n=await(0,i.w)(async()=>{const t=await this.fetchImpl(f.href,e);if(!t.ok){if(m=`code=${t.status}, ${t.statusText}`,t.status>=400&&t.status<500&&408!=t.status)return{isError:!0};throw Error(t.statusText)}return t.json()},"getLocalizedLocation");if(null!=n&&n.isError)throw Error(m);return d.convertResponse(n,t,f.href)}catch(t){m||(m=t&&t.toString()),(0,s.c_)(t,a.IO,"error in library [weather-shared],"+m+","+this.localizeLocationApi,f.href)}}static convertResponse(t,n,e){const i=t&&t.value&&t.value[0]&&t.value[0].responses||[],o=i[0]&&i[0].locations&&i[0].locations[0];let l;if(o&&(l={latitude:n.latitude,longitude:n.longitude,isDetected:n.isDetected,locality:o.locality,region:o.adminDistrict,subRegion:o.adminDistrict2,country:o.countryRegion,isoCode:o.countryCode,language:r.T3.CurrentMarket},l.displayName=(0,u.Mn)(l)),l&&l.displayName)return l;(0,s.vV)(a.IO,"error in library [weather-shared],unable to construct valid display name",e)}static extractBingLocationApiResponse(t){return t&&t.resourceSets&&t.resourceSets[0]&&t.resourceSets[0].resources&&t.resourceSets[0].resources[0]}static convertResponseFromVirtualEarth(t,n,e){const i=d.extractBingLocationApiResponse(t);if(!i)return(0,s.vV)(a.IO,"error in library [weather-shared],empty result",e),null;const o={locality:i.address.locality,region:i.address.adminDistrict,subRegion:i.address.adminDistrict2,country:i.address.countryRegion,isoCode:i.address.countryRegionIso2,latitude:n.latitude,longitude:n.longitude,language:r.T3.CurrentMarket};return o.displayName=(0,u.Mn)(o),o&&o.displayName?o:((0,s.vV)(a.IO,"error in library [weather-shared],unable to construct valid display name",e),null)}}},43025:function(t,n,e){function r(t,n,e){return r=>{const i={};return t.forEach(t=>function(t,n,e){n[e]=t[e]}(r,i,t)),n.forEach(t=>{return n=r,e=i,o=t.from,a=t.to,void(e[a]=n[o]);var n,e,o,a}),e.forEach(t=>{return n=r,e=i,o=t.from,a=t.to,s=t.trans,void(e[a]=s(n[o]));var n,e,o,a,s}),i}}e.d(n,{D:function(){return r}})},44662:function(t,n,e){e.d(n,{FA:function(){return D},MQ:function(){return $},MS:function(){return k},fS:function(){return g},lf:function(){return b},rv:function(){return S}});var r=e(17254),i=e(55593),o=e(65022),a=e(93468),s=e(77246),u=e(98216),l=e(5044),c=e(84688),d=e(12426),h=e(46261),f=e(72535),m=e(1033),v=e(56590);c.l;function p(t,n){const{ocid:e="",cvid:r=""}=t||{},i=e||(0,l.En)();let o=r;!r&&u.YT&&u.YT.getRequestId&&"function"==typeof u.YT.getRequestId&&(o=u.YT.getRequestId());const a={...t||{},ocid:i||"",cvid:o||""};return a.locStrResolver=a.locStrResolver||n,a}function y(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{const e=decodeURIComponent(t).toLowerCase(),r=e.includes("?")?e.split("?")[1]:e;return r&&n&&r.includes(n.toLowerCase())}catch{return!1}}function w(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{const e=decodeURIComponent(t).toLowerCase(),r=e.includes("?")?e.split("?")[1]:e,i=n.toLowerCase();return new URLSearchParams(r).get(i)||""}catch{return""}}function g(t,n,e,r){const i=p(r,e),o=i.linkType||1;return k(t,n,function(t){return(0,v.Wk)(o,t)},i).toString()}function k(t,n,e,l){var c;l||(l={});const f=l.locale||r.T3.LocaleContentMarketString||"en-us",p=(0,v.Wk)("weather",f),g=e(f);let k,S;if(t&&(k=function(t){return t.urlSlug?t.urlSlug:(0,h.H4)(t,{skipAddressLine:!0}).slice(0,2).map(t=>null==t||"boolean"==typeof t?"":`${t}`).map(t=>t.replace(/[/?#%\s]+/g,"-")).map(t=>encodeURIComponent(t)).join(",")}(t),S=l.locStrResolver(t),(0,d.LQ)(t)&&u.YT&&o.QF4)){const n=new Error("seems invalid location for weather link");(0,a.vV)(o.QF4,n.message,void 0,{...o.QF4.pb,location:{longitude:t.longitude,latitude:t.latitude},stack:(n.stack||"").slice(0,1024)},!0)}const b=k?`/in-${k}`:"";let D;(0,s.S)()?D=document.location.href:l.locationHref&&(D=l.locationHref);let $=l.enablePunchoutHero?"ntp.msn.com":r.T3.NavTargetHostName;$="zh-cn"===f?$.replace("com","cn"):$,null!==(c=D)&&void 0!==c&&c.includes("localhost.msn.com")&&(0,s.S)()&&($=l.enablePunchoutHero?$:document.location.host);const L=l.contentType?`&scenario=${l.contentType}`:"",N=new URL(l.enablePunchoutHero?`https://${$}/edge/ntp?cm=${f}&segment=Weather${L}`:`https://${$}/${f}/${p}/${g}${b}`),R=N.searchParams;return l.enablePunchoutHero||(l.hash&&(N.hash=l.hash),S&&R.set("loc",S),(0,v._V)(R,n),(0,s.S)()?(0,v.Cn)((0,i.a)(),R,l):l.locationHref&&(0,v.Cn)(new URL(l.locationHref).searchParams,R,l)),l.ocid&&R.set("ocid",l.ocid),y(D,"uxmode=ruby")&&R.set("uxmode","ruby"),y(D,"theme")&&R.set("theme",w(D,"theme")),y(D,"opts")&&R.set("opts",w(D,"opts")),l.uxMode&&R.set("uxmode",l.uxMode),l.cvid&&R.set("cvid",l.cvid),l.enablePunchoutHero||(l.etreeUser&&R.set("etree-user",l.etreeUser),l.etreeTaskID&&R.set("etree-task-id",l.etreeTaskID),l.content&&R.set("content",l.content)),l.fcsttab&&R.set("fcsttab",l.fcsttab),l.day&&R.set("day",l.day),l.jumpSource&&R.set("jump_source",l.jumpSource),(0,m.e3)()&&(N.search=""),N}function S(t,n,e,r,i){const o=p(i,e),a=k(t,n,function(t){const n=(0,v.Wk)(2,t);if("report"===r)return n;const e=r&&(0,v.AC)(r,t);return r?n+"/"+e:n+"/-"},o),s=a.searchParams,u="report"===r?{type:r}:{};return D(s,{zoom:o.zoom,"3d":o["3d"]&&"1",autoplay:o.autoplay&&"1",subs:o.subs,...u,wfid:o.wfid,alertid:o.alertid}),a.toString()}function b(t,n,e,r){const i=k(t,n,function(t){return(0,v.Wk)(6,t)},r=p(r,e));return D(i.searchParams,{lifeIndex:r.lifeIndex,fct:r.fct,aplannerstep:r.activityPlanerStep}),i.toString()}function D(t,n){if(!(0,m.e3)())for(const e in n)n[e]&&t.set(e,""+n[e])}function $(t,n,e,r){if(!r){var i,o;const n=new Date(null===(i=t.alertsInfo)||void 0===i?void 0:i.created);r=(null===(o=t.alertsInfo)||void 0===o?void 0:o.id)+n.getTime()/1e3}const a=(0,f.Z)(t.alertsInfo.class);r&&(e={...e,alertid:r});return S(t.currentLocation,t.unit,n,a,e)}},48983:function(t,n,e){e.d(n,{FF:function(){return i},LT:function(){return a},q$:function(){return o}});var r=e(46261);function i(t,n){if(!n)return t;t=t||[];const e=[{...n},...t],i={},o=[];for(let t=0;t<e.length;++t){const n=(0,r.Mn)(e[t]),a=`${e[t].latitude},${e[t].longitude}`;i[n]||i[a]||(o.push(e[t]),i[n]=t+1,i[a]=t+1)}return o}function o(t,n){if(!t||!n)return t;for(let e=0;e<t.length;++e)if((0,r.Mn)(t[e])===(0,r.Mn)(n)||t[e].latitude===n.latitude&&t[e].longitude===n.longitude){t.splice(e,1);break}return t}function a(t){if(!t)return[];const n=new Set,e=[];for(const i of t){const t=(0,r.Mn)(i);n.has(t)||(n.add(t),e.push(i))}return e}},56590:function(t,n,e){e.d(n,{GF:function(){return D},_V:function(){return b},AC:function(){return w},Wk:function(){return y},YS:function(){return k},Cn:function(){return S}});const r={weather:{es:"el-tiempo","es-es":"eltiempo",fr:"meteo",it:"meteo",de:"wetter",nl:"weer",cs:"pocasi",pt:"clima","pt-pt":"meteorologia",da:"vejr",hu:"idojaras",id:"cuaca",fi:"saa",sv:"vader",tr:"havadurumu",pl:"pogoda"},forecast:{es:"pronostico","es-es":"prevision",fr:"previsions",it:"previsioni",de:"vorhersage",nl:"voorspelling",cs:"predpoved","pt-pt":"previsao",da:"vejrudsigt",hu:"elorejelzes",id:"prakiraan",fi:"ennuste",nb:"vaermelding",sv:"prognos",tr:"havadurumutahmini",pl:"prognoza"},maps:{cs:"mapy",da:"kort",de:"karten",es:"mapas",fi:"kartat",fr:"cartes",id:"peta",it:"mappe",nb:"kart",nl:"kaarten",pl:"mapy-pogody",pt:"mapas",sv:"vaderkartor",tr:"haritalar"},monthlyforecast:{da:"manedligprognose",de:"monatlicheprognose",es:"pronosticomensual",fi:"kuukaudenennuste",fr:"previsionsmensuelles",id:"prakiraanbulanan",it:"previsionimensili",nb:"manedligprognose",nl:"maandelijksevoorspelling",pl:"prognozamiesieczna",pt:"previsaomensal",sv:"manadsprognos",tr:"ayliktahmin"},records:{cs:"rekordniaprumerne",da:"rekorder",de:"historisches","de-ch":"rekorde",fi:"Tilastot",hu:"rekordok",id:"catatan",it:"record",nb:"rekorder",pl:"rekordowe",sv:"medeltemperaturer",tr:"mevsim-normalleri","pt-pt":"recordes"},life:{da:"livet",de:"leben",es:"lavida",fi:"elama",fr:"vie",hu:"elet",id:"kehidupan",it:"vita",nb:"liv",nl:"leven",pl:"zycie",pt:"vida",sv:"liv",tr:"hayat"},pollen:{es:"polen",fi:"siitepoly",id:"serbuksari",it:"polline",nl:"stuifmeel",pl:"pylekkwiatowy",pt:"polen",tr:"polen"},hourlyforecast:{da:"timeprognose",de:"stundlichevorhersage",es:"previsionhoraria",fi:"tuntiennuste",fr:"previsionhoraire",id:"prakiraanperjam",it:"previsioniorarie",nb:"prognosepertime",nl:"voorspellingperuur",pl:"prognozagodzinowa",pt:"previsaohoraria",sv:"timprognos",tr:"saatliktahmin"}},i="orkaner",o="temperatur",a="synlighet",s="vind",u="vento",l="snofall",c={radar:{fi:"tutka"},hurricane:{cs:"hurikany",da:i,nb:i,sv:i,de:"hurrikane",es:"huracanes",fr:"ouragans",id:"hurikan",it:"uragani",nl:"orkanen",pl:"huragany",pt:"hurricanes",tr:"kasirgalar"},severeweather:{fi:"huonosaa",id:"cuacaburuk",nl:"slechtweer",sv:"ovader"},temperature:{cs:"teplota",da:o,de:o,nb:o,sv:o,fi:"lampotila",id:"suhu",tr:"sicaklik"},precipitation:{cs:"srazky",da:"nedbor",nb:"nedbor",id:"curahhujan",nl:"neerslag",pl:"opady",sv:"nederbord",tr:"yagis"},wildfire:{cs:"lesnipozar",da:"skovbrand",de:"waldbrand",fi:"maastopalo",fr:"feuforet",id:"kebakaran",nb:"skogbrann",pl:"pozar",sv:"skogsbrand"},wind:{cs:"vitr",da:s,nb:s,sv:s,es:"viento",fi:"tuuli",fr:"vent",id:"angin",it:u,pt:u,pl:"wiatr",tr:"ruzgar"},cloud:{cs:"oblacnost",da:"sky",nb:"sky",de:"bewolkung",es:"nube",fi:"pilvi",fr:"nuages",id:"awan",it:"nuvolosita",nl:"bewolking",pt:"nublado",sv:"moln",tr:"bulut"},pressure:{cs:"tlak",da:"lufttryk",de:"druck",fi:"ilmanpaine",fr:"pression",id:"tekanan",it:"pressione",nb:"trykk",nl:"druk",sv:"tryck"},humidity:{cs:"vlhkost",es:"humedad",id:"kelembapan",nb:"fuktighet",pt:"umidade",tr:"nemlilik"},visibility:{da:"synlighed",nb:a,sv:a,nl:"zicht"},dewpoint:{cs:"rosnybod",da:"dugpunkt",de:"taupunkt",fi:"kastepiste",nb:"duggpunkt",nl:"dauwpunt"},winterstorm:{cs:"zimniboure"},airquality:{fi:"ilmanlaatu",fr:"qualiteair"},snowdepth:{cs:"vyskasnehu",nb:"snodybde",pt:"alturaneve",sv:"snodjup"},snowfall:{cs:"snezeni",da:"snefald",de:"schnee",fi:"lumisade",fr:"chuteneige",id:"curahsalju",it:"nevicata",nb:l,sv:l,nl:"sneeuwval",pt:"quedaneve",tr:"karyagisi"},airqualitystation:{},ski:{es:"esquiar",fi:"laskettelu",it:"sci",pl:"narty",pt:"esqui",sv:"skida",tr:"kayak"},pollen:r.pollen,pollenindex:{},etree:{},report:{},earthquake:{},lightning:{}};var d=e(2651),h=e(86308),f=e(17254),m=e(43820);const v={};function p(t){t&&!v[t]&&(v[t]=t.split("-")[0]);return v[t]}function y(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.T3.CurrentMarket;const e="string"==typeof t?t:{1:"forecast",4:"records",3:"monthlyforecast",6:"life",5:"pollen",2:"maps",7:"hourlyforecast",8:"activity",9:"impactful"}[t],i=r[e];return i&&(i[n]||i[p(n)])||e}function w(t,n){const e=c[t];return e&&(e[n]||e[p(n)])||t}(t=>{const n=Object.keys(c),e=new Map})(f.T3.CurrentMarket);const g={F:d.B.Fahrenheit,C:d.B.Celsius,f:d.B.Fahrenheit,c:d.B.Celsius};function k(t){if(t){const n=(0,m.IF)(t,"weadegreetype",["weaDegreeType"]);return n&&g[n]||void 0}}function S(t,n,e){if(n&&t){if(!e||!e.excludeItem){const e=t.getAll("item");for(let t=0;t<e.length;++t)n.append("item",e[t])}if(!e||!e.excludeOcid){const e=(0,m.En)(t);e&&n.set("ocid",e)}if(!e||!e.cvid){const e=t.get("cvid");e&&n.set("cvid",e)}}return n||void 0}function b(t,n){const e=(0,h.R)(n);return e&&t&&t.set("weadegreetype",e),t}function D(t,n,e){if(!t)return t;try{const r=new URL(t);return r.searchParams.set(n,e),r.href}catch(n){return t}}},72535:function(t,n,e){e.d(n,{Lu:function(){return s},SV:function(){return a},Z:function(){return l}});var r=e(12870),i=e(25447);const o={SN:"winterstorm",IC:"winterstorm",IM:"winterstorm",FD:"wildfire",AQ:"airqualitystation",SM:"airqualitystation",DU:"airqualitystation",VO:"airqualitystation",AS:"airqualitystation"};function a(t,n,e,o,a){var s,u;if(null===(s=t.alertsInfo)||void 0===s||!s.created||null===(u=t.source)||void 0===u||!u.location)return null;try{const s=t.source.location.TimezoneName,u=new i.i(r.Rb.Locale,s),l=t.alertsInfo.start,c=t.alertsInfo.created,d=t.alertsInfo.end;let h,f=null,m="";if(l&&d&&n>=new Date(l)&&n<=new Date(d)?(m=o,f=new Date(d)):l&&n>=new Date(c)?(m=e,f=new Date(l)):n>=new Date(c)&&(m=a,f=new Date(c)),!f)return null;h="zh-cn"==r.Rb.Locale?function(t,n){if(!t)return null;const e=n.formatHourMinute(t),r=n.formatYear(t),i=n.formatMonth(t),o=n.formatDay(t);return`${r}-${i}-${o} ${e}`}(f,u):function(t,n){let e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t)return null;const r={forceWeekdayAhead:!0};let i=n.formatHourMinuteTimezone(t,r);e||(i=n.formatHourMinute(t,r));return`${n.formatDayWithWeek(t,r)}, ${i}`}(f,u,!1);let v=h;return h&&m&&(v=`${m}: ${h}`),v}catch{return null}}function s(t,n){var e,r;if((null===(e=t.alertsInfoList)||void 0===e?void 0:e.length)>0&&(null==n||null===(r=n.content)||void 0===r?void 0:r.length)>=1&&("SevereWeather"==(null==n?void 0:n.contenttype)||"SevereWeather2nd"==(null==n?void 0:n.contenttype))){const e=n.content[0].metadata&&JSON.parse(n.content[0].metadata);if((null==e?void 0:e.AlertIdx)>=0&&t.alertsInfoList.length>e.AlertIdx)return t.alertsInfoList[e.AlertIdx]}return t.alertsInfo}const u={winterstorm:{type:"exclude",markets:["zh-cn"]},wildfire:{type:"include",markets:["us"]},airqualitystation:{type:"include",markets:["us"]}};function l(t){if(!t)return null;const n=o[t];return function(t){const n=r.Rb.Locale;let e=!1;if(!(t in u))return e;"include"==u[t].type?u[t].markets.some(t=>{if(null!=n&&n.includes(t))return e=!0,!0}):"exclude"==u[t].type&&(e=!0,u[t].markets.some(t=>{if(null!=n&&n.includes(t))return e=!1,!0}));return e}(n)?n:"severeweather"}},81784:function(t,n,e){e.d(n,{M:function(){return a},e:function(){return s}});var r=e(98216),i=e(77246);const o={isVisualReady:!1,data:{}};function a(t,n,e){(0,i.S)()&&(o.data[(t+n).toLowerCase()]=e,o.isVisualReady&&s())}function s(){o.isVisualReady=!0;const t=o.data;o.data={},Object.keys(t).length>0&&r.YT.sendLoadTimeEvent({markers:t})}},82170:function(t,n,e){e.d(n,{$:function(){return q}});var r=e(84688),i=e(47903),o=e(71200),a=e(52684),s=e(76166),u=e(17254),l=e(12870),c=e(85889),d=e(19993),h=e(57759),f=e(81784),m=e(1033),v=e(2651),p=e(65022),y=e(93468),w=e(30817),g=e(9192),k=e(12426),S=e(39065);e(48566);const b=1.609344;function D(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.B.Fahrenheit)===v.B.Celsius?1.8*t+32:t}function $(t){return t/b}var L=e(35605);class N{constructor(t,n,e){this.fetchImpl=t,this.config=n,this.locationHref=e,this.schemaTranslator=new L.KF(n.truncateTimezone,e)}}var R,M=e(77246);!function(t){t[t.Fahrenheit=1]="Fahrenheit",t[t.Celsius=2]="Celsius"}(R||(R={}));var W=e(34900);const C="https://assets.msn.com",V="weather/overview",A="segments/recoitems/weather";var P;!function(t){t[t.Not_Detected=1]="Not_Detected",t[t.Overview=2]="Overview",t[t.OverviewUser=3]="OverviewUser",t[t.SegmentOverview=4]="SegmentOverview"}(P||(P={}));const I={startDate:"-1",endDate:"+9",simplifyInsights:!0,fdhead:"PRG-1SW-WXWPDEL,PRG-1SW-WXWPDS,PRG-1SW-WXWPTLI,prg-1sw-wxaqif,prg-1sw-wxaqifct"};class z extends N{shouldAttachCookie(t,n){return!this.config.isFailOverHost&&("zh-cn"!==t&&!(!n||!n.readChoice&&!n.saveChoice))}async getWeather(t,n,e){t=t||{},e=e||{};const a=u.T3.LocaleContentMarket,s=a.language+"-"+a.market,{serviceUrl:h}=function(t,n){const{weatherApi:{path:e,endpoint:r}}=t;let i,o;const a=e===A?4:2;if((0,m.e3)()&&2===a)return i=C,o=V,{serviceUrl:H(i,o,n),variant:a};return i=r,o=e||V,{serviceUrl:H(i,o,n),variant:a}}(this.config,s),f=h.pathname,w=h.searchParams,g=await d.WR.getBaseRequestData("GET");(this.shouldAttachCookie(s,e)||e.includeCookie||this.config.weatherApi.includeCookie)&&(g.credentials="include"),g.referrerPolicy="no-referrer-when-downgrade";const k=function(t,n,e,r,i,a,s){const{appId:h,apiKey:f,accessStr:m,ocid:p,days:y,partialHours:w,includemapsmetadata:g,includecommentary:k,alertDistanceinkm:b,cutHour:D,features:$,fdhead:L,lifeDays:N,lifeModes:R,lifeSubTypes:C,includeLifeActivity:V,includeSwArea:A,includeActivity:P,includestorm:z,insights:T,includeUserPreference:H,startDate:q,endDate:x,simplifyInsights:E,insightCategories:O,contentcount:j}=(0,o._E)()?{...e.weatherApi,startDate:I.startDate,endDate:I.endDate,simplifyInsights:I.simplifyInsights}:e.weatherApi;d.WR.getCommonParams2(p,!1).forEach(t=>{n.set(t.key,t.value)}),s&&n.set("units",s===v.B.Fahrenheit?"F":"C"),U(n,"appId",h),n.set("apikey",m??f),n.set("wrapodata","false"),F(n,"includemapsmetadata",g),F(n,"cuthour",D),F(n,"includecommentary",k),U(n,"feature",($||[]).join(",")),U(n,"filterRule",r.filterRule),U(n,"lifeDays",N),U(n,"contentcount",j?j.toString():""),U(n,"lifeModes",R),F(n,"includeSwArea",A),F(n,"includestorm",z),F(n,"includeLifeActivity",V),U(n,"lifeSubTypes",(C||[]).join(",")),(0,S.Ow)()&&F(n,"includeActivity",P);"ActivityPlanner"===r.lifeTopic&&(F(n,"includeActivity",!0),F(n,"includeUserPreference",!0));H&&(F(n,"includeActivity",!0),F(n,"includeUserPreference",!0));(0,M.S)()&&(0,o._4)()&&F(n,"includehazards",!0);((0,M.S)()||(0,o.Y5)()||(0,o.vf)()||(0,o.ep)()||(0,o.Fl)()||(0,o.S_)())&&(U(n,"insights",T),U(n,"insightCategories",r.insightCategories??O),((0,o.Y5)()||(0,o.vf)()||(0,o.ep)()||(0,o.S_)()||(0,o.Fl)())&&(U(n,"startDate",(0,W.HP)(q)),U(n,"endDate",void 0!==r.endDate?(0,W.HP)(r.endDate):(0,W.HP)(x)),F(n,"discardFutureInsightTimeseries",E)));if(t){const e=new URL(t);if(i.indexOf("private")>=0){const t=e.searchParams.get("env");n.set("env",t)}const r=e.searchParams.get("day");r&&parseInt(r)>1&&n.set("lifeDays",r)}const{disableFetchRegionData:_,experience:G,isStaleRefresh:J}=r.requestInfo||{};_||(n.set("distanceinkm",b||"0"),n.set("regionDataCount","20"),n.set("orderby","distance"));y&&(n.set("days",y),n.set("pageOcid",d.WR.getOneServiceOCID(u.T3.TrackInfo,"peregrine")),U(n,"source",G&&G+(J?"1":"0")));n.set("source",`${l.Rb.ClientSettings.verticalKey}_${(0,M.S)()?"csr":"ssr"}`);const Y=(r.partialHours||w)&&r.partialHourly,B=Y&&r.hourlyStartDay-1>0;(0,M.S)()||U(n,"trimhourly24",Y&&(r.partialHours||w)?"true":"false");U(n,"startday",B&&(r.hourlyStartDay<=10&&r.hourlyStartDay>=1?r.hourlyStartDay-1:0)),r.hourlyDataDays&&!y&&n.set("days",r.hourlyDataDays);r.lifeDataDays&&n.set("lifeDays",r.lifeDataDays);const X=function(t,n){let e=[];if(l.Rb.CurrentFlightSet){const t="prg-dualauth";l.Rb.CurrentFlightSet.has(t)&&(e.push(t),e.push("1s-jwtuserauth")),l.Rb.CurrentFlightSet.forEach(t=>{(0,o.Ok)(t)&&e.push(t)})}((0,o.ep)()||(0,o.S_)())&&e.push("PRG-1SW-WXWPDEL","PRG-1SW-WXWPDS","PRG-1SW-WXWPTLI");if((0,o.nT)()){const t=new Set(e);t.delete("prg-1sw-wxaqifct"),e=Array.from(t)}(0,c.J5)()&&e.push("prg-1sw-wxteday");n.additionalFdHead&&e.push(...n.additionalFdHead.split(","));((0,o._E)()||(0,o.U1)())&&e.push(...I.fdhead.split(","));(0,o.S_)()&&e.push("prg-1sw-weacopilot");(0,o.TN)()&&e.push("PRG-1SW-WXINSV2","PRG-1SW-WXOIVT");(0,M.S)()&&(0,o._4)()&&e.push("prg-1sw-ntprhaz","prg-1sw-p2rhaz");if(0==e.length)return t;{const n=t?`${t},${e.join(",")}`:`${e.join(",")}`;return Array.from(new Set(null==n?void 0:n.split(","))).join(",")}}(L,r);X?n.set("fdhead",X):n.delete("fdhead");r.sfParams&&n.set("sf",r.sfParams);const Z=e.weatherApi.queries||{};for(let[t,e]of Object.entries(Z))"{market}"===e&&(e=a),n.set(t,e);return B}(this.locationHref,w,this.config,e,h.host,s,n);!function(t,n,e,r,i){t.set("region",r.market),t.set("market",(e.isoCode||r.market).toUpperCase()),t.set("locale",i),e&&e.latitude&&e.longitude&&(t.set("lat",e.latitude),t.set("lon",e.longitude));let a=i;"ru-xl"===a&&(a="en-xl");t.set("market",a),(0,o.JQ)()&&e&&e.jpAreaCode&&t.set("jpareacode",e.jpAreaCode)}(w,0,t,a,s),function(t,n,e){if(n.enableMockWeatherApiV2){const n=new URL(e).searchParams.get("testCaseId");n&&t.set("id",n)}}(w,this.config,this.locationHref);const{experience:b}=e.requestInfo||{},L=await this.sendApiRequest(h,g,b,t,e);if(null===L)return null;if(L.status&&(0,M.S)()){const t=p.bjD;(0,y.c_)(Error("Request failure but retry success"),t,L.status+","+f,`Request url: [${h.href}].`)}const N={location:L.usedLocation,locStrResolver:r.l};try{const t=L.weatherSummary,n=this.schemaTranslator.TranslateToWeatherOverview(t,N,this.config,k),e=function(t){var n,e;const r={},o=t&&t.userProfile;if(!o)return r;o.default?r.home=z.convert(o.default):o.location&&(r.home=z.convert(o.location));r.followedLocations=(null===(n=o.followedLocations)||void 0===n||null===(n=n.map(t=>z.convert(t)))||void 0===n?void 0:n.filter(t=>!!t))||[],r.detectedLocation=z.convert(o.autoDetected||o.detectedLocation),r.sig=o.sig,r.mapSetting=o.mapSetting&&JSON.parse(o.mapSetting),r.theme=o.theme,r.activityProfile=o.weatherRunningPreference&&JSON.parse(o.weatherRunningPreference),r.locationMode=Number.isNaN(o.locationSettingMode)?void 0:Number(o.locationSettingMode);const a=function(t){return"°ฟาเรนไฮด์"===t||"‎°ف"===t||t===R.Fahrenheit?R.Fahrenheit:"°เซลเซียส"===t||"‎°م"===t||t===R.Celsius?R.Celsius:(""+t).includes("F")?R.Fahrenheit:R.Celsius}(null==t||null===(e=t.units)||void 0===e?void 0:e.temperature);return function(t,n){var e,r;n===v.B.Fahrenheit&&null!=(null==t||null===(e=t.activityProfile)||void 0===e?void 0:e.preference)&&(t.activityProfile.preference.tempHigh=D(t.activityProfile.preference.tempHigh,v.B.Celsius),t.activityProfile.preference.tempLow=D(t.activityProfile.preference.tempLow,v.B.Celsius),t.activityProfile.preference.windHigh=$(t.activityProfile.preference.windHigh));if(n===v.B.Fahrenheit&&null!=(null==t||null===(r=t.activityProfile)||void 0===r?void 0:r.p))for(const n in i.Si)n in t.activityProfile.p&&(t.activityProfile.p[n].th=D(t.activityProfile.p[n].th,v.B.Celsius),t.activityProfile.p[n].tl=D(t.activityProfile.p[n].tl,v.B.Celsius),t.activityProfile.p[n].wh=$(t.activityProfile.p[n].wh),t.activityProfile.p[n].wgh=$(t.activityProfile.p[n].wgh))}(r,a),r}(t);return{home:void 0,location:L.usedLocation,forecast:n,profile:e,cards:t.cards}}catch(t){return(0,y.c_)(t,L.weatherDataFetchError,"error in library [weather-shared],Failed to translate overview: "+JSON.stringify(L.weatherSummary)),null}}async sendApiRequest(t,n,e,r,o){const a={weatherSummary:void 0,weatherDataFetchError:null,status:void 0,usedLocation:void 0,isNetworkFailure:!1},u=!(0,M.S)(),l=t.pathname;let c,d;a.weatherDataFetchError="scard"===e?p.WZp:u?p.f9r:p.tPd;try{var v;let e;if(a.weatherSummary=await(0,h.w)(async o=>{let l;try{var h,m,v,p;const r=(0,w.gU)();(0,g.cE)(i._2.overviewRequestStart,r),(0,g.cE)(i._2.overviewRequestPathHash,T(t.pathname)),l=await this.overviewFetchImpl(u,t,n,function(t){if(!(0,M.S)()){const n=(0,s.MV)();return n.trackApiClusterInServer=!0,t&&(n.timeoutMs=t),n}}(null===(h=this.config.weatherApi)||void 0===h?void 0:h.nodeFetchTimeoutMs)),c=null===(m=l.headers)||void 0===m?void 0:m.get("Ddd-Debugid"),d=null===(v=l.headers)||void 0===v?void 0:v.get("X-Msedge-Ref");const o=null===(p=c)||void 0===p?void 0:p.split("|")[3];o&&(0,g.cE)(i._2.overviewRequestCluster,T(o)),e=(0,w.gU)()-r,(0,f.M)(t.host,t.pathname,Math.round(e)),(0,g.cE)(i._2.overviewRequestDuration,e)}catch(t){throw a.status=t&&`${t.toString()} with retry=${o}`,a.isNetworkFailure=!0,t}if(!l.ok){if(a.status=`code=${l.status}, ${l.statusText}`,l.status>=400&&l.status<=500&&408!=l.status)return{isError:!0,errorCode:l.status};throw Error(l.statusText)}if(u&&l.headers){const t=l.headers.get("onewebservicelatency"),n=t?+t:-1;-1!=n&&((0,g.cE)(i._2.overviewRequestInternal,n),(0,g.cE)(i._2.overviewRequestNetwork,e-n))}const y=await this.parseApiResponse(l,t,r);return a.usedLocation=y.usedLocation,y.weatherData},l,-1),null!==(v=a.weatherSummary)&&void 0!==v&&v.isError)throw Error(a.status)}catch(n){var k;if(o.preventLogExceptionOnFailure)return null;a.status||(a.status=n&&n.toString());const{experience:e}=o.requestInfo||{};e&&(a.status=e+":"+a.status);const i=`Request url: [${t.href}]. Error detail: [${n&&n.toString()}] debug id: [${c}] msedge ref:[${d}]`,s=u?null:navigator.userAgent;if((0,m.e3)(s))(0,y.c_)(n,p.vZ_,"error in library [weather-shared],"+a.status+","+l,i);else if(this.config.enableMockWeatherApiV2)(0,y.c_)(n,p.pZQ,"error in library [weather-shared],"+a.status+","+l,i);else if(422===(null===(k=a.weatherSummary)||void 0===k?void 0:k.errorCode)){const e=`Request url: [${t.href}]. Error detail: [${n&&n.toString()}]. Location: [lat=${r.latitude}, lon=${r.longitude}] debug id: [${c}]`;(0,y.c_)(n,p.p4_,"error in library [weather-shared],"+a.status+","+l,e)}else a.status.indexOf("404")>-1?a.weatherDataFetchError=p.bJE:a.isNetworkFailure&&(a.weatherDataFetchError=p.Ljz),(0,y.c_)(n,a.weatherDataFetchError,"error in library [weather-shared],"+a.status+","+l,i);return null}return a}async overviewFetchImpl(t,n,e,r){const i=n.href;return await this.fetchImpl(i,e,r)}async parseApiResponse(t,n,e){const r={weatherData:void 0,usedLocation:e};if(n.pathname.indexOf("segments")>-1){const n=function(t){try{const n=JSON.parse(t[0].data),e=n.userProfile.location,r="2"===n.userProfile.locationSettingMode,i=(e.Language||l.Rb.Locale).toLocaleLowerCase();return[n,{addressLine:e.AddressLine,subRegion:e.SubRegion,locality:e.City,region:(0,a.abbreviateUSState)(e.State,i,e.CountryCode),country:e.Country,postalCode:e.PostalCode,isoCode:e.CountryCode,from:r?2:void 0,language:i,latitude:""+e.Latitude,longitude:""+e.Longitude}]}catch(t){throw new Error("invalid SegmentStore api response: "+t.stack)}}(await t.json());return r.weatherData=n[0],(0,k.B1)(e)||(r.usedLocation=n[1]),r}if(r.weatherData=await t.json(),(0,o.JQ)()&&null!=e&&e.jpAreaCode){var i,s,u;const t=null===(i=r.weatherData.userProfile)||void 0===i||null===(i=i.used)||void 0===i?void 0:i.geoCoordinates,n={latitude:null==t||null===(s=t.latitude)||void 0===s?void 0:s.toString(),longitude:null==t||null===(u=t.longitude)||void 0===u?void 0:u.toString()};if((0,k.B1)(n))return r.usedLocation=n,r}if(!(0,k.B1)(e)||e.isDetected&&!e.isBlisDetected){var c;const t=z.convert(r.weatherData.userProfile&&r.weatherData.userProfile.default);if(t)return r.usedLocation=t,r;const e=null===(c=r.weatherData.userProfile)||void 0===c||null===(c=c.used)||void 0===c?void 0:c.geoCoordinates;if(null===n.searchParams.get("lat")&&null===n.searchParams.get("lon")&&e){var d,h;r.usedLocation={latitude:null===(d=e.latitude)||void 0===d?void 0:d.toString(),longitude:null===(h=e.longitude)||void 0===h?void 0:h.toString(),isDetected:!0}}else{var f,m,v;const t=null===(f=r.weatherData.responses)||void 0===f||null===(f=f[0])||void 0===f||null===(f=f.source)||void 0===f?void 0:f.coordinates;r.usedLocation={latitude:null==t||null===(m=t.lat)||void 0===m?void 0:m.toString(),longitude:null==t||null===(v=t.lon)||void 0===v?void 0:v.toString(),isDetected:!0}}}return r}static convert(t){if(t&&!t.geoCoordinates&&t.Latitude&&t.Longitude&&(t.geoCoordinates={latitude:t.Latitude,longitude:t.Longitude}),(t=(0,a.toCamelCase)(t,{ISOCode:"isoCode"}))&&t.geoCoordinates){var n,e;const r=(t.language||(0,k.u0)(t.locationTypeId)||l.Rb.Locale).toLocaleLowerCase();return{addressLine:t.addressLine,subRegion:t.subRegion,locality:t.city,region:(0,a.abbreviateUSState)(t.state,r,t.isoCode),country:t.countryRegion,postalCode:t.postalCode,isoCode:t.isoCode,locationTypeId:t.locationTypeId,definitionName:t.definitionName,from:4,locationType:t.locationType,language:r,latitude:""+t.geoCoordinates.latitude,longitude:""+t.geoCoordinates.longitude,tag:null===(n=t.properties)||void 0===n?void 0:n.tag,confirmed:null===(e=t.properties)||void 0===e?void 0:e.confirmed}}}}function T(t){let n=0;for(let e=0;e<t.length;e++)n=Math.imul(31,n)+t.charCodeAt(e)|0;return n}function F(t,n,e){return e&&t.set(n,"true"),e}function U(t,n,e){e&&t.set(n,`${e}`)}function H(t,n,e){if(!(0,M.S)())return t="https://api.msn.com",n=n.replace("service/",""),new URL(n,t);var r;(t.indexOf("assets.msn.")>=0?(n.indexOf("service/")<0&&(n="service/"+n),"zh-cn"===e&&(t=t.replace(".msn.com",".msn.cn"))):n=n.replace("service/",""),"zh-cn"===e)&&(t=(null===(r=window.location.hostname)||void 0===r?void 0:r.indexOf(".msn.cn"))>=0?t.replace(".msn.com",".msn.cn"):t.replace(".msn.cn",".msn.com"));return t=t.replace("api.msn.","assets.msn."),n=n.startsWith("service/")?n:"service/"+n,new URL(n,t)}function q(t,n,e){return n.weatherApi?new z(t,n,e):void 0}},84688:function(t,n,e){e.d(n,{i:function(){return a},l:function(){return o}});var r=e(88294),i=e(46261);const o=function(t){const n={};return function(e){return n.i===e||(n.i=e,n.o=t(e)),n.o}}(function(t){try{return function(t){const n=(new TextEncoder).encode(t),e=Array.from(n).map(t=>String.fromCharCode(t)).join("");return btoa(e)}((0,i.Hv)(t,!0))}catch(n){r.v.log(`serialize failed, location=${JSON.stringify(t)}`)}});function a(t){try{const n=function(t){let n=t.trim().replace(/ /g,"+").replace(/-/g,"+").replace(/_/g,"/").replace(/\s+/g,"");n+="=".repeat((4-n.length%4)%4);const e=atob(n),r=new Uint8Array(Array.from(e).map(t=>t.charCodeAt(0)));return(new TextDecoder).decode(r)}(t);return(0,i.vR)(n,!0)||{}}catch(n){return r.v.log(`deserialize failed, serializedLocation=${t}`),{}}}},86308:function(t,n,e){function r(t){return["","F","C"][t||0]||""}e.d(n,{R:function(){return r}})},93704:function(t,n,e){e.d(n,{Dj:function(){return p},PC:function(){return h},fA:function(){return u},x3:function(){return k}});var r=e(23158),i=e(43025);const o=["pvdrIcon","symbol","uvDesc","feels","windDir","windDir","richCaps","aqiSeverity","aqLevel","primaryPollutant","comingWeather","background"],a=[{from:"capAbbr",to:"shortCap"}],s=[{from:"temp",to:"currentTemperature",trans:t=>(t||0==t)&&t.toString()},{from:"ufTemp",to:"ufTemp",trans:t=>t&&t.toString()},{from:"cap",to:"skycode",trans:t=>({children:t})},{from:"uv",to:"uv",trans:t=>Math.floor(t)},{from:"rh",to:"humidity",trans:t=>`${Math.floor(t)}%`},{from:"dewPt",to:"dewPoint",trans:t=>null!=t?`${t}°`:"N/A"},{from:"aqi",to:"aqi",trans:t=>`${t}`}];function u(t){return(0,i.D)(o,a,s)(t)}const l=["symbol","uv","uvDesc"],c=[{from:"tempHi",to:"highTemp"},{from:"tempLo",to:"lowTemp"},{from:"windMax",to:"windMaxRaw"},{from:"pvdrCap",to:"cap"},{from:"feelsHi",to:"highFeels"},{from:"feelsLo",to:"lowFeels"}],d=[{from:"pvdrCap",to:"image",trans:t=>{}},{from:"pvdrIcon",to:"normalizedSkyCode",trans:t=>r.ml.getWeatherNormalizedSkyCode(t)},{from:"rh",to:"humidity",trans:t=>`${t}`},{from:"rhLo",to:"humidityLow",trans:t=>`${t}`},{from:"rhHi",to:"humidityHi",trans:t=>`${t}`},{from:"rhHi",to:"humidityHi",trans:t=>`${t}`},{from:"vis",to:"visibility",trans:t=>null!=t?parseFloat(t):null},{from:"dewPt",to:"dewPt",trans:t=>null!=t?`${t}°`:"N/A"},{from:"baro",to:"airPressure",trans:t=>null!=t?`${t}`:"N/A"}];function h(t){return(0,i.D)(l,c,d)(t)}const f=["cap","rh","symbol","icon","feels","pvdrIcon","windDir","pvdrWindSpd","summary","rainAmount","snowAmount","ufTemp","raAccu","saAccu","sp","aqi","CO","NO2","O3","PM10","PM25","SO2","PPAType"],m=[{from:"temp",to:"temperature"},{from:"tempDesc",to:"temperatureDesc"},{from:"valid",to:"timeStr"},{from:"pvdrWindDir",to:"windDesc"}],v=[{from:"baro",to:"airPressure",trans:t=>null!=t?`${t}`:"N/A"},{from:"rh",to:"humidity",trans:t=>null!=t?`${t}%`:"N/A"},{from:"dewPt",to:"dewPt",trans:t=>null!=t?`${t}°`:"N/A"},{from:"cloudCover",to:"cloudCover",trans:t=>null!=t?`${t}%`:"N/A"},{from:"vis",to:"visibility",trans:t=>null!=t?parseFloat(t):null},{from:"pvdrIcon",to:"normalizedSkyCode",trans:t=>r.ml.getWeatherNormalizedSkyCode(t)},{from:"symbol",to:"daytime",trans:t=>t&&t.includes("n")?"n":"d"},{from:"windSpd",to:"windSpeed",trans:t=>t+""},{from:"precip",to:"precipitation",trans:t=>null!=t?`${t}`:"N/A"},{from:"uv",to:"uv",trans:t=>null!=t?t:"N/A"}];function p(t){return(0,i.D)(f,m,v)(t)}const y=["feels","daytime","cap","pvdrIcon","symbol","windDir","pvdrWindSpd"],w=[{from:"temp",to:"temperature"},{from:"pvdrWindDir",to:"windDesc"},{from:"vis",to:"visibility"}],g=[{from:"pvdrIcon",to:"normalizedSkyCode",trans:t=>r.ml.getWeatherNormalizedSkyCode(t)},{from:"windSpd",to:"windSpeed",trans:t=>t+""},{from:"uv",to:"uv",trans:t=>null!=t?t:"N/A"},{from:"cloudCover",to:"cloudCover",trans:t=>null!=t?`${t}%`:"N/A"},{from:"rh",to:"humidity",trans:t=>null!=t?`${t}%`:"N/A"},{from:"dewPt",to:"dewPt",trans:t=>null!=t?`${t}°`:"N/A"},{from:"baro",to:"airPressure",trans:t=>null!=t?`${t}`:"N/A"}];function k(t){return(0,i.D)(y,w,g)(t)}}}]);