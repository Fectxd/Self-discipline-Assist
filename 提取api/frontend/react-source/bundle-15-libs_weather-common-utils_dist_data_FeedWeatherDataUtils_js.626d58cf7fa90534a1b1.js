"use strict";(self.homePageWebpackChunks=self.homePageWebpackChunks||[]).push([["libs_weather-common-utils_dist_data_FeedWeatherDataUtils_js"],{13294:function(n,i,t){t.d(i,{KU:function(){return a},LY:function(){return s},_u:function(){return c},vB:function(){return v}});var e=t(63610);const o=3600,r=120,u=new RegExp("\\:([\\d]{2})");function l(){return new Date}function a(n){return(l().getTime()-n.getTime())/1e3}function d(n,i){return new Date(n.getFullYear(),n.getMonth(),n.getDate()+i,n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())}function s(n,i){return new Date(n.valueOf()+60*i*60*1e3)}function c(n,i){const t=parseInt(i),e=parseInt(u.exec(i)[1]),o=t<0?-1:1,r=new Date(n.getTime()+60*(60*t+o*e)*1e3),l=`0${Math.abs(t)}`.substr(-2)+":"+`0${Math.abs(e)}`.substr(-2);return r.toISOString().replace("Z",(o<0?"-":"+")+l)}function v(n){const i=a(n),t=function(){const n=l();return n.setHours(0,0,0,0),n}(),u=d(t,-1),s=d(t,-6),c=function(){const n=l();return new Date(n.getFullYear(),0,0,0,0,0,0)}();return i>=-3300&&i<-60?e.H.InMinutes:i<0?e.H.None:i<r?e.H.JustNow:i<o?e.H.LessThanOneHour:n>=t?e.H.Today:n>=u?e.H.Yesterday:n>=s?e.H.ThisWeek:n>=c?e.H.ThisYear:e.H.FullDate}},34900:function(n,i,t){t.d(i,{HP:function(){return c},ls:function(){return l},on:function(){return s},wN:function(){return e}});var e,o=t(47069),r=t(77246),u=t(71200);!function(n){n.Temperature="Temperature",n.SunAlmanac="SunAlmanac",n.MoonAlmanac="MoonAlmanac",n.Lightning="Lightning",n.FeelsLike="FeelsLike",n.Precipitation="Precipitation",n.Wind="Wind",n.Humidity="Humidity",n.UV="UV",n.Visibility="Visibility",n.CloudCover="CloudCover",n.Pressure="Pressure",n.Tide="Tide",n.Pollen="Pollen",n.AQI="AQI",n.SkyCondition="SkyCondition",n.DailySummary="DailySummary"}(e||(e={}));const l={[e.DailySummary]:o.UF.Overview,[e.Temperature]:o.UF.Temperature,[e.FeelsLike]:o.UF.Feelslike,[e.Precipitation]:o.UF.Precip,[e.Wind]:o.UF.Wind,[e.Humidity]:o.UF.Humidity,[e.UV]:o.UF.UV,[e.Visibility]:o.UF.Visibility,[e.CloudCover]:o.UF.Cloud,[e.Pressure]:o.UF.Pressure,[e.Pollen]:o.UF.Pollen,[e.AQI]:o.UF.AirQuality,[e.Tide]:o.UF.Tide},a={[o.UF.Overview]:[e.Temperature,e.FeelsLike,e.Precipitation,e.SunAlmanac,e.MoonAlmanac,e.SkyCondition],[o.UF.Feelslike]:[e.FeelsLike],[o.UF.Precip]:[e.Precipitation],[o.UF.Wind]:[e.Wind],[o.UF.Humidity]:[e.Humidity],[o.UF.UV]:[e.UV],[o.UF.Visibility]:[e.Visibility],[o.UF.Cloud]:[e.CloudCover],[o.UF.Pressure]:[e.Pressure],[o.UF.Tide]:[e.Tide,e.SunAlmanac,e.MoonAlmanac],[o.UF.Pollen]:[e.Pollen],[o.UF.AirQuality]:[e.AQI]},d={[o.Aq.Overview]:[],[o.Aq.Temperature]:[e.Temperature,e.SkyCondition,e.FeelsLike],[o.Aq.Precip]:[e.Precipitation,e.SkyCondition],[o.Aq.Wind]:[e.Wind,e.SkyCondition],[o.Aq.Humidity]:[e.Humidity,e.SkyCondition],[o.Aq.UV]:[e.UV,e.SkyCondition],[o.Aq.Visibility]:[e.Visibility,e.SkyCondition],[o.Aq.Pressure]:[e.Pressure,e.SkyCondition],[o.Aq.AirQuality]:[e.AQI,e.SkyCondition]},s=n=>{var i;if((0,r.S)()||!n)return;const t=new URL(n).searchParams,e=t.get("day"),l=null===(i=t.get("fcsttab"))||void 0===i?void 0:i.toLowerCase();let s=a;(0,u.ep)()&&(s=d);const c=l&&s[l]||!l&&s[(0,u.ep)()?o.Aq.Overview:o.UF.Overview];let v;return l&&l!=o.UF.Overview&&l!=o.UF.UV||(v=!e||isNaN(Number(e))||Number(e)<=1?"+0":"+"+(Number(e)-1)),{endDate:v,insightCategories:c&&"string"!=typeof c?c.join(","):c}},c=n=>{if(n)return n}},35605:function(n,i,t){t.d(i,{KF:function(){return F},OS:function(){return z},SJ:function(){return Q}});var e=t(71200),o=t(39065),r=t(47903),u=t(20368),l=t(23158),a=t(13294),d=t(44662),s=t(93468),c=t(65022),v=t(24909),f=t(98216),m=t(93704),h=t(77246),y=t(25447),p=t(34900),w=t(12870),g=t(71160),b=t(47069);function N(n,i,t){var r;if(!((0,e.Y5)()||(0,e.ep)()||(0,e.Fl)()||(0,e.U1)()))return n;const u=null==t||null===(r=t.split("T"))||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.split("-"))||void 0===r?void 0:r[2];if(!n||null==n||!n.length)return;if(!(0,h.S)()){const t=i?new URL(i).searchParams:null;return t&&t.get("fcsttab")===b.UF.Tide?n.filter(n=>n.category===p.wN.Tide):void 0}const l=n.filter(n=>{var i;const{metadata:t,category:r}=n||{},{validDateTime:l}=t||{},a=null==l||null===(i=l.split(" "))||void 0===i||null===(i=i[0])||void 0===i?void 0:i.split("/");return(r===p.wN.Tide||r===p.wN.SunAlmanac||r===p.wN.MoonAlmanac||r===p.wN.Lightning)&&!l||(r!==p.wN.DailySummary||((0,e.GJ)()||(0,o.Nf)())&&r===p.wN.DailySummary)&&l&&3===(null==a?void 0:a.length)&&(u&&Number(a[2])===Number(u)||!u&&2===l.split(" ").length)});return(0,e.TN)()&&l.length?l.map(n=>{var i,t,e,o;return{...n,fullText:$(null==n||null===(i=n.insights)||void 0===i?void 0:i.Summary),headlineText:(null==n||null===(t=n.insights)||void 0===t||null===(t=t.Headline)||void 0===t?void 0:t[0].t)||"",teaserText:$(null==n||null===(e=n.insights)||void 0===e?void 0:e.TaskbarSummary),trend:(null==n||null===(o=n.metadata)||void 0===o?void 0:o.Trend)||"Steady"}}):(l.length||f.YT&&f.YT.sendAppErrorEvent((0,s.$5)(c.zfX,"weather overview insights no valid data",`validDate: ${t}, locationHref: ${i}`),!1),l)}function $(n){var i;return null==n||n.sort((n,i)=>(null==i?void 0:i.p)-(null==n?void 0:n.p)),(null==n||null===(i=n.map(n=>null==n?void 0:n.t))||void 0===i?void 0:i.join(" "))||""}function D(n){return null==n?void 0:n.sort((n,i)=>(null==i?void 0:i.p)-(null==n?void 0:n.p))}function A(n,i,t){const{metadata:e,category:o,fullText:r,type:u,priority:l}=i||{},{NightSummary:a}=e||{};if(t){var d,s;if(!n[p.ls[o]])n[p.ls[o]]={p:l,dayList:D(null==i||null===(d=i.insights)||void 0===d?void 0:d.Summary),nightList:D(null==i||null===(s=i.insights)||void 0===s?void 0:s.NightSummary)};if(o===p.wN.DailySummary){var c;const t="DailySummaryNight"===u?"nightList":"dayList";n[p.ls[o]][t]=D(null==i||null===(c=i.insights)||void 0===c?void 0:c.Summary)}}else if(n[p.ls[o]]||(n[p.ls[o]]={day:r,night:a}),o===p.wN.DailySummary){const i="DailySummaryNight"===u?"night":"day";n[p.ls[o]][i]=r}}function k(n){var i;let{i:t,weatherApi:o,insights:r,locationHref:u,validDate:l,needDailyInsight:a,isRankingInsight:d}=n;const s={daily:{},insights:{},hours:{aqi:[]},currentData:{}},c=(null==l||null===(i=l.split("T"))||void 0===i||null===(i=i[0])||void 0===i||null===(i=i.split("-"))||void 0===i?void 0:i[2])||(new Date).getDate();if(!r||null==r||!r.length)return s;const v=[];return r.forEach(n=>{var i;const{metadata:o,category:r,parameters:l,timeSeries:f}=n||{},{validDateTime:m}=o||{},y=null==m||null===(i=m.split(" "))||void 0===i||null===(i=i[0])||void 0===i?void 0:i.split("/");if(3===(null==y?void 0:y.length)&&r&&p.ls[r]&&Number(y[2])===Number(c)){if(S(s.daily,r,l),r===p.wN.AQI&&(0,e.OA)()&&t<g.dC)if(d){var w;s.currentData=0===t?{...s.currentData,...null===(w=(0,g.zF)(!0,f,m))||void 0===w?void 0:w[0]}:s.currentData,v.push(...(0,g.zF)(0!==t,f,m))}else{const n=(0,g.sX)(f,m),i=0===t?n.shift():{};s.currentData={...s.currentData,...i},v.push(...n)}a&&function(n,i,t,e,o){if(!t)return;const r=e&&!(0,h.S)()?new URL(e).searchParams:null;if(r){const n=r.get("day");if(!n&&1!==i||n&&i.toString()!==n)return}const{category:u}=t||{};let l=!0;if(r){const n=r.get("fcsttab");l=n&&n==p.ls[u]||!n&&p.ls[u]==b.UF.Overview}l&&A(n,t,o)}(s.insights,t,n,u,d)}}),(0,e.OA)()&&t==g.dC-1&&(0,g.sB)(t,o,v.length),s.hours.aqi=v,s}function M(n,i){return isNaN(i)||isNaN(Number(n))?n:Number(Number(n).toFixed(i))}function S(n,i,t){if((0,e.Y5)()||(0,e.TN)()||(0,e.GJ)()||(0,o.Nf)())switch(i){case p.wN.CloudCover:n.cloudDay=void 0!==(null==t?void 0:t.cloudCoverDay)?Math.min(Math.round((null==t?void 0:t.cloudCoverDay)||0),100):void 0,n.cloudNight=void 0!==(null==t?void 0:t.cloudCoverDay)?Math.min(Math.round((null==t?void 0:t.cloudCoverNight)||0),100):void 0;break;case p.wN.Visibility:n.lowVis=M((null==t?void 0:t.lowVisiblity)||(null==t?void 0:t.lowVisibility)||(null==t?void 0:t.minVisiblity)||(null==t?void 0:t.minVisibility)||0,2),n.highVis=M((null==t?void 0:t.maxVisibility)||(null==t?void 0:t.peakVisiblity)||(null==t?void 0:t.peakVisibility)||(null==t?void 0:t.maxVisiblity)||0,2);break;case p.wN.Pressure:n.highPressure=M(null==t?void 0:t.dailyHigh,2),n.lowPressure=M(null==t?void 0:t.dailyLow,2);break;case p.wN.Wind:n.highWind=null==t?void 0:t.dailyHigh,n.lowWind=null==t?void 0:t.dailyLow,n.windGust=null==t?void 0:t.dailyGust,(null==t?void 0:t.windSpeed)&&(n.windSpeed=null==t?void 0:t.windSpeed);break;case p.wN.Humidity:n.highHumidity=void 0!==(null==t?void 0:t.dailyHigh)?Math.min(Math.round((null==t?void 0:t.dailyHigh)||0),100):void 0,n.lowHumidity=void 0!==(null==t?void 0:t.dailyLow)?Math.min(Math.round((null==t?void 0:t.dailyLow)||0),100):void 0,(null==t?void 0:t.dailyDewPoint)&&(n.dewPt=`${M(null==t?void 0:t.dailyDewPoint,0)||0}Â°`),(null==t?void 0:t.dailyHumidity)&&(n.humidity=Math.min(Math.round((null==t?void 0:t.dailyHumidity)||0),100)||0);break;case p.wN.Temperature:n.highTemp=M(null==t?void 0:t.dailyHigh,0),n.lowTemp=M(null==t?void 0:t.nightlyLow,0);break;case p.wN.FeelsLike:n.highFeels=M(null==t?void 0:t.dailyHigh,0),n.lowFeels=M(null==t?void 0:t.nightlyLow,0)}}function T(n,i,t,r,u){var l;const a=null==n||null===(l=n.location)||void 0===l?void 0:l.TimezoneName;if(!((0,e.Y5)()||(0,e.ep)()||(0,e.S_)()||(0,o.Nf)())||null==t||!t.length)return;let d=!0;if(!(0,h.S)()&&(0,e.Y5)()){const n=r?new URL(r).searchParams:null;n&&"0"!==n.get("day")&&(d=!1)}const s=new y.i(w.Rb.Locale,a),c=Date.now(),v=Number(s.formatDay(new Date(c-864e5)));let f=I({source:n,insights:t,timestamp:c-864e5,timeUtility:s,isToday:!1,units:u});f=d?f:f.slice(f.length-2);const m=function(n,i,t,o){const r=function(n){const i=n.split(":");return Number(i[0])>=0?`+${i[0]}:${i[1]}`:`${i[0]}:${i[1]}`}(null==n?void 0:n.utcOffset),u={dayIndex:o,id:`past${Math.round(Date.now()/1e3)}`,insights:{overview:void 0},rankingInsights:{overview:void 0},almanac:{sunrise:void 0,sunset:void 0,moonrise:void 0,moonset:void 0,valid:void 0,moonState:void 0,moonPhase:void 0,moonPhaseCode:void 0}};return i.forEach(n=>{var i,o;const{category:l,metadata:a,timeSeries:d,parameters:s,fullText:c,type:v}=n||{},f=null==a||null===(i=a.validDateTime)||void 0===i?void 0:i.split(" ");if(Number(null==f||null===(o=f[0])||void 0===o||null===(o=o.split("/"))||void 0===o?void 0:o[2])===t){switch(l){case p.wN.Temperature:u.highTemp=null==s?void 0:s.dailyHigh,u.lowTemp=null==s?void 0:s.nightlyLow;break;case p.wN.Pressure:u.airPressure=null==s?void 0:s.pressureHighDay;break;case p.wN.FeelsLike:u.highFeels=null==s?void 0:s.dailyHigh,u.lowFeels=null==s?void 0:s.nightlyLow;break;case p.wN.UV:u.uv=(null==s?void 0:s.maxUvIndex)||0;break;case p.wN.Precipitation:u.raToMN=(null==s?void 0:s.rain_amount)||0,u.saToMN=(null==s?void 0:s.snow_amount)||0;break;case p.wN.Pollen:var m,h;if((0,e.GJ)()&&!(0,e.Go)())u.pollen={pollenindex:(null==s?void 0:s.pollenIndex)||0,level:(null==s||null===(m=s.pollenLevel)||void 0===m||null===(m=m.toString())||void 0===m||null===(h=m.padStart)||void 0===h?void 0:h.call(m,2,"0"))||"00",type:`${(null==s?void 0:s.mainAllergy)??""}`}}var y,w,g,b;if(p.wN.SkyCondition===l&&a&&(u.daySymbol=null==a?void 0:a.DaySymbol,u.nightSymbol=null==a?void 0:a.NightSymbol,u.dayCap=null==a?void 0:a["DaySymbol|cap"],u.nightCap=null==a?void 0:a["NightSymbol|cap"],u.symbol=null==a?void 0:a.DaySymbol),p.wN.SunAlmanac===l&&d)u.almanac={...u.almanac,sunrise:U(r,null===(y=Object.keys(d.sunrise||{}))||void 0===y?void 0:y[0]),sunset:U(r,null===(w=Object.keys(d.sunset||{}))||void 0===w?void 0:w[0])};if(p.wN.MoonAlmanac===l&&d&&a)u.almanac={...u.almanac,moonrise:U(r,null===(g=Object.keys(d.moonrise||{}))||void 0===g?void 0:g[0]),moonset:U(r,null===(b=Object.keys(d.moonset||{}))||void 0===b?void 0:b[0]),moonPhase:null==a?void 0:a.localizedMoonPhase,moonPhaseCode:null==a?void 0:a.moonPhaseCode};A((0,e.TN)()?u.rankingInsights:u.insights,n,(0,e.TN)()),(0,e.GJ)()&&l===p.wN.Humidity&&(s.dailyHumidity=null!=d&&d.trend?x(Object.values(null==d?void 0:d.trend)):void 0,s.dailyDewPoint=null!=d&&d.dewPoints?x(Object.values(d.dewPoints)):void 0),S(u,l,s)}}),H("yesterdayDaily",n,u),u}(n,t,v,-1);let g=I({source:n,insights:t,timestamp:c,timeUtility:s,isToday:!0,units:u});if(g=g.slice(0,i),!(0,h.S)()&&(0,e.O8)()){var b,N,$,D,k,M;const n=(0,e.GJ)()||(0,o.Nf)()?1:2;g=null===(b=g)||void 0===b?void 0:b.slice((null===(N=g)||void 0===N?void 0:N.length)>n?(null===($=g)||void 0===$?void 0:$.length)-n:0);const i=n-(null===(D=g)||void 0===D?void 0:D.length);f=i>0?null===(k=f)||void 0===k?void 0:k.slice((null===(M=f)||void 0===M?void 0:M.length)-i):[]}return{todayPastHours:g,yesterdayData:{...m,hourly:f}}}function I(n){let{source:i,insights:t,timestamp:o,timeUtility:r,isToday:u,units:l}=n,d=23;const s=Number(r.formatDay(new Date(o))),c=(0,e.TN)()?P:R,f={};return t.forEach(n=>{var i,t,o;const{category:r,metadata:l,timeSeries:a}=n||{},v=null==l||null===(i=l.validDateTime)||void 0===i?void 0:i.split(" "),m=Number(null==v||null===(t=v[0])||void 0===t||null===(t=t.split("/"))||void 0===t?void 0:t[2]);let h=Number(null==v||null===(o=v[1])||void 0===o||null===(o=o.split(":"))||void 0===o?void 0:o[0]);if(m===s&&(u&&!isNaN(h)||!u)&&a)switch(h=u?h:23,d=h,r){case p.wN.Temperature:f.temp=c(h,s,u?a.trend:a.temperature,0);break;case p.wN.Wind:f.windSpd=c(h,s,a.windSpeed),f.windDir=c(h,s,a.direction),f.windGust=c(h,s,a.windGust);break;case p.wN.CloudCover:f.cloudCover=c(h,s,a.trend,0);break;case p.wN.Humidity:f.rh=c(h,s,a.trend,0),f.dewPt=c(h,s,a.dewPoints,0);break;case p.wN.Visibility:f.vis=c(h,s,a.trend,1);break;case p.wN.Pressure:f.baro=c(h,s,u?a.trend:a.msl);break;case p.wN.FeelsLike:f.feels=c(h,s,a.feelsLikeTrend,0);break;case p.wN.UV:f.uv=c(h,s,u?a.trend:a.uvIndex);break;case p.wN.Precipitation:f.rainAmount=a.rainTrend?c(h,s,a.rainTrend,2):new Array(h+1).fill(0),f.snowAmount=a.snowTrend?c(h,s,a.snowTrend,2):new Array(h+1).fill(0),f.raAccu=O(f.rainAmount),f.saAccu=O(f.snowAmount);break;case p.wN.AQI:if(!(0,e.OA)())break;f.aqi=c(h,s,a.trend),f.CO=c(h,s,a.CO),f.NO2=c(h,s,a.NO2),f.O3=c(h,s,a.O3),f.PM10=c(h,s,a.PM10),f.PM25=c(h,s,a.PM25),f.SO2=c(h,s,a.SO2),f.PPAType=c(h,s,a.primaryPollutant)}if(p.wN.SkyCondition===r){const{symbol:n,cap:i}=function(n,i,t){const e=Object.keys(n),o=/^\d{4}\/\d{2}\/\d{2} \d{2}:\d{2}/,r={},u={};for(let i=0;i<e.length;i++)if(o.test(e[i])){(e[i].indexOf("cap")>-1?u:r)[e[i]]=n[e[i]]}return{symbol:R(t,i,r,void 0,!1),cap:R(t,i,u,void 0,!1)}}(l,s,d);f.symbol=n,f.cap=i}}),f.time=function(n,i,t){var e,o;const r=[],u=null==n||null===(e=n.location)||void 0===e?void 0:e.TimezoneName,l=(null==n||null===(o=n.utcOffset)||void 0===o?void 0:o.split(":"))||[],a=parseInt(null==n?void 0:n.utcOffset)>0?1:-1,d=parseInt(l[1]||"0")>0?a*parseInt(l[1]||"0"):0,s=i+a*d*6e4,c=i-s%36e5;let v=L(new Date(i),u||"","en-us");for(let n=0;n<=t;n++){let i=c+36e5*(n-v);0==n&&v&&0!=L(new Date(i),u||"","en-us")&&(v=23==L(new Date(i),u||"","en-us")?v-1:v+1,i=c+36e5*(n-v)),r.push(new Date(i))}return r}(i,o,d),f.valid=f.time.map(n=>(0,a._u)(n,null==i?void 0:i.utcOffset)),function(n,i,t,e,o){const r=[],u=Object.keys(t);for(let l=0;l<=e;l++){const e={id:`hour${Math.round(Date.now()/1e3)}${l}`};u.forEach(n=>{var i;e[n]=null===(i=t[n])||void 0===i?void 0:i[l]}),0===l&&H(i?"todayPastHours":"yesterdayPastHours",n,e);const a=(0,v.b7)(e,o);r.push(a)}return r}(i,u,f,d,l)}function O(n){const i=[];let t=0;for(let e=0;e<n.length;e++)t+=n[e]||0,i.push(t);return i}function P(n,i,t){let e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=[];if(23===n){var u;r=(null===(u=Object.values(t||{}).reduce((n,i)=>null==n?void 0:n.concat(i),[]))||void 0===u?void 0:u.slice(0,24))||[]}else{var l;const e=Object.keys(t||{}),o=e.findIndex(t=>{var e,o;return Number(null==t||null===(e=t.split(" "))||void 0===e||null===(e=e[0])||void 0===e||null===(e=e.split("/"))||void 0===e?void 0:e[2])===i&&Number(null==t||null===(o=t.split(" "))||void 0===o||null===(o=o[1])||void 0===o||null===(o=o.split(":"))||void 0===o?void 0:o[0])>=n});if(0===o&&(r=t[e[o]]||[]),o>0&&null!==(l=t[e[o-1]])&&void 0!==l&&l.length){var a;let i=[];for(let n=0;n<=o-1;n++)i=[...i,...t[e[n]]||[]];r=[...null===(a=i)||void 0===a?void 0:a.slice(Math.max(i.length-n-1,0)),...t[e[o]]]}}return r.length===n-1&&r.push(r[r.length-1]),o&&r.length<n?[]:r.map(n=>M(n,e))}function R(n,i,t){let e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=[];const r=function(n,i,t){let e=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const o=Object.keys(t||{}).filter(n=>{var t;return Number(null==n||null===(t=n.split(" "))||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.split("/"))||void 0===t?void 0:t[2])===i});if(e&&(o.length<n||"00"!==C(o[0])||Number(C(o[n]))<n-1))return[];return o}(n,i,t,!(arguments.length>4&&void 0!==arguments[4])||arguments[4]);if(0===r.length)return[];for(let i=0;i<=n;i++){const n=r[i],u=void 0===t[n]&&i>0?t[r[i-1]]:t[n];i>0&&C(r[i-1])===C(r[i])||(i>0&&q(n)-q(r[i-1])>=72e5&&o.push(M(t[r[i-1]],e)),o.push(M(u,e)))}return o=o.slice(0,n+1),o.length===n&&o.push(o[o.length-1]),o}function U(n,i){if(!i)return i;const t=i.split(" ");return`${t[0].split("/").join("-")}T${t[1]}:00${n}`}function C(n){var i;return null==n||null===(i=n.split(" "))||void 0===i||null===(i=i[1])||void 0===i||null===(i=i.split(":"))||void 0===i?void 0:i[0]}function L(n,i,t){const e=n.toLocaleString(t,{hour:"2-digit",hour12:!1,timeZone:i}),o=parseInt(e);return 24==o?0:o}function H(n,i,t){if(!(0,h.S)()||!(0,e.Y5)())return;const o=Object.keys(t||{}).filter(n=>void 0===(null==t?void 0:t[n]));if(o.length){var r,u;const t=`id: ${null==i?void 0:i.id}, lat: ${null==i||null===(r=i.coordinates)||void 0===r?void 0:r.lat}, lon: ${null==i||null===(u=i.coordinates)||void 0===u?void 0:u.lon}, data type: ${n}, incompletedKeys: ${JSON.stringify(o)}`;f.YT&&f.YT.sendAppErrorEvent((0,s.$5)(c.zfX,"weather overview past insights incompleted",t),!1)}}function q(n){return new Date(n).getTime()}function x(n){if(!n||!n.length||!Array.isArray(n))return 0;return n.reduce((n,i)=>n+i,0)/n.length}class F{constructor(n,i){this.truncateTimezone=n,this.locationHref=i}setLocationHref(n){this.locationHref=n}TranslateToWeatherOverview(n,i,t){var r,u,y,p,w,g,b,$;let D=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const A=t||{};if(!function(n,i){if(!(n&&n.responses&&n.responses[0]&&n.responses[0].weather&&n.responses[0].weather[0]&&n.responses[0].weather[0].current))return!1;const t=n.responses[0].weather[0];if(t.forecast&&t.forecast.days&&t.forecast.days.length>0)return!0;if(!i)return!1;return f.YT&&f.YT.sendAppErrorEvent((0,s.$5)(c.iBX,"No daily forecast data in weather summary",t.toString()),!1),!0}(n,A.dailyAsOption))throw new Error("Weather Service response schema validation error: no summary found!");const M=n.responses[0].weather[0],S=n.responses[0].source,{degree:I,unit:O}=(0,v.kC)(n.units.temperature),P=M.current,R="n"===P.daytime,U=this.locationHref?{locationHref:this.locationHref}:{},{location:C,locStrResolver:L}=i,H=(0,d.fS)(C,O,L,U),q=M.alerts||[],x=q[0]||null,F=q.length,z=x?x.significance:"",Q=n.units,V=(0,e.TN)()?"wxplus":"insights",G={...(0,m.fA)(P),normalizedSkyCode:l.ml.getWeatherNormalizedSkyCode(P.pvdrIcon),precipitation:{children:M.forecast&&M.forecast.days&&M.forecast.days[0]&&M.forecast.days[0].daily&&null!=M.forecast.days[0].daily.precip?`${M.forecast.days[0].daily.precip}%`:void 0},deepLink:H,degreeSetting:I,windDesc:`${P.pvdrWindDir} ${P.pvdrWindSpd}`,windSpeed:`${P.windSpd} ${Q.speed||""}`,windGust:`${P.windGust} ${Q.speed||""}`,windSpeedNumber:P.windSpd,windGustNumber:P.windGust,baro:`${P.baro} ${Q.pressure||""}`,visiblity:`${P.vis} ${Q.distance||""}`,isNight:R,currentRaw:P,unitsRaw:Q,locationRaw:C,isAlert:!!F,alertCount:F,alertSignificance:z,life:M.life};!function(n,i){try{const{speed:t="",temperature:e=""}=i;if(n&&`${n}`.length>15||t.length>15||e.length>10){const t="Wind/Temperature unit is too long in weatherOverview's response.",e=`windSpeed: ${n}, units: ${JSON.stringify(i)}`;f.YT&&f.YT.sendAppErrorEvent((0,s.$5)(c.iBX,t,e),!1)}}catch{return}}(P.windSpd,Q),function(n,i,t){var e,o,r;if(!i||i&&(null==t?void 0:t.length)>0&&null!=t&&null!==(e=t[0])&&void 0!==e&&e.category)return;const u=`id: ${null==n?void 0:n.id}, lat: ${null==n||null===(o=n.coordinates)||void 0===o?void 0:o.lat}, lon: ${null==n||null===(r=n.coordinates)||void 0===r?void 0:r.lon}`;(0,h.S)()&&f.YT&&f.YT.sendAppErrorEvent((0,s.$5)(c.zfX,"weather overview insights not returned",u),!1)}(S,null===(r=A.weatherApi)||void 0===r?void 0:r.insights,null==M||null===(u=M.insights)||void 0===u?void 0:u[V]);const{forecast:J,firstHourlyForecast:B,currentContent:Y}=function(n){let{currentResponse:i,isNight:t,units:r,deepLink:u,truncateTimezone:a,locationHref:d,weatherApi:s}=n;const c=[];let f=null,h=null;const y=u.indexOf("?")>0?"&":"?",p=(0,e.TN)(),w=p||(0,e.ep)()||(0,e.GJ)()||(0,o.Nf)(),g=p?"wxplus":"insights",b=i.forecast&&i.forecast.days&&i.forecast.days.length||0;for(let n=0;n<b;++n){var N,$,D,A,M,S,T,I,O,P,R,U;const o=i.forecast.days[n],b=o.daily,L=t?b.night:b.day,H=0===n?L:b.day;let q,x;if(a&&b.valid&&b.valid.includes("T")){const n=b.valid.split("T")[0].split("-");q=new Date(Number(n[0]),Number(n[1])-1,Number(n[2]))}else q=b.valid&&new Date(b.valid);null!=b.windMax?x=`${b.windMax} ${r.speed}`:null!=b.pvdrWindSpd&&(x=`${b.pvdrWindDir} ${b.pvdrWindSpd}`);const{daily:F,insights:W,hours:z,currentData:Q={}}=k({i:n,weatherApi:s,insights:null==i||null===(N=i.insights)||void 0===N?void 0:N[g],locationHref:d,validDate:b.valid,needDailyInsight:w,isRankingInsight:p});h=h||Q;const V={...(0,m.PC)(b),...F,highTemp:(null==F?void 0:F.highTemp)||b.tempHi,lowTemp:(null==F?void 0:F.lowTemp)||b.tempLo,dayIndex:n,id:Math.random().toString(24).substring(2),day:q,dayNightSummaries:j(b),summaries:H?H.summaries:[],pvdrIcon:b.pvdrIcon||""+b.icon,precipitation:null!=b.precip?`${b.precip}`:"N/A",rainAmount:E(b.rainAmount,r.height),snowAmount:E(b.snowAmount,r.height),validTime:new Date(b.valid),dayCode:(null===($=b.day)||void 0===$?void 0:$.pvdrIcon)||(null===(D=b.day)||void 0===D||null===(D=D.icon)||void 0===D?void 0:D.toString()),dayCap:(null===(A=b.day)||void 0===A?void 0:A.pvdrCap)||(null===(M=b.day)||void 0===M?void 0:M.cap)||b.pvdrCap,daySymbol:null===(S=b.day)||void 0===S?void 0:S.symbol,nightCode:l.ml.getWeatherNormalizedSkyCode((null===(T=b.night)||void 0===T?void 0:T.pvdrIcon)||(null===(I=b.night)||void 0===I||null===(I=I.icon)||void 0===I?void 0:I.toString())||b.pvdrIcon),nightCap:(null===(O=b.night)||void 0===O?void 0:O.pvdrCap)||(null===(P=b.night)||void 0===P?void 0:P.cap)||b.pvdrCap,nightSymbol:null===(R=b.night)||void 0===R?void 0:R.symbol,nightPrecipitation:null!=(null===(U=b.night)||void 0===U?void 0:U.precip)?`${b.night.precip}`:"N/A",windSpeed:L?`${L.windSpd}`:"N/A",windSpeedUnit:r.speed,windMax:x,windMaxDir:null!=b.windMax?b.windMaxDir:null,...o.trend&&{trend:{recHi:o.trend.recHi,recLo:o.trend.recLo,hiDate:o.trend.hiDate,loDate:o.trend.loDate}},aqi:`${b.aqi||0}`,almanac:o.almanac,deepLink:`${u}${y}day=${n+1}`,hourly:[],raToMN:b.raToMN,saToMN:b.saToMN,hotRisk:b.heatRisk??null,coldRisk:b.coldRisk??null,insights:(0,e.TN)()?void 0:W,rankingInsights:(0,e.TN)()?W:void 0};if(o.hourly)for(let i=0;i<o.hourly.length;++i){var C;const t={...o.hourly[i],...(null==z||null===(C=z.aqi)||void 0===C?void 0:C[i])||{}};n>=4&&t.aqi&&(t.aqi=void 0),f=f||t,V.hourly.push((0,v.b7)(t,r))}c.push(V)}return{forecast:c,firstHourlyForecast:f,currentContent:h}}({currentResponse:M,isNight:R,units:Q,deepLink:H,truncateTimezone:this.truncateTimezone,locationHref:this.locationHref,weatherApi:A.weatherApi});if((A.weatherApi&&-1===A.weatherApi.history||A.currentAsHourly)&&B&&!D){let n=function(n,i,t,e){const o=i.valid?(0,a.LY)(new Date(i.valid),-1):new Date,{raAccu:r=0,saAccu:u=0,rainAmount:l=0,snowAmount:d=0}=i||{},s=Math.max(Number((r-l).toFixed(2)),0),c=Math.max(Number((u-d).toFixed(2)),0);if(!t&&i.valid){const n=i.valid.slice(-6);n.match(/([+-]\d{2}):(\d{2})$/)&&(t=n)}return[{...(0,m.x3)(n),time:o,aqi:n.aqi||0,timeStr:o&&t&&(0,a._u)(o,t),rainAmount:s,raAccu:s,saAccu:c,snowAmount:c,windSpeedUnit:e.speed,windGust:null!=n.windGust&&null!=n.windGust?`${n.windGust} ${e.speed}`:"N/A",pressureUnit:e.pressure,vis:null!=n.vis?`${n.vis} ${e.distance}`:"N/A"}]}(P,B,S&&S.utcOffset,Q);n=Y&&n.length>0?[{...n[0],...Y}]:n,n&&n.length>0&&(J[0].hourly=n.concat(J[0].hourly))}const Z=24-((null==J||null===(y=J[0].hourly)||void 0===y?void 0:y.length)||0);return{...W(M,n),lastUpdated:M.current&&P.created,insights:N(null==M||null===(p=M.insights)||void 0===p?void 0:p[V],this.locationHref,null===(w=M.forecast)||void 0===w||null===(w=w.days)||void 0===w||null===(w=w[0])||void 0===w||null===(w=w.daily)||void 0===w?void 0:w.valid),currentCondition:G,forecast:J,calendar:M.calendar,pollen:M.jwapollen||M.pollen,nowcasting:_(M.nowcasting),source:S,provider:M.provider,aqiProvider:M.aqiProvider,alertsInfo:x,alertsInfoList:q,unit:O,unitRaw:{heightRaw:1===O?"in":(null===(g=A.unitRaw)||void 0===g?void 0:g.heightRaw)||"mm"},lifeDaily:M.lifeDaily,lifeActivityData:M.LifeActivityResp,forecastVideo:M.forecastVideo,wazes:M.wazes,activityIndexDaily:M.activityIndexDaily,stormInfo:M.storminfo?{...M.storminfo||{},distance:n.units.distance}:null,cameraInfo:null===(b=M.trafficCamera)||void 0===b?void 0:b.cameras[0],iconMap:M.iconMap,pastData:T(S,Z,null==M||null===($=M.insights)||void 0===$?void 0:$[V],this.locationHref,Q),currentHourIndex:Z,hazards:M.hazards,uxResp:M.uxResp}}}function W(n,i){const t=function(n){try{const i=n.contentdata,t=[];return i&&i.length?(i.forEach(n=>{if(!n||!n.contenttype)return;const i={id:n.id,cid:n.cid,ranking:n.ranking?n.ranking:0,contenttype:n.contenttype,cf:n.cf,content:[]};n.content&&n.content.forEach(n=>{n&&i.content.push({...n})}),t.push(i)}),t.length>0?t:null):null}catch{return null}}(n),e=function(n){return n.mapsmetadata}(n),o=function(n){try{if(!n||!n.previews||!Array.isArray(n.previews)||n.previews.length<1)return null;const i=n.previews,t=[];return i.forEach(n=>{if(!n||!n.PreviewType||!n.Body||!Array.isArray(n.Body)||n.Body.length<1)return;const i=n.Body,e={};i&&i.length>0&&i[0]&&i[0].Url&&(e.iconUrl=i[0].Url),i&&i.length>1&&i[1]&&i[1].Text&&(e.text=i[1].Text),i&&i.length>2&&i[2]&&i[2].Text&&(e.subText=i[2].Text),Object.keys(e).length<1||t.push({previewType:n.PreviewType,content:e})}),t.length>0?t:null}catch{return null}}(i),r=function(n){const i=n.commentary&&n.commentary.styles;if(!i)return null;const t=n=>n&&n.chip&&n.commentary?n:null,e={None:"Neutral","a-grumpy-person":"Grumpy","a-happy-person":"Happy",pirate:"Pirate"},o={};for(const n in i){var r;const u=i[n];if(!u||!u.displayName||null===(r=u.commentaries)||void 0===r||!r.big_widget||!Array.isArray(u.commentaries.big_widget)||u.commentaries.big_widget.length<1)continue;const l=u.commentaries.big_widget.map(n=>t(n)).filter(n=>!!n);l.length<1||(o[e[n]]={displayName:u.displayName,commentaries:{big_widget:l}})}return o}(n);return{contentData:t,...o&&{previews:o},mapsMetaData:e,commentary:r}}function E(n,i){return null!=n&&`${n} ${i}`}function j(n){const i=new Map;if(!n)return i;return["day","night","tmr"].forEach(t=>{const e=n[t]&&n[t].summaries;e&&i.set(t,e)}),i}function z(n,i){const t=[];return t.push(i),n&&(t.push(n.pvdrIcon),t.push(n.uv),t.push(n.temp),t.push(n.feels),t.push(n.rh),t.push(n.windSpd),t.push(n.aqi),t.push(n.vis),t.push(n.symbol)),t.toString()}const Q=new F(!0);function V(n){return n>=r.HF.RainThreshold}function _(n){let i;if(n){const t=(0,u.A)(n.precipitation,V);i={...n,isRaining:t,useNowcastSummary:t&&n.summary&&n.shortSummary}}return i}},47069:function(n,i,t){var e,o,r;t.d(i,{Aq:function(){return o},UF:function(){return e}}),function(n){n.Overview="overview",n.Feelslike="feelslike",n.Precip="precipitation",n.Precip4h="precipitation4h",n.Precip24h="precipitation24h",n.PrecipDaily="precipitationdaily",n.Wind="wind",n.Humidity="humidity",n.UV="uv",n.UvIndex="uvindex",n.Visibility="visibility",n.Cloud="cloudcover",n.Pressure="pressure",n.Tide="tide",n.Pollen="pollen",n.AirQuality="airquality",n.Temperature="temperature"}(e||(e={})),function(n){n.Overview="overview",n.Precip="precipitation",n.Wind="wind",n.Humidity="humidity",n.UV="uvindex",n.Visibility="visibility",n.Pressure="airPressure",n.AirQuality="aqi",n.Temperature="temperature"}(o||(o={})),function(n){n.AirQualityIndex="airQualityIndex",n.O3="o3",n.PM25="pm25",n.PM10="pm10",n.NO2="no2",n.CO="co",n.SO2="so2",n.Precip4h="precip4h",n.Precip24h="precip24h",n.SP="sp",n.MSL="msl",n.None="none"}(r||(r={}))},47903:function(n,i,t){var e,o;t.d(i,{Ce:function(){return f},HF:function(){return a},M6:function(){return s},N0:function(){return v},QZ:function(){return l},Si:function(){return e},Wx:function(){return h},ZR:function(){return c},_2:function(){return o},hL:function(){return d},rN:function(){return m},uu:function(){return u},zW:function(){return r}}),function(n){n[n.None=0]="None",n[n.Dressing=1]="Dressing",n[n.UV=2]="UV",n[n.WindChill=3]="WindChill",n[n.HeatStroke=4]="HeatStroke",n[n.Umbrella=10]="Umbrella",n[n.Outdoor=11]="Outdoor",n[n.Driving=12]="Driving",n[n.Cycling=20]="Cycling",n[n.Gardening=21]="Gardening",n[n.Hiking=22]="Hiking",n[n.Running=24]="Running",n[n.Stargazing=25]="Stargazing",n[n.Walking=26]="Walking",n[n.Picnic=27]="Picnic"}(e||(e={})),function(n){n.layerActivated="ActivatedOn",n.overviewRequestStart="OverviewRequest.start",n.overviewRequestCluster="OverviewRequest.cluster",n.overviewRequestDuration="OverviewRequest.duration",n.overviewRequestInternal="OverviewRequest.internal",n.overviewRequestNetwork="OverviewRequest.network",n.overviewRequestPathHash="OverviewRequest.pathHash",n.pdpRequestStart="pdpRequest.start",n.pdpRequestDuration="pdpRequest.duration"}(o||(o={}));const r="WeatherCondition";var u,l,a;!function(n){n[n.normal=0]="normal",n[n.alert=1]="alert",n[n.nowcast=2]="nowcast"}(u||(u={})),function(n){n[n.Start=1]="Start",n[n.WCComplete=2]="WCComplete"}(l||(l={})),function(n){n[n.RainThreshold=11.9]="RainThreshold"}(a||(a={}));const d="weaRecentLocation",s="weaRecentForMobileLocation",c="weaMUIDs",v="isWeaLastLocationFromDetect";var f,m,h,y;!function(n){n[n.setHomeFail=1]="setHomeFail",n[n.exceedPinLocationLimit=2]="exceedPinLocationLimit"}(f||(f={})),function(n){n.ImageContent="ImageContent"}(m||(m={})),function(n){n.L1Minimap="L1Minimap",n.CardMinimap="CardMinimap"}(h||(h={})),function(n){n[n.WeatherFeedback=0]="WeatherFeedback",n.IndependentSelfTrigger="i-s",n.IndependentFeedbackTrigger="i-f"}(y||(y={}))},58022:function(n,i,t){t.d(i,{OW:function(){return c},UA:function(){return s},dB:function(){return d}});var e=t(46261),o=t(12870),r=t(43025),u=t(35605);const l=[{from:"Longitude",to:"longitude"},{from:"Latitude",to:"latitude"},{from:"AddressLine",to:"addressLine"},{from:"City",to:"locality"},{from:"SubRegion",to:"subRegion"},{from:"State",to:"region"},{from:"Country",to:"country"},{from:"CountryCode",to:"isoCode"},{from:"Accuracy",to:"accuracy"},{from:"DefinitionName",to:"definitionName"},{from:"PopIpDialog",to:"popIpDialog"}],a=[{from:"Language",to:"language",trans:n=>n||o.Rb.Locale},{from:"Accuracy",to:"accurateEnough",trans:n=>0===n||null==n||n<207026}];function d(n){if(!n)return null;const i=function(n){return(0,r.D)([],l,a)(n)}(n);return i.displayName=(0,e.Mn)(i),i}function s(n){const i=parseInt(n);return!(isNaN(i)||i<=0||i>500)}function c(n,i,t){return u.SJ.TranslateToWeatherOverview(n.response,{location:n.location,locStrResolver:n.locStrResolver},i,!1,t)}},63610:function(n,i,t){var e;t.d(i,{H:function(){return e}}),function(n){n[n.None=0]="None",n[n.JustNow=1]="JustNow",n[n.LessThanOneHour=2]="LessThanOneHour",n[n.Today=3]="Today",n[n.Yesterday=4]="Yesterday",n[n.ThisWeek=5]="ThisWeek",n[n.ThisYear=6]="ThisYear",n[n.FullDate=7]="FullDate",n[n.InMinutes=8]="InMinutes"}(e||(e={}))},71160:function(n,i,t){t.d(i,{Cv:function(){return f},JF:function(){return w},Lt:function(){return T},Sb:function(){return v},Ut:function(){return h},_N:function(){return M},_R:function(){return c},cE:function(){return b},cY:function(){return g},dC:function(){return $},mA:function(){return N},mM:function(){return p},qt:function(){return m},sB:function(){return k},sX:function(){return A},zF:function(){return D}});var e=t(17254),o=t(48566),r=t(31951),u=t(65022),l=t(93468),a=t(98216),d=t(77246);const s=["de-at","cs-cz","nl-be","fr-ch","de-de","da-dk","es-es","fi-fi","fr-fr","el-gr","hu-hu","en-ie","it-it","nl-nl","nb-no","pl-pl","pt-pt","sv-se"],c={Good:"Good",Moderate:"Moderate",Poor:"Poor",PoorIN:"PoorIN",Unhealthy:"Unhealthy",VeryUnhealthy:"Very Unhealthy",Hazardous:"Hazardous",Satisfactory:"Satisfactory",ModeratelyPolluted:"Moderately polluted",VeryPoor:"Very Poor",Severe:"Severe",Fair:"Fair",ModerateEU:"ModerateEU",PoorEU:"PoorEU",VeryPoorEU:"Very Poor EU",ExtremelyPoor:"Extremely Poor"};function v(n){return"en-in"===n?"in":"zh-cn"===n?"cn":s.includes(n)?"eu":"us"}function f(n){return"zh-cn"===n?"AirQualityHeatMapCn":s.includes(n)?"AirQualityHeatMapEu":"AirQualityHeatMap"}function m(n){return"en-us"!==n&&n?"en-in"===n?"IN":"zh-cn"===n?"CN":s.includes(n||"")?"EU":"OT":"US"}function h(n,i){if(null==n||n<0)return null;const t=m(i);if("IN"===t){if(n<=50)return c.Good;if(n>50&&n<=100)return c.Satisfactory;if(n>100&&n<=200)return c.ModeratelyPolluted;if(n>200&&n<=300)return c.PoorIN;if(n>300&&n<=400)return c.VeryPoor;if(n>400)return c.Severe}else if("EU"===t){if(n<=50)return c.Good;if(n>50&&n<=100)return c.Fair;if(n>100&&n<=150)return c.ModerateEU;if(n>150&&n<=200)return c.PoorEU;if(n>200&&n<=300)return c.VeryPoorEU;if(n>300)return c.ExtremelyPoor}else{if(n<=50)return c.Good;if(n>50&&n<=100)return c.Moderate;if(n>100&&n<=150)return c.Poor;if(n>150&&n<=200)return c.Unhealthy;if(n>200&&n<=300)return c.VeryUnhealthy;if(n>300)return c.Hazardous}}const y={bg:"weathermapdata/1/static/background/v2.0/Aq1UBackground{level}.png",icon:r.rK+r.mr};function p(n,i){const t=o.Qf.Format(y[i],{level:n});return`${(0,e.rA)().AssetsUrl}/${t}`}function w(n,i,t){if(!t)return"";if("IN"==i)switch(n){case 1:case 10:return null==t?void 0:t.good;case 2:case 20:return null==t?void 0:t.satisfactory;case 3:case 30:return null==t?void 0:t.moderate;case 4:case 40:return null==t?void 0:t.poor;case 5:case 50:return null==t?void 0:t.veryPoor;case 6:case 60:return null==t?void 0:t.severe}else if("EU"==i)switch(n){case 1:case 10:return null==t?void 0:t.good;case 2:case 20:return null==t?void 0:t.fair;case 3:case 30:return null==t?void 0:t.moderate;case 4:case 40:return null==t?void 0:t.poor;case 5:case 50:return null==t?void 0:t.veryPoor;case 6:case 60:return null==t?void 0:t.extremelyPoor}else switch(n){case 1:case 10:return null==t?void 0:t.good;case 2:case 20:return null==t?void 0:t.moderate;case 3:case 30:return null==t?void 0:t.poor;case 4:case 40:return null==t?void 0:t.unhealthy;case 5:case 50:return null==t?void 0:t.veryUnhealthy;case 6:case 60:return null==t?void 0:t.hazardous}return""}function g(n,i){return n<=50?null==i?void 0:i.aqiNearby:null==i?void 0:i.healthImpact}function b(n,i){return n<=50?null==i?void 0:i.primaryPollutant:null==i?void 0:i.goodAqiNearby}function N(n,i){if(null==n||n<0)return 0;const t=m(i);if("IN"===t){if(n<=50)return 1;if(n>50&&n<=100)return 2;if(n>100&&n<=200)return 3;if(n>200&&n<=300)return 4;if(n>300&&n<=400)return 5;if(n>400)return 6}else if("EU"===t){if(n<=50)return 1;if(n>50&&n<=100)return 2;if(n>100&&n<=150)return 3;if(n>150&&n<=200)return 4;if(n>200&&n<=300)return 5;if(n>300)return 6}else{if(n<=50)return 1;if(n>50&&n<=100)return 2;if(n>100&&n<=150)return 3;if(n>150&&n<=200)return 4;if(n>200&&n<=300)return 5;if(n>300)return 6}}const $=4;function D(n,i,t){var e;const o=[],r=Object.keys((null==i?void 0:i.trend)||{}).find(i=>n?new Date(t).getTime()==new Date(i).getTime():new Date(t).getTime()<new Date(i).getTime()),u=(null==i||null===(e=i.trend)||void 0===e||null===(e=e[r])||void 0===e?void 0:e.length)||0;for(let n=0;n<u;n++){var l,a,d,s,c,v,f,m;const t={timekey:r,aqi:null===(l=i.trend)||void 0===l||null===(l=l[r])||void 0===l?void 0:l[n],CO:null===(a=i.CO)||void 0===a||null===(a=a[r])||void 0===a?void 0:a[n],NO2:null===(d=i.NO2)||void 0===d||null===(d=d[r])||void 0===d?void 0:d[n],O3:null===(s=i.O3)||void 0===s||null===(s=s[r])||void 0===s?void 0:s[n],PM10:null===(c=i.PM10)||void 0===c||null===(c=c[r])||void 0===c?void 0:c[n],PM25:null===(v=i.PM25)||void 0===v||null===(v=v[r])||void 0===v?void 0:v[n],SO2:null===(f=i.SO2)||void 0===f||null===(f=f[r])||void 0===f?void 0:f[n],PPAType:null===(m=i.primaryPollutant)||void 0===m||null===(m=m[r])||void 0===m?void 0:m[n]};o.push(t)}return o}function A(n,i){const t=[];return Object.keys((null==n?void 0:n.trend)||{}).forEach(e=>{if(i<=e){var o,r,u,l,a,d,s,c;const i={timekey:e,aqi:null===(o=n.trend)||void 0===o?void 0:o[e],CO:null===(r=n.CO)||void 0===r?void 0:r[e],NO2:null===(u=n.NO2)||void 0===u?void 0:u[e],O3:null===(l=n.O3)||void 0===l?void 0:l[e],PM10:null===(a=n.PM10)||void 0===a?void 0:a[e],PM25:null===(d=n.PM25)||void 0===d?void 0:d[e],SO2:null===(s=n.SO2)||void 0===s?void 0:s[e],PPAType:null===(c=n.primaryPollutant)||void 0===c?void 0:c[e]};t.push(i)}}),t}function k(n,i,t){var e,o;if((0,d.S)()&&n==$-1&&t<24&&parseInt((null==i||null===(e=i.endDate)||void 0===e||null===(e=e.split("+"))||void 0===e?void 0:e[1])||"0")>=$-1&&null!=i&&null!==(o=i.fdhead)&&void 0!==o&&null!==(o=o.toLowerCase())&&void 0!==o&&o.includes("prg-1sw-wxaqif")){const n="Missed some AQI data";a.YT&&a.YT.sendAppErrorEvent((0,l.$5)(u.zfX,"some data of weather AQI insights not returned",n),!1)}}function M(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;try{if(!n||!Array.isArray(n)||n.length<i)return!1;return n.slice(0,i).every(n=>n&&!isNaN(Number(n.aqi))&&Number(n.aqi)>0&&void 0!==n.aqi&&null!==n.aqi)}catch(n){return!1}}function S(n){a.YT&&a.YT.sendAppErrorEvent((0,l.$5)(u.zfX,n),!1)}function T(n,i,t){let e=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{if("TeaserAQForecastWeek"!==t&&"AQICard"!==t&&"TeaserAQForecastToday"!==t)return!1;const o=Array.isArray(i)?i:function(n){if(!n||!Array.isArray(n)||n.length<1)return;let i=[];for(let t=0;t<n.length;t++){const e=n[t];e&&e.hourly&&Array.isArray(e.hourly)&&e.hourly.length>0&&(i=[...i,...e.hourly])}return i}(n),r="TeaserAQForecastWeek"==t?n:o,u="TeaserAQForecastWeek"==t?4:24;if(!r||!Array.isArray(r)||r.length<u)return e&&S(`aqi forecast: weather data is missing aqi forecast list, ${t}, aqi list length: ${(null==r?void 0:r.length)||0}`),!1;const l=M(r,u);if(!l){const i=n.slice(0,4);S(`aqi forecast: forecast data is missing aqi, ${t}, 4 day aqi values: ${i.map(n=>n.aqi)}`)}return l}catch(n){return S(`aqi forecast: forecast data is missing aqi, ${t}`),!1}}}}]);