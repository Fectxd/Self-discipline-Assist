"use strict";(self.homePageWebpackChunks=self.homePageWebpackChunks||[]).push([["experiences_weather-minimap-wc_dist_index_js"],{6344:function(t,e,i){i.d(e,{MW:function(){return d},Qf:function(){return f},uW:function(){return m},wT:function(){return h}});var n=i(47903),r=i(62695);const a=[3,8],o=6;var l,s;!function(t){t.TC="TC",t.TD="TD",t.TS="TS",t.H1="H1",t.H2="H2",t.H3="H3",t.H4="H4",t.H5="H5",t.STS="STS",t.TY="TY",t.STY="STY",t.SuperTY="SuperTY",t.VST="VST",t.VT="VT"}(l||(l={})),function(t){t.Observation="Observation",t.Current="Current",t.Forecast="Forecast"}(s||(s={}));const u={Point:"Point",LineString:"LineString",Polygon:"Polygon"},c={Forecast:"Forecast",Observation:"Observation",Current:"Current"};const p=2;function d(t){const e=""+(t||"")||"0";return e.length<2?"0"+e:e}function h(t,e,i,n,r,l){let s=o;if(!t||!t[0])return s;const d=n/2,h=i/2,m=r||i,f=l||n,v=function(t){if(!t||!t[0]||!t[0].features)return[];const e=[];return t[0].features.forEach((t,i)=>{var n;if(!t||e.length>=p)return!1;const r=t.geometry||{},a=r.coordinates,o=null===(n=t.properties)||void 0===n?void 0:n.dataType;r.type!==u.Point||o!==c.Current&&o!==c.Forecast||e.push({index:i,coordinates:a})}),e}(t);if(0===v.length)return s;const g={offsetX:1,offsetY:1};v.forEach(t=>{const e=Math.abs(t.coordinates[0]-h);g.offsetX=e>g.offsetX?e:g.offsetX;const i=Math.abs(t.coordinates[1]-d);g.offsetY=i>g.offsetY?i:g.offsetY});const w=m/2/g.offsetX,x=f/2/g.offsetY;let b=0;if((w>2&&x>2||w<1||x<1)&&(b=w<x?w:x),0!=b){const t=Math.floor(Math.log2(b))+e;s=(y=t)<=a[0]?a[0]:y>=a[1]?a[1]:y||o}var y;return s}function m(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0;const s=l.lat,c=l.lon,p=function(t){const e=[];return(t||[]).forEach(t=>{if(t.displayType!==n.rN.ImageContent||!t.imgUrl)try{const i=t.metadata&&JSON.parse(t.metadata);e.push({...i,title:t.title||""})}catch{return}}),e}(t);return p.forEach(t=>{(t.features||[]).forEach(t=>{const n=e,o=(t||{}).geometry||{},l=o.coordinates||[];let p;if(o.type===u.Point)p=(r.e.latLonsToPixelLandingPage([l],s,c,i,a,n)||[])[0];else if(o.type===u.Polygon){const t=l.reduce((t,e)=>t.concat(e),[]);p=t&&Array.isArray(t[0])?r.e.latLonsToPixelLandingPage(t,s,c,i,a,n):r.e.latLonsToPixelLandingPage(l,s,c,i,a,n)}else p=r.e.latLonsToPixelLandingPage(l,s,c,i,a,n);o.oldCoords=o.coordinates,o.coordinates=p})}),p}function f(t,e){return t&&e.lat&&e.lon?r.e.convertKm2Mile(r.e.getDistance(Number(t.latitude),Number(t.longitude),e.lat,e.lon)):0}},14939:function(t,e,i){i.d(e,{Aj:function(){return g},EI:function(){return w},F0:function(){return p},Pn:function(){return h},Rt:function(){return v},T4:function(){return f},_T:function(){return c},nu:function(){return m}});var n=i(31951),r=i(65022),a=i(93468),o=i(54539),l=i(45296),s=i(77246),u=i(89980);const c="LastSavedLocation",p="LastSavedUnit",d=new Set;function h(t,e,i){const{type:n,error:o,customMessage:l}=t.detail||{};if(d.has(l))return;d.add(l);const s="image"===o?r.CRO:r.azY;(0,a.vV)(s,`error in experience [${i}],Mini map ${n} load failed: ${e}`,void 0,{...s.pb,customMessage:l})}function m(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{message:n}=t.detail||{},o=i?r.Jaj:r.YDP;(0,a.vV)(o,`error in experience [weather-card], sub component [${e}] ${i?"throw exception":"has data issue"}`,void 0,{...o.pb,customMessage:n})}function f(t,e,i){var r,a,s;if(!t)return null;const u=(null==e?void 0:e.capIcon)??(0,l.y)((null==t?void 0:t.class)||"",(null==t?void 0:t.significance)||"",i);return{alertTitle:null==t||null===(r=t.title)||void 0===r?void 0:r.replace(" - "," "),alertEvent:null==t||null===(a=t.abbreviation)||void 0===a?void 0:a[0],alertSig:null==t||null===(s=t.abbreviation)||void 0===s?void 0:s[1],alertIconSrc:u,alertIcon:(0,o.h7)([u,(0,n.a5)()],"",(null==t?void 0:t.title)||"","icon-svg")}}function v(t){let e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"weather-card-wc";if((0,s.S)())try{e=(0,u.Lg)().getItem(c)?JSON.parse((0,u.Lg)().getItem(c)):void 0}catch{e=void 0}if(e&&t){if(!w(e,t)){const n=t=>`${t.latitude},${t.longitude}->${t.locality}`,o=`Saved: ${n(e)}; Current: ${n(t)}`;(0,a.vV)(r.YLz,`error in experience [${i}],Fail to get the updated weather location`,void 0,{...r.YLz.pb,customMessage:o})}(0,u.Lg)().removeItem(c)}}function g(t){let e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"weather-card-wc";if((0,s.S)())try{e=(0,u.Lg)().getItem(p)?JSON.parse((0,u.Lg)().getItem(p)):void 0}catch{e=void 0}e&&t&&(t!==e&&(0,a.vV)(r.z_l,`error in experience [${i}],Fail to get the updated weather unit`,void 0,{...r.z_l.pb,customMessage:`Saved: ${e}; Current: ${t}`}),(0,u.Lg)().removeItem(p))}function w(t,e){if(t&&e&&t.latitude&&t.longitude&&e.latitude&&e.longitude){const i=(+t.latitude).toFixed(3),n=(+t.longitude).toFixed(3),r=(+e.latitude).toFixed(3),a=(+e.longitude).toFixed(3);return i===r&&n===a}return!1}},25447:function(t,e,i){var n;i.d(e,{i:function(){return c}}),function(t){t.Hour="Hour",t.HourMin="HourMin",t.HourTimezone="HourTimezone",t.HourMinTimezone="HourMinTimezone",t.HourTimezoneLong="HourTimezoneLong",t.HourMinTimezoneLong="HourMinTimezoneLong",t.DayWeek="DayWeek",t.MonthDayYear="MonthDayYear",t.LongMonthDayYear="LongMonthDayYear",t.MonthDay="MonthDay",t.MonthDayNumeric="MonthDayNumeric",t.Year="Year",t.Month="Month",t.MonthShort="MonthShort",t.Day="Day",t.Week="Week",t.WeekLong="WeekLong",t.WeekLongNoLocaleFormat="WeekLongNoLocaleFormat",t.MonthDayWeek="MonthDayWeek",t.MonthDayWeekShort="MonthDayWeekShort",t.MonthDayWeekLong="MonthDayWeekLong",t.YearMonthDayWeekLong="YearMonthDayWeekLong",t.YearMonthLong="YearMonthLong",t.YearMonth="YearMonth",t.MonthLong="MonthLong"}(n||(n={}));const r=new Map([[n.DayWeek,{weekday:"short",day:"numeric"}],[n.LongMonthDayYear,{month:"long",day:"numeric",year:"numeric"}],[n.MonthDayYear,{month:"short",day:"numeric",year:"numeric"}],[n.MonthDay,{month:"short",day:"numeric"}],[n.MonthDayNumeric,{month:"numeric",day:"numeric"}],[n.Year,{year:"numeric"}],[n.Month,{month:"numeric"}],[n.MonthShort,{month:"short"}],[n.Day,{day:"numeric"}],[n.Hour,{hour:"numeric"}],[n.HourMin,{hour:"numeric",minute:"numeric"}],[n.HourTimezone,{hour:"numeric",timeZoneName:"short"}],[n.HourMinTimezone,{hour:"numeric",minute:"numeric",timeZoneName:"short"}],[n.HourTimezoneLong,{hour:"numeric",timeZoneName:"long"}],[n.HourMinTimezoneLong,{hour:"numeric",minute:"numeric",timeZoneName:"long"}],[n.Week,{weekday:"short"}],[n.WeekLong,{weekday:"long"}],[n.WeekLongNoLocaleFormat,{weekday:"long"}],[n.MonthDayWeek,{weekday:"short",month:"short",day:"numeric"}],[n.MonthDayWeekShort,{weekday:"short",month:"numeric",day:"numeric"}],[n.MonthDayWeekLong,{weekday:"long",month:"long",day:"numeric"}],[n.YearMonthDayWeekLong,{weekday:"long",month:"long",day:"numeric",year:"numeric"}],[n.YearMonthLong,{month:"long",year:"numeric"}],[n.YearMonth,{month:"short",year:"numeric"}],[n.MonthLong,{month:"long"}]]);function a(t,e){try{return new Intl.DateTimeFormat(t,e)}catch(e){return{format:e=>new Date(e).toLocaleDateString(t)}}}const o=["en-us","en-gb","el-gr"],l=[n.DayWeek,n.HourTimezoneLong,n.HourMinTimezoneLong,n.MonthDay,n.MonthDayWeekLong,n.MonthShort,n.MonthLong,n.Week,n.WeekLong,n.MonthDayWeek,n.MonthDayWeekShort,n.YearMonthDayWeekLong,n.YearMonthLong,n.LongMonthDayYear,n.MonthDayNumeric],s=new Map([["default",{longPm:"pm",shortPm:"p",longAm:"am",shortAm:"a"}],["el-gr",{longPm:"μ.μ.",shortPm:"μ",longAm:"π.μ.",shortAm:"π"}]]),u=new Map([["default",{hour:"numeric"}],["zh-cn",{hour:"numeric",hour12:!1}],["zh-tw",{hour:"numeric",hour12:!1}],["zh-hk",{hour:"numeric",hour12:!1}]]);class c{constructor(t,e){this.locale=t||"en-us",this.timeZone=e||void 0;try{this.hour12=Intl.DateTimeFormat(this.locale,u.get(this.locale)||u.get("default")).resolvedOptions().hour12}catch(t){}this.localeOption=s.get(this.locale)||s.get("default"),this.timeFormats=new Map,this.timeFormatsEnGb=new Map,this.timeFormatsEnUs=new Map}formatHour(t,e){return this.formatDateTimeFormatText(t,n.Hour,e)}formatYear(t,e){return this.formatDateTimeFormatText(t,n.Year,e)}formatMonth(t,e){return this.formatDateTimeFormatText(t,n.Month,e)}formatMonthShort(t,e){return this.formatDateTimeFormatText(t,n.MonthShort,e)}formatDay(t,e){return this.formatDateTimeFormatText(t,n.Day,e)}formatHourLabel(t){return this.formatHour(t,{excludeSpace:!1})}formatHourMinute(t,e){return this.formatDateTimeFormatText(t,n.HourMin,e)}formatHourTimezone(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n.HourTimezone;return i&&(r=n.HourTimezoneLong),this.formatDateTimeFormatText(t,r,e)}formatHourMinuteTimezone(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n.HourMinTimezone;return i&&(r=n.HourMinTimezoneLong),this.formatDateTimeFormatText(t,r,e)}formatDayWithWeek(t,e){let i=this.formatDateTimeFormatText(t,n.DayWeek,e);if(e&&i.indexOf(",")<0&&i.indexOf(" ")>0){const t=i.split(" ");2!=t.length||isNaN(parseInt(t[0]))||(e.removeWeek?i=t[0]:e.forceWeekdayAhead&&(i=`${t[1]} ${t[0]}`))}return i}formatWeek(t,e){return this.formatDateTimeFormatText(t,n.Week,e)}formatWeekLong(t,e){return this.formatDateTimeFormatText(t,n.WeekLong,e)}formatWeekLongForEn(t,e){return this.formatDateTimeFormatText(t,n.WeekLongNoLocaleFormat,e)}formatYearMonthLong(t,e){return this.formatDateTimeFormatText(t,n.YearMonthLong,e)}formatLongMonthDayYear(t,e){let i=this.formatDateTimeFormatText(t,n.LongMonthDayYear,e);if(e&&e.useComma){const r=this.formatDateTimeFormatText(t,n.LongMonthDayYear,e);i=i.replace(`${r} `,`${r}, `)}return i}formatMonthDayYear(t,e){let i=this.formatDateTimeFormatText(t,n.MonthDayYear,e);if(e&&e.useComma){const r=this.formatDateTimeFormatText(t,n.MonthDay,e);i=i.replace(`${r} `,`${r}, `)}return i}formatMonthDay(t,e){return this.formatDateTimeFormatText(t,n.MonthDay,e)}formatMonthDayNumeric(t,e){return this.formatDateTimeFormatText(t,n.MonthDayNumeric,e)}formatWeekShort(t,e){let i=this.formatDateTimeFormatText(t,n.Week,e);if(i.indexOf(",")<0&&i.indexOf(" ")>0){const t=i.split(" ");2!=t.length||isNaN(parseInt(t[0]))||(i=t[1])}return i}formatMonthDayWithWeek(t,e){let i=this.formatDateTimeFormatText(t,n.MonthDayWeek,e);if(e&&e.forceWeekdayAhead&&i.indexOf(",")<0&&i.indexOf(" ")>0){const t=i.split(" ");2!=t.length||isNaN(parseInt(t[0]))||(i=`${t[1]} ${t[0]}`)}return i}formatMonthDayWithWeekShort(t,e){let i=this.formatDateTimeFormatText(t,n.MonthDayWeekShort,e);if(e&&!e.forceWeekdayAhead&&i.indexOf(",")<i.indexOf(" ")){const t=i.split(",");2==t.length&&(i=`${t[0]} ${t[1]}`)}return i}formatMonthDayWithWeekLong(t,e){let i=this.formatDateTimeFormatText(t,n.MonthDayWeekLong,e);if(e&&!e.forceWeekdayAhead&&i.indexOf(",")<i.indexOf(" ")){const t=i.split(",");2==t.length&&(i=`${t[1]}, ${t[0]}`)}return i}formatDateTime(t,e,i){return this.formatDateTimeFormatText(t,e,i)}getFormatObj(t){let e=t;this.hour12||(t===n.Hour&&(e=n.HourMin),t===n.HourTimezone&&(e=n.HourMinTimezone),t===n.HourTimezoneLong&&(e=n.HourMinTimezoneLong));const i={timeZone:this.timeZone,...r.get(e)};return o.indexOf(this.locale)<0&&l.indexOf(e)<0?this.hour12?(this.timeFormatsEnUs.has(e)||this.timeFormatsEnUs.set(e,a("en-us",i)),this.timeFormatsEnUs.get(e)):(this.timeFormatsEnGb.has(e)||this.timeFormatsEnGb.set(e,a("en-gb",i)),this.timeFormatsEnGb.get(e)):(this.timeFormats.has(e)||this.timeFormats.set(e,a(this.locale,i)),this.timeFormats.get(e))}formatDateTimeFormatText(t,e,i){const n=this.getFormatObj(e).format(t);let r=this.postProcess(n,i)||"";return r=decodeURIComponent(encodeURIComponent(r).replace(/%E2%80%AF/gi,"%20")),r}postProcess(t,e){let i=t;return e&&e.excludeComma&&(i=i.replace(/,/g,"")),e&&e.excludeSpace&&(i=i.replace(/\s/g,"")),i}}},25671:function(t,e,i){i.d(e,{K:function(){return o},g:function(){return a}});var n=i(32122),r=i(17254);function a(t,e,i,a){if(!t)return"";const o=i.isRubyCard?`${(0,n.cw)(e)?"width: 300px; height: 188px;":"width: 300px; height: 400px;"}\n                        --neutral-layer-floating:${i.isThemeDarkMode?"#4a4a4a;":"#ffffff;"}`:"";return`${function(t,e){if(!t.background||!(0,n.cw)(e)&&!t.enable1u)return"background: var(--gradient-background-fill);";const i=`${(0,r.rA)().AssetsUrl}/weathermapdata/1/static/background/v2.0/jpg/sunny.jpg`,a=`${(0,r.rA)().AssetsUrl}/weathermapdata/1/static/background/v2.0/test/jpg/1u/light.jpg`,o="#FFFFFF"===t.textColor?i:a;return`--bgImg:${t.background},url('${o}');`}(t,e)}\n            ${function(t,e){let i;i=t.textColor&&((0,n.cw)(e)||t.enable1u)?t.textColor:"var(--neutral-foreground-rest)";return`--sd-card-header-color:${i};\n            --sd-card-footer-color:${i};\n            --textStyle:${i};`}(t,e)}\n            ${function(t){return`--iconInvert:${t.iconInvert||"100%"};`}(t)}\n            ${function(t,e){return`--sd-card-footer-bg:${t.btnHintBackground||"rgba(255, 255, 255, 0.06)"};\n            ${"miniL1"==e?"--sd-card-pagination-dot-color: rgba(255, 255, 255, 0.4); --pagination-dot-color-hover: rgb(255 255 255 / 0.786); --control-corner-radius: 3;":""}\n            --sd-card-footer-hoverBg:${t.btnHoverBackground||"rgba(255, 255, 255, 0.08)"};\n            --weather-card-forecast-background:${t.btnHintBackground||"rgba(255, 255, 255, 0.06)"};\n            --weather-card-forecast-hover-background: ${t.forecastHoverBackground||"rgba(225, 225, 225, 0.15)"};\n        `}(t,a)}\n            ${i.showFlipperMiniL1?"--paddle-rest-opacity: 1;":""}\n            --title-max-width: 220px;\n            ${o}\n            `}function o(t){if(!t||!t.background)return"";const e=/url\('(.*)'\)/g.exec(t.background);return(null==e?void 0:e[1])||""}},31951:function(t,e,i){i.d(e,{FY:function(){return o},GH:function(){return h},S1:function(){return p},Xr:function(){return a},_F:function(){return s},a5:function(){return m},b$:function(){return c},cW:function(){return l},mr:function(){return u},q2:function(){return d},rK:function(){return r}});var n=i(17254);const r="weathermapdata/1/static/weather/Icons/taskbar_v10/",a="hurricane_warnning.svg",o="Alert/",l="AQI/WildFire.svg",s="AQI/wildfireMapInfopane.svg",u="AQI/aq{level}.svg",c="Teaser/",p="Condition_Card/",d=r+"NoColor_Card/",h=()=>{var t;return`${null===(t=(0,n.rA)())||void 0===t?void 0:t.AssetsUrl}/weathermapdata/1/static`},m=()=>`${h()}/weather/Icons/taskbar/Fallback/Alert_Y.svg`},32122:function(t,e,i){i.d(e,{Cy:function(){return l},Gm:function(){return u},LF:function(){return a},NE:function(){return c},Z6:function(){return r},ck:function(){return s},cw:function(){return o}});var n=i(11372);function r(t,e,i){var r;let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const l={...null==t?void 0:t.contract,name:"seemorelink",action:n.EG.Click,behavior:n.MS.Navigate,type:n.MJ.Footer,content:{...null==t||null===(r=t.contract)||void 0===r?void 0:r.content},overrideDestinationUrl:null==e?void 0:e.link},s={telemetryContext:{footerButton:t&&t.addOrUpdateChild(l)}};o?s.footerLink={text:(null==e?void 0:e.ctaContent)||"",navigationUrl:null==e?void 0:e.link}:s.footerButton={text:(null==e?void 0:e.ctaContent)||"",ctaClick:()=>{window.open(null==e?void 0:e.link)}};const{uxFormat:u,teaserCustomData:c}=e||{};if("miniL1"==u&&c&&c.tabs&&c.tabs.length>0){const t=c.tabs;s.paginationData={currentPageIndex:a+1,onDotClick:(t,e)=>{i(t)},onFlipperClick:(e,n)=>{let r=a;r=e?a<t.length-1?a+1:0:a>0?a-1:t.length-1,i(r)},pageCount:t.length}}return s}function a(t,e,i){return t&&t.interestManagerData?{...t,interestManagerData:{...t.interestManagerData,interestOptions:e,notificationToastData:i}}:t}function o(t){return"small"===t||"half"===t}function l(t){return"full"===t||"medium"===t}function s(t){return"large"===t||"tall"===t}const u="svg/icons-wc/weather/HomeFilled.svg",c="svg/icons-wc/weather/LocationArrow.svg"},32830:function(t,e,i){var n,r,a,o;i.d(e,{iM:function(){return a}}),function(t){t[t.Unknown=1]="Unknown",t[t.Background=2]="Background",t[t.Foreground=3]="Foreground"}(n||(n={})),function(t){t[t.Temperature=1]="Temperature",t[t.SevereWeather=2]="SevereWeather",t[t.Hurricane=3]="Hurricane",t[t.Tiles=4]="Tiles"}(r||(r={})),function(t){t.Temperature="temperature",t.SevereWeather="severeweather",t.Hurricane="hurricane",t.AQI="airquality",t.Precipitation="precipitation",t.Pollen="pollen",t.PollenIndex="pollenindex",t.WildfirePoint="wildfire",t.Lightning="lightning",t.Radar="radar"}(a||(a={})),function(t){t.Image="image",t.Tile="tile"}(o||(o={}))},42588:function(t,e,i){i.d(e,{$v:function(){return h},IJ:function(){return $},KQ:function(){return c},Nn:function(){return b},PD:function(){return d},Zb:function(){return x},ad:function(){return p},hd:function(){return s},hs:function(){return g},jX:function(){return u},kl:function(){return M},qj:function(){return f},z2:function(){return m}});var n=i(31951),r=i(48566),a=i(65022),o=i(93468),l=i(59537);function s(t){return`${(0,l.Sf)()}staticsb/statics/latest/icons-wc/icons/${t}`}function u(t,e,i){return!i||t>24||t<0||e<0?"":e<t?`${i}&day=1&hour=${e+1}`:e>=t&&e-t<=24?`${i}&day=2&hour=${e-t}`:""}const c=["TeaserAQForecastWeek","TeaserRainTomorrow","TeaserDayTempChange","TeaserDayTempChangeDay","TeaserDayTempTrend","TeaserRain5Day","TeaserWindDay","TeaserTempRecordDay","TeaserSummaryTomorrow","TeaserSummaryTomorrowDefault","TeaserNearTermTemp","TeaserRainStatistics","TeaserTempStatistics"],p=["Storm","Nowcast","NowcastNearBy","AlertNowcast","SevereWeather","AQICard","Hurricane","HurricaneAround","WildFirePointFullCard","JwaPollen","USPollen","EUPollen","ForecastVideo","TeaserTempRiskChange","TeaserTempRiskConsec","TeaserTempRiskEnd"],d={darkBg:{textColor:"#FFFFFF",preBackground:"#3b3b3b",iconInvert:"100%"},lightBg:{textColor:"#2B2B2B",preBackground:"#FFFFFF",iconInvert:"0%"}};function h(t){return t?`${(0,n.GH)()}/weather/Images/${t}`:""}function m(t,e){let i=null;switch(e){case"JwaPollen":i="AQI/jwapl{level}.svg";break;case"USPollen":case"EUPollen":i="AQI/uspl{level}.svg"}return i?(0,l.xm)(r.Qf.Format(i,{level:t}),n.rK):""}function f(t,e){return t?e.formatDayWithWeek(t,{forceWeekdayAhead:!0,excludeComma:!0}):""}var v,g,w;!function(t){t.Insights="Insights",t.TeaserNearbyTides="TeaserNearbyTides",t.Teaser="Teaser",t.Nowcast="Nowcast",t.SevereWeather="SevereWeather",t.AQICard="AQICard",t.WildFirePointFullCard="WildFirePointFullCard",t.Hurricane="Hurricane",t.USPollen="USPollen",t.EUPollen="EUPollen",t.JwaPollen="JwaPollen",t.AlertNowcast="AlertNowcast",t.HurricaneAround="HurricaneAround"}(v||(v={})),function(t){t.hourly="hourly",t.daily="daily",t.tide="tide",t.map="map",t.alert="alert",t.precipitation="precipitation",t.hurricane="hurricane",t.news="news",t.trend="trend",t.nowcastacc="nowcastacc",t.multiInfo="multiInfo",t.aqi="aqi",t.aqiToday="aqiToday",t.aqiWeek="aqiWeek",t.upsell="upsell",t.running="running",t.hiking="hiking",t.cycling="cycling",t.stargazing="stargazing",t.gardening="gardening",t.picnic="picnic"}(g||(g={})),function(t){t.running="running",t.hiking="hiking",t.cycling="cycling",t.stargazing="stargazing",t.gardening="gardening",t.picnic="picnic"}(w||(w={}));const x="WeatherCardMiniL1TabIndex",b="WeatherCardMiniL1TabType";var y;function $(t,e,i,n){if(!e||e.split("_").length<2||!e.startsWith("Weather")||!t||!i)return;const r=e.replace("Weather:","Weather_").split("_")[2],l=t.contenttype,s=i.map(t=>t.contenttype||"");r!==l&&(0,o.vV)(a.YfN,"Taskbar content type and display content mismatch",`Content type in taskbar [${r}] is not consistent with display content [${l}]. PreviewType: ${e}; ContentData list: ${s}; ${n||""}`)}function M(t){if(!t)return 1;const e=/.*&day=(\d.*)/g.exec(t);return Number(null==e?void 0:e[1])||1}!function(t){t.curWeaInfo="1",t.curWeaSummary="2",t.curWea="3",t.hourly="4",t.daily="5",t.teaser="6"}(y||(y={}))},45296:function(t,e,i){i.d(e,{y:function(){return o}});var n=i(17254),r=i(31951);const a=["RA","SN","FL","FO","TL","TH","WI","TS","AQ","FD","HW","BLIZZARD","COLD%20WAVE","DROUGHT","ICY%20ROAD","RAINSTORM","TYPHOON","GALE","DENSE%20FOG","THUNDER","SANDSTORM","FROST","HAIL","HAZE","HIGH%20TEMPERATURE"];function o(t,e,i){if(!t||!e)return"";const o=i||r.rK+r.FY;t=t.toUpperCase().replace(" ","%20");return a.includes(t)?`${(0,n.rA)().AssetsUrl}/${o}/Alert_${t}_${e}.svg`:`${(0,n.rA)().AssetsUrl}/${o}/Alert_OT_${e}.svg`}},47903:function(t,e,i){var n,r;i.d(e,{Ce:function(){return h},HF:function(){return s},M6:function(){return c},N0:function(){return d},QZ:function(){return l},Si:function(){return n},Wx:function(){return f},ZR:function(){return p},_2:function(){return r},hL:function(){return u},rN:function(){return m},uu:function(){return o},zW:function(){return a}}),function(t){t[t.None=0]="None",t[t.Dressing=1]="Dressing",t[t.UV=2]="UV",t[t.WindChill=3]="WindChill",t[t.HeatStroke=4]="HeatStroke",t[t.Umbrella=10]="Umbrella",t[t.Outdoor=11]="Outdoor",t[t.Driving=12]="Driving",t[t.Cycling=20]="Cycling",t[t.Gardening=21]="Gardening",t[t.Hiking=22]="Hiking",t[t.Running=24]="Running",t[t.Stargazing=25]="Stargazing",t[t.Walking=26]="Walking",t[t.Picnic=27]="Picnic"}(n||(n={})),function(t){t.layerActivated="ActivatedOn",t.overviewRequestStart="OverviewRequest.start",t.overviewRequestCluster="OverviewRequest.cluster",t.overviewRequestDuration="OverviewRequest.duration",t.overviewRequestInternal="OverviewRequest.internal",t.overviewRequestNetwork="OverviewRequest.network",t.overviewRequestPathHash="OverviewRequest.pathHash",t.pdpRequestStart="pdpRequest.start",t.pdpRequestDuration="pdpRequest.duration"}(r||(r={}));const a="WeatherCondition";var o,l,s;!function(t){t[t.normal=0]="normal",t[t.alert=1]="alert",t[t.nowcast=2]="nowcast"}(o||(o={})),function(t){t[t.Start=1]="Start",t[t.WCComplete=2]="WCComplete"}(l||(l={})),function(t){t[t.RainThreshold=11.9]="RainThreshold"}(s||(s={}));const u="weaRecentLocation",c="weaRecentForMobileLocation",p="weaMUIDs",d="isWeaLastLocationFromDetect";var h,m,f,v;!function(t){t[t.setHomeFail=1]="setHomeFail",t[t.exceedPinLocationLimit=2]="exceedPinLocationLimit"}(h||(h={})),function(t){t.ImageContent="ImageContent"}(m||(m={})),function(t){t.L1Minimap="L1Minimap",t.CardMinimap="CardMinimap"}(f||(f={})),function(t){t[t.WeatherFeedback=0]="WeatherFeedback",t.IndependentSelfTrigger="i-s",t.IndependentFeedbackTrigger="i-f"}(v||(v={}))},54539:function(t,e,i){i.d(e,{e$:function(){return p},h7:function(){return c},n9:function(){return u}});var n=i(96950),r=i(91640),a=i(25671),o=i(98216),l=i(65022),s=i(93468);const u=t=>n.qy`
    ${(0,r.z)(e=>(0,a.K)(t),n.qy`
    <img
        style="display: none;"
        src="${e=>(0,a.K)(t)}"
        @error=${(t,e)=>p(e.event.target,"weather-card-wc")}
    ></img>`)}
`;function c(t,e,i,r){return(t=t.filter(t=>!!t))&&t.length>0?n.qy`<img src=${t[0]}
                     class="${r||""}"
                     height=${e}
                     width=${e}
                     alt="${i}"
                     @error=${(e,i)=>{!function(t,e){t.style.opacity="0";const i=t.getAttribute("src"),n=`Failed url links: ${i}`;o.YT.sendAppErrorEvent({...l.adl,message:"couldn't load weather icon",pb:{...l.adl.pb,customMessage:n}});const r=e.findIndex(t=>t===i);r+1<e.length&&r>-1&&t.setAttribute("src",e[r+1])}(i.event.target,t)}} />`:n.qy``}function p(t,e){const{src:i=""}=t;(0,s.vV)(l.VBB,`error in experience [${e}], background image load failed: ${i}`)}},59537:function(t,e,i){i.d(e,{Sf:function(){return r},VG:function(){return a},xm:function(){return l}});var n=i(17254);const r=()=>`${(0,n.rA)().AssetsUrl}/`;function a(t){return`${r()}weathermapdata/1/static/${t}`}const o={"hurricane.svg":"hurricane_warnning.svg"};function l(t,e,i){if(!t)return"";if(t.startsWith("https://assets.msn.c"))return n.T3.IsChinaCompliance?t.replace(".msn.com/",".msn.cn/"):t;const r=i||!o[t]?t:o[t];return`${(0,n.rA)().AssetsUrl}/${e}${r}`}},62695:function(t,e,i){i.d(e,{e:function(){return r}});var n=i(17720);class r{static latlonToPixelXY(t,e,i){const n=this.clip(t,this.MinLatitude,this.MaxLatitude),r=(this.clip(e,this.MinLongitude,this.MaxLongitude)+180)*this.ReciprocalOf360,a=Math.sin(n*this.PerDegree),o=.5-Math.log((1+a)/(1-a))*this.ReciprocalOf4Pi;return[this.modPositive(r*i,i),this.modPositive(o*i,i)]}static modPositive(t,e){return(t%=e)<0?t+e:t}static clip(t,e,i){return Math.min(i,Math.max(e,t))}static MapSize(t){return 256<<t}static PixelXYToLatLon(t,e,i){const n=this.MapSize(i);return{lat:this.PixelYToLat(e,n),lon:this.PixelXToLon(t,n)}}static PixelXToLon(t,e){return 360*(this.clip(t,0,e-1)/e-.5)}static PixelYToLat(t,e){const i=.5-this.clip(t,0,e-1)/e;return 90-360*Math.atan(Math.exp(-i*Math.PI*2))*this.ReciprocalOf1Pi}static latLonsToPixel(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.zoomLevelMap;return r.toPixelArray(t,e,i,r.widthCardHalf,r.heightCardHalf,n)}static latLonsToPixelLandingPage(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1600,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:210,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:r.zoomLevelMap;return r.toPixelArray(t,e,i,(n-1)/2,(a-1)/2,o)}static latLonToPixel(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1600,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:210,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.zoomLevelMap;const o=t[0],l=t[1],s=r.latlonToPixelXY(o,l,r.getMapSizePixel(a));return[s[0]-e[0]+(i-1)/2,s[1]-e[1]+(n-1)/2]}static relativePixelXY(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1600,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:210;const r=e[2]-t[2];let[a,o]=[e[0],e[1]];r>0?(a>>=r,o>>=r):r<0&&(a<<=-r,o<<=-r);return[a-t[0]+(i-1)/2,o-t[1]+(n-1)/2]}static latLonToPixelCard(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.zoomLevelMap;const n=t[0],a=t[1],o=r.latlonToPixelXY(n,a,r.getMapSizePixel(i));return[o[0]-e[0]+r.widthCardHalf,o[1]-e[1]+r.heightCardHalf]}static toPixelArray(t,e,i,n,a){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:r.zoomLevelMap;const l=r.getMapSizePixel(o),s=r.latlonToPixelXY(e,i,l),u=[];return t.forEach(t=>{const e=t[1],i=t[0],o=r.latlonToPixelXY(e,i,l),c=o[0]-s[0]+n,p=o[1]-s[1]+a;u.push([c,p])}),u}static getMapSizePixel(){return 256<<(arguments.length>0&&void 0!==arguments[0]?arguments[0]:7)}static getRad(t){return t*Math.PI/180}static getDistance(t,e,i,n){let a=0;try{const o=r.getRad(t),l=r.getRad(i),s=r.getRad(t)-r.getRad(i),u=r.getRad(e)-r.getRad(n);a=2*Math.asin(Math.sqrt(Math.pow(Math.sin(s/2),2)+Math.cos(o)*Math.cos(l)*Math.pow(Math.sin(u/2),2))),a*=r.EARTH_RADIUS}catch{a=0}return Math.round(a)}static convertKm2Mile(t){const e=.62137*t;return Math.round(e)}static get MinLongitude(){return n.vv.get(this.MinLongitudeKey,()=>-180)}static get MinLatitude(){return n.vv.get(this.MinLatitudeKey,()=>-85.05112878)}static get ReciprocalOf360(){return n.vv.get(this.ReciprocalOf360Key,()=>1/360)}static get ReciprocalOf1Pi(){return n.vv.get(this.ReciprocalOf1PiKey,()=>1/Math.PI)}static get ReciprocalOf4Pi(){return n.vv.get(this.ReciprocalOf4PiKey,()=>1/(4*Math.PI))}static get PerDegree(){return n.vv.get(this.PerDegreeKey,()=>Math.PI/180)}static get widthHalf(){return n.vv.get(this.widthHalfKey,()=>(r.widthMap-1)/2)}static get heightHalf(){return n.vv.get(this.heightHalfKey,()=>(r.heightMap-1)/2)}static get widthCardHalf(){return n.vv.get(this.widthCardHalfKey,()=>(r.widthMapCard-1)/2)}static get heightCardHalf(){return n.vv.get(this.heightCardHalfKey,()=>(r.heightMapCard-1)/2)}static get mapSizePixel(){return n.vv.get(this.mapSizePixelKey,()=>256<<r.zoomLevelMap)}}r.MinLongitudeKey=Symbol("MinLongitude"),r.MaxLongitude=180,r.MinLatitudeKey=Symbol("MinLatitude"),r.MaxLatitude=85.05112878,r.ReciprocalOf360Key=Symbol("ReciprocalOf360"),r.ReciprocalOf1PiKey=Symbol("ReciprocalOf1Pi"),r.ReciprocalOf4PiKey=Symbol("ReciprocalOf4Pi"),r.PerDegreeKey=Symbol("PerDegree"),r.widthMap=1600,r.heightMap=210,r.maxHeightMap=400,r.widthMapCard=1200,r.heightMapCard=400,r.zoomLevelMap=7,r.widthHalfKey=Symbol("widthHalf"),r.heightHalfKey=Symbol("heightHalf"),r.widthCardHalfKey=Symbol("widthCardHalf"),r.heightCardHalfKey=Symbol("heightCardHalf"),r.mapSizePixelKey=Symbol("mapSizePixel"),r.EARTH_RADIUS=6378.137},70833:function(t,e,i){i.r(e),i.d(e,{ToolingInfo:function(){return re},WeatherMinimapWC:function(){return ee},WeatherMinimapWCStyles:function(){return ne},WeatherMinimapWCTemplate:function(){return ie}});var n,r=i(56911),a=i(14939),o=i(32830),l=i(11372),s=i(84855),u=i(17469),c=i(21481),p=i(71160),d=i(59537),h=i(31951),m=i(82853),f=i(42588),v=i(12870);new Map([["Y",["#f1c40e","#624700"]],["O",["#c65010","#FFF"]],["R",["#d70005","#FFF"]],["B",["#3967e4","#FFF"]]]);const g=268,w=136,x=170,b=146;(0,p.Cv)((null===(n=v.Rb.Locale)||void 0===n?void 0:n.toLowerCase())||"en-us");var y;!function(t){t.PrescribedFire="Prescribed Fire",t.ActiveFire="Wildfire",t.PostFire="Burned Area Emergency Response"}(y||(y={}));var $=i(17254);$.T3.isMobile;function M(t){const e=t>=0,i=1e3*(Math.abs(t)+Number.EPSILON),n=(Math.round(i)/1e3).toFixed(3);return e?n:"-"+n}var T=i(48566),k=i(73094),S=i(62695),F=i(6344),P=i(25447);function z(t){return t.setHours(t.getHours()+1),t.getUTCFullYear().toString()+(0,F.MW)(t.getUTCMonth()+1)+(0,F.MW)(t.getUTCDate())+(0,F.MW)(t.getUTCHours())+"00"}function L(t,e){var i;const{metaKey:n,horizonStep:r,useNexHour:a,useCurrentAsNow:o,noTimestamps:l,...s}=e;let{minHorizon:u=0,maxHorizon:c}=e;const d={tileLinks:[],timestamps:[],tileOffset:[0,0]};if(!t.source||!t.source.coordinates)return d;const h=t.source.coordinates,m=null===(i=t.mapsMetaData)||void 0===i||null===(i=i[n])||void 0===i?void 0:i.uris;if(!m)return d;let f=Object.keys(m)[0].toString();const g=function(t,e,i){var n;let r=t;e&&e.scenario&&e.toReplaceScenario&&(r=r.replace(e.toReplaceScenario,e.scenario));const a=(null===(n=v.Rb.Locale)||void 0===n?void 0:n.toLowerCase())||"en-us";"zh-cn"==a&&(r=r.replace("msn.com","msn.cn"));if("AirQualityHeatMap"==i||"AirQualityHeatMapCn"==i||"AirQualityHeatMapEu"==i){const t=(0,p.Sb)(a);r=r.replace("{country}",t)}"NowcastVectorMap"===i&&(r=r.replace(/blc$/,"svg"));"RadarNowcastVectorMap"===i&&(r=r.replace(/blc$/,"radar.svg"));return r}(m[f],e.urlParams,n);if(a){var w;const e=(null===(w=t.currentCondition)||void 0===w||null===(w=w.currentRaw)||void 0===w?void 0:w.created)||t.lastUpdated,i=z(e?new Date(e):new Date);if(i>f)f=i;else{const t=+f.substring(0,4)||0,e=+f.substring(4,6)||0,i=+f.substring(6,8)||0,n=+f.substring(8,10)||0;f=z(new Date(Date.UTC(t,e-1,i,n,0,0,0)))}}if(o){const t=new Date,e=(0,k.TJ)(f,!0),i=Math.floor((t.getTime()-e.getTime())/1e3/60);u+=i,c+=i}const x={radarForecast:g,radarVersion:f};let b;const y=u||Math.min(0,c),$=Math.max(1,c);let M=y;const T=l?null:function(t){const e=t=>{const[,e,i,n,r,a]=t.match(/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})?/)||[];return new Date(Date.UTC(+e||0,+i||0,+n||0,+r||0,+a||0,0,0))},i=t=>`${(0,F.MW)(t.getHours())}:${(0,F.MW)(t.getMinutes())}`;if(t){const n=new P.i(v.Rb.Locale,t.location.TimezoneName);return t=>{const r=e(t);try{return n.formatHourMinute(r,{excludeComma:!0,excludeSpace:!0})}catch(t){return console.error(t),i(r)}}}return t=>{const n=e(t);return i(n)}}(t.source);for(;M<$;){const{links:t=[],offset:e=[],time:i}=C(h,x,{...s,horizon:M});b||(b=[-1*(e[0]||0),-1*(e[1]||0)]),t&&d.tileLinks.push(t),T&&d.timestamps.push(T(i)),M+=r}return d.tileOffset=b||[0,0],d}function C(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{horizon:n=0,urlParams:r,fromUTC:a,noMinute:o,normalizeStep:l=1}=i;let s=(e||{}).radarVersion,u=s;const c=n-n%l;if((0,k.TJ)(s,!0).getTime()<=(new Date).getTime()||o){const t=(0,k.s_)((e||{}).radarVersion,c,a,o);s=t,u=(0,k.s_)((e||{}).radarVersion,n,a,o)}$.T3.IsChinaCompliance&&e&&e.radarForecast&&(e.radarForecast=e.radarForecast.replace("msn.com","msn.cn"));return{...H(t,(t,i,n)=>T.Qf.Format((e||{}).radarForecast,{time:s,z:n,x:t,y:i,...r}),i,i.zoomOffset||0),time:u}}function H(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!t)return null;const{widthMap:r=S.e.widthMap,heightMap:a=S.e.heightMap,defaultPlus:o=30,mapZoom:l=7}=i,s=[],u=l+n,c=n>0?256>>n:256<<-n,p=Math.pow(2,u),{minTileX:d,maxTileX:h,minTileY:m,maxTileY:f,pixelXY:v}=(0,k.Ex)(t,u,r,a,l,o),g=[v[0]-r/2-d*c,v[1]-a/2-m*c];for(let t=m;t<=f;++t){const i=[];for(let n=d;n<=h;++n){const r=e((n+p)%p,(t+p)%p,u);i.push(r)}s.push(i)}return{links:s,offset:g}}function A(t,e,i){const n=[];for(let r=i;r>0;r--){let i=0;const a=1<<r-1;0!=(t&a)&&i++,0!=(e&a)&&(i++,i++),n.push(i)}return n.join("")}function D(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!t.tileLinks.length||!t.tileLinks[0]||!t.tileLinks[0].length)return;const i=t.tileLinks.map(t=>t.reduce((t,e)=>t.concat(e),[]));return{col:t.tileLinks[0][0].length,tileSize:e>0?256>>e:256<<-e,tilesSequence:i,offset:t.tileOffset,timestamps:t.timestamps}}var I=i(72535);const W=new Map([["Y","#f1c40e"],["O","#e67f22"],["R","#e74c3b"],["B","#3967e4"]]);function N(t,e){if(!t)return null;const i=(0,I.Z)(t.class);if(!i)return null;const n=W.get(t.significance||"Y")||"#f1c40e",r=t.title||[t.event||"",t.severity||""].join(" ");return n&&r?{alertAreaMapData:{severeAlertColor:n,severeAlertTooltip:r},alertType:i}:null}var R=i(55593),O=i(77246),B=i(45296);const E={};async function q(t,e,i,n,r){const a=`${e.lat}-${e.lon}:${i}x${n}x${r}`;if(E[a])return E[a];const o=await async function(t,e,i,n,r){var a;if(!t||!t.enable||!t.urlPattern)return;const{urlPattern:o,zoomOffset:l=0,tileSize:s=256}=t,u=$.T3.IsChinaCompliance?"CN":(null===(a=v.Rb.ClientSettings)||void 0===a?void 0:a.geo_country)||"us",c=o.replace("{locale}",v.Rb.Locale)+`&ur=${u}`,p=function(t,e){return H(t,(t,i,n)=>T.Qf.Format(e,{quadkey:A(t,i,n)}),arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},arguments.length>3&&void 0!==arguments[3]?arguments[3]:0)}(e,c,{mapZoom:r,widthMap:i,heightMap:n,defaultPlus:0},l);if(!p)return;const d=[-1*(p.offset[0]||0),-1*(p.offset[1]||0)];try{const t=await Promise.all(p.links.map(t=>Promise.all(t.map(t=>async function(t){const e=await fetch(t),i=await e.text();if(i){const t=i.indexOf("{",0),e=i.lastIndexOf(","),n=i.substring(t,e);return JSON.parse(n)}return null}(t))))),e=new Set,i=t.map(t=>t.map(t=>function(t,e,i){if(!t)return[];const{entities:n,placement:r}=t;if(!(n&&n.length&&r&&r.length))return[];const a=[];for(let t=0;t<n.length;++t){const o=n[t],l=r[t];if(!o||null==o.tid||""+o.tid==""||!l)continue;const s=o.dn||"";for(const t of l.lbl){if(i.has(s))continue;i.add(s);const n=U(t,o,e);n&&a.push(n)}}return a}(t,s,e)));return{offset:d,tileSize:s,tiles:i}}catch(t){return void console.error(t)}}(t,e,i,n,r);return o&&(E[a]=o),o}function U(t,e,i){if(!t||!t.tps||!t.tps.length||null==e.lat||null==e.long)return null;const n={lat:e.lat,long:e.long,latlonKey:`${e.lat.toString()},${e.long.toString()}`,labels:[]};for(const e of t.tps){if(!e||!e.n||""+e.f=="0"||e.f<=5)continue;const t=parseFloat(""+e.x),r=parseFloat(""+e.y);t<0||r<0||t>i||r>i||n.labels.push({x:t,y:r,text:e.n})}return n.labels.length?n:null}const _="https://ecn.dev.virtualearth.net/REST/v1/Imagery/Map/roadondemandfull/{latitude},\n{longitude}/{zoomlevel}?mapSize={mapWeight},{mapHeight}&shading=terrain&key={bingMapKey}&c={locale}&maxAge=86400&st=g|lc:FF344e05;shadedReliefVisible:0;apfv:0_me|\nfc:FF344e05,it:1;lv:0;sc:FF344e05,it:1;v:0_pp|v:0_cp|v:1_wt|v:1_trs|v:1;lv:0;sc:FF6B6B6B;fc:FF6B6B6B;strokeWidthScale:0.2_cst|v:1;\nfc:FF000000;strokeWidthScale:0.5_wt|fc:FF294093;strokeWidthScale:0&logo=n&da=n",Y="https://ecn.dev.ditu.live.com/REST/v1/Imagery/Map/roadondemandfull/{latitude},\n{longitude}/{zoomlevel}?mapSize={mapWeight},{mapHeight}&shading=terrain&key={bingMapKey}&c={locale}&maxAge=86400&st=g|lc:FF344e05;shadedReliefVisible:0;apfv:0_me|\nfc:FF344e05,it:1;lv:0;sc:FF344e05,it:1;v:0_pp|v:0_cp|v:1_wt|v:1_trs|v:1;lv:0;sc:FF6B6B6B;fc:FF6B6B6B;strokeWidthScale:0.2_cst|v:1;\nfc:FF000000;strokeWidthScale:0.5_wt|fc:FF294093;strokeWidthScale:0&logo=n&da=n";function j(t){return`${(0,$.rA)().AssetsUrl}/staticsb/statics/latest/weather/img/map/${t}`}const V={temperature:{buttonSvg:"temperature",tooltipTextGenerator:t=>t.temperatureMapTooltip},precipitation:{buttonSvg:"precipitation",tooltipTextGenerator:t=>t.precipitationMapTooltip},cloud:{buttonSvg:"cloud",tooltipTextGenerator:t=>t.cloudMapTooltip},wind:{buttonSvg:"wind",tooltipTextGenerator:t=>t.windMapTooltip},airquality:{buttonSvg:"airquality",tooltipTextGenerator:t=>t.aqi},pollen:{buttonSvg:"pollen",tooltipTextGenerator:t=>t.pollen},pollenindex:{buttonSvg:"pollenindex",tooltipTextGenerator:t=>t.pollen},radar:{buttonSvg:"radar",tooltipTextGenerator:t=>t.radarMapTooltip},wildfire:{buttonSvg:"wildfire",tooltipTextGenerator:t=>t.wildfireMapTooltip??t.wildfire},winterstorm:{buttonSvg:"winterstorm",tooltipTextGenerator:t=>t.winterstormMapTooltip},severeweather:{buttonSvg:"severeweather",tooltipTextGenerator:t=>t.severeweatherMapTooltip},hurricane:{buttonSvg:"hurricane",tooltipTextGenerator:t=>t.hurricaneMapTooltip}};function Z(t,e,i){var n;const{mapType:r,weatherData:a,...l}=t;l.mapWidth=Math.ceil(l.mapWidth||g),l.mapHeight=Math.ceil(l.mapHeight||w);const{lat:s=0,lon:u=0}=(null===(n=a.source)||void 0===n?void 0:n.coordinates)||{},c={latitude:M(s),longitude:M(u),zoomlevel:"7",mapWeight:Math.max(l.mapWidth,64).toString(),mapHeight:Math.max(l.mapHeight,64).toString(),bingMapKey:"AnTcaqBi2ypp0xI-OZNi4W_ik2KhjgpqioTAtXLC8GzkMBQRMlyxvxyTnd5b73im",locale:v.Rb.Locale},y={...t.cardConfig,...e};if(!y.bingForegroundMapUrl&&!y.bingGreyMapUrl)return{};const $={...i,...l.strings};let k=null;if(r===o.iM.Precipitation?k=function(t,e,i,n,r){var a;if(!t.nowcasting)return null;let l=r.mapWidth??g,s=r.mapHeight??w;r.isSmallCard&&(l=x,s=b);const u=L(t,{defaultPlus:1,metaKey:"NowcastVectorMap",widthMap:l,heightMap:s,mapZoom:7,zoomOffset:-1,horizonStep:24,maxHorizon:i.radarMaxHorizon||120,useNexHour:!1}),c=D(u,-1);if(!c)return null;const p=t=>({buttonSvg:V[t].buttonSvg,tooltipText:V[t].tooltipTextGenerator(n),mapLink:r.buildMapUrl(t),telemetryTag:t,selected:"precipitation"==t}),d=r.showMinimapButtons&&Array.isArray(i.minimapTypes)?(i.minimapTypes||[]).map(p):void 0,h=r.displayContent||{},m=(null==h?void 0:h.contenttype)??"",f=(h.content&&(null===(a=h.content[0])||void 0===a?void 0:a.cap))??null,v="NowcastNearBy"===m&&null!==f?f:t.nowcasting.shortSummary,y=i.showPlaceLabel&&i.backgroundWithoutPlace?T.Qf.Format(i.backgroundWithoutPlace,e):T.Qf.Format(i.bingGreyMapUrl,e);return{staticMapLink:y,weatherLayerType:o.iM.Precipitation,minimapButtons:d,tilesInfo:c,...!r.hideInfoPane&&{infoPane:{text:v}}}}(a,c,y,$,l):r===o.iM.SevereWeather?k=function(t,e,i,n,r){const a=function(t,e){const{enable:i,enableMultiPolygon:n,location:r}=e||{},a=[];if(!i||!t||!t.length)return a;for(let e=0;e<t.length;++e){const i=N(t[e]);if(i&&a.push(i.alertAreaMapData),0==e&&!n)break}return a}(t.alertsInfoList||[],{enable:!0,enableMultiPolygon:!0,location:t.currentLocation}),l=i.severeBaseMapZoomLevel||7;if(e.zoomlevel=l.toString(),!a||!a.length)return null;let s="",u=r.mapWidth??g,c=r.mapHeight??w;r.isSmallCard&&(u=x,c=b);const p=L(t,{defaultPlus:30,metaKey:"zh-cn"==v.Rb.Locale?"CmaSevereWeatherSvg":"SevereWeatherSvg",widthMap:u,heightMap:c,mapZoom:l,horizonStep:1,maxHorizon:0,useNexHour:!1,noMinute:!1,noTimestamps:!0}),d=D(p);if(!d)return null;const h=a.length>1;s=h&&n.alertCountSummary?T.Qf.Format(n.alertCountSummary,a.length):a[0].severeAlertTooltip,s=n.severeweatherMapInfopane??s;const m=t.alertsInfo||{},f=r.showBanner&&m&&h?`${m.statusText?m.statusText+" ":""}${n.alertBannerText} +${a.length}`:void 0,y=r.displayContent||{},$=(y.content||[])[0]||{},M=((null==$?void 0:$.capIcon)??(0,B.y)(m.class,m.significance),i.showPlaceLabel&&i.backgroundWithoutPlace?T.Qf.Format(i.backgroundWithoutPlace,e):T.Qf.Format(i.bingGreyMapUrl,e)),k=t=>({buttonSvg:V[t].buttonSvg,tooltipText:V[t].tooltipTextGenerator(n),mapLink:r.buildMapUrl(t),telemetryTag:t,selected:"severeweather"==t}),S=r.showMinimapButtons&&Array.isArray(i.minimapTypes)?(i.minimapTypes||[]).map(k):void 0;return{minimapButtons:S,minimapSize:{width:(r.mapWidth??g).toString(),height:(r.mapHeight??w).toString()},staticMapLink:M,weatherLayerType:o.iM.SevereWeather,tilesInfo:d,...!r.hideInfoPane&&{infoPane:{text:s,icon:void 0}},enableExpandButton:!r.hideExpandButton,bannerData:f}}(a,c,y,$,l):r===o.iM.AQI?k=function(t,e,i,n,r){var a;const l=r.mapWidth??g,s=r.mapHeight??w,u=L(t,{defaultPlus:30,metaKey:(0,p.Cv)((v.Rb.Locale||"en-us").toLowerCase()),widthMap:l,heightMap:s,mapZoom:6,horizonStep:120,maxHorizon:1,useNexHour:!1,noTimestamps:!0,urlParams:{format:"jpg",scenario:"airqualityheatmaprendered",toReplaceScenario:"airqualityheatmap"}});e.zoomlevel="6";const c=D(u);if(!c)return null;let d=n.aqiMapInfopane;"en-us"==v.Rb.Locale?d=n.aqiMapInfopaneEn:"zh-cn"==v.Rb.Locale&&(d="查看全球空气质量");const h=i.showPlaceLabel&&i.bingForegroundWithoutPlace?T.Qf.Format(i.bingForegroundWithoutPlace||"",e):T.Qf.Format(i.bingForegroundMapUrl||"",e),m=t=>({buttonSvg:"airquality"==t?`${j("aqi.svg")}`:V[t].buttonSvg,tooltipText:V[t].tooltipTextGenerator(n),mapLink:r.buildMapUrl(t),telemetryTag:t,selected:"airquality"==t}),f=r.showMinimapButtons&&Array.isArray(i.minimapTypes)&&i.minimapTypes.length>1?(i.minimapTypes||[]).map(m):void 0;return{staticForegroundMapLink:h,weatherLayerType:o.iM.AQI,minimapButtons:f,tilesInfo:c,infoPane:{text:(null===(a=r.cardConfig)||void 0===a?void 0:a.infopaneText)??d}}}(a,c,y,$,l):r===o.iM.Pollen?k=function(t,e,i,n,r){var a,l;const s=r.mapWidth??g,u=r.mapHeight??w,c=L(t,{defaultPlus:30,metaKey:"JwaPollenTileSvgImage",widthMap:s,heightMap:u,mapZoom:4,horizonStep:1,maxHorizon:0,noMinute:!1,noTimestamps:!0,useNexHour:!1,urlParams:{toReplaceScenario:"jwapollentilesvgimage"}}),p=D(c);if(!p)return null;let d;if(e.zoomlevel="4",r.teaserProps&&r.teaserProps.summaryData){const t=r.teaserProps.summaryData;d={text:t.summaryLine1+" >",icon:t.summaryIcon,link:t.summaryLink,position:"right"}}else{var h;const e=r.displayContent||{},i=(e.content||[])[0]||{},n=(0,m.f7)(i.capIcon),a=(0,f.z2)(n,e.contenttype),o=r.iconImageTemplate([a],"16","");let l=((null===(h=t.currentCondition)||void 0===h?void 0:h.deepLink)||"").replace("forecast","pollen");"wxjwatoday"!=e.id&&"wxjwatmr"!=e.id&&(l+="&pollenfrom=flyout"),d={text:i.cap+" >",icon:o,link:l,position:"right"}}const v=i.showPlaceLabel&&i.backgroundWithoutPlace?T.Qf.Format(i.backgroundWithoutPlace,e):T.Qf.Format(i.bingGreyMapUrl,e),x=t=>({buttonSvg:"pollen"==t?`${j("pollen.svg")}`:V[t].buttonSvg,tooltipText:V[t].tooltipTextGenerator(n),mapLink:r.buildMapUrl(t),telemetryTag:t,selected:"pollen"==t}),b=r.showMinimapButtons&&Array.isArray(i.minimapTypes)&&i.minimapTypes.length>1?(i.minimapTypes||[]).map(x):void 0;return{staticMapLink:v,weatherLayerType:o.iM.Pollen,minimapButtons:b,infoPane:null!==(a=r.cardConfig)&&void 0!==a&&a.infopaneText?{text:null===(l=r.cardConfig)||void 0===l?void 0:l.infopaneText}:d,tilesInfo:p}}(a,c,y,$,l):r===o.iM.Hurricane?k=function(t,e,i,n,r){const a=r.mapWidth??g,l=r.mapHeight??w,s=r.displayContent||{},u=(0,F.uW)(s.content||[],6,a,l,t.source.coordinates);let c=(0,F.wT)(u,6,a,l),p="zh-cn"==v.Rb.Locale?"HurricaneCnSvg":"HurricaneSvg";i.disableAnimateMinimap&&(p="zh-cn"==v.Rb.Locale?"HurricaneCnSvgStatic":"HurricaneSvgStatic");const m=s.content&&s.content[0];c>=5&&(c=5);e.zoomlevel=c.toString();const f=L(t,{defaultPlus:30,metaKey:p,widthMap:a,heightMap:l,mapZoom:c,horizonStep:1,maxHorizon:0,noMinute:!1,noTimestamps:!0,useNexHour:!1}),x=L(t,{defaultPlus:30,metaKey:"SatellitePreRender",widthMap:a,heightMap:l,mapZoom:c,horizonStep:1,maxHorizon:0,noMinute:!1,noTimestamps:!0,useNexHour:!1,urlParams:{scenario:"SatellitePreRender",format:"png"}}),b=x,y=D(f);if(!y)return null;const $=D(b);if(!$)return null;const M=t=>({buttonSvg:"hurricane"==t?`${j("hurricane.svg")}`:V[t].buttonSvg,tooltipText:V[t].tooltipTextGenerator(n)||"",mapLink:r.buildMapUrl(t),telemetryTag:t,selected:"hurricane"==t}),k=r.showMinimapButtons&&Array.isArray(i.minimapTypes)?(i.minimapTypes||[]).map(M):void 0,S=(m||{}).title;let P="zh-cn"==v.Rb.Locale?Y:_;const z="zh-cn"!=v.Rb.Locale;return P=z?P+"&sftr=newweather":P,{staticMapLink:T.Qf.Format(P,e),weatherLayerType:o.iM.SevereWeather,minimapButtons:k,tilesInfo:[$,{...y,zIndex:6}],...!r.hideInfoPane&&{infoPane:{icon:r.iconImageTemplate([(0,d.xm)((null==m?void 0:m.capIcon)??h.Xr,h.rK)],"16",""),text:S}}}}(a,c,y,$,l):r===o.iM.WildfirePoint?k=function(t,e,i,n,r){var a,l,s,u;const c=r.mapWidth??g,p=r.mapHeight??w,m=L(t,{defaultPlus:30,metaKey:"WildFireSvg",widthMap:c,heightMap:p,mapZoom:null!=r&&null!==(a=r.cardConfig)&&void 0!==a&&a.wildfireMapZoomLevel?+r.cardConfig.wildfireMapZoomLevel:5,horizonStep:1,maxHorizon:0,useNexHour:!1,noMinute:!1,noTimestamps:!0}),f=D(m),v=r.displayContent||{},x=(v.content||[])[0]||{},b=x.metadata&&JSON.parse(x.metadata);if(e.zoomlevel=(null==r||null===(l=r.cardConfig)||void 0===l?void 0:l.wildfireMapZoomLevel)||"5",!(f&&x&&b&&b.name))return null;const y=(0,F.Qf)((t.currentCondition||{}).locationRaw,b),$=function(t,e){switch(t.type){case"Prescribed Fire":return e.prescribedFireTip;case"Burned Area Emergency Response":return e.postFireTip}return e.activeFireTip}(b,n);let M=n.wildfireDefaultTip;y>0&&$&&(M=T.Qf.Format($,{n:y}));const k=i.showPlaceLabel&&i.bingForegroundWithoutPlace?T.Qf.Format(i.bingForegroundWithoutPlace,e):T.Qf.Format(i.bingGreyMapUrl,e),S=t=>({buttonSvg:V[t].buttonSvg,tooltipText:V[t].tooltipTextGenerator(n),mapLink:r.buildMapUrl(t),telemetryTag:t,selected:"wildfire"==t}),P=r.showMinimapButtons&&Array.isArray(i.minimapTypes)&&i.minimapTypes.length>1?(i.minimapTypes||[]).map(S):void 0,z=r.hideInfoPane?void 0:{text:`${b.name}`,size:"twolines",secondLine:M,icon:r.iconImageTemplate([(0,d.xm)(h._F,h.rK)],"38","")};return{staticMapLink:k,weatherLayerType:o.iM.WildfirePoint,minimapButtons:P,tilesInfo:f,infoPane:null!==(s=r.cardConfig)&&void 0!==s&&s.infopaneText?{text:null===(u=r.cardConfig)||void 0===u?void 0:u.infopaneText}:z,backgroundColor:"#696969"}}(a,c,y,$,l):r===o.iM.PollenIndex?k=function(t,e,i,n,r){var a,l;const s=r.mapWidth??g,u=r.mapHeight??w,c=v.Rb.Locale,p=L(t,{defaultPlus:30,metaKey:(0,m.Hc)(c),widthMap:s,heightMap:u,mapZoom:5,horizonStep:1,maxHorizon:0,noMinute:!1,noTimestamps:!0,useNexHour:!1,urlParams:{format:"jpg",toReplaceScenario:(0,m.bE)(c)}}),d=D(p);if(!d)return null;e.zoomlevel="7";const h=r.displayContent||{},x=(h.content||[])[0]||{},b=(0,m.f7)(x.capIcon),y=(0,f.z2)(b,h.contenttype),$=r.iconImageTemplate([y],"16",""),M=(0,m.XM)(h.id),k=i.showPlaceLabel&&i.bingForegroundWithoutPlace?T.Qf.Format(i.bingForegroundWithoutPlace||"",e):T.Qf.Format(i.bingForegroundMapUrl||"",e),S=t=>({buttonSvg:"pollenindex"==t?`${j("pollen.svg")}`:V[t].buttonSvg,tooltipText:V[t].tooltipTextGenerator(n),mapLink:r.buildMapUrl(t),telemetryTag:t,selected:"pollenindex"==t}),F=r.showMinimapButtons&&Array.isArray(i.minimapTypes)&&i.minimapTypes.length>1?(i.minimapTypes||[]).map(S):void 0,P={text:M?n.pollenIndexTooltipTmrV2:n.pollenIndexTooltipV2,icon:$};return{staticForegroundMapLink:k,weatherLayerType:o.iM.PollenIndex,minimapButtons:F,infoPane:null!==(a=r.cardConfig)&&void 0!==a&&a.infopaneText?{text:null===(l=r.cardConfig)||void 0===l?void 0:l.infopaneText}:P,tilesInfo:d}}(a,c,y,$,l):r===o.iM.Lightning?k=function(t,e,i,n,r){var a,l;if(!t.nowcasting)return null;let s=r.mapWidth??g,u=r.mapHeight??w;r.isSmallCard&&(s=x,u=b);const c=L(t,{defaultPlus:1,metaKey:"LightningStrikeSvg",widthMap:s,heightMap:u,mapZoom:7,zoomOffset:-1,horizonStep:1,maxHorizon:0,noMinute:!1,noTimestamps:!0,useNexHour:!1});t.mapsMetaData=t.mapsMetaData&&{...t.mapsMetaData,RadarNowcastVectorMap:t.mapsMetaData.NowcastVectorMap};const p=L(t,{defaultPlus:1,metaKey:"RadarNowcastVectorMap",widthMap:s,heightMap:u,mapZoom:7,zoomOffset:-1,horizonStep:1,maxHorizon:0,noMinute:!1,noTimestamps:!0,useNexHour:!1}),d=L(t,{defaultPlus:1,metaKey:"ThunderstormPolygonSvg",widthMap:s,heightMap:u,mapZoom:7,zoomOffset:-1,horizonStep:1,maxHorizon:0,noMinute:!1,noTimestamps:!0,useNexHour:!1}),h=D(p,-1);if(!h)return null;const m=D(c,-1);if(!m)return null;const f=D(d,-1);if(!f)return null;const v=i.showPlaceLabel&&i.backgroundWithoutPlace?T.Qf.Format(i.backgroundWithoutPlace,e):T.Qf.Format(i.bingGreyMapUrl,e),y=t=>{const e="radar"==t;return{buttonSvg:V[t].buttonSvg,tooltipText:V[t].tooltipTextGenerator(n)||"",mapLink:r.buildMapUrl(t),telemetryTag:t,selected:e}},{shortSummary:$="",isRaining:M}=(null==t?void 0:t.nowcasting)||{},k=r.showMinimapButtons&&Array.isArray(i.minimapTypes)?(i.minimapTypes||[]).map(y):void 0,S=r.displayContent||{},F=M&&$?$:S.content&&(null===(a=S.content[0])||void 0===a?void 0:a.body),P=(null===(l=r.cardConfig)||void 0===l?void 0:l.infopaneText)??F;return{staticMapLink:v,weatherLayerType:o.iM.Lightning,minimapButtons:k,infoPane:r.hideInfoPane?void 0:{text:P??""},tilesInfo:i.includeStorm?[h,f,m]:[h,m]}}(a,c,y,$,l):r===o.iM.Radar&&(k=function(t,e,i,n,r){var a;if(!t.nowcasting)return null;const l=r.mapWidth??g,s=r.mapHeight??w;t.mapsMetaData=t.mapsMetaData&&{...t.mapsMetaData,RadarNowcastVectorMap:t.mapsMetaData.NowcastVectorMap};const u=L(t,{defaultPlus:1,metaKey:"RadarNowcastVectorMap",widthMap:l,heightMap:s,mapZoom:7,zoomOffset:-1,horizonStep:5,normalizeStep:4,minHorizon:-20,maxHorizon:41,noMinute:!1,useCurrentAsNow:!0,noTimestamps:!1}),c=13==(null==u||null===(a=u.tileLinks)||void 0===a?void 0:a.length)?4:0,p=D(u,-1);if(!p)return null;let d=[];return p.timestamps&&(d=p.timestamps.map((t,e)=>{const i=5*(e-c);return e==c?n.timelineNow||"":i%20==0?`${i>0?"+":""}${i}${n.timelineMins||""}`:""}),p.timestamps=[]),{staticMapLink:i.showPlaceLabel&&i.backgroundWithoutPlace?T.Qf.Format(i.backgroundWithoutPlace,e):T.Qf.Format(i.bingGreyMapUrl,e),weatherLayerType:o.iM.Radar,animationInterval:600,firstViewIndex:c,tilesInfo:[{...p,timeline:d,showTimelineOnlyHover:!0}]}}(a,c,y,$,l)),r!==o.iM.Temperature&&k||(k=function(t,e,i,n,r){var a;if(null!==(a=(0,R.a)())&&void 0!==a&&a.get("vpFreeze"))return null;const l=r.mapWidth??g,s=r.mapHeight??w,u=L(t,{metaKey:"TileImageMetadata",mapZoom:7,defaultPlus:1,noMinute:!0,useNexHour:!0,widthMap:l,heightMap:s,maxHorizon:1,horizonStep:10,noTimestamps:!0,zoomOffset:-2,urlParams:{scenario:"temperaturerendered",format:"jpg"}}),c=D(u,-2);if(!c)return null;const p=t=>({buttonSvg:V[t].buttonSvg,tooltipText:V[t].tooltipTextGenerator(n),mapLink:r.buildMapUrl(t),telemetryTag:t,selected:"temperature"==t}),d=i.showPlaceLabel&&i.backgroundWithoutPlace?T.Qf.Format(i.backgroundWithoutPlace,e):T.Qf.Format(i.bingGreyMapUrl,e),h=i.showPlaceLabel&&i.bingForegroundWithoutPlace?T.Qf.Format(i.bingForegroundWithoutPlace||"",e):T.Qf.Format(i.bingForegroundMapUrl||"",e);return{tilesInfo:c,staticForegroundMapLink:h,staticMapLink:d,weatherLayerType:o.iM.Temperature,minimapButtons:(i.minimapTypes||[]).map(p),minimapTooltip:n.minimapExpandTooltip}}(a,c,y,$,l)),k){var S;k.minimapZoom=+c.zoomlevel,k.viewPointOffset=l.viewPointOffset;const t=null==a||null===(S=a.source)||void 0===S?void 0:S.coordinates,e=l.mapWidth??g,i=l.mapHeight??w,n=(0,O.S)()&&c.zoomlevel&&y.showPlaceLabel&&y.placeTileUrlPattern&&t?q({enable:!0,urlPattern:y.placeTileUrlPattern,zoomOffset:-1,tileSize:512},t,e,i,k.minimapZoom):void 0;return k.buttonBarStyle=y.buttonBarStyle,k.enableExpandButton||(k.enableExpandButton=y.enableExpandButton),k.expandButtonPosition=y.expandButtonPosition,y.infopaneText&&!l.hideInfoPane&&(k.infoPane={text:y.infopaneText}),{minimapProps:k,clickableLabelTilesPromise:n}}return{}}var Q=i(92011),G=i(23429),K=i(60815),X=i(38493),J=i(90905);const tt="https://ecn.dev.virtualearth.net",et="https://www.bing.com/maps/geoplat";class it extends Q.L{constructor(){super(...arguments),this.failedMapImage="",this.disableAnimation=!1,this.enableHoverAnimation=!0,this.strings={},this.telemetryContext={},this.activeTilesIndex=0,this.renderTiles=[],this.isHovered=!1,this.pendingTooltipReposition=!1,this.loadedImageMap={},this.toggleTilesGroupStylePosition=t=>{var e,i;if(!t)return;const n=null===(e=this.shadowRoot)||void 0===e||null===(i=e.getElementById)||void 0===i?void 0:i.call(e,"tiles-group");n&&(n.style.position="dragstart"===t.type?"unset":"absolute")},this.logTileImageFailed=(t,e,i,n)=>{if(!n&&!this.enableTileImageCheck)return;if(this.loadedImageMap[t])return;this.loadedImageMap[t]=e?1:2;let r=0;const a=[];for(const t of i)this.loadedImageMap[t]&&++r,1===this.loadedImageMap[t]&&a.push(t);const o=n?.5:1;if(r<i.length||a.length/i.length<o)return;const l=n?"image":"tile";this.$emit("imageFailed",{type:"tile images",error:l,customMessage:JSON.stringify({failedImages:a,loadCount:r})})},this.hoverAnimationHanlder=t=>{var e;this.enableHoverAnimation&&(this.isHovered=(null==t||null===(e=t.detail)||void 0===e?void 0:e.isHovered)||!1,this.updateRenderLayer())}}telemetryContextChanged(){this.updateMinimapTelemetry()}get userRegion(){var t;return(null===v.Rb||void 0===v.Rb||null===(t=v.Rb.ClientSettings)||void 0===t?void 0:t.geo_country)||"us"}get backgroundMapSrc(){return this.checkMapHost(`${this.minimapData.staticMapLink}&userregion=${this.userRegion}`)}get foregroundMapSrc(){return this.checkMapHost(`${this.minimapData.staticForegroundMapLink}&userregion=${this.userRegion}`)}get hurricaneMapSrc(){return this.checkMapHost(`${this.hurricaneData.imgUrl}&userregion=${this.userRegion}`)}get infoPane(){return this.minimapData.infoPane||{}}get infoPaneIconName(){if(!this.infoPane.icon)switch(this.minimapData.weatherLayerType){case o.iM.Precipitation:return"umbrella";case o.iM.AQI:return"WeatherHero"==this.cardType?void 0:"aqi";case o.iM.SevereWeather:return}}get hurricaneData(){return this.minimapData.hurricaneData||{}}focusOnMinimapHandler(){this.$emit("focusmap")}get renderLayerType(){return this._renderLayerType||this.updateRenderLayerType(),this._renderLayerType}get disableTileMargin(){return this.params.mapType==o.iM.Hurricane}get mapType(){return this.minimapData.weatherLayerType!==o.iM.AQI&&1!==this.renderLayerType&&this.minimapData.weatherLayerType!==o.iM.PollenIndex||!this.minimapData.staticForegroundMapLink?2:3}checkMapHost(t){return t&&this.failedMapImage&&!$.T3.IsChinaCompliance&&this.failedMapImage===t&&t.startsWith(tt)?t.replace(tt,et):t}showInfoPane(){return!(!(this.minimapData&&this.minimapData.infoPane&&this.minimapData.infoPane.text)||this.params.isSmallCard)}showGroupButtons(){return!(!this.minimapData.minimapButtons||!this.minimapData.minimapButtons.length)}showExpandButton(){return!0===this.minimapData.enableExpandButton||!1===this.minimapData.enableExpandButton?this.minimapData.enableExpandButton:this.minimapData.weatherLayerType!==o.iM.Precipitation&&this.minimapData.weatherLayerType!==o.iM.Lightning&&!this.showInfoPane()}severeWeatherValidate(){return!(!this.minimapData||!this.minimapData.tilesInfo||this.minimapData.weatherLayerType!==o.iM.SevereWeather)}hurricaneValidate(){return!(!this.minimapData||!this.minimapData.hurricaneData)}tilesValidate(){return!(!this.minimapData||!this.minimapData.tilesInfo)}getMapPageUrl(t,e){var i,n;if(null!==(i=this.minimapData)&&void 0!==i&&null!==(i=i.hurricaneData)&&void 0!==i&&i.destUrl)return null===(n=this.minimapData)||void 0===n||null===(n=n.hurricaneData)||void 0===n?void 0:n.destUrl;if(t&&e&&this.defaultMapPageUrl){const i=new URL(this.defaultMapPageUrl);return i.searchParams.delete("loc"),i.searchParams.append("lat",t.toString()),i.searchParams.append("lon",e.toString()),i.toString()}return this.defaultMapPageUrl}showAlertToolTipHandler(t,e,i){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];i&&this.minimapAlertTooltipHtml&&(this.minimapAlertTooltipHtml.innerHTML=i,this.minimapAlertTooltipHtml.style.display="block",n||this.pendingTooltipReposition||(this.pendingTooltipReposition=!0,G.L.enqueue(()=>this.updateAlertTooltipPosition(t,e,i))))}updateAlertTooltipPosition(t,e,i){if(this.minimapAlertSvgHtml&&this.minimapAlertTooltipHtml){const n=6*i.length+12,r=32,a=this.minimapAlertSvgHtml.getBoundingClientRect(),o=a.right-a.left,l=a.bottom-a.top,s=l/2*-1,u=t.clientY-a.top-l/2-r-5,c="rtl"!=e?o-n:0,p="rtl"!=e?0:-1*(o-n),d="rtl"!=e?t.clientX-a.left-n/2:t.clientX-a.left-o+n/2;this.minimapAlertTooltipHtml.style.transform=`translateX(${Math.min(Math.max(p,d),c)}px) translateY(${Math.max(s,u)}px)`,this.pendingTooltipReposition=!1}}hideAlertTooltipHandler(){this.minimapAlertTooltipHtml&&(this.minimapAlertTooltipHtml.style.display="none")}connectedCallback(){if(super.connectedCallback(),document.addEventListener("dragstart",this.toggleTilesGroupStylePosition),document.addEventListener("dragend",this.toggleTilesGroupStylePosition),document.addEventListener("wxmaphover",this.hoverAnimationHanlder),this.containerRef){const{width:t,height:e}=this.containerRef.getBoundingClientRect();this.$emit("sizeChanged",{width:t,height:e}),this.containerObserver=new ResizeObserver((0,J.A)(t=>{if(!t)return;const e=t[0];if(!e||!e.contentRect)return;const{width:i,height:n}=e.contentRect;this.$emit("sizeChanged",{width:i,height:n})},100)),this.containerObserver.observe(this.containerRef)}}disconnectedCallback(){super.disconnectedCallback(),this.tilesTimer&&clearInterval(this.tilesTimer),document.removeEventListener("dragstart",this.toggleTilesGroupStylePosition),document.removeEventListener("dragend",this.toggleTilesGroupStylePosition),document.removeEventListener("wxmaphover",this.hoverAnimationHanlder),this.containerObserver&&(this.containerRef&&this.containerObserver.unobserve(this.containerRef),this.containerObserver.disconnect())}minimapDataChanged(){this.updateRenderLayerType(),this.updateRenderLayer()}layerValidate(t){switch(t){case 2:return this.severeWeatherValidate();case 3:return this.hurricaneValidate();case 4:return this.tilesValidate();default:return!0}}updateRenderLayerType(){let t=!0;if(!this.minimapData.weatherLayerType)return this.hurricaneValidate()?this._renderLayerType=3:this.severeWeatherValidate()?(t=!1,this._renderLayerType=4):this._renderLayerType=1,void(this.lightLabel=t);let e=1;switch(this.minimapData.weatherLayerType){case o.iM.SevereWeather:t=!1,e=4;break;case o.iM.Hurricane:e=3;break;case o.iM.AQI:case o.iM.PollenIndex:e=4;break;case o.iM.Precipitation:t=!1,e=4;break;case o.iM.Radar:case o.iM.Lightning:t=!1;case o.iM.Temperature:}this.layerValidate(e)||(t=!0,e=1),this._renderLayerType=e,this.lightLabel=t,this.updateMinimapTelemetry()}updateMinimapTelemetry(){const{layerTags:t,minimapTag:e,minimapLabelClickTag:i}=this.telemetryContext,{weatherLayerType:n}=this.minimapData||{};t&&n&&t[n]?(this.currentMinimapTelemetryTag=t[n],this.minimapLabelTelemetryTag=i):this.currentMinimapTelemetryTag=e}updateRenderLayer(){var t;this.tilesTimer&&(clearInterval(this.tilesTimer),this.tilesTimer=null,this.activeTilesIndex=(null===(t=this.minimapData)||void 0===t?void 0:t.firstViewIndex)||0);if(!this.minimapData||!this.minimapData.tilesInfo)return void(this.renderTiles=[]);if(this.renderTiles=Array.isArray(this.minimapData.tilesInfo)?this.minimapData.tilesInfo:[this.minimapData.tilesInfo],this.disableAnimation||this.enableHoverAnimation&&!this.isHovered)return;let e=!1,i=0;const n=this.renderTiles.find(t=>!t.disableAnimate&&t.tilesSequence);e=!!n,i=n?n.tilesSequence.length:0,!e||i<2||(this.enableHoverAnimation&&(this.activeTilesIndex=0),this.tilesTimer=window.setInterval(()=>{const t=((+this.activeTilesIndex||0)+1)%i;this.activeTilesIndex=t},this.minimapData.animationInterval||1e3))}onMapImageLoadError(t,e){if("zh-cn"===v.Rb.Locale||t.startsWith(et)){const i=et?t.replace(et,tt):t;return void this.$emit("imageFailed",{error:"image",type:e,customMessage:i})}this.failedMapImage=t}}(0,r.Cg)([K.sH],it.prototype,"cardType",void 0),(0,r.Cg)([X.CF],it.prototype,"target",void 0),(0,r.Cg)([K.sH],it.prototype,"failedMapImage",void 0),(0,r.Cg)([K.sH],it.prototype,"disableAnimation",void 0),(0,r.Cg)([K.sH],it.prototype,"enableHoverAnimation",void 0),(0,r.Cg)([K.sH],it.prototype,"config",void 0),(0,r.Cg)([K.sH],it.prototype,"strings",void 0),(0,r.Cg)([K.sH],it.prototype,"params",void 0),(0,r.Cg)([K.sH],it.prototype,"telemetryContext",void 0),(0,r.Cg)([K.sH],it.prototype,"currentMinimapTelemetryTag",void 0),(0,r.Cg)([X.CF],it.prototype,"defaultMapPageUrl",void 0),(0,r.Cg)([(0,X.CF)({converter:X.R$})],it.prototype,"activeTilesIndex",void 0),(0,r.Cg)([K.sH],it.prototype,"minimapData",void 0),(0,r.Cg)([K.sH],it.prototype,"lightLabel",void 0),(0,r.Cg)([K.sH],it.prototype,"minimapLabelTelemetryTag",void 0),(0,r.Cg)([X.CF],it.prototype,"openMapLabel",void 0),(0,r.Cg)([K.sH],it.prototype,"renderTiles",void 0),(0,r.Cg)([K.sH],it.prototype,"enableTileImageCheck",void 0),(0,r.Cg)([K.sH],it.prototype,"isHovered",void 0),(0,r.Cg)([K.Jg],it.prototype,"backgroundMapSrc",null),(0,r.Cg)([K.Jg],it.prototype,"foregroundMapSrc",null),(0,r.Cg)([K.Jg],it.prototype,"hurricaneMapSrc",null),(0,r.Cg)([K.Jg],it.prototype,"infoPane",null),(0,r.Cg)([K.Jg],it.prototype,"infoPaneIconName",null),(0,r.Cg)([K.Jg],it.prototype,"hurricaneData",null);var nt=i(57416),rt=i(37998),at=i(61138),ot=i(86856),lt=i(43103),st=i(50882),ut=i(74849),ct=i(22131);const pt=ut.A` .weather-minimap-banner,.weather-minimap-timeline-container{background:#1F2431}`,dt=ut.A` .weather-minimap-banner{border-radius:var(--smtc-ctrl-badge-corner);background:#EFEAE7;padding:4px 8px;color:var(--smtc-status-informative-tint-foreground);font-size:var(--smtc-text-ramp-legal-font-size);line-height:var(--smtc-text-ramp-legal-line-height);font-weight:var(--smtc-text-style-default-regular-weight);top:20px;left:0;height:24px;margin-inline-start:var(--smtc-padding-card-body-default-horizontal-start);display:flex;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:calc(100% - 2 * var(--smtc-padding-card-body-default-horizontal-start));position:absolute;box-sizing:border-box;align-items:center;pointer-events:none;z-index:1}.weather-minimap-timeline-container{padding:2px var(--smtc-padding-content-small) 0;bottom:12px;width:calc(100% - 2 * 32px - 2 * var(--smtc-padding-content-small));height:20px;background:#EFEAE7;backdrop-filter:blur(10.466471672058105px);color:var(--smtc-foreground-ctrl-neutral-primary-rest);border-radius:var(--smtc-corner-ctrl-rest);position:absolute;z-index:1;margin-inline-start:32px;margin-inline-end:auto;display:flex;align-items:center;justify-content:space-between;font-size:var(--smtc-text-global-caption2-font-size);line-height:var(--smtc-text-global-caption2-line-height);font-weight:var(--smtc-text-style-default-regular-weight);overflow:hidden;pointer-events:none}.weather-minimap-timeline,.weather-minimap-timeline-active{border-radius:1px;bottom:0;left:0;position:absolute;height:2px}.weather-minimap-timeline-active{background:var(--smtc-foreground-ctrl-neutral-primary-rest)}.weather-minimap-timeline{background-color:var(--smtc-ctrl-progress-background-empty);width:100%}.weather-minimap-timeline-text{margin-bottom:2px;height:16px}`.withBehaviors(new lt.N(null,pt),(0,ct.G2)(ut.A`${pt}`)),ht="0",mt="1",ft="1",vt="5",gt="10",wt="0",xt="5",bt=ut.A` .weather-minimap-expand{right:8px}.weather-minimap-buttons-container{left:6px}.minimap-tooltip-text-col{left:120%}.minimap-tooltip-text-col::before{right:100%}.minimap-tooltip-text-row{left:0}.weather-minimap-alert-tooltipstatic{left:50%}.weather-minimap-infopane-icon{margin-right:6px}.weather-minimap-tiles-time{right:4px}.weather-minimap-infopane-arrow{margin-left:4px;top:2px}`,yt=ut.A` .weather-minimap-expand{left:8px}.weather-minimap-buttons-container{right:6px}.minimap-tooltip-text-col{right:120%}.minimap-tooltip-text-col::before{left:100%}.minimap-tooltip-text-row{right:0}.weather-minimap-alert-tooltipstatic{right:50%}.weather-minimap-infopane-icon{margin-left:6px}.weather-minimap-tiles-time{left:4px}.weather-minimap-infopane-arrow{transform:rotate(180deg);margin-right:4px;top:0}.weather-minimap-tiles-container{direction:ltr}.weather-minimap-timeline,.weather-minimap-timeline-active{right:0}`,$t=ut.A` :host{--weather-card-map-mask-start:rgba(246,246,246,0.6);--weather-card-map-mask-end:rgba(246,246,246,0)}`,Mt=ut.A` :host{--weather-card-map-mask-start:rgba(0,0,0,0.8);--weather-card-map-mask-end:rgba(0,0,0,0)}`,Tt=ut.A`
    ${dt} .weather-minimap-container{width:100%;height:100%;border:0px;cursor:pointer}.weather-minimap-link-outline{display:none;position:absolute;top:2px;left:2px;right:2px;bottom:2px;outline:-webkit-focus-ring-color 2px solid;outline-offset:-4px;border-radius:4px;pointer-events:none;border:2px solid #FFF;z-index:999}.weather-minimap-link{display:block;position:relative;height:100%;z-index:${ht};cursor:pointer}.weather-minimap-link:focus-visible + .weather-minimap-link-outline{display:block}.weather-minimap-base{position:absolute;top:50%;left:50%;height:100% !important;width:100%;object-fit:cover;transform:translate(-50%,-50%);border-radius:calc(${nt.Pb} * 1px)}.weather-minimap-base.background{z-index:${wt}}.weather-minimap-base.foreground{z-index:${xt}}.weather-minimap-map-img{pointer-events:none}.weather-minimap-alert{cursor:pointer;height:100%;width:100%}.weather-minimap-alert-tooltip{display:none;position:absolute;cursor:pointer;overflow:hidden;border-radius:calc(${nt.Pb} * 3px);
            font-size: 13px;
            pointer-events: none;
            white-space: nowrap;
            --elevation: 4;
            ${rt.ET} padding:6px;top:50%;transform:translate(0%,-100%)}.weather-minimap-alert-tooltip{background-color:#ffffff;color:#444444}.weather-minimap-pin{position:absolute;box-sizing:border-box;top:50%;left:50%;transform:translate(-50%,-50%);pointer-events:none;width:12px;height:12px;border-radius:50%;overflow:visible;background:#ffd02e;border:3px solid #fff;box-shadow:0px 0px 10px rgb(0 0 0 / 40%);display:flex;align-items:center;justify-content:center;z-index:${ft}}.weather-minimap-pin-inner{width:12px;height:12px;min-width:12px;border-radius:50%;box-shadow:0px 0px 3px 3px #fffc;opacity:0}@keyframes location-pin-border{0%{opacity:0}50%{opacity:0.8}100%{opacity:0}}.weather-minimap{object-fit:none}.weather-minimap-buttons-container{position:absolute;border:0px;top:6px;z-index:${vt}}.weather-minimap-buttons-group{border-radius:6px;padding:2px;background:rgba(0,0,0,0.5);backdrop-filter:blur(30px);--elevation:4;${rt.ET} animation:delayFadeIn ease 0.8s;display:flex;gap:5px}.weather-minimap-buttons-group-col{flex-direction:column}.minimap-tooltipbutton{position:relative;display:flex;border-radius:1px;border:0px;width:26px;height:26px}.tooltipbutton-selected{background-color:#ffd02c}.minimap-tooltipbutton-inner{width:26px;height:26px;padding:0px;overflow:visible;border:0px;outline:none;border-radius:3px;cursor:pointer;align-items:center;display:flex;justify-content:center}.minimap-tooltipbutton-inner svg{fill:#FFF}.minimap-tooltipbutton-inner:hover svg,.tooltipbutton-selected svg{fill:#795700 !important}.minimap-tooltipbutton-inner:hover .highlight,.tooltipbutton-selected .highlight{filter:invert(75%)}.minimap-tooltip-text-col::before{content:"";position:absolute;top:0px;margin-top:6px;border-width:5px;border-style:solid;border-color:transparent #ffd02c transparent transparent}.minimap-tooltip-text-col{top:3px}.minimap-tooltip-text-row::before{content:"";position:absolute;top:-10px;border-width:5px;border-style:solid;border-color:transparent transparent #ffd02c transparent}.minimap-tooltip-text-row{top:32px}.minimap-tooltip-text{visibility:hidden;background-color:#ffd02c;color:#666666;font-size:${at.k};
            line-height: ${at.F};text-align:center;padding:3px 4px;white-space:nowrap;z-index:600;border-radius:3px;position:absolute}.minimap-tooltipbutton:hover .minimap-tooltipbutton-inner{background-color:#ffd02c}.minimap-tooltipbutton:focus .minimap-tooltipbutton-inner{background-color:#ffd02c}.minimap-tooltipbutton:hover .minimap-tooltip-text{visibility:visible}.minimap-tooltipbutton:focus .minimap-tooltip-text{visibility:visible}.weather-minimap-expand-top{top:8px}.weather-minimap-expand{position:absolute;display:flex;align-items:center;justify-content:center;width:26px;height:26px;bottom:8px;cursor:pointer;animation:delayFadeIn ease 0.8s;text-decoration:none;background:rgba(0,0,0,0.5);backdrop-filter:blur(30px);border-radius:6px;z-index:${vt}}.weather-minimap-expand:hover{opacity:0.8}.weather-minimap-infopane{position:absolute;left:0;right:0;bottom:0;padding:6px 12px;display:flex;align-items:center;background-color:rgba(0,0,0,0.5);backdrop-filter:blur(3px);color:#ffffff;font-size:12px;line-height:20px;border-radius:0 0 4px 4px;text-decoration:none;z-index:${vt}}.weather-minimap-infopane:hover{text-decoration:underline}.weather-minimap-infopane-right{background:rgba(0,0,0,0.5);color:#FFFFFF;width:92px;height:100px;right:8px;top:8px;border-radius:6px;position:absolute;font-size:12px;line-height:20px;text-decoration:none}.weather-minimap-infopane-click{width:88px;height:92px;position:absolute;top:4px;right:4px}.weather-minimap-infopane:hover .weather-minimap-infopane-text,.weather-minimap-infopane-rightContent:hover{text-decoration:underline}.weather-minimap-infopane:hover .weather-minimap-infopane-arrow{stroke:white}.weather-minimap-infopane-rightContent{margin:8px 12px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;font-weight:500}.weather-minimap-infopane-icon{display:flex;align-items:center;justify-content:center;width:16px;height:16px}.hero-minimap-infopane{backdrop-filter:blur(13.15px)}.hero-minimap-infopane .weather-minimap-infopane-icon{width:20px !important;height:20px !important}.hero-minimap-infopane .weather-minimap-infopane-icon img{width:20px !important;height:20px !important}.weather-minimap-infopane-icon-right{display:inline-block;top:2px;position:relative;margin-right:3px}.weather-minimap-infopane-icon-right svg{width:16px;height:16px}.weather-minimap-infopane-icon-twolines{width:32px;height:32px}.weather-minimap-infopane-icon img{width:16px;height:16px}.weather-minimap-infopane-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-break:keep-all}.weather-minimap-infopane-text-twolines{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-break:keep-all;width:100%;margin-left:10px}.weather-minimap-infopane-arrow{position:relative}.weather-minimap-tiles-layer{position:absolute;top:0;left:0;overflow:hidden;width:100%;height:100%}.weather-minimap-tiles-group{position:absolute;pointer-events:none}.weather-minimap-tiles-container{position:absolute;top:0;left:0;display:grid;visibility:hidden}.weather-minimap-tiles-container-visible{visibility:visible}.weather-minimap-tiles-image{display:block;margin-top:-1px;margin-left:-1px}.weather-minimap-tiles-time{position:absolute;top:4px;color:#ffffff;line-height:14px;font-size:14px;text-shadow:-1px -1px 0 rgb(0 0 0 / 45%),1px -1px 0 rgb(0 0 0 / 45%),-1px 1px 0 rgb(0 0 0 / 45%),1px 1px 0 rgb(0 0 0 / 45%)}.weather-minimap-tiles-time-mask{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;background:radial-gradient(at left bottom,transparent 80%,rgba(0,0,0,0.35))}.weather-minimap-full-mask{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none;z-index:${gt};background:linear-gradient( 180deg,var(--weather-card-map-mask-start) 0%,var(--weather-card-map-mask-end) 81.24% )}.weather-minimap-label-light{color:#FFF;text-shadow:-1px -1px 0 rgb(0 0 0 / 45%),1px -1px 0 rgb(0 0 0 / 45%),-1px 1px 0 rgb(0 0 0 / 45%),1px 1px 0 rgb(0 0 0 / 45%)}.weather-minimap-label-dark{color:#000;text-shadow:-1px -1px 0 rgb(255 255 255 / 45%),1px -1px 0 rgb(255 255 255 / 45%),-1px 1px 0 rgb(255 255 255 / 45%),1px 1px 0 rgb(255 255 255 / 45%)}.clickable-label-layer{pointer-events:none;z-index:${mt}}.clickable-label-link{cursor:pointer;text-decoration:none;pointer-events:auto;color:inherit}.clickable-label-link:hover{text-decoration:underline}.clickable-label-text{position:absolute;font-weight:500;text-decoration:inherit;text-align:center;font-size:10pt;line-height:1.1;user-select:none;width:max-content}.clickable-label-skyicon{width:20px;height:20px;vertical-align:text-top}.minimap-icon{object-fit:contain}`.withBehaviors(new ot.t(bt,yt),new lt.N($t,Mt),(0,ct.mr)(ut.A` :host{forced-color-adjust:auto}.minimap-tooltipbutton svg,.weather-minimap-expand svg{opacity:1;fill:${st.A.ButtonText}}.weather-minimap-buttons-group{background:rgba(0,0,0,0.25);border:1px solid ${st.A.HighlightText}}.minimap-tooltipbutton-inner{border-radius:calc(var(--control-corner-radius) * 1px)}.minimap-tooltipbutton:hover .minimap-tooltipbutton-inner,.tooltipbutton-selected{background-color:unset;border:1px solid ${st.A.HighlightText}}.minimap-tooltipbutton:hover .minimap-tooltipbutton-inner svg,.tooltipbutton-selected svg{fill:${st.A.HighlightText}}.minimap-tooltip-text{background-color:${st.A.ButtonFace};
                    color: ${st.A.ButtonText}}.minimap-tooltip-text::before{border-color:transparent ${st.A.ButtonFace} transparent transparent}.weather-minimap-infopane-icon{background-color:${st.A.Highlight}}.weather-minimap-infopane-arrow{background-color:${st.A.Highlight}}.tooltipbutton-selected .highlight{filter:unset}.minimap-tooltipbutton:focus .minimap-tooltipbutton-inner{background-color:#ffd02c}.minimap-tooltipbutton:focus .minimap-tooltipbutton-inner{background-color:unset;border:1px solid ${st.A.HighlightText}}.weather-minimap-link:focus-visible:after{border-color:${st.A.Highlight};
                    outline-color: ${st.A.HighlightText}
                }
            `));var kt=i(96950),St=i(91640),Ft=i(39957),Pt=i(60402);function zt(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"weathermapdata/1/static/minimap/wcicons";const n=null!=t&&t.startsWith("http")?t:`${(0,$.rA)().AssetsUrl}/${i}/${t}.svg`;return kt.qy`<img aria-hidden="true" class="minimap-icon ${e?"highlight":""}" src="${t=>n}" />`}const Lt=zt("right_arrow"),Ct=zt("hurricane"),Ht=zt("expand"),At=kt.qy`${(0,St.z)(t=>2===t.mapType,kt.qy`<img aria-hidden="true" data-fallback="${t=>!!t.failedMapImage}" class="weather-minimap-base weather-minimap-map-img background" alt="static map image" src=${t=>t.backgroundMapSrc} @error="${t=>t.onMapImageLoadError(t.backgroundMapSrc,"base map")}", style="background:${t=>t.minimapData.backgroundColor}" />`)}`,Dt=kt.qy`${(0,St.z)(t=>3===t.mapType,kt.qy`<img aria-hidden="true" data-fallback="${t=>!!t.failedMapImage}" class="weather-minimap-base weather-minimap-map-img foreground" alt="static map image" src=${t=>t.foregroundMapSrc} @error="${t=>t.onMapImageLoadError(t.foregroundMapSrc,"base map")}" />`)}`,It=kt.qy`<a href="${t=>t.mapLink}" target=${(t,e)=>e.parent.target} class="minimap-tooltipbutton" @focus="${(t,e)=>e.parent.focusOnMinimapHandler()}" data-t="${(t,e)=>e.parent.telemetryContext.layerButtonTags[t.buttonSvg]}"><div tabindex="-1" role="presentation" aria-hidden="true" class="${t=>!0===t.selected?"tooltipbutton-selected":""} minimap-tooltipbutton-inner">${t=>zt(t.buttonSvg,!0)}</div><span class="minimap-tooltip-text ${(t,e)=>"row"===e.parent.minimapData.buttonBarStyle?"minimap-tooltip-text-row":"minimap-tooltip-text-col"}">${t=>t.tooltipText}</span></a>`,Wt=kt.qy`${(0,St.z)(t=>3===t.renderLayerType,kt.qy`<img class="weather-minimap-base" aria-hidden="true" data-fallback="${t=>!!t.failedMapImage}" alt="hurricane map image" src=${t=>t.hurricaneMapSrc} @error="${t=>t.onMapImageLoadError(t.hurricaneData.imgUrl,"hurricane image")}" /><div class="weather-minimap-infopane"><div class="weather-minimap-infopane-icon">${Ct}</div><div class="weather-minimap-infopane-text">${t=>t.hurricaneData.title}</div></div>`)}`,Nt=kt.qy`
${(0,St.z)(t=>t.renderTiles.length&&(4===t.renderLayerType||1===t.renderLayerType),kt.qy`
${(0,Ft.ux)(t=>t.renderTiles,kt.qy`<div class="weather-minimap-tiles-layer" style="z-index: ${t=>t.zIndex||1}"><div id="tiles-group" class="weather-minimap-tiles-group" style="left: ${t=>t.offset[0]}px; top: ${t=>t.offset[1]}px; opacity: ${(t,e)=>2===e.parent.mapType&&e.parent.minimapData.weatherLayerType!==o.iM.SevereWeather&&e.parent.minimapData.weatherLayerType!==o.iM.WildfirePoint?"0.7":"1"}">${(0,Ft.ux)(t=>t.tilesSequence||[],kt.qy`<div tabindex="-1" class="weather-minimap-tiles-container ${(t,e)=>e.index==(+e.parentContext.parent.activeTilesIndex||0)?"weather-minimap-tiles-container-visible":""}" style="grid-template-columns: repeat(${(t,e)=>e.parent.col}, 1fr)">${(0,Ft.ux)(t=>t,kt.qy`<img class="${(t,e)=>e.parentContext.parentContext.parent.disableTileMargin?"":"weather-minimap-tiles-image"}" aria-hidden="true" width="${(t,e)=>e.parentContext.parent.tileSize}" height="${(t,e)=>e.parentContext.parent.tileSize}" src="${t=>t}" @load="${(t,e)=>e.parentContext.parentContext.parent.logTileImageFailed(t,!1,e.parent,0===e.parentContext.index)}" @error="${(t,e)=>e.parentContext.parentContext.parent.logTileImageFailed(t,!0,e.parent,0===e.parentContext.index)}" />`)}</div>`,{positioning:!0})}</div></div>${(0,St.z)((t,e)=>t.enableTimestemp&&t.timestamps&&t.timestamps.length&&2===e.parent.mapType,kt.qy`<div class="weather-minimap-tiles-time-mask"></div><div class="weather-minimap-tiles-time">${(t,e)=>(t.timestamps||[])[+e.parentContext.parent.activeTilesIndex||0]}</div>`)} `)}`)}`,Rt=kt.qy`${(0,St.z)(t=>t.params.isSmallCard,kt.qy`<div class="weather-minimap-full-mask"></div>`)}`,Ot=kt.qy`${(0,St.z)(t=>t.renderTiles.length&&t.renderTiles[0].timeline&&t.renderTiles[0].timeline.length&&(!t.renderTiles[0].showTimelineOnlyHover||t.renderTiles[0].showTimelineOnlyHover&&t.isHovered),kt.qy`<div class="weather-minimap-timeline-container">${(0,Ft.ux)(t=>t.renderTiles[0].timeline||[],kt.qy` ${(0,St.z)(t=>!!t,kt.qy`<div class="weather-minimap-timeline-text">${t=>t}</div>`)} `)}<div class="weather-minimap-timeline"><div class="weather-minimap-timeline-active" style="width:${t=>{var e;return(t.activeTilesIndex||0)/(((null===(e=t.renderTiles[0].timeline)||void 0===e?void 0:e.length)||2)-1)*100}}%;"></div></div></div>`)}`,Bt=kt.qy`${(0,St.z)(t=>3!==t.renderLayerType&&!t.config.disablePin,kt.qy`<div class="weather-minimap-pin" style="${t=>t.minimapData.viewPointOffset?`left: calc(50% +${t.minimapData.viewPointOffset[0]}px); top: calc(50% + ${t.minimapData.viewPointOffset[1]}px);`:""}"><div class="weather-minimap-pin-inner"></div></div>`)}`,Et=kt.qy`${(0,St.z)(t=>t.showGroupButtons(),kt.qy`<div class="weather-minimap-buttons-container"><div class="weather-minimap-buttons-group ${t=>"row"===t.minimapData.buttonBarStyle?"":"weather-minimap-buttons-group-col"}">${(0,Ft.ux)(t=>t.minimapData.minimapButtons||[],It)}</div></div>`)}`,qt=kt.qy`${(0,St.z)(t=>t.showExpandButton(),kt.qy`<a href=${t=>t.defaultMapPageUrl} target=${t=>t.target} title="${t=>t.openMapLabel}" aria-label="${t=>t.openMapLabel}" data-t="${t=>t.telemetryContext.minimapTag}" @focus="${t=>t.focusOnMinimapHandler()}" class="${t=>t.showInfoPane()||"top"===t.minimapData.expandButtonPosition?"weather-minimap-expand-top weather-minimap-expand":"weather-minimap-expand"}">${Ht}</a>`)}`,Ut=kt.qy`
${(0,St.z)(t=>t.infoPaneIconName||t.infoPane.icon,kt.qy`<div class="weather-minimap-infopane-icon">${(0,St.z)(t=>t.infoPaneIconName,kt.qy`${t=>zt(t.infoPaneIconName)}`)} ${(0,St.z)(t=>t.infoPane.icon,kt.qy`${t=>t.infoPane.icon}`)}</div>`)}`,_t=kt.qy`${(0,St.z)(t=>t.showInfoPane(),kt.qy` ${(0,St.z)(t=>(!t.infoPane.position||"bottom"==t.infoPane.position)&&"twolines"!=t.infoPane.size,kt.qy`<a class="weather-minimap-infopane${t=>"WeatherHero"==t.cardType?" hero-minimap-infopane":""}" tabindex="-1" href=${t=>t.getMapPageUrl()} target=${t=>t.target} data-t="${t=>t.telemetryContext.infoPaneTags.infoPane}">${Ut}<div class="weather-minimap-infopane-text" title="${t=>t.infoPane.text}">${t=>t.infoPane.text}</div><div class="weather-minimap-infopane-arrow">${Lt}</div></a>`)} ${(0,St.z)(t=>"twolines"==t.infoPane.size,kt.qy`<a class="weather-minimap-infopane${t=>"WeatherHero"==t.cardType?" hero-minimap-infopane":""}" tabindex="-1" href=${t=>t.getMapPageUrl()} target=${t=>t.target} data-t="${t=>t.telemetryContext.infoPaneTags.twoLines}">${(0,St.z)(t=>t.infoPane.icon,kt.qy`<div class="weather-minimap-infopane-icon-twolines">${t=>t.infoPane.icon}</div>`)}<div class="weather-minimap-infopane-text-twolines" title="${t=>t.infoPane.text}"><div>${t=>t.infoPane.text}</div><div>${t=>t.infoPane.secondLine}</div></div><div class="weather-minimap-infopane-arrow">${Lt}</div></a>`)} ${(0,St.z)(t=>"right"==t.infoPane.position&&t.infoPane.text,kt.qy`<a class="weather-minimap-infopane-right" href=${t=>t.infoPane.link||t.getMapPageUrl()} target=${t=>t.target} data-t="${t=>t.telemetryContext.infoPaneTags.right}"><div class="weather-minimap-infopane-rightContent" title="${t=>t.infoPane.text}" aria-label="${t=>t.infoPane.text}">${(0,St.z)(t=>t.infoPane.icon,kt.qy`<div class="weather-minimap-infopane-icon-right">${t=>t.infoPane.icon}</div>`)} ${t=>t.infoPane.text}</div></a>`)}
`)}`,Yt=kt.qy`<div style="${(t,e)=>{var i;const n=null===(i=e.parentContext.parent.minimapData.clickableLabelTiles)||void 0===i?void 0:i.tileSize;return n?`width:${n}px;height:${n}px;position:relative`:""}}">${(0,St.z)((t,e)=>!e.parentContext.parent.config.disableLabelClickable,kt.qy`${(0,Ft.ux)(t=>t,kt.qy`<a tabindex="-1" class="clickable-label-link" href=${(t,e)=>e.parentContext.parentContext.parent.getMapPageUrl(t.lat,t.long)} target=${(t,e)=>e.parentContext.parentContext.parent.target} data-t="${(t,e)=>e.parentContext.parentContext.parent.minimapLabelTelemetryTag}" title="${(t,e)=>e.parentContext.parentContext.parent.openMapLabel}" aria-label="${(t,e)=>e.parentContext.parentContext.parent.openMapLabel}">${(0,Ft.ux)(t=>t.labels,kt.qy`<span class="clickable-label-text" style="left: ${t=>t.x}px; top: ${t=>t.y}px">${t=>t.text}</span>`,{positioning:!0})}</a>`)}`)} ${(0,St.z)((t,e)=>e.parentContext.parent.config.disableLabelClickable,kt.qy`${(0,Ft.ux)(t=>t,kt.qy` ${(0,Ft.ux)(t=>t.labels,kt.qy`<span class="clickable-label-text" style="left: ${t=>t.x}px; top: ${t=>t.y}px">${t=>t.text}</span>`,{positioning:!0})} `)}`)}</div>`,jt=kt.qy`${(0,St.z)(t=>t.minimapData.clickableLabelTiles,kt.qy`<div class="weather-minimap-tiles-layer clickable-label-layer" style="${t=>t.minimapData.viewPointOffset?`transform: translate(${2*t.minimapData.viewPointOffset[0]}px, ${2*t.minimapData.viewPointOffset[1]}px); width:calc(100% + 2 * ${Math.abs(t.minimapData.viewPointOffset[0])}px); height:calc(100% + 2 * ${Math.abs(t.minimapData.viewPointOffset[1])}px); `:""}"><div id="clickable-label-tiles" class="weather-minimap-tiles-group weather-minimap-label-${t=>t.lightLabel?"light":"dark"}" style="left: ${t=>{var e;return(null===(e=t.minimapData.clickableLabelTiles)||void 0===e?void 0:e.offset[0])||0}}px; top: ${t=>{var e;return(null===(e=t.minimapData.clickableLabelTiles)||void 0===e?void 0:e.offset[1])||0}}px;"><div tabindex="-1" class="weather-minimap-tiles-container weather-minimap-tiles-container-visible" style="grid-template-columns: repeat(${t=>{var e;return null===(e=t.minimapData.clickableLabelTiles)||void 0===e?void 0:e.tiles[0].length}}, 1fr)">${(0,Ft.ux)(t=>{var e;return(null===(e=t.minimapData.clickableLabelTiles)||void 0===e?void 0:e.tiles)||[]},kt.qy` ${(0,Ft.ux)(t=>t,Yt)} `)}</div></div></div>`)}`,Vt=kt.qy` ${(0,St.z)(t=>t.minimapData&&t.minimapData.bannerData,kt.qy`<div class="weather-minimap-banner">${t=>t.minimapData.bannerData}</div>`)}
`,Zt=kt.qy` ${(0,St.z)(t=>t&&t.minimapData,kt.qy`<div ${(0,Pt.K)("containerRef")} class="weather-minimap-container"><a class="weather-minimap-link" href=${t=>t.getMapPageUrl()} target=${t=>t.target} title="${t=>t.openMapLabel?t.openMapLabel+" ":""}" aria-label="${t=>t.strings.minimapExpandTooltip?t.strings.minimapExpandTooltip+" ":""}" data-t="${t=>t.currentMinimapTelemetryTag}" tabindex="${t=>t.params.noTabIndex?-1:0}" style="${t=>t.minimapData.viewPointOffset?`transform: translate(${2*t.minimapData.viewPointOffset[0]}px, ${2*t.minimapData.viewPointOffset[1]}px); width:calc(100% + 2 * ${Math.abs(t.minimapData.viewPointOffset[0])}px); height:calc(100% + 2 * ${Math.abs(t.minimapData.viewPointOffset[1])}px); `:""}">${At} ${Nt} ${Wt} ${Dt}</a><div class="weather-minimap-link-outline"></div>${jt} ${_t} ${Et} ${qt} ${Rt} ${Ot} ${Bt} ${Vt}</div>`)}`,Qt=it.compose({name:"msft-weather-minimap",template:Zt,styles:Tt,shadowOptions:{delegatesFocus:!0}});var Gt=i(89151),Kt=i(53685);function Xt(t){const e=performance.now(),i=!0===v.Rb.IsPrerender?e-(0,Gt.W4)(Kt.xF):e;(0,Gt.tD)(t,i)}var Jt=i(66600),te=i(87518);class ee extends c.U{extChanged(){this.createTelemetry()}async paramsChanged(t,e){(0,Jt.A)(null==e?void 0:e.weatherData,null==t?void 0:t.weatherData)&&(null==e?void 0:e.mapType)===(null==t?void 0:t.mapType)||this.config&&this.strings&&await this.buildData()}async sizeChanged(t,e){const[i,n]=t||[],[r,a]=e||[];t&&i===r&&n===a||this.params.mapWidth===r&&this.params.mapHeight===a||await this.buildData()}constructor(){super(),this.minimapTelemetryLayerTags={},this.layerButtonTelemetryTags={},this.telemetryContext={},Qt.define(u.i.registry)}async experienceConnected(){Xt("WeatherMinimapWC.Start"),this.createTelemetry(),await this.buildData()}getExperienceType(){return s.R7J}shadowDomPopulated(){this.minimapData&&(this.$emit("miniMapSuccess","success"),Xt("WeatherMinimapWC.Ready"))}async buildData(){if(this.params&&(this.config||this.params.cardConfig))try{let t=this.params;this.size&&(t={...this.params,mapWidth:this.size[0],mapHeight:this.size[1]});const{minimapProps:e,clickableLabelTilesPromise:i}=Z(this.params,this.config,this.strings);if(!e)return this.$emit("miniMapError","mini map data is null"),void(0,a.nu)({detail:{message:"mini map data is null"}},this.getExperienceType());this.minimapData=e,null==i||i.then(t=>{this.minimapData={...this.minimapData,clickableLabelTiles:t}}).catch(t=>{console.error("Error occurred clickableLabelTiles",t)}),this.$emit("miniMapSuccess","success")}catch(t){(0,a.nu)(t,this.getExperienceType(),!0),this.$emit("miniMapError",t.message)}}updateTelemetry(t,e){let i=this.signature?{signature:this.signature}:void 0;return i=this.ext?this.ext:i,(0,te.g)(e,{type:l.b5.StructuredData,headline:"minimap",vertical:"weather",category:"weather"},l.MS.Navigate,l.EG.Click,i,{type:l.MJ.ActionButton})}buildTelemetryTag(t){return this.minimapWCTelemetryObj||(this.minimapWCTelemetryObj=this.updateTelemetry(this.telemetryObject,"WeatherMinimapWC")),this.updateTelemetry(this.minimapWCTelemetryObj,t).getMetadataTag()}createTelemetry(){this.telemetryContext={minimapTag:this.buildTelemetryTag("minimap"),minimapLabelClickTag:this.buildTelemetryTag("MinimapLabelClick"),layerTags:{[o.iM.Temperature]:this.buildTelemetryTag("TemperatureLayer"),[o.iM.SevereWeather]:this.buildTelemetryTag("SevereWeatherLayer"),[o.iM.Hurricane]:this.buildTelemetryTag("HurricaneLayer"),[o.iM.AQI]:this.buildTelemetryTag("AQILayer"),[o.iM.Precipitation]:this.buildTelemetryTag("PrecipitationLayer"),[o.iM.Pollen]:this.buildTelemetryTag("PollenLayer"),[o.iM.PollenIndex]:this.buildTelemetryTag("PollenIndexLayer"),[o.iM.WildfirePoint]:this.buildTelemetryTag("WildfireLayer"),[o.iM.Lightning]:this.buildTelemetryTag("Lightning"),[o.iM.Radar]:this.buildTelemetryTag("RadarLayer")},layerButtonTags:{temperature:this.buildTelemetryTag("Temperatue"),precipitation:this.buildTelemetryTag("Precipitation"),cloud:this.buildTelemetryTag("Cloud"),wind:this.buildTelemetryTag("Wind"),radar:this.buildTelemetryTag("Radar"),wildfire:this.buildTelemetryTag("Wildfire"),winterstorm:this.buildTelemetryTag("Winterstorm"),severeweather:this.buildTelemetryTag("SevereWeather")},infoPaneTags:{infoPane:this.buildTelemetryTag("InfoPane"),twoLines:this.buildTelemetryTag("InfoPaneTwoLines"),right:this.buildTelemetryTag("InfoPaneRight")}}}onSizeChanged(t){const{width:e,height:i}=t.detail;this.size=[e,i]}}(0,r.Cg)([K.sH],ee.prototype,"minimapData",void 0),(0,r.Cg)([K.sH],ee.prototype,"defaultMapPageUrl",void 0),(0,r.Cg)([K.sH],ee.prototype,"target",void 0),(0,r.Cg)([K.sH],ee.prototype,"signature",void 0),(0,r.Cg)([K.sH],ee.prototype,"ext",void 0),(0,r.Cg)([K.sH],ee.prototype,"cardType",void 0),(0,r.Cg)([K.sH],ee.prototype,"cardLayout",void 0),(0,r.Cg)([K.sH],ee.prototype,"params",void 0),(0,r.Cg)([K.sH],ee.prototype,"size",void 0),(0,r.Cg)([K.sH],ee.prototype,"minimapWCTelemetryObj",void 0),(0,r.Cg)([K.sH],ee.prototype,"minimapTelemetryTag",void 0),(0,r.Cg)([K.sH],ee.prototype,"minimapTelemetryLayerTags",void 0),(0,r.Cg)([K.sH],ee.prototype,"layerButtonTelemetryTags",void 0),(0,r.Cg)([K.sH],ee.prototype,"telemetryContext",void 0);const ie=kt.qy`${(0,St.z)(t=>t&&t.minimapData,kt.qy`<msft-weather-minimap :minimapData="${t=>t.minimapData}" :strings=${t=>t.strings||{}} :openMapLabel="${t=>{var e,i;return null!=(null===(e=t.params.strings)||void 0===e?void 0:e.openMapTooltip)?t.params.strings.openMapTooltip:null===(i=t.strings)||void 0===i?void 0:i.openMapTooltip}}" :config="${t=>t.config||{}}" :params="${t=>t.params}" :disableAnimation="${t=>{var e;return!(null===(e=t.params)||void 0===e||null===(e=e.cardConfig)||void 0===e||!e.disableAnimateMinimap)}}" :enableHoverAnimation="${t=>{var e;return!(null===(e=t.config)||void 0===e||!e.enableHoverAnimation)}}" :cardType=${t=>t.cardType} :cardLayout="${t=>t.cardLayout}" :telemetryContext="${t=>t.telemetryContext}" :defaultMapPageUrl="${t=>t.defaultMapPageUrl}" target="${t=>t.target}" class="minimap-container${t=>"WeatherHero"==t.cardType?" hero-minimap-container":""}" :enableTileImageCheck="${t=>t.config.enableTileImageCheck}" @sizeChanged="${(t,e)=>t.onSizeChanged(e.event)}"></msft-weather-minimap>`)}`,ne=ut.A`
.minimap-container{width:100%;height:100%;position:absolute;border-radius:4px;overflow:hidden}.hero-minimap-container{border-radius:8px !important;left:0}`,re={experienceConfigSchema:undefined}},71160:function(t,e,i){i.d(e,{Cv:function(){return h},JF:function(){return w},Lt:function(){return P},Sb:function(){return d},Ut:function(){return f},_N:function(){return S},_R:function(){return p},cE:function(){return b},cY:function(){return x},dC:function(){return $},mA:function(){return y},mM:function(){return g},qt:function(){return m},sB:function(){return k},sX:function(){return T},zF:function(){return M}});var n=i(17254),r=i(48566),a=i(31951),o=i(65022),l=i(93468),s=i(98216),u=i(77246);const c=["de-at","cs-cz","nl-be","fr-ch","de-de","da-dk","es-es","fi-fi","fr-fr","el-gr","hu-hu","en-ie","it-it","nl-nl","nb-no","pl-pl","pt-pt","sv-se"],p={Good:"Good",Moderate:"Moderate",Poor:"Poor",PoorIN:"PoorIN",Unhealthy:"Unhealthy",VeryUnhealthy:"Very Unhealthy",Hazardous:"Hazardous",Satisfactory:"Satisfactory",ModeratelyPolluted:"Moderately polluted",VeryPoor:"Very Poor",Severe:"Severe",Fair:"Fair",ModerateEU:"ModerateEU",PoorEU:"PoorEU",VeryPoorEU:"Very Poor EU",ExtremelyPoor:"Extremely Poor"};function d(t){return"en-in"===t?"in":"zh-cn"===t?"cn":c.includes(t)?"eu":"us"}function h(t){return"zh-cn"===t?"AirQualityHeatMapCn":c.includes(t)?"AirQualityHeatMapEu":"AirQualityHeatMap"}function m(t){return"en-us"!==t&&t?"en-in"===t?"IN":"zh-cn"===t?"CN":c.includes(t||"")?"EU":"OT":"US"}function f(t,e){if(null==t||t<0)return null;const i=m(e);if("IN"===i){if(t<=50)return p.Good;if(t>50&&t<=100)return p.Satisfactory;if(t>100&&t<=200)return p.ModeratelyPolluted;if(t>200&&t<=300)return p.PoorIN;if(t>300&&t<=400)return p.VeryPoor;if(t>400)return p.Severe}else if("EU"===i){if(t<=50)return p.Good;if(t>50&&t<=100)return p.Fair;if(t>100&&t<=150)return p.ModerateEU;if(t>150&&t<=200)return p.PoorEU;if(t>200&&t<=300)return p.VeryPoorEU;if(t>300)return p.ExtremelyPoor}else{if(t<=50)return p.Good;if(t>50&&t<=100)return p.Moderate;if(t>100&&t<=150)return p.Poor;if(t>150&&t<=200)return p.Unhealthy;if(t>200&&t<=300)return p.VeryUnhealthy;if(t>300)return p.Hazardous}}const v={bg:"weathermapdata/1/static/background/v2.0/Aq1UBackground{level}.png",icon:a.rK+a.mr};function g(t,e){const i=r.Qf.Format(v[e],{level:t});return`${(0,n.rA)().AssetsUrl}/${i}`}function w(t,e,i){if(!i)return"";if("IN"==e)switch(t){case 1:case 10:return null==i?void 0:i.good;case 2:case 20:return null==i?void 0:i.satisfactory;case 3:case 30:return null==i?void 0:i.moderate;case 4:case 40:return null==i?void 0:i.poor;case 5:case 50:return null==i?void 0:i.veryPoor;case 6:case 60:return null==i?void 0:i.severe}else if("EU"==e)switch(t){case 1:case 10:return null==i?void 0:i.good;case 2:case 20:return null==i?void 0:i.fair;case 3:case 30:return null==i?void 0:i.moderate;case 4:case 40:return null==i?void 0:i.poor;case 5:case 50:return null==i?void 0:i.veryPoor;case 6:case 60:return null==i?void 0:i.extremelyPoor}else switch(t){case 1:case 10:return null==i?void 0:i.good;case 2:case 20:return null==i?void 0:i.moderate;case 3:case 30:return null==i?void 0:i.poor;case 4:case 40:return null==i?void 0:i.unhealthy;case 5:case 50:return null==i?void 0:i.veryUnhealthy;case 6:case 60:return null==i?void 0:i.hazardous}return""}function x(t,e){return t<=50?null==e?void 0:e.aqiNearby:null==e?void 0:e.healthImpact}function b(t,e){return t<=50?null==e?void 0:e.primaryPollutant:null==e?void 0:e.goodAqiNearby}function y(t,e){if(null==t||t<0)return 0;const i=m(e);if("IN"===i){if(t<=50)return 1;if(t>50&&t<=100)return 2;if(t>100&&t<=200)return 3;if(t>200&&t<=300)return 4;if(t>300&&t<=400)return 5;if(t>400)return 6}else if("EU"===i){if(t<=50)return 1;if(t>50&&t<=100)return 2;if(t>100&&t<=150)return 3;if(t>150&&t<=200)return 4;if(t>200&&t<=300)return 5;if(t>300)return 6}else{if(t<=50)return 1;if(t>50&&t<=100)return 2;if(t>100&&t<=150)return 3;if(t>150&&t<=200)return 4;if(t>200&&t<=300)return 5;if(t>300)return 6}}const $=4;function M(t,e,i){var n;const r=[],a=Object.keys((null==e?void 0:e.trend)||{}).find(e=>t?new Date(i).getTime()==new Date(e).getTime():new Date(i).getTime()<new Date(e).getTime()),o=(null==e||null===(n=e.trend)||void 0===n||null===(n=n[a])||void 0===n?void 0:n.length)||0;for(let t=0;t<o;t++){var l,s,u,c,p,d,h,m;const i={timekey:a,aqi:null===(l=e.trend)||void 0===l||null===(l=l[a])||void 0===l?void 0:l[t],CO:null===(s=e.CO)||void 0===s||null===(s=s[a])||void 0===s?void 0:s[t],NO2:null===(u=e.NO2)||void 0===u||null===(u=u[a])||void 0===u?void 0:u[t],O3:null===(c=e.O3)||void 0===c||null===(c=c[a])||void 0===c?void 0:c[t],PM10:null===(p=e.PM10)||void 0===p||null===(p=p[a])||void 0===p?void 0:p[t],PM25:null===(d=e.PM25)||void 0===d||null===(d=d[a])||void 0===d?void 0:d[t],SO2:null===(h=e.SO2)||void 0===h||null===(h=h[a])||void 0===h?void 0:h[t],PPAType:null===(m=e.primaryPollutant)||void 0===m||null===(m=m[a])||void 0===m?void 0:m[t]};r.push(i)}return r}function T(t,e){const i=[];return Object.keys((null==t?void 0:t.trend)||{}).forEach(n=>{if(e<=n){var r,a,o,l,s,u,c,p;const e={timekey:n,aqi:null===(r=t.trend)||void 0===r?void 0:r[n],CO:null===(a=t.CO)||void 0===a?void 0:a[n],NO2:null===(o=t.NO2)||void 0===o?void 0:o[n],O3:null===(l=t.O3)||void 0===l?void 0:l[n],PM10:null===(s=t.PM10)||void 0===s?void 0:s[n],PM25:null===(u=t.PM25)||void 0===u?void 0:u[n],SO2:null===(c=t.SO2)||void 0===c?void 0:c[n],PPAType:null===(p=t.primaryPollutant)||void 0===p?void 0:p[n]};i.push(e)}}),i}function k(t,e,i){var n,r;if((0,u.S)()&&t==$-1&&i<24&&parseInt((null==e||null===(n=e.endDate)||void 0===n||null===(n=n.split("+"))||void 0===n?void 0:n[1])||"0")>=$-1&&null!=e&&null!==(r=e.fdhead)&&void 0!==r&&null!==(r=r.toLowerCase())&&void 0!==r&&r.includes("prg-1sw-wxaqif")){const t="Missed some AQI data";s.YT&&s.YT.sendAppErrorEvent((0,l.$5)(o.zfX,"some data of weather AQI insights not returned",t),!1)}}function S(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;try{if(!t||!Array.isArray(t)||t.length<e)return!1;return t.slice(0,e).every(t=>t&&!isNaN(Number(t.aqi))&&Number(t.aqi)>0&&void 0!==t.aqi&&null!==t.aqi)}catch(t){return!1}}function F(t){s.YT&&s.YT.sendAppErrorEvent((0,l.$5)(o.zfX,t),!1)}function P(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{if("TeaserAQForecastWeek"!==i&&"AQICard"!==i&&"TeaserAQForecastToday"!==i)return!1;const r=Array.isArray(e)?e:function(t){if(!t||!Array.isArray(t)||t.length<1)return;let e=[];for(let i=0;i<t.length;i++){const n=t[i];n&&n.hourly&&Array.isArray(n.hourly)&&n.hourly.length>0&&(e=[...e,...n.hourly])}return e}(t),a="TeaserAQForecastWeek"==i?t:r,o="TeaserAQForecastWeek"==i?4:24;if(!a||!Array.isArray(a)||a.length<o)return n&&F(`aqi forecast: weather data is missing aqi forecast list, ${i}, aqi list length: ${(null==a?void 0:a.length)||0}`),!1;const l=S(a,o);if(!l){const e=t.slice(0,4);F(`aqi forecast: forecast data is missing aqi, ${i}, 4 day aqi values: ${e.map(t=>t.aqi)}`)}return l}catch(t){return F(`aqi forecast: forecast data is missing aqi, ${i}`),!1}}},72535:function(t,e,i){i.d(e,{Lu:function(){return l},SV:function(){return o},Z:function(){return u}});var n=i(12870),r=i(25447);const a={SN:"winterstorm",IC:"winterstorm",IM:"winterstorm",FD:"wildfire",AQ:"airqualitystation",SM:"airqualitystation",DU:"airqualitystation",VO:"airqualitystation",AS:"airqualitystation"};function o(t,e,i,a,o){var l,s;if(null===(l=t.alertsInfo)||void 0===l||!l.created||null===(s=t.source)||void 0===s||!s.location)return null;try{const l=t.source.location.TimezoneName,s=new r.i(n.Rb.Locale,l),u=t.alertsInfo.start,c=t.alertsInfo.created,p=t.alertsInfo.end;let d,h=null,m="";if(u&&p&&e>=new Date(u)&&e<=new Date(p)?(m=a,h=new Date(p)):u&&e>=new Date(c)?(m=i,h=new Date(u)):e>=new Date(c)&&(m=o,h=new Date(c)),!h)return null;d="zh-cn"==n.Rb.Locale?function(t,e){if(!t)return null;const i=e.formatHourMinute(t),n=e.formatYear(t),r=e.formatMonth(t),a=e.formatDay(t);return`${n}-${r}-${a} ${i}`}(h,s):function(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t)return null;const n={forceWeekdayAhead:!0};let r=e.formatHourMinuteTimezone(t,n);i||(r=e.formatHourMinute(t,n));return`${e.formatDayWithWeek(t,n)}, ${r}`}(h,s,!1);let f=d;return d&&m&&(f=`${m}: ${d}`),f}catch{return null}}function l(t,e){var i,n;if((null===(i=t.alertsInfoList)||void 0===i?void 0:i.length)>0&&(null==e||null===(n=e.content)||void 0===n?void 0:n.length)>=1&&("SevereWeather"==(null==e?void 0:e.contenttype)||"SevereWeather2nd"==(null==e?void 0:e.contenttype))){const i=e.content[0].metadata&&JSON.parse(e.content[0].metadata);if((null==i?void 0:i.AlertIdx)>=0&&t.alertsInfoList.length>i.AlertIdx)return t.alertsInfoList[i.AlertIdx]}return t.alertsInfo}const s={winterstorm:{type:"exclude",markets:["zh-cn"]},wildfire:{type:"include",markets:["us"]},airqualitystation:{type:"include",markets:["us"]}};function u(t){if(!t)return null;const e=a[t];return function(t){const e=n.Rb.Locale;let i=!1;if(!(t in s))return i;"include"==s[t].type?s[t].markets.some(t=>{if(null!=e&&e.includes(t))return i=!0,!0}):"exclude"==s[t].type&&(i=!0,s[t].markets.some(t=>{if(null!=e&&e.includes(t))return i=!1,!0}));return i}(e)?e:"severeweather"}},73094:function(t,e,i){i.d(e,{Ex:function(){return r},TJ:function(){return o},s_:function(){return l}});var n=i(62695);i(48566);function r(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.e.widthMap,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.e.heightMap,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.e.zoomLevelMap,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:30;const l=(i-1)/2+o,s=(r-1)/2+o,u=n.e.getMapSizePixel(a),c=n.e.latlonToPixelXY(t.lat,t.lon,u),p=[c[0]-l,c[1]-s],d=[c[0]+l,c[1]+s],h=a-e+8;return{minTileX:p[0]>>h,maxTileX:d[0]>>h,minTileY:p[1]>>h,maxTileY:d[1]>>h,pixelXY:c,pixelLT:p,pixelRB:d}}function a(t){const e=""+(t||"0");return e.length<2?"0"+e:e}function o(t,e){const i=parseInt(t.substring(0,4)),n=parseInt(t.substring(4,6))-1,r=parseInt(t.substring(6,8)),a=parseInt(t.substring(8,10)),o=parseInt(t.substring(10,12));return e?new Date(Date.UTC(i,n,r,a,o)):new Date(i,n,r,a,o)}function l(t,e,i,n){const r=o(t,i),l=new Date(r);l.setMinutes(r.getMinutes()+e);const s=l.getFullYear().toString()+a(l.getMonth()+1)+a(l.getDate())+a(l.getHours());return n?s:s+a(l.getMinutes())}new Map([["low","#98B2CA"],["avg","#7891B5"],["hvy","#506984"]]);const s=new Map([["0",new Map([["89","#001add"],["97","#00cc31"],["105","#00e300"],["113","#00bd00"],["121","#009600"],["129","#99d300"],["137","#f8ec00"],["145","#e7c000"],["153","#f89e00"],["161","#ff5600"],["169","#fb0000"],["177","#de0000"]])],["1",new Map([["89","#79b837"],["105","#078f33"],["121","#014b24"],["137","#eec040"],["153","#d05d2c"],["169","#830826"]])],["2",new Map([["89","#aae1e0"],["105","#5ad2e0"],["121","#249fdb"],["137","#1547bd"],["153","#101e96"],["169","#01016e"]])],["3",new Map([["89","#edb2c7"],["105","#df71a9"],["121","#bb338f"],["137","#8a139b"],["153","#660888"],["169","#470765"]])]]),u=new Map([["89","#7891B5"],["105","#758DAF"],["121","#6C809E"],["137","#5E6F85"],["153","#4C5662"],["169","#323332"]]),c=new Map([["0",s.get("0")],["1",u],["2",u],["3",u]]),p=new Map([["0",s.get("0")],["1",new Map([["89","#0000FF"],["105","#00FF00"],["121","#008C00"],["137","#F9CD00"],["153","#FF9C00"],["169","#D20000"]])],["2",new Map([["89","#85F0F7"],["105","#65BEC7"],["121","#4B949F"],["137","#3D7F8B"],["153","#2E6773"],["169","#113948"]])],["3",new Map([["89","#D4689D"],["105","#CB5C93"],["121","#BB4680"],["137","#B03572"],["153","#A42564"],["169","#9F4F76"]])]]),d=new Map(p).set("1",new Map([["89","#F6F6FF"],["105","#59A9FF"],["121","#4071FF"],["137","#FFF840"],["153","#FF9C00"],["169","#D20000"]])),h=new Map(p).set("1",new Map([["89","#929A00"],["105","#FDF400"],["121","#FFA000"],["137","#2E43C2"],["153","#57ABFF"],["169","#D20000"]]));new Map([[0,c],[1,s],[2,p],[3,d],[4,h]]);new Map([["89","low"],["105","low"],["121","avg"],["137","hvy"],["153","hvy"],["169","hvy"]]),new Map([["1","rain"],["2","snow"],["3","sleet"]])},82853:function(t,e,i){i.d(e,{Hc:function(){return n},XM:function(){return a},bE:function(){return r},f7:function(){return o}});function n(t){return"en-us"===t?"PollenImage":"EuPollenImage"}function r(t){return"en-us"===t?"pollensenserendered":"eupollen/rendered"}function a(t){return"wxuspltmr"===t||"wxeupltmr"===t||"wxjwatmr"===t}function o(t){if(!t)return"00";if(t.startsWith("https")){const e=/pl(.*)\.svg$/,i=t.match(e);return i&&i[1]?i[1]:"00"}return t}}}]);