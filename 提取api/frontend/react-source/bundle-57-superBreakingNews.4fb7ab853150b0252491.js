"use strict";(self.homePageWebpackChunks=self.homePageWebpackChunks||[]).push([["superBreakingNews"],{37416:function(e,t,n){n.d(t,{D:function(){return o}});var i=n(16091),a=n(17720),r=n(74180);class s extends r.f{constructor(){super(...arguments),this.configRef={experienceType:"SuperComponentData",instanceSrc:"default"}}static getInstance(){return a.vv.get("__SuperComponentDataHelper__",()=>new s)}}const o=(0,i.G)(s)},61085:function(e,t,n){n.r(t),n.d(t,{SuperBreakingNews:function(){return J},SuperBreakingNewsStyles:function(){return W},SuperBreakingNewsTemplate:function(){return z},ToolingInfo:function(){return q}});var i=n(65614),a=n(56911),r=n(60815),s=n(38493),o=n(92011),l=n(37416);class d extends o.L{connectedCallback(){var e;super.connectedCallback(),null!==(e=l.D.getConfig())&&void 0!==e&&e.responsiveWidth&&(this.responsiveWidth=!0),this.strings=l.D.getLocStrings()}dismissBannerHandler(e){this.$emit("close-banner")}}(0,a.Cg)([r.sH],d.prototype,"breakingNewsData",void 0),(0,a.Cg)([r.sH],d.prototype,"isWidget",void 0),(0,a.Cg)([r.sH],d.prototype,"parentTelemetryObject",void 0),(0,a.Cg)([r.sH],d.prototype,"strings",void 0),(0,a.Cg)([(0,s.CF)({attribute:"responsive-width"})],d.prototype,"responsiveWidth",void 0);var c=n(96950),u=n(91640),h=n(9982),w=n.n(h),g=n(11372);function v(e,t,n){const i=null==e?void 0:e.addOrUpdateChild({name:"link",behavior:g.MS.Navigate,content:{headline:t,id:n},type:g.MJ.ActionButton}),a=null==e?void 0:e.addOrUpdateChild({name:"dismiss",behavior:g.MS.Hide,content:{headline:t,id:n},type:g.MJ.ActionButton});return{linkTelemetryTag:(null==i?void 0:i.getMetadataTag())??"",dismissTelemetryTag:(null==a?void 0:a.getMetadataTag())??""}}var p=n(17254);const b=c.qy` ${(0,u.z)(e=>e.breakingNewsData,c.qy`<div role="alert" id="breakingNewsBanner" part="breaking-news" class="breaking-news-container"><div class="breakingNewsBanner" part="breaking-news-content-wrapper"><div class="breaking-news-top"></div><div class="breaking-news-inner"><div class="breaking-news-content"><a target="_blank" href="${e=>{var t;return(null===(t=e.breakingNewsData)||void 0===t?void 0:t.headlineUrl)??""}}" class="breaking-news-text-container" data-t="${e=>{var t,n;return v(e.parentTelemetryObject,null===(t=e.breakingNewsData)||void 0===t?void 0:t.linkHeadline,null===(n=e.breakingNewsData)||void 0===n?void 0:n.articleId).linkTelemetryTag}}"><div class="header"><img src=${()=>`${(0,p.rA)().StaticsUrl}latest/icons-wc/RefreshNews.svg`} alt="logo" aria-hidden="true"/><div class="title">${e=>{var t;return null===(t=e.breakingNewsData)||void 0===t?void 0:t.headlineTitle}}</div></div><div class="headline">${e=>{var t;return null===(t=e.breakingNewsData)||void 0===t?void 0:t.headlineText}}</div></a></div><fluent-button class="breaking-news-hide-btn" id="breakingNewsHideBtn" data-t="${e=>{var t,n;return v(e.parentTelemetryObject,null===(t=e.breakingNewsData)||void 0===t?void 0:t.linkHeadline,null===(n=e.breakingNewsData)||void 0===n?void 0:n.articleId).dismissTelemetryTag}}" @click=${(e,t)=>e.dismissBannerHandler&&e.dismissBannerHandler(t.event)} aria-label="${e=>{var t;return null===(t=e.strings)||void 0===t?void 0:t.cancelButtonTooltip}}" title="${e=>{var t;return null===(t=e.strings)||void 0===t?void 0:t.cancelButtonTooltip}}">${c.qy.partial(w())}</fluent-button></div></div></div>`)}`;var f=n(27942),k=n(11177),m=n(74849),x=n(22131),B=n(48751);const N=m.A` .breakingNewsBanner{display:grid;grid-template-rows:4px 1fr;overflow:hidden;border-radius:12px;border:1px solid rgba(0,0,0,0.05);background:rgba(255,255,255,0.80);box-shadow:0px 2px 4px rgba(0,0,0,0.10);height:40px}.breaking-news-top{background:linear-gradient(90deg,#E0411D 0%,#F6764D 100%)}.breaking-news-inner{display:grid;grid-template-columns:auto 36px;padding:8px 16px}.breakingNewsBanner:hover{box-shadow:0px 3px 6px rgba(0,0,0,0.12);cursor:pointer}.breaking-news-container{margin-bottom:8px}.breaking-news-text-container{display:grid;grid-template-columns:auto 1fr;text-decoration:none;font-size:14px;line-height:20px;color:${B.l}}.breaking-news-text-container .title{margin:0 24px 0 8px}.breaking-news-hide-btn{margin-inline-start:16px}fluent-button{background:rgba(255,255,255,0.55);border-radius:100px;height:20px;width:20px;min-width:0}.headline{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.headline:hover{text-decoration:underline}.header{display:grid;grid-template-columns:20px auto;align-items:center;font-weight:600}:host([responsive-width="true"]),:host([responsive-width="true"]) .breakingNewsBanner{width:100% !important}${(0,f._D)(null,f.j1.c2)}{.breaking-news-container .breakingNewsBanner{width:calc(var(--feed-width,${k.sx.toString()}) * 1px);
        }
    }

    ${(0,f.H5)(f.j1.c3)}{.breaking-news-container .breakingNewsBanner{width:calc(var(--feed-width,${k.zN.toString()}) * 1px);
        }
    }

    ${(0,f.H5)(f.j1.c4)}{.breaking-news-container .breakingNewsBanner{width:calc(var(--feed-width,${k.YK.toString()}) * 1px);
        }
    }

    ${(0,f._D)(f.j1.c5,null)}{.breaking-news-container .breakingNewsBanner{width:calc(var(--feed-width,${k.t9.toString()}) * 1px);
        }
    }

    ${(0,f._D)(null,f.j1.c1)}{.breaking-news-container .breakingNewsBanner{width:calc(var(--feed-width,${k.rY.toString()}) * 1px);height:64px}.breaking-news-text-container{grid-template-rows:auto auto;grid-template-columns:auto}.breaking-news-text-container .headline{margin-top:4px;margin-inline-end:-36px}}`.withBehaviors((0,x.G2)(m.A` .breakingNewsBanner,fluent-button{background:#424242}`)),y=d.compose({name:"cs-super-breaking-news",styles:N,template:b});var D=n(93468),$=n(65022),S=n(83078),T=n(12870),C=n(89980),L=n(84855),E=n(98216),I=n(21481),_=n(17720);const O=JSON.parse('{"@odata.context":"https%3A%2F%2Fapi.msn.com%2Fnews%2F%24metadata%23feed","value":[{"nextPageUrl":"https://api.msn.com:443/news/feed/me?...","subCards":[{"id":"AA1EgcHy","type":"article","title":"Breaking News - new approach","abstract":"","readTimeMin":1,"url":"https://www.msn.com/fr-fr/actualite/allemagne/allemagne-friedrich-merz-élu-chancelier-par-le-bundestag-après-un-2e-vote/ar-AA1EgcHy","locale":"global","publishedDateTime":"2025-05-06T14:22:34Z","isFeatured":true,"provider":{"id":"AAf3a78","name":"Reuters"},"category":"actualite","reactionStatus":"on","commentStatus":"on","relevanceScore":5004000,"subscriptionProductType":"free","source":"msn","_isPublishingLocked":true,"_id":"BBtNGgP","_name":"breaking-news-happy-case","_expirationDateTime":"2021-10-16T00:00:00Z","_lastEditedDateTime":"2020-04-07T00:51:06Z","headlines":[{"kicker":"Breaking News88","title":"Breaking News Title"},{"kicker":"Check the latest results for the Presidential Election | See the Live news from CBS | Live Coverage from Breakingnews.com and others","title":"Breaking News Headline"},{"kicker":"https://www.msn.com","title":"Breaking News Url"}],"body":"<strong>Breaking News Test Banner</strong>: This is just a test | <a title=\\"Link to MSN website\\" href=\\"https://www.msn.com\\">MSN link</a>","authors":"redacted"}]}]}'),U="forceBreakingNews";async function A(e,t){const n=new URLSearchParams(window.location.search).get(U),i=new URL("/service/news/feed",p.T3.ServiceUrlBase);i.searchParams.append("query","topstories"),i.searchParams.append("ocid","anaheim-ntp-bn"),i.searchParams.append("apikey",p.T3.OneServiceApiKey),i.searchParams.append("market",p.T3.CurrentMarket),i.searchParams.append("$top","1");const a=_.vv.get("afdprotocol");a&&i.searchParams.append("afdprotocol",a);const r=await fetch(i.href);if(!r.ok&&!n)throw new Error(`Error in getting href from URL, Response: ${r.statusText}`);const s=n?O:await(null==r?void 0:r.json());if(!s)throw new Error(`No data received for Super Breaking News, Response: ${s}`);const o=function(e,t){const n=new Date,i={headlineLead:"",headline:"",headlineLink:"",metadata:{validId:!1,id:"",startDate:n,endDate:new Date(n.getTime()+36e5),type:"Breaking",plainId:""}};if(!e.isFeatured)return i;const a=(e.url||"").split("/").pop();return i.headline=e.title?e.title:"",i.headlineLead=t.breakingNewsHeadlineLead||"Breaking News",i.headlineLink=e.url?e.url:"",i.metadata={validId:(null==a?void 0:a.startsWith("ar-"))??!1,id:a??"",startDate:n,endDate:new Date(n.getTime()+36e5),type:"Breaking",plainId:null!=a&&a.startsWith("ar-")?a.substring(3):a||""},i}(function(e){var t;const n=null==e||null===(t=e.value)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.subCards)||void 0===t?void 0:t[0];let i;if(!function(e){return e&&"string"==typeof e.id&&"string"==typeof e.title&&"string"==typeof e.url&&"string"==typeof e.publishedDateTime&&(void 0===e.isFeatured||"boolean"==typeof e.isFeatured)}(n))throw new Error("Unable to find an acceptable 1S response");return i=n,i}(s),t);return o}var F=n(98793),H=n(41820),R=n(693),P=n(77246),j=n(16611);class J extends I.U{constructor(){super(...arguments),this.breakingNewsStorageKey="breakingNewsDismissed",this.breakingNewsNoKey="breakingNewsNoKey",this.newsExpiration60Min=36e5,this.bannerType="Breaking"}bnBannerChanged(){const e=this.bnBanner&&this.breakingNewsWillRender;e&&window.setTimeout(()=>{e(this.getBoundingClientRect().height)})}experienceConnected(){this.loadState=0,this.showDismiss=!this.config.disableDismiss,(0,P.S)()&&(T.Rb.IsPrerender?(0,j.e1)().then(()=>this.fetchData()):this.fetchData())}async fetchData(){this.loadState=1;try{var e,t;const i=await A(this.config,this.strings);if(!await this.isValid(i))return this.loadState=2,this.markVisuallyReady(-1),void await this.cleanupDismissInfo();this.telemetryObject&&(this.parentTelemetryObject=this.telemetryObject);let a="";var n;if(i&&i.headlineLead&&(a=i.headline?`${i.headlineLead} : ${i.headline}`:i.headlineLead),this.breakingNewsData=i,this.bannerType=(null===(e=this.breakingNewsData)||void 0===e||null===(e=e.metadata)||void 0===e?void 0:e.type)??"Breaking",this.headline&&this.headlineLead&&!function(e,t){var n;return Boolean(e&&(null==t||null===(n=t.headlineLink)||void 0===n?void 0:n.includes(e)))}(this.currentContentId,i))this.config.tmplValue&&E.YT.addOrUpdateTmplProperty(this.config.tmplValue,this.bannerType),E.YT.addOrUpdateTmplProperty("BreakingNewsBannerDisplay","1"),E.YT.addOrUpdateTmplProperty("BreakingNewsArticleId",null===(n=i.metadata)||void 0===n?void 0:n.plainId),this.willShow=!0;this.loadState=2,this.markVisuallyReady(this.willShow?void 0:-1),this.superBreakingNewsData={headlineText:i.headline,headlineTitle:i.headlineLead??"",headlineUrl:i.headlineLink??"",linkHeadline:a,articleId:(null===(t=i.metadata)||void 0===t?void 0:t.plainId)??""}}catch(e){var i;this.loadState=3,this.markVisuallyReady(-1);const t={contentId:null===(i=this.config)||void 0===i?void 0:i.contentId,message:null==e?void 0:e.message};(0,D.vV)($.ubn,"Super Breaking News failed to fetch content",JSON.stringify(t),{...$.ubn.pb,shouldSampleErrorsForTreatement1:!0})}await this.cleanupDismissInfo(),S.M.singleMark(this.getExperienceType())}async isValid(e){if(!this.showDismiss)return!0;let t=!0;const n=e.metadata,i=await this.getBNUserChoice();if(n&&n.validId&&n.id){if(i[n.id]||n.endDate.getTime()<(new Date).getTime())return!1}else{var a;const e=(null===(a=i[this.breakingNewsNoKey])||void 0===a?void 0:a.endDate)||null,n=new Date;if(e){t=!(new Date(e).getTime()>n.getTime())}}return t}async cleanupDismissInfo(){const e=(new Date).getTime(),t=[],n=await this.getBNUserChoice();Object.keys(n).forEach(i=>{const a=n[i];new Date(a.endDate).getTime()<e&&t.push(i)}),t.forEach(e=>{delete n[e]}),await this.updateBNUserChoice(n)}getExperienceType(){return L.$mD}get headline(){var e;return(null===(e=this.breakingNewsData)||void 0===e?void 0:e.headline)??""}get headlineLead(){var e;return(null===(e=this.breakingNewsData)||void 0===e?void 0:e.headlineLead)??""}async dismissBannerHandler(){var e;const t=await this.getBNUserChoice(),n=null===(e=this.breakingNewsData)||void 0===e?void 0:e.metadata,i=null!=n&&n.endDate?n.endDate.toISOString():"";if(n&&n.validId&&n.id)t[n.id]={endDate:i};else if(n&&n.startDate)t[this.breakingNewsNoKey]={endDate:i};else{const e=new Date;t[this.breakingNewsNoKey]={endDate:new Date(e.getTime()+this.newsExpiration60Min)}}this.updateBNUserChoice(t),this.breakingNewsData=void 0}async getBNUserChoice(){var e;if(this.config.useLocalStorage)return this.getBNLocalStorage();if(!await F.Q.isApiAvailableToUse())return{};const t=null===(e=await F.Q.getPreferenceSetting(H.K5.breaking_news_dismissed))||void 0===e?void 0:e.value;return(0,R.A)(t)||!t?JSON.parse("{}"):t}async updateBNUserChoice(e){if(this.config.useLocalStorage)return void this.updateBNLocalStorage(e);await F.Q.isApiAvailableToUse()&&F.Q.savePreferenceSetting(H.K5.breaking_news_dismissed,{setting:H.K5.breaking_news_dismissed,source:"ntp",timestamp:(new Date).getTime(),value:e})}getBNLocalStorage(){try{return JSON.parse((0,C.Lg)().getItem(this.breakingNewsStorageKey)||"{}")||{}}catch(e){return{}}}updateBNLocalStorage(e){(0,C.Lg)().setItem(this.breakingNewsStorageKey,JSON.stringify(e))}}(0,a.Cg)([r.sH],J.prototype,"bnBanner",void 0),(0,a.Cg)([r.sH],J.prototype,"loadState",void 0),(0,a.Cg)([r.sH],J.prototype,"breakingNewsData",void 0),(0,a.Cg)([r.sH],J.prototype,"superBreakingNewsData",void 0),(0,a.Cg)([r.sH],J.prototype,"parentTelemetryObject",void 0),(0,a.Cg)([r.sH],J.prototype,"willShow",void 0),(0,a.Cg)([r.Jg],J.prototype,"headline",null),(0,a.Cg)([r.Jg],J.prototype,"headlineLead",null);var M=n(60402);const Z=c.qy`<cs-super-breaking-news ${(0,M.K)("bnBanner")} exportparts="breaking-news-content-wrapper" :breakingNewsData=${e=>e.superBreakingNewsData} :parentTelemetryObject=${e=>e.parentTelemetryObject} @close-banner=${e=>e.dismissBannerHandler()}></cs-super-breaking-news>`,z=c.qy` ${(0,u.z)(e=>2===e.loadState&&e.headline&&e.headlineLead&&(!e.currentContentId||e.willShow),Z)}`,W=m.A``,q={experienceConfigSchema:undefined};y.define(i.G.registry)},74180:function(e,t,n){n.d(t,{f:function(){return a}});var i=n(56589);class a{constructor(){this.config={},this.strings={},this.initialized=!1}async initConfig(e){var t,n;this.initialized||(this.config=await this.getConfigFromRef(e)||{},this.strings=(null===(t=this.config)||void 0===t?void 0:t.localizedStrings)||{},this.initialized=!!this.config&&!(null===(n=this.config)||void 0===n||!n.localizedStrings))}getConfig(){return this.config}getLocStrings(){return this.strings}async getConfigFromRef(e){try{const t=(null==e?void 0:e.configRef)||this.configRef,n=await i.L.getConfig(t);return null==n?void 0:n.properties}catch(e){return{}}}}}}]);