# 🧠 记忆管理界面使用说明

## 📍 访问路径

**设置 → API 设置 → AI 记忆管理**

在 API 设置页面，你会看到一个紫色的"记忆管理"卡片，点击即可进入。

---

## 🎨 界面功能

### 1. **筛选栏**
在顶部可以按记忆类型筛选：
- **全部** - 显示所有记忆
- **偏好** - 用户喜好（如"喜欢早上运动"）
- **习惯** - 行为模式（如"每周三没时间健身"）
- **事实** - 重要信息（如"工作制是大小周"）
- **情景** - 对话记录（自动生成）

### 2. **统计卡片**
快速查看记忆统计：
- 📊 总计数量
- ❤️ 偏好数量
- 🔄 习惯数量
- ℹ️ 事实数量
- 📖 情景数量

### 3. **记忆列表**
每条记忆卡片显示：
- 🏷️ **类型标签**（不同颜色区分）
- ⭐ **重要性星级**（1-5星）
- 📝 **记忆内容**
- 🕐 **创建时间**（如"3天前"）
- 👁️ **使用次数**（AI调用该记忆的次数）
- 🗑️ **删除按钮**

---

## 🔧 功能操作

### ➕ 添加记忆
1. 点击右上角的 **+** 按钮
2. 输入记忆内容
3. 选择类型（偏好/习惯/事实/情景）
4. 调整重要性滑块（10%-100%）
5. 点击**保存**

**示例**：
```
内容：喜欢早上运动，晚上运动会影响睡眠
类型：偏好
重要性：80%
```

### ✏️ 编辑记忆
1. 点击任意记忆卡片
2. 修改内容、类型或重要性
3. 点击**保存**

### 🗑️ 删除记忆
1. 点击记忆卡片右下角的删除图标
2. 确认删除

### 🧹 清理低价值记忆
1. 点击右上角 **⋮** 菜单
2. 选择**清理低价值记忆**
3. 系统会删除满足以下条件的记忆：
   - 重要性 < 30%
   - 使用次数 < 1
   - 创建时间 > 90天

**💡 提示**：定期清理可以保持记忆库的高质量

### 🔄 清空所有记忆
1. 点击右上角 **⋮** 菜单
2. 选择**清空所有记忆**
3. ⚠️ **警告**：此操作不可撤销！

---

## 🎯 使用场景

### 场景 1: 查看 AI 学到了什么
进入记忆管理界面，查看 AI 自动保存的记忆，了解它对你的了解程度。

### 场景 2: 手动添加重要偏好
如果你有明确的偏好但还没跟 AI 说过，可以手动添加：
```
"不喜欢周末安排工作任务" → 偏好 → 90%
"工作制是大小周" → 事实 → 70%
```

### 场景 3: 修正错误记忆
如果 AI 记错了什么，可以编辑或删除：
```
错误记忆: "喜欢晚上运动"
→ 删除或修改为: "喜欢早上运动"
```

### 场景 4: 调整记忆重要性
根据实际情况调整重要性：
```
"每周三没时间健身"
原重要性: 60% → 调整为: 30%（因为最近时间充裕了）
```

### 场景 5: 定期清理
每月清理一次低价值记忆，保持记忆库整洁。

---

## 💡 最佳实践

### ✅ 推荐做法

1. **定期查看**
   - 每周查看一次 AI 的新学习
   - 及时修正错误记忆

2. **合理分类**
   - 偏好：个人喜好（主观）
   - 习惯：行为模式（客观观察）
   - 事实：确定信息（客观事实）
   - 情景：对话记录（自动生成）

3. **重要性评分指南**
   - 80-100%：核心偏好（如"不喜欢周末工作"）
   - 60-80%：重要信息（如"工作制是大小周"）
   - 40-60%：一般习惯（如"经常晚睡"）
   - 20-40%：次要信息
   - 10-20%：临时信息

4. **保持简洁**
   - 记忆内容用简短陈述句
   - ✅ 好："喜欢早上运动"
   - ❌ 差："我是一个喜欢在早上进行运动的人，因为..."

### ❌ 不推荐做法

1. ❌ 保存过于详细的对话
   - 情景记忆会自动生成，不需要手动添加长篇对话

2. ❌ 保存过时信息
   - 如果情况改变了，及时更新或删除旧记忆

3. ❌ 保存矛盾记忆
   - 检查是否有冲突的记忆，及时删除或合并

---

## 📊 记忆的生命周期

```
1️⃣ 创建
   ↓
   • AI 在对话中自动识别并保存
   • 或用户手动添加

2️⃣ 使用
   ↓
   • AI 在每次对话开始时加载
   • 使用次数自动累加
   • 最后使用时间自动更新

3️⃣ 衰减
   ↓
   • 长期不用的记忆重要性自然降低
   • 定期清理会删除低价值记忆

4️⃣ 删除
   ↓
   • 用户手动删除
   • 或自动清理删除
```

---

## 🔒 隐私和安全

✅ **完全本地存储**
- 所有记忆保存在本地 SQLite 数据库
- 不会上传到任何云服务
- 不会被第三方访问

✅ **完全控制**
- 你可以随时查看、编辑、删除任何记忆
- 一键清空所有记忆

✅ **透明可见**
- 所有 AI 保存的记忆都可以在界面中查看
- 没有隐藏的记忆

---

## 🎨 界面预览

```
┌─────────────────────────────────┐
│  记忆管理               + ⋮     │
├─────────────────────────────────┤
│  [全部] [偏好] [习惯] [事实]... │
├─────────────────────────────────┤
│  ┌───────────────────────────┐  │
│  │ 总计: 12  偏好: 5  习惯: 3│  │
│  └───────────────────────────┘  │
├─────────────────────────────────┤
│  ┌───────────────────────────┐  │
│  │ ❤️ 偏好           ⭐⭐⭐⭐⭐│  │
│  │ 喜欢早上运动              │  │
│  │ 🕐 3天前  👁️ 使用 5 次  🗑️│  │
│  └───────────────────────────┘  │
│                                 │
│  ┌───────────────────────────┐  │
│  │ 🔄 习惯           ⭐⭐⭐☆☆│  │
│  │ 每周三经常没时间健身       │  │
│  │ 🕐 1周前  👁️ 使用 2 次  🗑️│  │
│  └───────────────────────────┘  │
└─────────────────────────────────┘
```

---

## ❓ 常见问题

### Q: AI 会自动保存哪些记忆？
A: 当你说出包含以下关键词的话时：
- "我喜欢..."、"我不喜欢..."
- "我总是..."、"我习惯..."
- "我的XX是..."（个人信息）

### Q: 记忆会影响 AI 的回复吗？
A: 会！在每次对话开始时，AI 会加载你的记忆，并在整个对话中考虑这些信息。

### Q: 删除记忆会影响 AI 吗？
A: 会。下次对话时，AI 将不再知道被删除的信息。

### Q: 可以批量删除吗？
A: 可以使用"清理低价值记忆"功能批量删除，或使用"清空所有记忆"一键清空。

### Q: 记忆会占用很多空间吗？
A: 不会。每条记忆只有几十字节，即使保存上千条也只占用几KB空间。

---

## 🚀 未来计划

- [ ] 记忆搜索功能
- [ ] 记忆导出/导入
- [ ] 记忆标签和分组
- [ ] 记忆可视化（时间线、关系图）
- [ ] 智能推荐（发现矛盾记忆）

---

**享受你的个性化 AI 助手！** 🎉
